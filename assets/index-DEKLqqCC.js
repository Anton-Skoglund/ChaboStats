(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();const rv=!1;var Ua=Array.isArray,Gb=Array.prototype.indexOf,rm=Array.from,Od=Object.defineProperty,Sr=Object.getOwnPropertyDescriptor,ov=Object.getOwnPropertyDescriptors,jb=Object.prototype,Xb=Array.prototype,om=Object.getPrototypeOf,i1=Object.isExtensible;function al(n){return typeof n=="function"}const ca=()=>{};function Zb(n){return n()}function Xl(n){for(var t=0;t<n.length;t++)n[t]()}function Yb(){var n,t,e=new Promise((i,s)=>{n=i,t=s});return{promise:e,resolve:n,reject:t}}function qb(n,t){if(Array.isArray(n))return n;if(!(Symbol.iterator in n))return Array.from(n);const e=[];for(const i of n)if(e.push(i),e.length===t)break;return e}const bi=2,am=4,mu=8,Ba=16,Js=32,To=64,av=128,Li=256,Zh=512,Un=1024,Di=2048,Qs=4096,Zi=8192,Eo=16384,lm=32768,gu=65536,s1=1<<17,$b=1<<18,cm=1<<19,lv=1<<20,Nd=1<<21,hm=1<<22,uo=1<<23,hs=Symbol("$state"),cv=Symbol("legacy props"),Kb=Symbol(""),um=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Jb(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function _u(n){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Qb(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function t4(n){throw new Error("https://svelte.dev/e/effect_in_teardown")}function e4(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function n4(n){throw new Error("https://svelte.dev/e/effect_orphan")}function i4(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function s4(n){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function r4(n){throw new Error("https://svelte.dev/e/props_invalid_value")}function o4(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function a4(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function l4(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}const vu=1,xu=2,hv=4,c4=8,h4=16,u4=1,f4=2,uv=4,d4=8,p4=16,fv=1,m4=2,Ln=Symbol(),g4="http://www.w3.org/1999/xhtml",_4="@attach";function v4(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}let x4=!1;function dv(n){return n===this.v}function pv(n,t){return n!=n?t==t:n!==t||n!==null&&typeof n=="object"||typeof n=="function"}function mv(n){return!pv(n,this.v)}let za=!1,y4=!1;function b4(){za=!0}let Qe=null;function Yh(n){Qe=n}function tn(n,t=!1,e){Qe={p:Qe,c:null,e:null,s:n,x:null,l:za&&!t?{s:null,u:null,$:[]}:null}}function en(n){var t=Qe,e=t.e;if(e!==null){t.e=null;for(var i of e)Rv(i)}return Qe=t.p,{}}function uc(){return!za||Qe!==null&&Qe.l===null}const M4=new WeakMap;function S4(n){var t=Ee;if(t===null)return Ue.f|=uo,n;if((t.f&lm)===0){if((t.f&av)===0)throw!t.parent&&n instanceof Error&&gv(n),n;t.b.error(n)}else fm(n,t)}function fm(n,t){for(;t!==null;){if((t.f&av)!==0)try{t.b.error(n);return}catch(e){n=e}t=t.parent}throw n instanceof Error&&gv(n),n}function gv(n){const t=M4.get(n);t&&(Od(n,"message",{value:t.message}),Od(n,"stack",{value:t.stack}))}let Zl=[],kd=[];function _v(){var n=Zl;Zl=[],Xl(n)}function C4(){var n=kd;kd=[],Xl(n)}function yu(n){Zl.length===0&&queueMicrotask(_v),Zl.push(n)}function w4(){Zl.length>0&&_v(),kd.length>0&&C4()}function T4(){for(var n=Ee.b;n!==null&&!n.has_pending_snippet();)n=n.parent;return n===null&&Jb(),n}function fc(n){var t=bi|Di,e=Ue!==null&&(Ue.f&bi)!==0?Ue:null;return Ee===null||e!==null&&(e.f&Li)!==0?t|=Li:Ee.f|=cm,{ctx:Qe,deps:null,effects:null,equals:dv,f:t,fn:n,reactions:null,rv:0,v:Ln,wv:0,parent:e??Ee,ac:null}}function E4(n,t){let e=Ee;e===null&&Qb();var i=e.b,s=void 0,r=Sa(Ln),o=null,l=!Ue;return W4(()=>{try{var c=n()}catch(g){c=Promise.reject(g)}var h=()=>c;s=o?.then(h,h)??Promise.resolve(c),o=s;var f=wn,d=i.pending;l&&(i.update_pending_count(1),d||f.increment());const p=(g,v=void 0)=>{o=null,d||f.activate(),v?v!==um&&(r.f|=uo,Yl(r,v)):((r.f&uo)!==0&&(r.f^=uo),Yl(r,g)),l&&(i.update_pending_count(-1),d||f.decrement()),bv()};if(s.then(p,g=>p(null,g||"unknown")),f)return()=>{queueMicrotask(()=>f.neuter())}}),new Promise(c=>{function h(f){function d(){f===s?c(r):h(s)}f.then(d,d)}h(s)})}function A4(n){const t=fc(n);return Fv(t),t}function bu(n){const t=fc(n);return t.equals=mv,t}function vv(n){var t=n.effects;if(t!==null){n.effects=null;for(var e=0;e<t.length;e+=1)Oi(t[e])}}function P4(n){for(var t=n.parent;t!==null;){if((t.f&bi)===0)return t;t=t.parent}return null}function dm(n){var t,e=Ee;ps(P4(n));try{vv(n),t=Hv(n)}finally{ps(e)}return t}function xv(n){var t=dm(n);if(n.equals(t)||(n.v=t,n.wv=Bv()),!Ao)if(ya!==null)ya.set(n,n.v);else{var e=(_r||(n.f&Li)!==0)&&n.deps!==null?Qs:Un;ei(n,e)}}function yv(n,t,e){const i=uc()?fc:bu;if(t.length===0){e(n.map(i));return}var s=wn,r=Ee,o=R4(),l=T4();Promise.all(t.map(c=>E4(c))).then(c=>{s?.activate(),o();try{e([...n.map(i),...c])}catch(h){(r.f&Eo)===0&&fm(h,r)}s?.deactivate(),bv()}).catch(c=>{l.error(c)})}function R4(){var n=Ee,t=Ue,e=Qe;return function(){ps(n),ds(t),Yh(e)}}function bv(){ps(null),ds(null),Yh(null)}const ll=new Set;let wn=null,ya=null,r1=new Set,qh=[];function Mv(){const n=qh.shift();qh.length>0&&queueMicrotask(Mv),n()}let xo=[],Mu=null,Fd=!1,Dh=!1;class ba{current=new Map;#s=new Map;#r=new Set;#t=0;#c=null;#h=!1;#n=[];#o=[];#i=[];#e=[];#a=[];#u=[];#f=[];skipped_effects=new Set;process(t){xo=[];var e=null;if(ll.size>1){e=new Map,ya=new Map;for(const[r,o]of this.current)e.set(r,{v:r.v,wv:r.wv}),r.v=o;for(const r of ll)if(r!==this)for(const[o,l]of r.#s)e.has(o)||(e.set(o,{v:o.v,wv:o.wv}),o.v=l)}for(const r of t)this.#p(r);if(this.#n.length===0&&this.#t===0){this.#d();var i=this.#i,s=this.#e;this.#i=[],this.#e=[],this.#a=[],wn=null,o1(i),o1(s),wn===null?wn=this:ll.delete(this),this.#c?.resolve()}else this.#l(this.#i),this.#l(this.#e),this.#l(this.#a);if(e){for(const[r,{v:o,wv:l}]of e)r.wv<=l&&(r.v=o);ya=null}for(const r of this.#n)po(r);for(const r of this.#o)po(r);this.#n=[],this.#o=[]}#p(t){t.f^=Un;for(var e=t.first;e!==null;){var i=e.f,s=(i&(Js|To))!==0,r=s&&(i&Un)!==0,o=r||(i&Zi)!==0||this.skipped_effects.has(e);if(!o&&e.fn!==null){if(s)e.f^=Un;else if((i&am)!==0)this.#e.push(e);else if((i&Un)===0)if((i&hm)!==0){var l=e.b?.pending?this.#o:this.#n;l.push(e)}else mc(e)&&((e.f&Ba)!==0&&this.#a.push(e),po(e));var c=e.first;if(c!==null){e=c;continue}}var h=e.parent;for(e=e.next;e===null&&h!==null;)e=h.next,h=h.parent}}#l(t){for(const e of t)((e.f&Di)!==0?this.#u:this.#f).push(e),ei(e,Un);t.length=0}capture(t,e){this.#s.has(t)||this.#s.set(t,e),this.current.set(t,t.v)}activate(){wn=this}deactivate(){wn=null;for(const t of r1)if(r1.delete(t),t(),wn!==null)break}neuter(){this.#h=!0}flush(){xo.length>0?Sv():this.#d(),wn===this&&(this.#t===0&&ll.delete(this),this.deactivate())}#d(){if(!this.#h)for(const t of this.#r)t();this.#r.clear()}increment(){this.#t+=1}decrement(){if(this.#t-=1,this.#t===0){for(const t of this.#u)ei(t,Di),Ma(t);for(const t of this.#f)ei(t,Qs),Ma(t);this.#i=[],this.#e=[],this.flush()}else this.deactivate()}add_callback(t){this.#r.add(t)}settled(){return(this.#c??=Yb()).promise}static ensure(){if(wn===null){const t=wn=new ba;ll.add(wn),Dh||ba.enqueue(()=>{wn===t&&t.flush()})}return wn}static enqueue(t){qh.length===0&&queueMicrotask(Mv),qh.unshift(t)}}function L4(n){var t=Dh;Dh=!0;try{for(var e;;){if(w4(),xo.length===0&&(wn?.flush(),xo.length===0))return Mu=null,e;Sv()}}finally{Dh=t}}function Sv(){var n=ha;Fd=!0;try{var t=0;for(u1(!0);xo.length>0;){var e=ba.ensure();if(t++>1e3){var i,s;I4()}e.process(xo),Cr.clear()}}finally{Fd=!1,u1(n),Mu=null}}function I4(){try{i4()}catch(n){fm(n,Mu)}}let oo=null;function o1(n){var t=n.length;if(t!==0){for(var e=0;e<t;){var i=n[e++];if((i.f&(Eo|Zi))===0&&mc(i)&&(oo=[],po(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null&&i.ac===null?Ov(i):i.fn=null),oo.length>0)){Cr.clear();for(const s of oo)po(s);oo=[]}}oo=null}}function Ma(n){for(var t=Mu=n;t.parent!==null;){t=t.parent;var e=t.f;if(Fd&&t===Ee&&(e&Ba)!==0)return;if((e&(To|Js))!==0){if((e&Un)===0)return;t.f^=Un}}xo.push(t)}const Cr=new Map;function Sa(n,t){var e={f:0,v:n,reactions:null,equals:dv,rv:0,wv:0};return e}function Os(n,t){const e=Sa(n);return Fv(e),e}function xe(n,t=!1,e=!0){const i=Sa(n);return t||(i.equals=mv),za&&e&&Qe!==null&&Qe.l!==null&&(Qe.l.s??=[]).push(i),i}function D4(n,t){return Ft(n,ft(()=>U(n))),t}function Ft(n,t,e=!1){Ue!==null&&(!os||(Ue.f&s1)!==0)&&uc()&&(Ue.f&(bi|Ba|hm|s1))!==0&&!Zs?.includes(n)&&l4();let i=e?gr(t):t;return Yl(n,i)}function Yl(n,t){if(!n.equals(t)){var e=n.v;Ao?Cr.set(n,t):Cr.set(n,e),n.v=t;var i=ba.ensure();i.capture(n,e),(n.f&bi)!==0&&((n.f&Di)!==0&&dm(n),ei(n,(n.f&Li)===0?Un:Qs)),n.wv=Bv(),Cv(n,Di),uc()&&Ee!==null&&(Ee.f&Un)!==0&&(Ee.f&(Js|To))===0&&(Ai===null?j4([n]):Ai.push(n))}return t}function a1(n,t=1){var e=U(n),i=t===1?e++:e--;return Ft(n,e),i}function _f(n){Ft(n,n.v+1)}function Cv(n,t){var e=n.reactions;if(e!==null)for(var i=uc(),s=e.length,r=0;r<s;r++){var o=e[r],l=o.f;if(!(!i&&o===Ee)){var c=(l&Di)===0;c&&ei(o,t),(l&bi)!==0?Cv(o,Qs):c&&((l&Ba)!==0&&oo!==null&&oo.push(o),Ma(o))}}}function gr(n){if(typeof n!="object"||n===null||hs in n)return n;const t=om(n);if(t!==jb&&t!==Xb)return n;var e=new Map,i=Ua(n),s=Os(0),r=fo,o=l=>{if(fo===r)return l();var c=Ue,h=fo;ds(null),d1(r);var f=l();return ds(c),d1(h),f};return i&&e.set("length",Os(n.length)),new Proxy(n,{defineProperty(l,c,h){(!("value"in h)||h.configurable===!1||h.enumerable===!1||h.writable===!1)&&o4();var f=e.get(c);return f===void 0?f=o(()=>{var d=Os(h.value);return e.set(c,d),d}):Ft(f,h.value,!0),!0},deleteProperty(l,c){var h=e.get(c);if(h===void 0){if(c in l){const f=o(()=>Os(Ln));e.set(c,f),_f(s)}}else Ft(h,Ln),_f(s);return!0},get(l,c,h){if(c===hs)return n;var f=e.get(c),d=c in l;if(f===void 0&&(!d||Sr(l,c)?.writable)&&(f=o(()=>{var g=gr(d?l[c]:Ln),v=Os(g);return v}),e.set(c,f)),f!==void 0){var p=U(f);return p===Ln?void 0:p}return Reflect.get(l,c,h)},getOwnPropertyDescriptor(l,c){var h=Reflect.getOwnPropertyDescriptor(l,c);if(h&&"value"in h){var f=e.get(c);f&&(h.value=U(f))}else if(h===void 0){var d=e.get(c),p=d?.v;if(d!==void 0&&p!==Ln)return{enumerable:!0,configurable:!0,value:p,writable:!0}}return h},has(l,c){if(c===hs)return!0;var h=e.get(c),f=h!==void 0&&h.v!==Ln||Reflect.has(l,c);if(h!==void 0||Ee!==null&&(!f||Sr(l,c)?.writable)){h===void 0&&(h=o(()=>{var p=f?gr(l[c]):Ln,g=Os(p);return g}),e.set(c,h));var d=U(h);if(d===Ln)return!1}return f},set(l,c,h,f){var d=e.get(c),p=c in l;if(i&&c==="length")for(var g=h;g<d.v;g+=1){var v=e.get(g+"");v!==void 0?Ft(v,Ln):g in l&&(v=o(()=>Os(Ln)),e.set(g+"",v))}if(d===void 0)(!p||Sr(l,c)?.writable)&&(d=o(()=>Os(void 0)),Ft(d,gr(h)),e.set(c,d));else{p=d.v!==Ln;var y=o(()=>gr(h));Ft(d,y)}var x=Reflect.getOwnPropertyDescriptor(l,c);if(x?.set&&x.set.call(f,h),!p){if(i&&typeof c=="string"){var _=e.get("length"),w=Number(c);Number.isInteger(w)&&w>=_.v&&Ft(_,w+1)}_f(s)}return!0},ownKeys(l){U(s);var c=Reflect.ownKeys(l).filter(d=>{var p=e.get(d);return p===void 0||p.v!==Ln});for(var[h,f]of e)f.v!==Ln&&!(h in l)&&c.push(h);return c},setPrototypeOf(){a4()}})}function l1(n){try{if(n!==null&&typeof n=="object"&&hs in n)return n[hs]}catch{}return n}function O4(n,t){return Object.is(l1(n),l1(t))}var c1,wv,Tv,Ev;function N4(){if(c1===void 0){c1=window,wv=/Firefox/.test(navigator.userAgent);var n=Element.prototype,t=Node.prototype,e=Text.prototype;Tv=Sr(t,"firstChild").get,Ev=Sr(t,"nextSibling").get,i1(n)&&(n.__click=void 0,n.__className=void 0,n.__attributes=null,n.__style=void 0,n.__e=void 0),i1(e)&&(e.__t=void 0)}}function Ha(n=""){return document.createTextNode(n)}function xi(n){return Tv.call(n)}function Su(n){return Ev.call(n)}function ut(n,t){return xi(n)}function xn(n,t){{var e=xi(n);return e instanceof Comment&&e.data===""?Su(e):e}}function St(n,t=1,e=!1){let i=n;for(;t--;)i=Su(i);return i}function k4(n){n.textContent=""}function pm(){return!1}function F4(n,t){if(t){const e=document.body;n.autofocus=!0,yu(()=>{document.activeElement===e&&n.focus()})}}let h1=!1;function U4(){h1||(h1=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{if(!n.defaultPrevented)for(const t of n.target.elements)t.__on_r?.()})},{capture:!0}))}function Cu(n){var t=Ue,e=Ee;ds(null),ps(null);try{return n()}finally{ds(t),ps(e)}}function B4(n,t,e,i=e){n.addEventListener(t,()=>Cu(e));const s=n.__on_r;s?n.__on_r=()=>{s(),i(!0)}:n.__on_r=()=>i(!0),U4()}function Av(n){Ee===null&&Ue===null&&n4(),Ue!==null&&(Ue.f&Li)!==0&&Ee===null&&e4(),Ao&&t4()}function z4(n,t){var e=t.last;e===null?t.last=t.first=n:(e.next=n,n.prev=e,t.last=n)}function vs(n,t,e,i=!0){var s=Ee;s!==null&&(s.f&Zi)!==0&&(n|=Zi);var r={ctx:Qe,deps:null,nodes_start:null,nodes_end:null,f:n|Di,first:null,fn:t,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(e)try{po(r),r.f|=lm}catch(c){throw Oi(r),c}else t!==null&&Ma(r);var o=e&&r.deps===null&&r.first===null&&r.nodes_start===null&&r.teardown===null&&(r.f&cm)===0;if(!o&&i&&(s!==null&&z4(r,s),Ue!==null&&(Ue.f&bi)!==0&&(n&To)===0)){var l=Ue;(l.effects??=[]).push(r)}return r}function Pv(n){const t=vs(mu,null,!1);return ei(t,Un),t.teardown=n,t}function Ud(n){Av();var t=Ee.f,e=!Ue&&(t&Js)!==0&&(t&lm)===0;if(e){var i=Qe;(i.e??=[]).push(n)}else return Rv(n)}function Rv(n){return vs(am|lv,n,!1)}function H4(n){return Av(),vs(mu|lv,n,!0)}function V4(n){ba.ensure();const t=vs(To,n,!0);return(e={})=>new Promise(i=>{e.outro?Tu(t,()=>{Oi(t),i(void 0)}):(Oi(t),i(void 0))})}function wu(n){return vs(am,n,!1)}function wr(n,t){var e=Qe,i={effect:null,ran:!1,deps:n};e.l.$.push(i),i.effect=mm(()=>{n(),!i.ran&&(i.ran=!0,ft(t))})}function dc(){var n=Qe;mm(()=>{for(var t of n.l.$){t.deps();var e=t.effect;(e.f&Un)!==0&&ei(e,Qs),mc(e)&&po(e),t.ran=!1}})}function W4(n){return vs(hm|cm,n,!0)}function mm(n,t=0){return vs(mu|t,n,!0)}function an(n,t=[],e=[]){yv(t,e,i=>{vs(mu,()=>n(...i.map(U)),!0)})}function pc(n,t=0){var e=vs(Ba|t,n,!0);return e}function Pr(n,t=!0){return vs(Js,n,!0,t)}function Lv(n){var t=n.teardown;if(t!==null){const e=Ao,i=Ue;f1(!0),ds(null);try{t.call(null)}finally{f1(e),ds(i)}}}function Iv(n,t=!1){var e=n.first;for(n.first=n.last=null;e!==null;){const s=e.ac;s!==null&&Cu(()=>{s.abort(um)});var i=e.next;(e.f&To)!==0?e.parent=null:Oi(e,t),e=i}}function G4(n){for(var t=n.first;t!==null;){var e=t.next;(t.f&Js)===0&&Oi(t),t=e}}function Oi(n,t=!0){var e=!1;(t||(n.f&$b)!==0)&&n.nodes_start!==null&&n.nodes_end!==null&&(Dv(n.nodes_start,n.nodes_end),e=!0),Iv(n,t&&!e),$h(n,0),ei(n,Eo);var i=n.transitions;if(i!==null)for(const r of i)r.stop();Lv(n);var s=n.parent;s!==null&&s.first!==null&&Ov(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes_start=n.nodes_end=n.ac=null}function Dv(n,t){for(;n!==null;){var e=n===t?null:Su(n);n.remove(),n=e}}function Ov(n){var t=n.parent,e=n.prev,i=n.next;e!==null&&(e.next=i),i!==null&&(i.prev=e),t!==null&&(t.first===n&&(t.first=i),t.last===n&&(t.last=e))}function Tu(n,t){var e=[];gm(n,e,!0),Nv(e,()=>{Oi(n),t&&t()})}function Nv(n,t){var e=n.length;if(e>0){var i=()=>--e||t();for(var s of n)s.out(i)}else t()}function gm(n,t,e){if((n.f&Zi)===0){if(n.f^=Zi,n.transitions!==null)for(const o of n.transitions)(o.is_global||e)&&t.push(o);for(var i=n.first;i!==null;){var s=i.next,r=(i.f&gu)!==0||(i.f&Js)!==0;gm(i,t,r?e:!1),i=s}}}function _m(n){kv(n,!0)}function kv(n,t){if((n.f&Zi)!==0){n.f^=Zi,(n.f&Un)===0&&(ei(n,Di),Ma(n));for(var e=n.first;e!==null;){var i=e.next,s=(e.f&gu)!==0||(e.f&Js)!==0;kv(e,s?t:!1),e=i}if(n.transitions!==null)for(const r of n.transitions)(r.is_global||t)&&r.in()}}let ha=!1;function u1(n){ha=n}let Ao=!1;function f1(n){Ao=n}let Ue=null,os=!1;function ds(n){Ue=n}let Ee=null;function ps(n){Ee=n}let Zs=null;function Fv(n){Ue!==null&&(Zs===null?Zs=[n]:Zs.push(n))}let Kn=null,_i=0,Ai=null;function j4(n){Ai=n}let Uv=1,ql=0,fo=ql;function d1(n){fo=n}let _r=!1;function Bv(){return++Uv}function mc(n){var t=n.f;if((t&Di)!==0)return!0;if((t&Qs)!==0){var e=n.deps,i=(t&Li)!==0;if(e!==null){var s,r,o=(t&Zh)!==0,l=i&&Ee!==null&&!_r,c=e.length;if((o||l)&&(Ee===null||(Ee.f&Eo)===0)){var h=n,f=h.parent;for(s=0;s<c;s++)r=e[s],(o||!r?.reactions?.includes(h))&&(r.reactions??=[]).push(h);o&&(h.f^=Zh),l&&f!==null&&(f.f&Li)===0&&(h.f^=Li)}for(s=0;s<c;s++)if(r=e[s],mc(r)&&xv(r),r.wv>n.wv)return!0}(!i||Ee!==null&&!_r)&&ei(n,Un)}return!1}function zv(n,t,e=!0){var i=n.reactions;if(i!==null&&!Zs?.includes(n))for(var s=0;s<i.length;s++){var r=i[s];(r.f&bi)!==0?zv(r,t,!1):t===r&&(e?ei(r,Di):(r.f&Un)!==0&&ei(r,Qs),Ma(r))}}function Hv(n){var t=Kn,e=_i,i=Ai,s=Ue,r=_r,o=Zs,l=Qe,c=os,h=fo,f=n.f;Kn=null,_i=0,Ai=null,_r=(f&Li)!==0&&(os||!ha||Ue===null),Ue=(f&(Js|To))===0?n:null,Zs=null,Yh(n.ctx),os=!1,fo=++ql,n.ac!==null&&(Cu(()=>{n.ac.abort(um)}),n.ac=null);try{n.f|=Nd;var d=n.fn,p=d(),g=n.deps;if(Kn!==null){var v;if($h(n,_i),g!==null&&_i>0)for(g.length=_i+Kn.length,v=0;v<Kn.length;v++)g[_i+v]=Kn[v];else n.deps=g=Kn;if(!_r||(f&bi)!==0&&n.reactions!==null)for(v=_i;v<g.length;v++)(g[v].reactions??=[]).push(n)}else g!==null&&_i<g.length&&($h(n,_i),g.length=_i);if(uc()&&Ai!==null&&!os&&g!==null&&(n.f&(bi|Qs|Di))===0)for(v=0;v<Ai.length;v++)zv(Ai[v],n);return s!==null&&s!==n&&(ql++,Ai!==null&&(i===null?i=Ai:i.push(...Ai))),(n.f&uo)!==0&&(n.f^=uo),p}catch(y){return S4(y)}finally{n.f^=Nd,Kn=t,_i=e,Ai=i,Ue=s,_r=r,Zs=o,Yh(l),os=c,fo=h}}function X4(n,t){let e=t.reactions;if(e!==null){var i=Gb.call(e,n);if(i!==-1){var s=e.length-1;s===0?e=t.reactions=null:(e[i]=e[s],e.pop())}}e===null&&(t.f&bi)!==0&&(Kn===null||!Kn.includes(t))&&(ei(t,Qs),(t.f&(Li|Zh))===0&&(t.f^=Zh),vv(t),$h(t,0))}function $h(n,t){var e=n.deps;if(e!==null)for(var i=t;i<e.length;i++)X4(n,e[i])}function po(n){var t=n.f;if((t&Eo)===0){ei(n,Un);var e=Ee,i=ha;Ee=n,ha=!0;try{(t&Ba)!==0?G4(n):Iv(n),Lv(n);var s=Hv(n);n.teardown=typeof s=="function"?s:null,n.wv=Uv;var r;rv&&y4&&(n.f&Di)!==0&&n.deps}finally{ha=i,Ee=e}}}async function Z4(){await Promise.resolve(),L4()}function U(n){var t=n.f,e=(t&bi)!==0;if(Ue!==null&&!os){var i=Ee!==null&&(Ee.f&Eo)!==0;if(!i&&!Zs?.includes(n)){var s=Ue.deps;if((Ue.f&Nd)!==0)n.rv<ql&&(n.rv=ql,Kn===null&&s!==null&&s[_i]===n?_i++:Kn===null?Kn=[n]:(!_r||!Kn.includes(n))&&Kn.push(n));else{(Ue.deps??=[]).push(n);var r=n.reactions;r===null?n.reactions=[Ue]:r.includes(Ue)||r.push(Ue)}}}else if(e&&n.deps===null&&n.effects===null){var o=n,l=o.parent;l!==null&&(l.f&Li)===0&&(o.f^=Li)}if(Ao){if(Cr.has(n))return Cr.get(n);if(e){o=n;var c=o.v;return((o.f&Un)===0&&o.reactions!==null||Vv(o))&&(c=dm(o)),Cr.set(o,c),c}}else if(e){if(o=n,ya?.has(o))return ya.get(o);mc(o)&&xv(o)}if((n.f&uo)!==0)throw n.v;return n.v}function Vv(n){if(n.v===Ln)return!0;if(n.deps===null)return!1;for(const t of n.deps)if(Cr.has(t)||(t.f&bi)!==0&&Vv(t))return!0;return!1}function ft(n){var t=os;try{return os=!0,n()}finally{os=t}}const Y4=-7169;function ei(n,t){n.f=n.f&Y4|t}function zt(n){if(!(typeof n!="object"||!n||n instanceof EventTarget)){if(hs in n)Bd(n);else if(!Array.isArray(n))for(let t in n){const e=n[t];typeof e=="object"&&e&&hs in e&&Bd(e)}}}function Bd(n,t=new Set){if(typeof n=="object"&&n!==null&&!(n instanceof EventTarget)&&!t.has(n)){t.add(n),n instanceof Date&&n.getTime();for(let i in n)try{Bd(n[i],t)}catch{}const e=om(n);if(e!==Object.prototype&&e!==Array.prototype&&e!==Map.prototype&&e!==Set.prototype&&e!==Date.prototype){const i=ov(e);for(let s in i){const r=i[s].get;if(r)try{r.call(n)}catch{}}}}}function q4(n){return n.endsWith("capture")&&n!=="gotpointercapture"&&n!=="lostpointercapture"}const $4=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function K4(n){return $4.includes(n)}const J4={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function Q4(n){return n=n.toLowerCase(),J4[n]??n}const t5=["touchstart","touchmove"];function e5(n){return t5.includes(n)}const Wv=new Set,zd=new Set;function Gv(n,t,e,i={}){function s(r){if(i.capture||El.call(t,r),!r.cancelBubble)return Cu(()=>e?.call(this,r))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?yu(()=>{t.addEventListener(n,s,i)}):t.addEventListener(n,s,i),s}function Hs(n,t,e,i,s){var r={capture:i,passive:s},o=Gv(n,t,e,r);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Pv(()=>{t.removeEventListener(n,o,r)})}function jv(n){for(var t=0;t<n.length;t++)Wv.add(n[t]);for(var e of zd)e(n)}let p1=null;function El(n){var t=this,e=t.ownerDocument,i=n.type,s=n.composedPath?.()||[],r=s[0]||n.target;p1=n;var o=0,l=p1===n&&n.__root;if(l){var c=s.indexOf(l);if(c!==-1&&(t===document||t===window)){n.__root=t;return}var h=s.indexOf(t);if(h===-1)return;c<=h&&(o=c)}if(r=s[o]||n.target,r!==t){Od(n,"currentTarget",{configurable:!0,get(){return r||e}});var f=Ue,d=Ee;ds(null),ps(null);try{for(var p,g=[];r!==null;){var v=r.assignedSlot||r.parentNode||r.host||null;try{var y=r["__"+i];if(y!=null&&(!r.disabled||n.target===r))if(Ua(y)){var[x,..._]=y;x.apply(r,[n,..._])}else y.call(r,n)}catch(w){p?g.push(w):p=w}if(n.cancelBubble||v===t||v===null)break;r=v}if(p){for(let w of g)queueMicrotask(()=>{throw w});throw p}}finally{n.__root=t,delete n.currentTarget,ds(f),ps(d)}}}function vm(n){var t=document.createElement("template");return t.innerHTML=n.replaceAll("<!>","<!---->"),t.content}function Ca(n,t){var e=Ee;e.nodes_start===null&&(e.nodes_start=n,e.nodes_end=t)}function ce(n,t){var e=(t&fv)!==0,i=(t&m4)!==0,s,r=!n.startsWith("<!>");return()=>{s===void 0&&(s=vm(r?n:"<!>"+n),e||(s=xi(s)));var o=i||wv?document.importNode(s,!0):s.cloneNode(!0);if(e){var l=xi(o),c=o.lastChild;Ca(l,c)}else Ca(o,o);return o}}function n5(n,t,e="svg"){var i=!n.startsWith("<!>"),s=(t&fv)!==0,r=`<${e}>${i?n:"<!>"+n}</${e}>`,o;return()=>{if(!o){var l=vm(r),c=xi(l);if(s)for(o=document.createDocumentFragment();xi(c);)o.appendChild(xi(c));else o=xi(c)}var h=o.cloneNode(!0);if(s){var f=xi(h),d=h.lastChild;Ca(f,d)}else Ca(h,h);return h}}function kr(n,t){return n5(n,t,"svg")}function Bn(){var n=document.createDocumentFragment(),t=document.createComment(""),e=Ha();return n.append(t,e),Ca(t,e),n}function Rt(n,t){n!==null&&n.before(t)}function We(n,t){var e=t==null?"":typeof t=="object"?t+"":t;e!==(n.__t??=n.nodeValue)&&(n.__t=e,n.nodeValue=e+"")}function i5(n,t){return s5(n,t)}const Bo=new Map;function s5(n,{target:t,anchor:e,props:i={},events:s,context:r,intro:o=!0}){N4();var l=new Set,c=d=>{for(var p=0;p<d.length;p++){var g=d[p];if(!l.has(g)){l.add(g);var v=e5(g);t.addEventListener(g,El,{passive:v});var y=Bo.get(g);y===void 0?(document.addEventListener(g,El,{passive:v}),Bo.set(g,1)):Bo.set(g,y+1)}}};c(rm(Wv)),zd.add(c);var h=void 0,f=V4(()=>{var d=e??t.appendChild(Ha());return Pr(()=>{if(r){tn({});var p=Qe;p.c=r}s&&(i.$$events=s),h=n(d,i)||{},r&&en()}),()=>{for(var p of l){t.removeEventListener(p,El);var g=Bo.get(p);--g===0?(document.removeEventListener(p,El),Bo.delete(p)):Bo.set(p,g)}zd.delete(c),d!==e&&d.parentNode?.removeChild(d)}});return r5.set(h,f),h}let r5=new WeakMap;function gn(n,t,e=!1){var i=n,s=null,r=null,o=Ln,l=e?gu:0,c=!1;const h=(g,v=!0)=>{c=!0,p(v,g)};var f=null;function d(){f!==null&&(f.lastChild.remove(),i.before(f),f=null);var g=o?s:r,v=o?r:s;g&&_m(g),v&&Tu(v,()=>{o?r=null:s=null})}const p=(g,v)=>{if(o!==(o=g)){var y=pm(),x=i;if(y&&(f=document.createDocumentFragment(),f.append(x=Ha())),o?s??=v&&Pr(()=>v(x)):r??=v&&Pr(()=>v(x)),y){var _=wn,w=o?s:r,C=o?r:s;w&&_.skipped_effects.delete(w),C&&_.skipped_effects.add(C),_.add_callback(d)}else d()}};pc(()=>{c=!1,t(h),c||p(null,null)},l)}function hi(n,t){return t}function o5(n,t,e){for(var i=n.items,s=[],r=t.length,o=0;o<r;o++)gm(t[o].e,s,!0);var l=r>0&&s.length===0&&e!==null;if(l){var c=e.parentNode;k4(c),c.append(e),i.clear(),is(n,t[0].prev,t[r-1].next)}Nv(s,()=>{for(var h=0;h<r;h++){var f=t[h];l||(i.delete(f.k),is(n,f.prev,f.next)),Oi(f.e,!l)}})}function Qn(n,t,e,i,s,r=null){var o=n,l={flags:t,items:new Map,first:null},c=(t&hv)!==0;if(c){var h=n;o=h.appendChild(Ha())}var f=null,d=!1,p=new Map,g=bu(()=>{var _=e();return Ua(_)?_:_==null?[]:rm(_)}),v,y;function x(){a5(y,v,l,p,o,s,t,i,e),r!==null&&(v.length===0?f?_m(f):f=Pr(()=>r(o)):f!==null&&Tu(f,()=>{f=null}))}pc(()=>{y??=Ee,v=U(g);var _=v.length;if(!(d&&_===0)){d=_===0;var w,C,S,T;if(pm()){var A=new Set,P=wn;for(C=0;C<_;C+=1){S=v[C],T=i(S,C);var N=l.items.get(T)??p.get(T);N?(t&(vu|xu))!==0&&Xv(N,S,C,t):(w=Zv(null,l,null,null,S,T,C,s,t,e,!0),p.set(T,w)),A.add(T)}for(const[E,R]of l.items)A.has(E)||P.skipped_effects.add(R.e);P.add_callback(x)}else x();U(g)}})}function a5(n,t,e,i,s,r,o,l,c){var h=(o&c4)!==0,f=(o&(vu|xu))!==0,d=t.length,p=e.items,g=e.first,v=g,y,x=null,_,w=[],C=[],S,T,A,P;if(h)for(P=0;P<d;P+=1)S=t[P],T=l(S,P),A=p.get(T),A!==void 0&&(A.a?.measure(),(_??=new Set).add(A));for(P=0;P<d;P+=1){if(S=t[P],T=l(S,P),A=p.get(T),A===void 0){var N=i.get(T);if(N!==void 0){i.delete(T),p.set(T,N);var E=x?x.next:v;is(e,x,N),is(e,N,E),vf(N,E,s),x=N}else{var R=v?v.e.nodes_start:s;x=Zv(R,e,x,x===null?e.first:x.next,S,T,P,r,o,c)}p.set(T,x),w=[],C=[],v=x.next;continue}if(f&&Xv(A,S,P,o),(A.e.f&Zi)!==0&&(_m(A.e),h&&(A.a?.unfix(),(_??=new Set).delete(A))),A!==v){if(y!==void 0&&y.has(A)){if(w.length<C.length){var k=C[0],H;x=k.prev;var q=w[0],G=w[w.length-1];for(H=0;H<w.length;H+=1)vf(w[H],k,s);for(H=0;H<C.length;H+=1)y.delete(C[H]);is(e,q.prev,G.next),is(e,x,q),is(e,G,k),v=k,x=G,P-=1,w=[],C=[]}else y.delete(A),vf(A,v,s),is(e,A.prev,A.next),is(e,A,x===null?e.first:x.next),is(e,x,A),x=A;continue}for(w=[],C=[];v!==null&&v.k!==T;)(v.e.f&Zi)===0&&(y??=new Set).add(v),C.push(v),v=v.next;if(v===null)continue;A=v}w.push(A),x=A,v=A.next}if(v!==null||y!==void 0){for(var Y=y===void 0?[]:rm(y);v!==null;)(v.e.f&Zi)===0&&Y.push(v),v=v.next;var j=Y.length;if(j>0){var et=(o&hv)!==0&&d===0?s:null;if(h){for(P=0;P<j;P+=1)Y[P].a?.measure();for(P=0;P<j;P+=1)Y[P].a?.fix()}o5(e,Y,et)}}h&&yu(()=>{if(_!==void 0)for(A of _)A.a?.apply()}),n.first=e.first&&e.first.e,n.last=x&&x.e;for(var V of i.values())Oi(V.e);i.clear()}function Xv(n,t,e,i){(i&vu)!==0&&Yl(n.v,t),(i&xu)!==0?Yl(n.i,e):n.i=e}function Zv(n,t,e,i,s,r,o,l,c,h,f){var d=(c&vu)!==0,p=(c&h4)===0,g=d?p?xe(s,!1,!1):Sa(s):s,v=(c&xu)===0?o:Sa(o),y={i:v,v:g,k:r,a:null,e:null,prev:e,next:i};try{if(n===null){var x=document.createDocumentFragment();x.append(n=Ha())}return y.e=Pr(()=>l(n,g,v,h),x4),y.e.prev=e&&e.e,y.e.next=i&&i.e,e===null?f||(t.first=y):(e.next=y,e.e.next=y.e),i!==null&&(i.prev=y,i.e.prev=y.e),y}finally{}}function vf(n,t,e){for(var i=n.next?n.next.e.nodes_start:e,s=t?t.e.nodes_start:e,r=n.e.nodes_start;r!==null&&r!==i;){var o=Su(r);s.before(r),r=o}}function is(n,t,e){t===null?n.first=e:(t.next=e,t.e.next=e&&e.e),e!==null&&(e.prev=t,e.e.prev=t&&t.e)}function Yv(n,t,e=!1,i=!1,s=!1){var r=n,o="";an(()=>{var l=Ee;if(o!==(o=t()??"")&&(l.nodes_start!==null&&(Dv(l.nodes_start,l.nodes_end),l.nodes_start=l.nodes_end=null),o!=="")){var c=o+"";e?c=`<svg>${c}</svg>`:i&&(c=`<math>${c}</math>`);var h=vm(c);if((e||i)&&(h=xi(h)),Ca(xi(h),h.lastChild),e||i)for(;xi(h);)r.before(xi(h));else r.before(h)}})}function m1(n,t,e){var i=n,s,r,o=null,l=null;function c(){r&&(Tu(r),r=null),o&&(o.lastChild.remove(),i.before(o),o=null),r=l,l=null}pc(()=>{if(s!==(s=t())){var h=pm();if(s){var f=i;h&&(o=document.createDocumentFragment(),o.append(f=Ha()),r&&wn.skipped_effects.add(r)),l=Pr(()=>e(f,s))}h?wn.add_callback(c):c()}},gu)}function l5(n,t){var e=void 0,i;pc(()=>{e!==(e=t())&&(i&&(Oi(i),i=null),e&&(i=Pr(()=>{wu(()=>e(n))})))})}function qv(n){var t,e,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(t=0;t<s;t++)n[t]&&(e=qv(n[t]))&&(i&&(i+=" "),i+=e)}else for(e in n)n[e]&&(i&&(i+=" "),i+=e);return i}function c5(){for(var n,t,e=0,i="",s=arguments.length;e<s;e++)(n=arguments[e])&&(t=qv(n))&&(i&&(i+=" "),i+=t);return i}function h5(n){return typeof n=="object"?c5(n):n??""}const g1=[...` 	
\r\fÂ \v\uFEFF`];function u5(n,t,e){var i=n==null?"":""+n;if(t&&(i=i?i+" "+t:t),e){for(var s in e)if(e[s])i=i?i+" "+s:s;else if(i.length)for(var r=s.length,o=0;(o=i.indexOf(s,o))>=0;){var l=o+r;(o===0||g1.includes(i[o-1]))&&(l===i.length||g1.includes(i[l]))?i=(o===0?"":i.substring(0,o))+i.substring(l+1):o=l}}return i===""?null:i}function _1(n,t=!1){var e=t?" !important;":";",i="";for(var s in n){var r=n[s];r!=null&&r!==""&&(i+=" "+s+": "+r+e)}return i}function xf(n){return n[0]!=="-"||n[1]!=="-"?n.toLowerCase():n}function f5(n,t){if(t){var e="",i,s;if(Array.isArray(t)?(i=t[0],s=t[1]):i=t,n){n=String(n).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var r=!1,o=0,l=!1,c=[];i&&c.push(...Object.keys(i).map(xf)),s&&c.push(...Object.keys(s).map(xf));var h=0,f=-1;const y=n.length;for(var d=0;d<y;d++){var p=n[d];if(l?p==="/"&&n[d-1]==="*"&&(l=!1):r?r===p&&(r=!1):p==="/"&&n[d+1]==="*"?l=!0:p==='"'||p==="'"?r=p:p==="("?o++:p===")"&&o--,!l&&r===!1&&o===0){if(p===":"&&f===-1)f=d;else if(p===";"||d===y-1){if(f!==-1){var g=xf(n.substring(h,f).trim());if(!c.includes(g)){p!==";"&&d++;var v=n.substring(h,d).trim();e+=" "+v+";"}}h=d+1,f=-1}}}}return i&&(e+=_1(i)),s&&(e+=_1(s,!0)),e=e.trim(),e===""?null:e}return n==null?null:String(n)}function Kh(n,t,e,i,s,r){var o=n.__className;if(o!==e||o===void 0){var l=u5(e,i,r);l==null?n.removeAttribute("class"):t?n.className=l:n.setAttribute("class",l),n.__className=e}else if(r&&s!==r)for(var c in r){var h=!!r[c];(s==null||h!==!!s[c])&&n.classList.toggle(c,h)}return r}function yf(n,t={},e,i){for(var s in e){var r=e[s];t[s]!==r&&(e[s]==null?n.style.removeProperty(s):n.style.setProperty(s,r,i))}}function Yi(n,t,e,i){var s=n.__style;if(s!==t){var r=f5(t,i);r==null?n.removeAttribute("style"):n.style.cssText=r,n.__style=t}else i&&(Array.isArray(i)?(yf(n,e?.[0],i[0]),yf(n,e?.[1],i[1],"important")):yf(n,e,i));return i}function Jh(n,t,e=!1){if(n.multiple){if(t==null)return;if(!Ua(t))return v4();for(var i of n.options)i.selected=t.includes(kl(i));return}for(i of n.options){var s=kl(i);if(O4(s,t)){i.selected=!0;return}}(!e||t!==void 0)&&(n.selectedIndex=-1)}function $v(n){var t=new MutationObserver(()=>{Jh(n,n.__value)});t.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Pv(()=>{t.disconnect()})}function d5(n,t,e=t){var i=!0;B4(n,"change",s=>{var r=s?"[selected]":":checked",o;if(n.multiple)o=[].map.call(n.querySelectorAll(r),kl);else{var l=n.querySelector(r)??n.querySelector("option:not([disabled])");o=l&&kl(l)}e(o)}),wu(()=>{var s=t();if(Jh(n,s,i),i&&s===void 0){var r=n.querySelector(":checked");r!==null&&(s=kl(r),e(s))}n.__value=s,i=!1}),$v(n)}function kl(n){return"__value"in n?n.__value:n.value}const cl=Symbol("class"),hl=Symbol("style"),Kv=Symbol("is custom element"),Jv=Symbol("is html");function p5(n,t){t?n.hasAttribute("selected")||n.setAttribute("selected",""):n.removeAttribute("selected")}function Ce(n,t,e,i){var s=Qv(n);s[t]!==(s[t]=e)&&(t==="loading"&&(n[Kb]=e),e==null?n.removeAttribute(t):typeof e!="string"&&t3(n).includes(t)?n[t]=e:n.setAttribute(t,e))}function m5(n,t,e,i,s=!1){var r=Qv(n),o=r[Kv],l=!r[Jv],c=t||{},h=n.tagName==="OPTION";for(var f in t)f in e||(e[f]=null);e.class?e.class=h5(e.class):e[cl]&&(e.class=null),e[hl]&&(e.style??=null);var d=t3(n);for(const C in e){let S=e[C];if(h&&C==="value"&&S==null){n.value=n.__value="",c[C]=S;continue}if(C==="class"){var p=n.namespaceURI==="http://www.w3.org/1999/xhtml";Kh(n,p,S,i,t?.[cl],e[cl]),c[C]=S,c[cl]=e[cl];continue}if(C==="style"){Yi(n,S,t?.[hl],e[hl]),c[C]=S,c[hl]=e[hl];continue}var g=c[C];if(!(S===g&&!(S===void 0&&n.hasAttribute(C)))){c[C]=S;var v=C[0]+C[1];if(v!=="$$")if(v==="on"){const T={},A="$$"+C;let P=C.slice(2);var y=K4(P);if(q4(P)&&(P=P.slice(0,-7),T.capture=!0),!y&&g){if(S!=null)continue;n.removeEventListener(P,c[A],T),c[A]=null}if(S!=null)if(y)n[`__${P}`]=S,jv([P]);else{let N=function(E){c[C].call(this,E)};var w=N;c[A]=Gv(P,n,N,T)}else y&&(n[`__${P}`]=void 0)}else if(C==="style")Ce(n,C,S);else if(C==="autofocus")F4(n,!!S);else if(!o&&(C==="__value"||C==="value"&&S!=null))n.value=n.__value=S;else if(C==="selected"&&h)p5(n,S);else{var x=C;l||(x=Q4(x));var _=x==="defaultValue"||x==="defaultChecked";if(S==null&&!o&&!_)if(r[C]=null,x==="value"||x==="checked"){let T=n;const A=t===void 0;if(x==="value"){let P=T.defaultValue;T.removeAttribute(x),T.defaultValue=P,T.value=T.__value=A?P:null}else{let P=T.defaultChecked;T.removeAttribute(x),T.defaultChecked=P,T.checked=A?P:!1}}else n.removeAttribute(C);else _||d.includes(x)&&(o||typeof S!="string")?(n[x]=S,x in r&&(r[x]=Ln)):typeof S!="function"&&Ce(n,x,S)}}}return c}function g5(n,t,e=[],i=[],s,r=!1){yv(e,i,o=>{var l=void 0,c={},h=n.nodeName==="SELECT",f=!1;if(pc(()=>{var p=t(...o.map(U)),g=m5(n,l,p,s,r);f&&h&&"value"in p&&Jh(n,p.value);for(let y of Object.getOwnPropertySymbols(c))p[y]||Oi(c[y]);for(let y of Object.getOwnPropertySymbols(p)){var v=p[y];y.description===_4&&(!l||v!==l[y])&&(c[y]&&Oi(c[y]),c[y]=Pr(()=>l5(n,()=>v))),g[y]=v}l=g}),h){var d=n;wu(()=>{Jh(d,l.value,!0),$v(d)})}f=!0})}function Qv(n){return n.__attributes??={[Kv]:n.nodeName.includes("-"),[Jv]:n.namespaceURI===g4}}var v1=new Map;function t3(n){var t=v1.get(n.nodeName);if(t)return t;v1.set(n.nodeName,t=[]);for(var e,i=n,s=Element.prototype;s!==i;){e=ov(i);for(var r in e)e[r].set&&t.push(r);i=om(i)}return t}function x1(n,t){return n===t||n?.[hs]===t}function Po(n={},t,e,i){return wu(()=>{var s,r;return mm(()=>{s=r,r=[],ft(()=>{n!==e(...r)&&(t(n,...r),s&&x1(e(...s),n)&&t(null,...s))})}),()=>{yu(()=>{r&&x1(e(...r),n)&&t(null,...r)})}}),n}function vn(n=!1){const t=Qe,e=t.l.u;if(!e)return;let i=()=>zt(t.s);if(n){let s=0,r={};const o=fc(()=>{let l=!1;const c=t.s;for(const h in c)c[h]!==r[h]&&(r[h]=c[h],l=!0);return l&&s++,s});i=()=>U(o)}e.b.length&&H4(()=>{y1(t,i),Xl(e.b)}),Ud(()=>{const s=ft(()=>e.m.map(Zb));return()=>{for(const r of s)typeof r=="function"&&r()}}),e.a.length&&Ud(()=>{y1(t,i),Xl(e.a)})}function y1(n,t){if(n.l.s)for(const e of n.l.s)U(e);t()}function b1(n,t){var e=n.$$events?.[t.type],i=Ua(e)?e.slice():e==null?[]:[e];for(var s of i)s.call(this,t)}function _5(n,t,e){if(n==null)return t(void 0),e&&e(void 0),ca;const i=ft(()=>n.subscribe(t,e));return i.unsubscribe?()=>i.unsubscribe():i}const zo=[];function e3(n,t){return{subscribe:n3(n,t).subscribe}}function n3(n,t=ca){let e=null;const i=new Set;function s(l){if(pv(n,l)&&(n=l,e)){const c=!zo.length;for(const h of i)h[1](),zo.push(h,n);if(c){for(let h=0;h<zo.length;h+=2)zo[h][0](zo[h+1]);zo.length=0}}}function r(l){s(l(n))}function o(l,c=ca){const h=[l,c];return i.add(h),i.size===1&&(e=t(s,r)||ca),l(n),()=>{i.delete(h),i.size===0&&e&&(e(),e=null)}}return{set:s,update:r,subscribe:o}}function i3(n,t,e){const i=!Array.isArray(n),s=i?[n]:n;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const r=t.length<2;return e3(e,(o,l)=>{let c=!1;const h=[];let f=0,d=ca;const p=()=>{if(f)return;d();const v=t(i?h[0]:h,o,l);r?o(v):d=typeof v=="function"?v:ca},g=s.map((v,y)=>_5(v,x=>{h[y]=x,f&=~(1<<y),c&&p()},()=>{f|=1<<y}));return c=!0,p(),function(){Xl(g),d(),c=!1}})}let Hc=!1;function v5(n){var t=Hc;try{return Hc=!1,[n(),Hc]}finally{Hc=t}}const x5={get(n,t){if(!n.exclude.includes(t))return U(n.version),t in n.special?n.special[t]():n.props[t]},set(n,t,e){if(!(t in n.special)){var i=Ee;try{ps(n.parent_effect),n.special[t]=mt({get[t](){return n.props[t]}},t,uv)}finally{ps(i)}}return n.special[t](e),a1(n.version),!0},getOwnPropertyDescriptor(n,t){if(!n.exclude.includes(t)&&t in n.props)return{enumerable:!0,configurable:!0,value:n.props[t]}},deleteProperty(n,t){return n.exclude.includes(t)||(n.exclude.push(t),a1(n.version)),!0},has(n,t){return n.exclude.includes(t)?!1:t in n.props},ownKeys(n){return Reflect.ownKeys(n.props).filter(t=>!n.exclude.includes(t))}};function M1(n,t){return new Proxy({props:n,exclude:t,special:{},version:Sa(0),parent_effect:Ee},x5)}const y5={get(n,t){let e=n.props.length;for(;e--;){let i=n.props[e];if(al(i)&&(i=i()),typeof i=="object"&&i!==null&&t in i)return i[t]}},set(n,t,e){let i=n.props.length;for(;i--;){let s=n.props[i];al(s)&&(s=s());const r=Sr(s,t);if(r&&r.set)return r.set(e),!0}return!1},getOwnPropertyDescriptor(n,t){let e=n.props.length;for(;e--;){let i=n.props[e];if(al(i)&&(i=i()),typeof i=="object"&&i!==null&&t in i){const s=Sr(i,t);return s&&!s.configurable&&(s.configurable=!0),s}}},has(n,t){if(t===hs||t===cv)return!1;for(let e of n.props)if(al(e)&&(e=e()),e!=null&&t in e)return!0;return!1},ownKeys(n){const t=[];for(let e of n.props)if(al(e)&&(e=e()),!!e){for(const i in e)t.includes(i)||t.push(i);for(const i of Object.getOwnPropertySymbols(e))t.includes(i)||t.push(i)}return t}};function Hd(...n){return new Proxy({props:n},y5)}function mt(n,t,e,i){var s=!za||(e&f4)!==0,r=(e&d4)!==0,o=(e&p4)!==0,l=i,c=!0,h=()=>(c&&(c=!1,l=o?ft(i):i),l),f;if(r){var d=hs in n||cv in n;f=Sr(n,t)?.set??(d&&t in n?C=>n[t]=C:void 0)}var p,g=!1;r?[p,g]=v5(()=>n[t]):p=n[t],p===void 0&&i!==void 0&&(p=h(),f&&(s&&r4(),f(p)));var v;if(s?v=()=>{var C=n[t];return C===void 0?h():(c=!0,C)}:v=()=>{var C=n[t];return C!==void 0&&(l=void 0),C===void 0?l:C},s&&(e&uv)===0)return v;if(f){var y=n.$$legacy;return(function(C,S){return arguments.length>0?((!s||!S||y||g)&&f(S?v():C),C):v()})}var x=!1,_=((e&u4)!==0?fc:bu)(()=>(x=!1,v()));r&&U(_);var w=Ee;return(function(C,S){if(arguments.length>0){const T=S?U(_):s&&r?gr(C):C;return Ft(_,T),x=!0,l!==void 0&&(l=T),C}return Ao&&x||(w.f&Eo)!==0?_.v:U(_)})}function zn(n){Qe===null&&_u(),za&&Qe.l!==null?o3(Qe).m.push(n):Ud(()=>{const t=ft(n);if(typeof t=="function")return t})}function s3(n){Qe===null&&_u(),zn(()=>()=>ft(n))}function b5(n,t,{bubbles:e=!1,cancelable:i=!1}={}){return new CustomEvent(n,{detail:t,bubbles:e,cancelable:i})}function r3(){const n=Qe;return n===null&&_u(),(t,e,i)=>{const s=n.s.$$events?.[t];if(s){const r=Ua(s)?s.slice():[s],o=b5(t,e,i);for(const l of r)l.call(n.x,o);return!o.defaultPrevented}return!0}}function M5(n){Qe===null&&_u(),Qe.l===null&&s4(),o3(Qe).a.push(n)}function o3(n){var t=n.l;return t.u??={a:[],b:[],m:[]}}const S5="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(S5);b4();function C5(n,t){if(n instanceof RegExp)return{keys:!1,pattern:n};var e,i,s,r,o=[],l="",c=n.split("/");for(c[0]||c.shift();s=c.shift();)e=s[0],e==="*"?(o.push("wild"),l+="/(.*)"):e===":"?(i=s.indexOf("?",1),r=s.indexOf(".",1),o.push(s.substring(1,~i?i:~r?r:s.length)),l+=~i&&!~r?"(?:/([^/]+?))?":"/([^/]+?)",~r&&(l+=(~i?"?":"")+"\\"+s.substring(r))):l+="/"+s;return{keys:o,pattern:new RegExp("^"+l+"/?$","i")}}function S1(){const n=window.location.href.indexOf("#/");let t=n>-1?window.location.href.substr(n+1):"/";const e=t.indexOf("?");let i="";return e>-1&&(i=t.substr(e+1),t=t.substr(0,e)),{location:t,querystring:i}}const xm=e3(null,function(t){t(S1());const e=()=>{t(S1())};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}});i3(xm,n=>n.location);i3(xm,n=>n.querystring);const C1=n3(void 0);function w5(n){n?window.scrollTo(n.__svelte_spa_router_scrollX,n.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function T5(n,t){tn(t,!1);let e=mt(t,"routes",24,()=>({})),i=mt(t,"prefix",8,""),s=mt(t,"restoreScrollState",8,!1);class r{constructor(A,P){if(!P||typeof P!="function"&&(typeof P!="object"||P._sveltesparouter!==!0))throw Error("Invalid component object");if(!A||typeof A=="string"&&(A.length<1||A.charAt(0)!="/"&&A.charAt(0)!="*")||typeof A=="object"&&!(A instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:N,keys:E}=C5(A);this.path=A,typeof P=="object"&&P._sveltesparouter===!0?(this.component=P.component,this.conditions=P.conditions||[],this.userData=P.userData,this.props=P.props||{}):(this.component=()=>Promise.resolve(P),this.conditions=[],this.props={}),this._pattern=N,this._keys=E}match(A){if(i()){if(typeof i()=="string")if(A.startsWith(i()))A=A.substr(i().length)||"/";else return null;else if(i()instanceof RegExp){const R=A.match(i());if(R&&R[0])A=A.substr(R[0].length)||"/";else return null}}const P=this._pattern.exec(A);if(P===null)return null;if(this._keys===!1)return P;const N={};let E=0;for(;E<this._keys.length;){try{N[this._keys[E]]=decodeURIComponent(P[E+1]||"")||null}catch{N[this._keys[E]]=null}E++}return N}async checkConditions(A){for(let P=0;P<this.conditions.length;P++)if(!await this.conditions[P](A))return!1;return!0}}const o=[];e()instanceof Map?e().forEach((T,A)=>{o.push(new r(A,T))}):Object.keys(e()).forEach(T=>{o.push(new r(T,e()[T]))});let l=xe(null),c=xe(null),h=xe({});const f=r3();async function d(T,A){await Z4(),f(T,A)}let p=null,g=null;s()&&(g=T=>{T.state&&(T.state.__svelte_spa_router_scrollY||T.state.__svelte_spa_router_scrollX)?p=T.state:p=null},window.addEventListener("popstate",g),M5(()=>{w5(p)}));let v=null,y=null;const x=xm.subscribe(async T=>{v=T;let A=0;for(;A<o.length;){const P=o[A].match(T.location);if(!P){A++;continue}const N={route:o[A].path,location:T.location,querystring:T.querystring,userData:o[A].userData,params:P&&typeof P=="object"&&Object.keys(P).length?P:null};if(!await o[A].checkConditions(N)){Ft(l,null),y=null,d("conditionsFailed",N);return}d("routeLoading",Object.assign({},N));const E=o[A].component;if(y!=E){E.loading?(Ft(l,E.loading),y=E,Ft(c,E.loadingParams),Ft(h,{}),d("routeLoaded",Object.assign({},N,{component:U(l),name:U(l).name,params:U(c)}))):(Ft(l,null),y=null);const R=await E();if(T!=v)return;Ft(l,R&&R.default||R),y=E}P&&typeof P=="object"&&Object.keys(P).length?Ft(c,P):Ft(c,null),Ft(h,o[A].props),d("routeLoaded",Object.assign({},N,{component:U(l),name:U(l).name,params:U(c)})).then(()=>{C1.set(U(c))});return}Ft(l,null),y=null,C1.set(void 0)});s3(()=>{x(),g&&window.removeEventListener("popstate",g)}),wr(()=>zt(s()),()=>{history.scrollRestoration=s()?"manual":"auto"}),dc(),vn();var _=Bn(),w=xn(_);{var C=T=>{var A=Bn(),P=xn(A);m1(P,()=>U(l),(N,E)=>{E(N,Hd({get params(){return U(c)}},()=>U(h),{$$events:{routeEvent(R){b1.call(this,t,R)}}}))}),Rt(T,A)},S=T=>{var A=Bn(),P=xn(A);m1(P,()=>U(l),(N,E)=>{E(N,Hd(()=>U(h),{$$events:{routeEvent(R){b1.call(this,t,R)}}}))}),Rt(T,A)};gn(w,T=>{U(c)?T(C):T(S,!1)})}Rt(n,_),en()}/*!
 * Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2025 Fonticons, Inc.
 */var E5={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M55.1 73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L147.2 256 9.9 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192.5 301.3 329.9 438.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.8 256 375.1 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192.5 210.7 55.1 73.4z"]},A5={prefix:"fas",iconName:"bars",icon:[448,512,["navicon"],"f0c9","M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z"]};function P5(n){const{beat:t,fade:e,beatFade:i,bounce:s,shake:r,flash:o,spin:l,spinPulse:c,spinReverse:h,pulse:f,fixedWidth:d,inverse:p,border:g,listItem:v,flip:y,size:x,rotation:_,pull:w}=n,C={"fa-beat":t,"fa-fade":e,"fa-beat-fade":i,"fa-bounce":s,"fa-shake":r,"fa-flash":o,"fa-spin":l,"fa-spin-reverse":h,"fa-spin-pulse":c,"fa-pulse":f,"fa-fw":d,"fa-inverse":p,"fa-border":g,"fa-li":v,"fa-flip":y===!0,"fa-flip-horizontal":y==="horizontal"||y==="both","fa-flip-vertical":y==="vertical"||y==="both",[`fa-${x}`]:typeof x<"u"&&x!==null,[`fa-rotate-${_}`]:typeof _<"u"&&_!==null&&_!==0,[`fa-pull-${w}`]:typeof w<"u"&&w!==null,"fa-swap-opacity":n.swapOpacity};return Object.keys(C).map(S=>C[S]?S:null).filter(S=>S)}function R5(n){return n=n-0,n===n}function L5(n){return R5(n)?n:(n=n.replace(/[\-_\s]+(.)?/g,function(t,e){return e?e.toUpperCase():""}),n.substr(0,1).toLowerCase()+n.substr(1))}function I5(n){return typeof n=="string"?n:Object.keys(n).reduce((t,e)=>t+e.split(/(?=[A-Z])/).join("-").toLowerCase()+":"+n[e]+";","")}function a3(n,t,e={}){if(typeof t=="string")return t;const i=(t.children||[]).map(r=>a3(n,r)),s=Object.keys(t.attributes||{}).reduce((r,o)=>{const l=t.attributes[o];return o==="style"?r.attrs.style=I5(l):o.indexOf("aria-")===0||o.indexOf("data-")===0?r.attrs[o.toLowerCase()]=l:r.attrs[L5(o)]=l,r},{attrs:{}});return n(t.tag,{...s.attrs},i)}/*!
 * Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2025 Fonticons, Inc.
 */function Vd(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,i=Array(t);e<t;e++)i[e]=n[e];return i}function D5(n){if(Array.isArray(n))return n}function O5(n){if(Array.isArray(n))return Vd(n)}function N5(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function k5(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,l3(i.key),i)}}function F5(n,t,e){return t&&k5(n.prototype,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Oh(n,t){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=ym(n))||t){e&&(n=e);var i=0,s=function(){};return{s,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var r,o=!0,l=!1;return{s:function(){e=e.call(n)},n:function(){var c=e.next();return o=c.done,c},e:function(c){l=!0,r=c},f:function(){try{o||e.return==null||e.return()}finally{if(l)throw r}}}}function De(n,t,e){return(t=l3(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function U5(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function B5(n,t){var e=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var i,s,r,o,l=[],c=!0,h=!1;try{if(r=(e=e.call(n)).next,t===0){if(Object(e)!==e)return;c=!1}else for(;!(c=(i=r.call(e)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(f){h=!0,s=f}finally{try{if(!c&&e.return!=null&&(o=e.return(),Object(o)!==o))return}finally{if(h)throw s}}return l}}function z5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H5(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w1(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),e.push.apply(e,i)}return e}function bt(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?w1(Object(e),!0).forEach(function(i){De(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):w1(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function Eu(n,t){return D5(n)||B5(n,t)||ym(n,t)||z5()}function $i(n){return O5(n)||U5(n)||ym(n)||H5()}function V5(n,t){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function l3(n){var t=V5(n,"string");return typeof t=="symbol"?t:t+""}function Qh(n){"@babel/helpers - typeof";return Qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qh(n)}function ym(n,t){if(n){if(typeof n=="string")return Vd(n,t);var e={}.toString.call(n).slice(8,-1);return e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set"?Array.from(n):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Vd(n,t):void 0}}var T1=function(){},bm={},c3={},h3=null,u3={mark:T1,measure:T1};try{typeof window<"u"&&(bm=window),typeof document<"u"&&(c3=document),typeof MutationObserver<"u"&&(h3=MutationObserver),typeof performance<"u"&&(u3=performance)}catch{}var W5=bm.navigator||{},E1=W5.userAgent,A1=E1===void 0?"":E1,Rr=bm,ln=c3,P1=h3,Vc=u3;Rr.document;var tr=!!ln.documentElement&&!!ln.head&&typeof ln.addEventListener=="function"&&typeof ln.createElement=="function",f3=~A1.indexOf("MSIE")||~A1.indexOf("Trident/"),bf,G5=/fa(k|kd|s|r|l|t|d|dr|dl|dt|b|slr|slpr|wsb|tl|ns|nds|es|jr|jfr|jdr|cr|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,j5=/Font ?Awesome ?([567 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit|Notdog Duo|Notdog|Chisel|Etch|Thumbprint|Jelly Fill|Jelly Duo|Jelly|Slab Press|Slab|Whiteboard)?.*/i,d3={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"},slab:{"fa-regular":"regular",faslr:"regular"},"slab-press":{"fa-regular":"regular",faslpr:"regular"},thumbprint:{"fa-light":"light",fatl:"light"},whiteboard:{"fa-semibold":"semibold",fawsb:"semibold"},notdog:{"fa-solid":"solid",fans:"solid"},"notdog-duo":{"fa-solid":"solid",fands:"solid"},etch:{"fa-solid":"solid",faes:"solid"},jelly:{"fa-regular":"regular",fajr:"regular"},"jelly-fill":{"fa-regular":"regular",fajfr:"regular"},"jelly-duo":{"fa-regular":"regular",fajdr:"regular"},chisel:{"fa-regular":"regular",facr:"regular"}},X5={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},p3=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone","fa-thumbprint","fa-whiteboard","fa-notdog","fa-notdog-duo","fa-chisel","fa-etch","fa-jelly","fa-jelly-fill","fa-jelly-duo","fa-slab","fa-slab-press"],Xn="classic",gc="duotone",m3="sharp",g3="sharp-duotone",_3="chisel",v3="etch",x3="jelly",y3="jelly-duo",b3="jelly-fill",M3="notdog",S3="notdog-duo",C3="slab",w3="slab-press",T3="thumbprint",E3="whiteboard",Z5="Classic",Y5="Duotone",q5="Sharp",$5="Sharp Duotone",K5="Chisel",J5="Etch",Q5="Jelly",tM="Jelly Duo",eM="Jelly Fill",nM="Notdog",iM="Notdog Duo",sM="Slab",rM="Slab Press",oM="Thumbprint",aM="Whiteboard",A3=[Xn,gc,m3,g3,_3,v3,x3,y3,b3,M3,S3,C3,w3,T3,E3];bf={},De(De(De(De(De(De(De(De(De(De(bf,Xn,Z5),gc,Y5),m3,q5),g3,$5),_3,K5),v3,J5),x3,Q5),y3,tM),b3,eM),M3,nM),De(De(De(De(De(bf,S3,iM),C3,sM),w3,rM),T3,oM),E3,aM);var lM={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"},slab:{400:"faslr"},"slab-press":{400:"faslpr"},whiteboard:{600:"fawsb"},thumbprint:{300:"fatl"},notdog:{900:"fans"},"notdog-duo":{900:"fands"},etch:{900:"faes"},chisel:{400:"facr"},jelly:{400:"fajr"},"jelly-fill":{400:"fajfr"},"jelly-duo":{400:"fajdr"}},cM={"Font Awesome 7 Free":{900:"fas",400:"far"},"Font Awesome 7 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 7 Brands":{400:"fab",normal:"fab"},"Font Awesome 7 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 7 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 7 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"},"Font Awesome 7 Jelly":{400:"fajr",normal:"fajr"},"Font Awesome 7 Jelly Fill":{400:"fajfr",normal:"fajfr"},"Font Awesome 7 Jelly Duo":{400:"fajdr",normal:"fajdr"},"Font Awesome 7 Slab":{400:"faslr",normal:"faslr"},"Font Awesome 7 Slab Press":{400:"faslpr",normal:"faslpr"},"Font Awesome 7 Thumbprint":{300:"fatl",normal:"fatl"},"Font Awesome 7 Notdog":{900:"fans",normal:"fans"},"Font Awesome 7 Notdog Duo":{900:"fands",normal:"fands"},"Font Awesome 7 Etch":{900:"faes",normal:"faes"},"Font Awesome 7 Chisel":{400:"facr",normal:"facr"},"Font Awesome 7 Whiteboard":{600:"fawsb",normal:"fawsb"}},hM=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["chisel",{defaultShortPrefixId:"facr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["etch",{defaultShortPrefixId:"faes",defaultStyleId:"solid",styleIds:["solid"],futureStyleIds:[],defaultFontWeight:900}],["jelly",{defaultShortPrefixId:"fajr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["jelly-duo",{defaultShortPrefixId:"fajdr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["jelly-fill",{defaultShortPrefixId:"fajfr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["notdog",{defaultShortPrefixId:"fans",defaultStyleId:"solid",styleIds:["solid"],futureStyleIds:[],defaultFontWeight:900}],["notdog-duo",{defaultShortPrefixId:"fands",defaultStyleId:"solid",styleIds:["solid"],futureStyleIds:[],defaultFontWeight:900}],["slab",{defaultShortPrefixId:"faslr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["slab-press",{defaultShortPrefixId:"faslpr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["thumbprint",{defaultShortPrefixId:"fatl",defaultStyleId:"light",styleIds:["light"],futureStyleIds:[],defaultFontWeight:300}],["whiteboard",{defaultShortPrefixId:"fawsb",defaultStyleId:"semibold",styleIds:["semibold"],futureStyleIds:[],defaultFontWeight:600}]]),uM={chisel:{regular:"facr"},classic:{brands:"fab",light:"fal",regular:"far",solid:"fas",thin:"fat"},duotone:{light:"fadl",regular:"fadr",solid:"fad",thin:"fadt"},etch:{solid:"faes"},jelly:{regular:"fajr"},"jelly-duo":{regular:"fajdr"},"jelly-fill":{regular:"fajfr"},notdog:{solid:"fans"},"notdog-duo":{solid:"fands"},sharp:{light:"fasl",regular:"fasr",solid:"fass",thin:"fast"},"sharp-duotone":{light:"fasdl",regular:"fasdr",solid:"fasds",thin:"fasdt"},slab:{regular:"faslr"},"slab-press":{regular:"faslpr"},thumbprint:{light:"fatl"},whiteboard:{semibold:"fawsb"}},P3=["fak","fa-kit","fakd","fa-kit-duotone"],R1={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},fM=["kit"],dM="kit",pM="kit-duotone",mM="Kit",gM="Kit Duotone";De(De({},dM,mM),pM,gM);var _M={kit:{"fa-kit":"fak"}},vM={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},xM={kit:{fak:"fa-kit"}},L1={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},Mf,Wc={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},yM=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone","fa-thumbprint","fa-whiteboard","fa-notdog","fa-notdog-duo","fa-chisel","fa-etch","fa-jelly","fa-jelly-fill","fa-jelly-duo","fa-slab","fa-slab-press"],bM="classic",MM="duotone",SM="sharp",CM="sharp-duotone",wM="chisel",TM="etch",EM="jelly",AM="jelly-duo",PM="jelly-fill",RM="notdog",LM="notdog-duo",IM="slab",DM="slab-press",OM="thumbprint",NM="whiteboard",kM="Classic",FM="Duotone",UM="Sharp",BM="Sharp Duotone",zM="Chisel",HM="Etch",VM="Jelly",WM="Jelly Duo",GM="Jelly Fill",jM="Notdog",XM="Notdog Duo",ZM="Slab",YM="Slab Press",qM="Thumbprint",$M="Whiteboard";Mf={},De(De(De(De(De(De(De(De(De(De(Mf,bM,kM),MM,FM),SM,UM),CM,BM),wM,zM),TM,HM),EM,VM),AM,WM),PM,GM),RM,jM),De(De(De(De(De(Mf,LM,XM),IM,ZM),DM,YM),OM,qM),NM,$M);var KM="kit",JM="kit-duotone",QM="Kit",tS="Kit Duotone";De(De({},KM,QM),JM,tS);var eS={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"},slab:{"fa-regular":"faslr"},"slab-press":{"fa-regular":"faslpr"},whiteboard:{"fa-semibold":"fawsb"},thumbprint:{"fa-light":"fatl"},notdog:{"fa-solid":"fans"},"notdog-duo":{"fa-solid":"fands"},etch:{"fa-solid":"faes"},jelly:{"fa-regular":"fajr"},"jelly-fill":{"fa-regular":"fajfr"},"jelly-duo":{"fa-regular":"fajdr"},chisel:{"fa-regular":"facr"}},nS={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"],slab:["faslr"],"slab-press":["faslpr"],whiteboard:["fawsb"],thumbprint:["fatl"],notdog:["fans"],"notdog-duo":["fands"],etch:["faes"],jelly:["fajr"],"jelly-fill":["fajfr"],"jelly-duo":["fajdr"],chisel:["facr"]},Wd={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"},slab:{faslr:"fa-regular"},"slab-press":{faslpr:"fa-regular"},whiteboard:{fawsb:"fa-semibold"},thumbprint:{fatl:"fa-light"},notdog:{fans:"fa-solid"},"notdog-duo":{fands:"fa-solid"},etch:{faes:"fa-solid"},jelly:{fajr:"fa-regular"},"jelly-fill":{fajfr:"fa-regular"},"jelly-duo":{fajdr:"fa-regular"},chisel:{facr:"fa-regular"}},iS=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands","fa-semibold"],R3=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt","faslr","faslpr","fawsb","fatl","fans","fands","faes","fajr","fajfr","fajdr","facr"].concat(yM,iS),sS=["solid","regular","light","thin","duotone","brands","semibold"],L3=[1,2,3,4,5,6,7,8,9,10],rS=L3.concat([11,12,13,14,15,16,17,18,19,20]),oS=["aw","fw","pull-left","pull-right"],aS=[].concat($i(Object.keys(nS)),sS,oS,["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","inverse","layers","layers-bottom-left","layers-bottom-right","layers-counter","layers-text","layers-top-left","layers-top-right","li","pull-end","pull-start","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul","width-auto","width-fixed",Wc.GROUP,Wc.SWAP_OPACITY,Wc.PRIMARY,Wc.SECONDARY]).concat(L3.map(function(n){return"".concat(n,"x")})).concat(rS.map(function(n){return"w-".concat(n)})),lS={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}},qs="___FONT_AWESOME___",Gd=16,I3="fa",D3="svg-inline--fa",yo="data-fa-i2svg",jd="data-fa-pseudo-element",cS="data-fa-pseudo-element-pending",Mm="data-prefix",Sm="data-icon",I1="fontawesome-i2svg",hS="async",uS=["HTML","HEAD","STYLE","SCRIPT"],O3=["::before","::after",":before",":after"],N3=(function(){try{return!0}catch{return!1}})();function _c(n){return new Proxy(n,{get:function(e,i){return i in e?e[i]:e[Xn]}})}var k3=bt({},d3);k3[Xn]=bt(bt(bt(bt({},{"fa-duotone":"duotone"}),d3[Xn]),R1.kit),R1["kit-duotone"]);var fS=_c(k3),Xd=bt({},uM);Xd[Xn]=bt(bt(bt(bt({},{duotone:"fad"}),Xd[Xn]),L1.kit),L1["kit-duotone"]);var D1=_c(Xd),Zd=bt({},Wd);Zd[Xn]=bt(bt({},Zd[Xn]),xM.kit);var F3=_c(Zd),Yd=bt({},eS);Yd[Xn]=bt(bt({},Yd[Xn]),_M.kit);_c(Yd);var dS=G5,U3="fa-layers-text",pS=j5,mS=bt({},lM);_c(mS);var gS=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Sf=X5,_S=[].concat($i(fM),$i(aS)),Fl=Rr.FontAwesomeConfig||{};function vS(n){var t=ln.querySelector("script["+n+"]");if(t)return t.getAttribute(n)}function xS(n){return n===""?!0:n==="false"?!1:n==="true"?!0:n}if(ln&&typeof ln.querySelector=="function"){var yS=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-search-pseudo-elements","searchPseudoElements"],["data-search-pseudo-elements-warnings","searchPseudoElementsWarnings"],["data-search-pseudo-elements-full-scan","searchPseudoElementsFullScan"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];yS.forEach(function(n){var t=Eu(n,2),e=t[0],i=t[1],s=xS(vS(e));s!=null&&(Fl[i]=s)})}var B3={styleDefault:"solid",familyDefault:Xn,cssPrefix:I3,replacementClass:D3,autoReplaceSvg:!0,autoAddCss:!0,searchPseudoElements:!1,searchPseudoElementsWarnings:!0,searchPseudoElementsFullScan:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Fl.familyPrefix&&(Fl.cssPrefix=Fl.familyPrefix);var wa=bt(bt({},B3),Fl);wa.autoReplaceSvg||(wa.observeMutations=!1);var te={};Object.keys(B3).forEach(function(n){Object.defineProperty(te,n,{enumerable:!0,set:function(e){wa[n]=e,Ul.forEach(function(i){return i(te)})},get:function(){return wa[n]}})});Object.defineProperty(te,"familyPrefix",{enumerable:!0,set:function(t){wa.cssPrefix=t,Ul.forEach(function(e){return e(te)})},get:function(){return wa.cssPrefix}});Rr.FontAwesomeConfig=te;var Ul=[];function bS(n){return Ul.push(n),function(){Ul.splice(Ul.indexOf(n),1)}}var Ho=Gd,ls={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function MS(n){if(!(!n||!tr)){var t=ln.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=n;for(var e=ln.head.childNodes,i=null,s=e.length-1;s>-1;s--){var r=e[s],o=(r.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(i=r)}return ln.head.insertBefore(t,i),n}}var SS="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function O1(){for(var n=12,t="";n-- >0;)t+=SS[Math.random()*62|0];return t}function Va(n){for(var t=[],e=(n||[]).length>>>0;e--;)t[e]=n[e];return t}function Cm(n){return n.classList?Va(n.classList):(n.getAttribute("class")||"").split(" ").filter(function(t){return t})}function z3(n){return"".concat(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function CS(n){return Object.keys(n||{}).reduce(function(t,e){return t+"".concat(e,'="').concat(z3(n[e]),'" ')},"").trim()}function Au(n){return Object.keys(n||{}).reduce(function(t,e){return t+"".concat(e,": ").concat(n[e].trim(),";")},"")}function wm(n){return n.size!==ls.size||n.x!==ls.x||n.y!==ls.y||n.rotate!==ls.rotate||n.flipX||n.flipY}function wS(n){var t=n.transform,e=n.containerWidth,i=n.iconWidth,s={transform:"translate(".concat(e/2," 256)")},r="translate(".concat(t.x*32,", ").concat(t.y*32,") "),o="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),l="rotate(".concat(t.rotate," 0 0)"),c={transform:"".concat(r," ").concat(o," ").concat(l)},h={transform:"translate(".concat(i/2*-1," -256)")};return{outer:s,inner:c,path:h}}function TS(n){var t=n.transform,e=n.width,i=e===void 0?Gd:e,s=n.height,r=s===void 0?Gd:s,o="";return f3?o+="translate(".concat(t.x/Ho-i/2,"em, ").concat(t.y/Ho-r/2,"em) "):o+="translate(calc(-50% + ".concat(t.x/Ho,"em), calc(-50% + ").concat(t.y/Ho,"em)) "),o+="scale(".concat(t.size/Ho*(t.flipX?-1:1),", ").concat(t.size/Ho*(t.flipY?-1:1),") "),o+="rotate(".concat(t.rotate,"deg) "),o}var ES=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 7 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 7 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 7 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 7 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 7 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 7 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 7 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 7 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 7 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 7 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 7 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 7 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 7 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 7 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 7 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 7 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 7 Sharp Duotone";
  --fa-font-slab-regular: normal 400 1em/1 "Font Awesome 7 Slab";
  --fa-font-slab-press-regular: normal 400 1em/1 "Font Awesome 7 Slab Press";
  --fa-font-whiteboard-semibold: normal 600 1em/1 "Font Awesome 7 Whiteboard";
  --fa-font-thumbprint-light: normal 300 1em/1 "Font Awesome 7 Thumbprint";
  --fa-font-notdog-solid: normal 900 1em/1 "Font Awesome 7 Notdog";
  --fa-font-notdog-duo-solid: normal 900 1em/1 "Font Awesome 7 Notdog Duo";
  --fa-font-etch-solid: normal 900 1em/1 "Font Awesome 7 Etch";
  --fa-font-jelly-regular: normal 400 1em/1 "Font Awesome 7 Jelly";
  --fa-font-jelly-fill-regular: normal 400 1em/1 "Font Awesome 7 Jelly Fill";
  --fa-font-jelly-duo-regular: normal 400 1em/1 "Font Awesome 7 Jelly Duo";
  --fa-font-chisel-regular: normal 400 1em/1 "Font Awesome 7 Chisel";
}

.svg-inline--fa {
  box-sizing: content-box;
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
  width: var(--fa-width, 1.25em);
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285714em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left,
.svg-inline--fa .fa-pull-start {
  float: inline-start;
  margin-inline-end: var(--fa-pull-margin, 0.3em);
}
.svg-inline--fa.fa-pull-right,
.svg-inline--fa .fa-pull-end {
  float: inline-end;
  margin-inline-start: var(--fa-pull-margin, 0.3em);
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  inset-inline-start: calc(-1 * var(--fa-li-width, 2em));
  inset-block-start: 0.25em; /* syncing vertical alignment with Web Font rendering */
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: var(--fa-width, 1.25em);
}
.fa-layers .svg-inline--fa {
  inset: 0;
  margin: auto;
  position: absolute;
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: calc(10 / 16 * 1em); /* converts a 10px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 10 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 10 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-xs {
  font-size: calc(12 / 16 * 1em); /* converts a 12px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 12 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 12 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-sm {
  font-size: calc(14 / 16 * 1em); /* converts a 14px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 14 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 14 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-lg {
  font-size: calc(20 / 16 * 1em); /* converts a 20px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 20 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 20 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-xl {
  font-size: calc(24 / 16 * 1em); /* converts a 24px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 24 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 24 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-2xl {
  font-size: calc(32 / 16 * 1em); /* converts a 32px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 32 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 32 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-width-auto {
  --fa-width: auto;
}

.fa-fw,
.fa-width-fixed {
  --fa-width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-inline-start: var(--fa-li-margin, 2.5em);
  padding-inline-start: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  inset-inline-start: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

/* Heads Up: Bordered Icons will not be supported in the future!
  - This feature will be deprecated in the next major release of Font Awesome (v8)!
  - You may continue to use it in this version *v7), but it will not be supported in Font Awesome v8.
*/
/* Notes:
* --@{v.$css-prefix}-border-width = 1/16 by default (to render as ~1px based on a 16px default font-size)
* --@{v.$css-prefix}-border-padding =
  ** 3/16 for vertical padding (to give ~2px of vertical whitespace around an icon considering it's vertical alignment)
  ** 4/16 for horizontal padding (to give ~4px of horizontal whitespace around an icon)
*/
.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.0625em);
  box-sizing: var(--fa-border-box-sizing, content-box);
  padding: var(--fa-border-padding, 0.1875em 0.25em);
}

.fa-pull-left,
.fa-pull-start {
  float: inline-start;
  margin-inline-end: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right,
.fa-pull-end {
  float: inline-end;
  margin-inline-start: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
  .fa-bounce,
  .fa-fade,
  .fa-beat-fade,
  .fa-flip,
  .fa-pulse,
  .fa-shake,
  .fa-spin,
  .fa-spin-pulse {
    animation: none !important;
    transition: none !important;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.svg-inline--fa.fa-inverse {
  fill: var(--fa-inverse, #fff);
}

.fa-stack {
  display: inline-block;
  height: 2em;
  line-height: 2em;
  position: relative;
  vertical-align: middle;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}`;function H3(){var n=I3,t=D3,e=te.cssPrefix,i=te.replacementClass,s=ES;if(e!==n||i!==t){var r=new RegExp("\\.".concat(n,"\\-"),"g"),o=new RegExp("\\--".concat(n,"\\-"),"g"),l=new RegExp("\\.".concat(t),"g");s=s.replace(r,".".concat(e,"-")).replace(o,"--".concat(e,"-")).replace(l,".".concat(i))}return s}var N1=!1;function Cf(){te.autoAddCss&&!N1&&(MS(H3()),N1=!0)}var AS={mixout:function(){return{dom:{css:H3,insertCss:Cf}}},hooks:function(){return{beforeDOMElementCreation:function(){Cf()},beforeI2svg:function(){Cf()}}}},$s=Rr||{};$s[qs]||($s[qs]={});$s[qs].styles||($s[qs].styles={});$s[qs].hooks||($s[qs].hooks={});$s[qs].shims||($s[qs].shims=[]);var Gi=$s[qs],V3=[],W3=function(){ln.removeEventListener("DOMContentLoaded",W3),tu=1,V3.map(function(t){return t()})},tu=!1;tr&&(tu=(ln.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(ln.readyState),tu||ln.addEventListener("DOMContentLoaded",W3));function PS(n){tr&&(tu?setTimeout(n,0):V3.push(n))}function vc(n){var t=n.tag,e=n.attributes,i=e===void 0?{}:e,s=n.children,r=s===void 0?[]:s;return typeof n=="string"?z3(n):"<".concat(t," ").concat(CS(i),">").concat(r.map(vc).join(""),"</").concat(t,">")}function k1(n,t,e){if(n&&n[t]&&n[t][e])return{prefix:t,iconName:e,icon:n[t][e]}}var wf=function(t,e,i,s){var r=Object.keys(t),o=r.length,l=e,c,h,f;for(i===void 0?(c=1,f=t[r[0]]):(c=0,f=i);c<o;c++)h=r[c],f=l(f,t[h],h,t);return f};function G3(n){return $i(n).length!==1?null:n.codePointAt(0).toString(16)}function F1(n){return Object.keys(n).reduce(function(t,e){var i=n[e],s=!!i.icon;return s?t[i.iconName]=i.icon:t[e]=i,t},{})}function j3(n,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=e.skipHooks,s=i===void 0?!1:i,r=F1(t);typeof Gi.hooks.addPack=="function"&&!s?Gi.hooks.addPack(n,F1(t)):Gi.styles[n]=bt(bt({},Gi.styles[n]||{}),r),n==="fas"&&j3("fa",t)}var $l=Gi.styles,RS=Gi.shims,X3=Object.keys(F3),LS=X3.reduce(function(n,t){return n[t]=Object.keys(F3[t]),n},{}),Tm=null,Z3={},Y3={},q3={},$3={},K3={};function IS(n){return~_S.indexOf(n)}function DS(n,t){var e=t.split("-"),i=e[0],s=e.slice(1).join("-");return i===n&&s!==""&&!IS(s)?s:null}var J3=function(){var t=function(r){return wf($l,function(o,l,c){return o[c]=wf(l,r,{}),o},{})};Z3=t(function(s,r,o){if(r[3]&&(s[r[3]]=o),r[2]){var l=r[2].filter(function(c){return typeof c=="number"});l.forEach(function(c){s[c.toString(16)]=o})}return s}),Y3=t(function(s,r,o){if(s[o]=o,r[2]){var l=r[2].filter(function(c){return typeof c=="string"});l.forEach(function(c){s[c]=o})}return s}),K3=t(function(s,r,o){var l=r[2];return s[o]=o,l.forEach(function(c){s[c]=o}),s});var e="far"in $l||te.autoFetchSvg,i=wf(RS,function(s,r){var o=r[0],l=r[1],c=r[2];return l==="far"&&!e&&(l="fas"),typeof o=="string"&&(s.names[o]={prefix:l,iconName:c}),typeof o=="number"&&(s.unicodes[o.toString(16)]={prefix:l,iconName:c}),s},{names:{},unicodes:{}});q3=i.names,$3=i.unicodes,Tm=Pu(te.styleDefault,{family:te.familyDefault})};bS(function(n){Tm=Pu(n.styleDefault,{family:te.familyDefault})});J3();function Em(n,t){return(Z3[n]||{})[t]}function OS(n,t){return(Y3[n]||{})[t]}function co(n,t){return(K3[n]||{})[t]}function Q3(n){return q3[n]||{prefix:null,iconName:null}}function NS(n){var t=$3[n],e=Em("fas",n);return t||(e?{prefix:"fas",iconName:e}:null)||{prefix:null,iconName:null}}function Lr(){return Tm}var tx=function(){return{prefix:null,iconName:null,rest:[]}};function kS(n){var t=Xn,e=X3.reduce(function(i,s){return i[s]="".concat(te.cssPrefix,"-").concat(s),i},{});return A3.forEach(function(i){(n.includes(e[i])||n.some(function(s){return LS[i].includes(s)}))&&(t=i)}),t}function Pu(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=t.family,i=e===void 0?Xn:e,s=fS[i][n];if(i===gc&&!n)return"fad";var r=D1[i][n]||D1[i][s],o=n in Gi.styles?n:null,l=r||o||null;return l}function FS(n){var t=[],e=null;return n.forEach(function(i){var s=DS(te.cssPrefix,i);s?e=s:i&&t.push(i)}),{iconName:e,rest:t}}function U1(n){return n.sort().filter(function(t,e,i){return i.indexOf(t)===e})}var B1=R3.concat(P3);function Ru(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=t.skipLookups,i=e===void 0?!1:e,s=null,r=U1(n.filter(function(g){return B1.includes(g)})),o=U1(n.filter(function(g){return!B1.includes(g)})),l=r.filter(function(g){return s=g,!p3.includes(g)}),c=Eu(l,1),h=c[0],f=h===void 0?null:h,d=kS(r),p=bt(bt({},FS(o)),{},{prefix:Pu(f,{family:d})});return bt(bt(bt({},p),HS({values:n,family:d,styles:$l,config:te,canonical:p,givenPrefix:s})),US(i,s,p))}function US(n,t,e){var i=e.prefix,s=e.iconName;if(n||!i||!s)return{prefix:i,iconName:s};var r=t==="fa"?Q3(s):{},o=co(i,s);return s=r.iconName||o||s,i=r.prefix||i,i==="far"&&!$l.far&&$l.fas&&!te.autoFetchSvg&&(i="fas"),{prefix:i,iconName:s}}var BS=A3.filter(function(n){return n!==Xn||n!==gc}),zS=Object.keys(Wd).filter(function(n){return n!==Xn}).map(function(n){return Object.keys(Wd[n])}).flat();function HS(n){var t=n.values,e=n.family,i=n.canonical,s=n.givenPrefix,r=s===void 0?"":s,o=n.styles,l=o===void 0?{}:o,c=n.config,h=c===void 0?{}:c,f=e===gc,d=t.includes("fa-duotone")||t.includes("fad"),p=h.familyDefault==="duotone",g=i.prefix==="fad"||i.prefix==="fa-duotone";if(!f&&(d||p||g)&&(i.prefix="fad"),(t.includes("fa-brands")||t.includes("fab"))&&(i.prefix="fab"),!i.prefix&&BS.includes(e)){var v=Object.keys(l).find(function(x){return zS.includes(x)});if(v||h.autoFetchSvg){var y=hM.get(e).defaultShortPrefixId;i.prefix=y,i.iconName=co(i.prefix,i.iconName)||i.iconName}}return(i.prefix==="fa"||r==="fa")&&(i.prefix=Lr()||"fas"),i}var VS=(function(){function n(){N5(this,n),this.definitions={}}return F5(n,[{key:"add",value:function(){for(var e=this,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];var o=s.reduce(this._pullDefinitions,{});Object.keys(o).forEach(function(l){e.definitions[l]=bt(bt({},e.definitions[l]||{}),o[l]),j3(l,o[l]),J3()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,i){var s=i.prefix&&i.iconName&&i.icon?{0:i}:i;return Object.keys(s).map(function(r){var o=s[r],l=o.prefix,c=o.iconName,h=o.icon,f=h[2];e[l]||(e[l]={}),f.length>0&&f.forEach(function(d){typeof d=="string"&&(e[l][d]=h)}),e[l][c]=h}),e}}])})(),z1=[],oa={},ua={},WS=Object.keys(ua);function GS(n,t){var e=t.mixoutsTo;return z1=n,oa={},Object.keys(ua).forEach(function(i){WS.indexOf(i)===-1&&delete ua[i]}),z1.forEach(function(i){var s=i.mixout?i.mixout():{};if(Object.keys(s).forEach(function(o){typeof s[o]=="function"&&(e[o]=s[o]),Qh(s[o])==="object"&&Object.keys(s[o]).forEach(function(l){e[o]||(e[o]={}),e[o][l]=s[o][l]})}),i.hooks){var r=i.hooks();Object.keys(r).forEach(function(o){oa[o]||(oa[o]=[]),oa[o].push(r[o])})}i.provides&&i.provides(ua)}),e}function qd(n,t){for(var e=arguments.length,i=new Array(e>2?e-2:0),s=2;s<e;s++)i[s-2]=arguments[s];var r=oa[n]||[];return r.forEach(function(o){t=o.apply(null,[t].concat(i))}),t}function bo(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];var s=oa[n]||[];s.forEach(function(r){r.apply(null,e)})}function Ir(){var n=arguments[0],t=Array.prototype.slice.call(arguments,1);return ua[n]?ua[n].apply(null,t):void 0}function $d(n){n.prefix==="fa"&&(n.prefix="fas");var t=n.iconName,e=n.prefix||Lr();if(t)return t=co(e,t)||t,k1(ex.definitions,e,t)||k1(Gi.styles,e,t)}var ex=new VS,jS=function(){te.autoReplaceSvg=!1,te.observeMutations=!1,bo("noAuto")},XS={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return tr?(bo("beforeI2svg",t),Ir("pseudoElements2svg",t),Ir("i2svg",t)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.autoReplaceSvgRoot;te.autoReplaceSvg===!1&&(te.autoReplaceSvg=!0),te.observeMutations=!0,PS(function(){YS({autoReplaceSvgRoot:e}),bo("watch",t)})}},ZS={icon:function(t){if(t===null)return null;if(Qh(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:co(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var e=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],i=Pu(t[0]);return{prefix:i,iconName:co(i,e)||e}}if(typeof t=="string"&&(t.indexOf("".concat(te.cssPrefix,"-"))>-1||t.match(dS))){var s=Ru(t.split(" "),{skipLookups:!0});return{prefix:s.prefix||Lr(),iconName:co(s.prefix,s.iconName)||s.iconName}}if(typeof t=="string"){var r=Lr();return{prefix:r,iconName:co(r,t)||t}}}},Mi={noAuto:jS,config:te,dom:XS,parse:ZS,library:ex,findIconDefinition:$d,toHtml:vc},YS=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.autoReplaceSvgRoot,i=e===void 0?ln:e;(Object.keys(Gi.styles).length>0||te.autoFetchSvg)&&tr&&te.autoReplaceSvg&&Mi.dom.i2svg({node:i})};function Lu(n,t){return Object.defineProperty(n,"abstract",{get:t}),Object.defineProperty(n,"html",{get:function(){return n.abstract.map(function(i){return vc(i)})}}),Object.defineProperty(n,"node",{get:function(){if(tr){var i=ln.createElement("div");return i.innerHTML=n.html,i.children}}}),n}function qS(n){var t=n.children,e=n.main,i=n.mask,s=n.attributes,r=n.styles,o=n.transform;if(wm(o)&&e.found&&!i.found){var l=e.width,c=e.height,h={x:l/c/2,y:.5};s.style=Au(bt(bt({},r),{},{"transform-origin":"".concat(h.x+o.x/16,"em ").concat(h.y+o.y/16,"em")}))}return[{tag:"svg",attributes:s,children:t}]}function $S(n){var t=n.prefix,e=n.iconName,i=n.children,s=n.attributes,r=n.symbol,o=r===!0?"".concat(t,"-").concat(te.cssPrefix,"-").concat(e):r;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:bt(bt({},s),{},{id:o}),children:i}]}]}function KS(n){var t=["aria-label","aria-labelledby","title","role"];return t.some(function(e){return e in n})}function Am(n){var t=n.icons,e=t.main,i=t.mask,s=n.prefix,r=n.iconName,o=n.transform,l=n.symbol,c=n.maskId,h=n.extra,f=n.watchable,d=f===void 0?!1:f,p=i.found?i:e,g=p.width,v=p.height,y=[te.replacementClass,r?"".concat(te.cssPrefix,"-").concat(r):""].filter(function(T){return h.classes.indexOf(T)===-1}).filter(function(T){return T!==""||!!T}).concat(h.classes).join(" "),x={children:[],attributes:bt(bt({},h.attributes),{},{"data-prefix":s,"data-icon":r,class:y,role:h.attributes.role||"img",viewBox:"0 0 ".concat(g," ").concat(v)})};!KS(h.attributes)&&!h.attributes["aria-hidden"]&&(x.attributes["aria-hidden"]="true"),d&&(x.attributes[yo]="");var _=bt(bt({},x),{},{prefix:s,iconName:r,main:e,mask:i,maskId:c,transform:o,symbol:l,styles:bt({},h.styles)}),w=i.found&&e.found?Ir("generateAbstractMask",_)||{children:[],attributes:{}}:Ir("generateAbstractIcon",_)||{children:[],attributes:{}},C=w.children,S=w.attributes;return _.children=C,_.attributes=S,l?$S(_):qS(_)}function H1(n){var t=n.content,e=n.width,i=n.height,s=n.transform,r=n.extra,o=n.watchable,l=o===void 0?!1:o,c=bt(bt({},r.attributes),{},{class:r.classes.join(" ")});l&&(c[yo]="");var h=bt({},r.styles);wm(s)&&(h.transform=TS({transform:s,width:e,height:i}),h["-webkit-transform"]=h.transform);var f=Au(h);f.length>0&&(c.style=f);var d=[];return d.push({tag:"span",attributes:c,children:[t]}),d}function JS(n){var t=n.content,e=n.extra,i=bt(bt({},e.attributes),{},{class:e.classes.join(" ")}),s=Au(e.styles);s.length>0&&(i.style=s);var r=[];return r.push({tag:"span",attributes:i,children:[t]}),r}var Tf=Gi.styles;function Kd(n){var t=n[0],e=n[1],i=n.slice(4),s=Eu(i,1),r=s[0],o=null;return Array.isArray(r)?o={tag:"g",attributes:{class:"".concat(te.cssPrefix,"-").concat(Sf.GROUP)},children:[{tag:"path",attributes:{class:"".concat(te.cssPrefix,"-").concat(Sf.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(te.cssPrefix,"-").concat(Sf.PRIMARY),fill:"currentColor",d:r[1]}}]}:o={tag:"path",attributes:{fill:"currentColor",d:r}},{found:!0,width:t,height:e,icon:o}}var QS={found:!1,width:512,height:512};function t8(n,t){!N3&&!te.showMissingIcons&&n&&console.error('Icon with name "'.concat(n,'" and prefix "').concat(t,'" is missing.'))}function Jd(n,t){var e=t;return t==="fa"&&te.styleDefault!==null&&(t=Lr()),new Promise(function(i,s){if(e==="fa"){var r=Q3(n)||{};n=r.iconName||n,t=r.prefix||t}if(n&&t&&Tf[t]&&Tf[t][n]){var o=Tf[t][n];return i(Kd(o))}t8(n,t),i(bt(bt({},QS),{},{icon:te.showMissingIcons&&n?Ir("missingIconAbstract")||{}:{}}))})}var V1=function(){},Qd=te.measurePerformance&&Vc&&Vc.mark&&Vc.measure?Vc:{mark:V1,measure:V1},Al='FA "7.0.0"',e8=function(t){return Qd.mark("".concat(Al," ").concat(t," begins")),function(){return nx(t)}},nx=function(t){Qd.mark("".concat(Al," ").concat(t," ends")),Qd.measure("".concat(Al," ").concat(t),"".concat(Al," ").concat(t," begins"),"".concat(Al," ").concat(t," ends"))},Pm={begin:e8,end:nx},Nh=function(){};function W1(n){var t=n.getAttribute?n.getAttribute(yo):null;return typeof t=="string"}function n8(n){var t=n.getAttribute?n.getAttribute(Mm):null,e=n.getAttribute?n.getAttribute(Sm):null;return t&&e}function i8(n){return n&&n.classList&&n.classList.contains&&n.classList.contains(te.replacementClass)}function s8(){if(te.autoReplaceSvg===!0)return kh.replace;var n=kh[te.autoReplaceSvg];return n||kh.replace}function r8(n){return ln.createElementNS("http://www.w3.org/2000/svg",n)}function o8(n){return ln.createElement(n)}function ix(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=t.ceFn,i=e===void 0?n.tag==="svg"?r8:o8:e;if(typeof n=="string")return ln.createTextNode(n);var s=i(n.tag);Object.keys(n.attributes||[]).forEach(function(o){s.setAttribute(o,n.attributes[o])});var r=n.children||[];return r.forEach(function(o){s.appendChild(ix(o,{ceFn:i}))}),s}function a8(n){var t=" ".concat(n.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var kh={replace:function(t){var e=t[0];if(e.parentNode)if(t[1].forEach(function(s){e.parentNode.insertBefore(ix(s),e)}),e.getAttribute(yo)===null&&te.keepOriginalSource){var i=ln.createComment(a8(e));e.parentNode.replaceChild(i,e)}else e.remove()},nest:function(t){var e=t[0],i=t[1];if(~Cm(e).indexOf(te.replacementClass))return kh.replace(t);var s=new RegExp("".concat(te.cssPrefix,"-.*"));if(delete i[0].attributes.id,i[0].attributes.class){var r=i[0].attributes.class.split(" ").reduce(function(l,c){return c===te.replacementClass||c.match(s)?l.toSvg.push(c):l.toNode.push(c),l},{toNode:[],toSvg:[]});i[0].attributes.class=r.toSvg.join(" "),r.toNode.length===0?e.removeAttribute("class"):e.setAttribute("class",r.toNode.join(" "))}var o=i.map(function(l){return vc(l)}).join(`
`);e.setAttribute(yo,""),e.innerHTML=o}};function G1(n){n()}function sx(n,t){var e=typeof t=="function"?t:Nh;if(n.length===0)e();else{var i=G1;te.mutateApproach===hS&&(i=Rr.requestAnimationFrame||G1),i(function(){var s=s8(),r=Pm.begin("mutate");n.map(s),r(),e()})}}var Rm=!1;function rx(){Rm=!0}function tp(){Rm=!1}var eu=null;function j1(n){if(P1&&te.observeMutations){var t=n.treeCallback,e=t===void 0?Nh:t,i=n.nodeCallback,s=i===void 0?Nh:i,r=n.pseudoElementsCallback,o=r===void 0?Nh:r,l=n.observeMutationsRoot,c=l===void 0?ln:l;eu=new P1(function(h){if(!Rm){var f=Lr();Va(h).forEach(function(d){if(d.type==="childList"&&d.addedNodes.length>0&&!W1(d.addedNodes[0])&&(te.searchPseudoElements&&o(d.target),e(d.target)),d.type==="attributes"&&d.target.parentNode&&te.searchPseudoElements&&o([d.target],!0),d.type==="attributes"&&W1(d.target)&&~gS.indexOf(d.attributeName))if(d.attributeName==="class"&&n8(d.target)){var p=Ru(Cm(d.target)),g=p.prefix,v=p.iconName;d.target.setAttribute(Mm,g||f),v&&d.target.setAttribute(Sm,v)}else i8(d.target)&&s(d.target)})}}),tr&&eu.observe(c,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function l8(){eu&&eu.disconnect()}function c8(n){var t=n.getAttribute("style"),e=[];return t&&(e=t.split(";").reduce(function(i,s){var r=s.split(":"),o=r[0],l=r.slice(1);return o&&l.length>0&&(i[o]=l.join(":").trim()),i},{})),e}function h8(n){var t=n.getAttribute("data-prefix"),e=n.getAttribute("data-icon"),i=n.innerText!==void 0?n.innerText.trim():"",s=Ru(Cm(n));return s.prefix||(s.prefix=Lr()),t&&e&&(s.prefix=t,s.iconName=e),s.iconName&&s.prefix||(s.prefix&&i.length>0&&(s.iconName=OS(s.prefix,n.innerText)||Em(s.prefix,G3(n.innerText))),!s.iconName&&te.autoFetchSvg&&n.firstChild&&n.firstChild.nodeType===Node.TEXT_NODE&&(s.iconName=n.firstChild.data)),s}function u8(n){var t=Va(n.attributes).reduce(function(e,i){return e.name!=="class"&&e.name!=="style"&&(e[i.name]=i.value),e},{});return t}function f8(){return{iconName:null,prefix:null,transform:ls,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function X1(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},e=h8(n),i=e.iconName,s=e.prefix,r=e.rest,o=u8(n),l=qd("parseNodeAttributes",{},n),c=t.styleParser?c8(n):[];return bt({iconName:i,prefix:s,transform:ls,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:r,styles:c,attributes:o}},l)}var d8=Gi.styles;function ox(n){var t=te.autoReplaceSvg==="nest"?X1(n,{styleParser:!1}):X1(n);return~t.extra.classes.indexOf(U3)?Ir("generateLayersText",n,t):Ir("generateSvgReplacementMutation",n,t)}function p8(){return[].concat($i(P3),$i(R3))}function Z1(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!tr)return Promise.resolve();var e=ln.documentElement.classList,i=function(d){return e.add("".concat(I1,"-").concat(d))},s=function(d){return e.remove("".concat(I1,"-").concat(d))},r=te.autoFetchSvg?p8():p3.concat(Object.keys(d8));r.includes("fa")||r.push("fa");var o=[".".concat(U3,":not([").concat(yo,"])")].concat(r.map(function(f){return".".concat(f,":not([").concat(yo,"])")})).join(", ");if(o.length===0)return Promise.resolve();var l=[];try{l=Va(n.querySelectorAll(o))}catch{}if(l.length>0)i("pending"),s("complete");else return Promise.resolve();var c=Pm.begin("onTree"),h=l.reduce(function(f,d){try{var p=ox(d);p&&f.push(p)}catch(g){N3||g.name==="MissingIcon"&&console.error(g)}return f},[]);return new Promise(function(f,d){Promise.all(h).then(function(p){sx(p,function(){i("active"),i("complete"),s("pending"),typeof t=="function"&&t(),c(),f()})}).catch(function(p){c(),d(p)})})}function m8(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;ox(n).then(function(e){e&&sx([e],t)})}function g8(n){return function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=(t||{}).icon?t:$d(t||{}),s=e.mask;return s&&(s=(s||{}).icon?s:$d(s||{})),n(i,bt(bt({},e),{},{mask:s}))}}var _8=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=e.transform,s=i===void 0?ls:i,r=e.symbol,o=r===void 0?!1:r,l=e.mask,c=l===void 0?null:l,h=e.maskId,f=h===void 0?null:h,d=e.classes,p=d===void 0?[]:d,g=e.attributes,v=g===void 0?{}:g,y=e.styles,x=y===void 0?{}:y;if(t){var _=t.prefix,w=t.iconName,C=t.icon;return Lu(bt({type:"icon"},t),function(){return bo("beforeDOMElementCreation",{iconDefinition:t,params:e}),Am({icons:{main:Kd(C),mask:c?Kd(c.icon):{found:!1,width:null,height:null,icon:{}}},prefix:_,iconName:w,transform:bt(bt({},ls),s),symbol:o,maskId:f,extra:{attributes:v,styles:x,classes:p}})})}},v8={mixout:function(){return{icon:g8(_8)}},hooks:function(){return{mutationObserverCallbacks:function(e){return e.treeCallback=Z1,e.nodeCallback=m8,e}}},provides:function(t){t.i2svg=function(e){var i=e.node,s=i===void 0?ln:i,r=e.callback,o=r===void 0?function(){}:r;return Z1(s,o)},t.generateSvgReplacementMutation=function(e,i){var s=i.iconName,r=i.prefix,o=i.transform,l=i.symbol,c=i.mask,h=i.maskId,f=i.extra;return new Promise(function(d,p){Promise.all([Jd(s,r),c.iconName?Jd(c.iconName,c.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(g){var v=Eu(g,2),y=v[0],x=v[1];d([e,Am({icons:{main:y,mask:x},prefix:r,iconName:s,transform:o,symbol:l,maskId:h,extra:f,watchable:!0})])}).catch(p)})},t.generateAbstractIcon=function(e){var i=e.children,s=e.attributes,r=e.main,o=e.transform,l=e.styles,c=Au(l);c.length>0&&(s.style=c);var h;return wm(o)&&(h=Ir("generateAbstractTransformGrouping",{main:r,transform:o,containerWidth:r.width,iconWidth:r.width})),i.push(h||r.icon),{children:i,attributes:s}}}},x8={mixout:function(){return{layer:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.classes,r=s===void 0?[]:s;return Lu({type:"layer"},function(){bo("beforeDOMElementCreation",{assembler:e,params:i});var o=[];return e(function(l){Array.isArray(l)?l.map(function(c){o=o.concat(c.abstract)}):o=o.concat(l.abstract)}),[{tag:"span",attributes:{class:["".concat(te.cssPrefix,"-layers")].concat($i(r)).join(" ")},children:o}]})}}}},y8={mixout:function(){return{counter:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i.title;var s=i.classes,r=s===void 0?[]:s,o=i.attributes,l=o===void 0?{}:o,c=i.styles,h=c===void 0?{}:c;return Lu({type:"counter",content:e},function(){return bo("beforeDOMElementCreation",{content:e,params:i}),JS({content:e.toString(),extra:{attributes:l,styles:h,classes:["".concat(te.cssPrefix,"-layers-counter")].concat($i(r))}})})}}}},b8={mixout:function(){return{text:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.transform,r=s===void 0?ls:s,o=i.classes,l=o===void 0?[]:o,c=i.attributes,h=c===void 0?{}:c,f=i.styles,d=f===void 0?{}:f;return Lu({type:"text",content:e},function(){return bo("beforeDOMElementCreation",{content:e,params:i}),H1({content:e,transform:bt(bt({},ls),r),extra:{attributes:h,styles:d,classes:["".concat(te.cssPrefix,"-layers-text")].concat($i(l))}})})}}},provides:function(t){t.generateLayersText=function(e,i){var s=i.transform,r=i.extra,o=null,l=null;if(f3){var c=parseInt(getComputedStyle(e).fontSize,10),h=e.getBoundingClientRect();o=h.width/c,l=h.height/c}return Promise.resolve([e,H1({content:e.innerHTML,width:o,height:l,transform:s,extra:r,watchable:!0})])}}},ax=new RegExp('"',"ug"),Y1=[1105920,1112319],q1=bt(bt(bt(bt({},{FontAwesome:{normal:"fas",400:"fas"}}),cM),lS),vM),ep=Object.keys(q1).reduce(function(n,t){return n[t.toLowerCase()]=q1[t],n},{}),M8=Object.keys(ep).reduce(function(n,t){var e=ep[t];return n[t]=e[900]||$i(Object.entries(e))[0][1],n},{});function S8(n){var t=n.replace(ax,"");return G3($i(t)[0]||"")}function C8(n){var t=n.getPropertyValue("font-feature-settings").includes("ss01"),e=n.getPropertyValue("content"),i=e.replace(ax,""),s=i.codePointAt(0),r=s>=Y1[0]&&s<=Y1[1],o=i.length===2?i[0]===i[1]:!1;return r||o||t}function w8(n,t){var e=n.replace(/^['"]|['"]$/g,"").toLowerCase(),i=parseInt(t),s=isNaN(i)?"normal":i;return(ep[e]||{})[s]||M8[e]}function $1(n,t){var e="".concat(cS).concat(t.replace(":","-"));return new Promise(function(i,s){if(n.getAttribute(e)!==null)return i();var r=Va(n.children),o=r.filter(function(A){return A.getAttribute(jd)===t})[0],l=Rr.getComputedStyle(n,t),c=l.getPropertyValue("font-family"),h=c.match(pS),f=l.getPropertyValue("font-weight"),d=l.getPropertyValue("content");if(o&&!h)return n.removeChild(o),i();if(h&&d!=="none"&&d!==""){var p=l.getPropertyValue("content"),g=w8(c,f),v=S8(p),y=h[0].startsWith("FontAwesome"),x=C8(l),_=Em(g,v),w=_;if(y){var C=NS(v);C.iconName&&C.prefix&&(_=C.iconName,g=C.prefix)}if(_&&!x&&(!o||o.getAttribute(Mm)!==g||o.getAttribute(Sm)!==w)){n.setAttribute(e,w),o&&n.removeChild(o);var S=f8(),T=S.extra;T.attributes[jd]=t,Jd(_,g).then(function(A){var P=Am(bt(bt({},S),{},{icons:{main:A,mask:tx()},prefix:g,iconName:w,extra:T,watchable:!0})),N=ln.createElementNS("http://www.w3.org/2000/svg","svg");t==="::before"?n.insertBefore(N,n.firstChild):n.appendChild(N),N.outerHTML=P.map(function(E){return vc(E)}).join(`
`),n.removeAttribute(e),i()}).catch(s)}else i()}else i()})}function T8(n){return Promise.all([$1(n,"::before"),$1(n,"::after")])}function E8(n){return n.parentNode!==document.head&&!~uS.indexOf(n.tagName.toUpperCase())&&!n.getAttribute(jd)&&(!n.parentNode||n.parentNode.tagName!=="svg")}var A8=function(t){return!!t&&O3.some(function(e){return t.includes(e)})},P8=function(t){if(!t)return[];for(var e=new Set,i=[t],s=[/(?=\s:)/,new RegExp("(?<=\\)\\)?[^,]*,)")],r=function(){var g=l[o];i=i.flatMap(function(v){return v.split(g).map(function(y){return y.replace(/,\s*$/,"").trim()})})},o=0,l=s;o<l.length;o++)r();i=i.flatMap(function(p){return p.includes("(")?p:p.split(",").map(function(g){return g.trim()})});var c=Oh(i),h;try{for(c.s();!(h=c.n()).done;){var f=h.value;if(A8(f)){var d=O3.reduce(function(p,g){return p.replace(g,"")},f);d!==""&&d!=="*"&&e.add(d)}}}catch(p){c.e(p)}finally{c.f()}return e};function K1(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(tr){var e;if(t)e=n;else if(te.searchPseudoElementsFullScan)e=n.querySelectorAll("*");else{var i=new Set,s=Oh(document.styleSheets),r;try{for(s.s();!(r=s.n()).done;){var o=r.value;try{var l=Oh(o.cssRules),c;try{for(l.s();!(c=l.n()).done;){var h=c.value,f=P8(h.selectorText),d=Oh(f),p;try{for(d.s();!(p=d.n()).done;){var g=p.value;i.add(g)}}catch(y){d.e(y)}finally{d.f()}}}catch(y){l.e(y)}finally{l.f()}}catch(y){te.searchPseudoElementsWarnings&&console.warn("Font Awesome: cannot parse stylesheet: ".concat(o.href," (").concat(y.message,`)
If it declares any Font Awesome CSS pseudo-elements, they will not be rendered as SVG icons. Add crossorigin="anonymous" to the <link>, enable searchPseudoElementsFullScan for slower but more thorough DOM parsing, or suppress this warning by setting searchPseudoElementsWarnings to false.`))}}}catch(y){s.e(y)}finally{s.f()}if(!i.size)return;var v=Array.from(i).join(", ");try{e=n.querySelectorAll(v)}catch{}}return new Promise(function(y,x){var _=Va(e).filter(E8).map(T8),w=Pm.begin("searchPseudoElements");rx(),Promise.all(_).then(function(){w(),tp(),y()}).catch(function(){w(),tp(),x()})})}}var R8={hooks:function(){return{mutationObserverCallbacks:function(e){return e.pseudoElementsCallback=K1,e}}},provides:function(t){t.pseudoElements2svg=function(e){var i=e.node,s=i===void 0?ln:i;te.searchPseudoElements&&K1(s)}}},J1=!1,L8={mixout:function(){return{dom:{unwatch:function(){rx(),J1=!0}}}},hooks:function(){return{bootstrap:function(){j1(qd("mutationObserverCallbacks",{}))},noAuto:function(){l8()},watch:function(e){var i=e.observeMutationsRoot;J1?tp():j1(qd("mutationObserverCallbacks",{observeMutationsRoot:i}))}}}},Q1=function(t){var e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(i,s){var r=s.toLowerCase().split("-"),o=r[0],l=r.slice(1).join("-");if(o&&l==="h")return i.flipX=!0,i;if(o&&l==="v")return i.flipY=!0,i;if(l=parseFloat(l),isNaN(l))return i;switch(o){case"grow":i.size=i.size+l;break;case"shrink":i.size=i.size-l;break;case"left":i.x=i.x-l;break;case"right":i.x=i.x+l;break;case"up":i.y=i.y-l;break;case"down":i.y=i.y+l;break;case"rotate":i.rotate=i.rotate+l;break}return i},e)},I8={mixout:function(){return{parse:{transform:function(e){return Q1(e)}}}},hooks:function(){return{parseNodeAttributes:function(e,i){var s=i.getAttribute("data-fa-transform");return s&&(e.transform=Q1(s)),e}}},provides:function(t){t.generateAbstractTransformGrouping=function(e){var i=e.main,s=e.transform,r=e.containerWidth,o=e.iconWidth,l={transform:"translate(".concat(r/2," 256)")},c="translate(".concat(s.x*32,", ").concat(s.y*32,") "),h="scale(".concat(s.size/16*(s.flipX?-1:1),", ").concat(s.size/16*(s.flipY?-1:1),") "),f="rotate(".concat(s.rotate," 0 0)"),d={transform:"".concat(c," ").concat(h," ").concat(f)},p={transform:"translate(".concat(o/2*-1," -256)")},g={outer:l,inner:d,path:p};return{tag:"g",attributes:bt({},g.outer),children:[{tag:"g",attributes:bt({},g.inner),children:[{tag:i.icon.tag,children:i.icon.children,attributes:bt(bt({},i.icon.attributes),g.path)}]}]}}}},Ef={x:0,y:0,width:"100%",height:"100%"};function t_(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n.attributes&&(n.attributes.fill||t)&&(n.attributes.fill="black"),n}function D8(n){return n.tag==="g"?n.children:[n]}var O8={hooks:function(){return{parseNodeAttributes:function(e,i){var s=i.getAttribute("data-fa-mask"),r=s?Ru(s.split(" ").map(function(o){return o.trim()})):tx();return r.prefix||(r.prefix=Lr()),e.mask=r,e.maskId=i.getAttribute("data-fa-mask-id"),e}}},provides:function(t){t.generateAbstractMask=function(e){var i=e.children,s=e.attributes,r=e.main,o=e.mask,l=e.maskId,c=e.transform,h=r.width,f=r.icon,d=o.width,p=o.icon,g=wS({transform:c,containerWidth:d,iconWidth:h}),v={tag:"rect",attributes:bt(bt({},Ef),{},{fill:"white"})},y=f.children?{children:f.children.map(t_)}:{},x={tag:"g",attributes:bt({},g.inner),children:[t_(bt({tag:f.tag,attributes:bt(bt({},f.attributes),g.path)},y))]},_={tag:"g",attributes:bt({},g.outer),children:[x]},w="mask-".concat(l||O1()),C="clip-".concat(l||O1()),S={tag:"mask",attributes:bt(bt({},Ef),{},{id:w,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[v,_]},T={tag:"defs",children:[{tag:"clipPath",attributes:{id:C},children:D8(p)},S]};return i.push(T,{tag:"rect",attributes:bt({fill:"currentColor","clip-path":"url(#".concat(C,")"),mask:"url(#".concat(w,")")},Ef)}),{children:i,attributes:s}}}},N8={provides:function(t){var e=!1;Rr.matchMedia&&(e=Rr.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var i=[],s={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};i.push({tag:"path",attributes:bt(bt({},s),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var o=bt(bt({},r),{},{attributeName:"opacity"}),l={tag:"circle",attributes:bt(bt({},s),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||l.children.push({tag:"animate",attributes:bt(bt({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:bt(bt({},o),{},{values:"1;0;1;1;0;1;"})}),i.push(l),i.push({tag:"path",attributes:bt(bt({},s),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:bt(bt({},o),{},{values:"1;0;0;0;0;1;"})}]}),e||i.push({tag:"path",attributes:bt(bt({},s),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:bt(bt({},o),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:i}}}},k8={hooks:function(){return{parseNodeAttributes:function(e,i){var s=i.getAttribute("data-fa-symbol"),r=s===null?!1:s===""?!0:s;return e.symbol=r,e}}}},F8=[AS,v8,x8,y8,b8,R8,L8,I8,O8,N8,k8];GS(F8,{mixoutsTo:Mi});Mi.noAuto;Mi.config;Mi.library;Mi.dom;var np=Mi.parse;Mi.findIconDefinition;Mi.toHtml;var U8=Mi.icon;Mi.layer;Mi.text;Mi.counter;let lx=!1;try{lx=!0}catch{}function B8(...n){!lx&&console&&typeof console.error=="function"&&console.error(...n)}function e_(n){if(n&&typeof n=="object"&&n.prefix&&n.iconName&&n.icon)return n;if(np.icon)return np.icon(n);if(n===null)return null;if(n&&typeof n=="object"&&n.prefix&&n.iconName)return n;if(Array.isArray(n)&&n.length===2)return{prefix:n[0],iconName:n[1]};if(typeof n=="string")return{prefix:"fas",iconName:n}}function Af(n,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?{[n]:t}:{}}var z8=kr("<svg><!></svg>");function H8(n,t){tn(t,!1);let e=mt(t,"tag",8),i=mt(t,"props",8),s=mt(t,"children",8),r=mt(t,"style",8,null),o=mt(t,"ref",12,null);if(e()!=="svg")throw new Error('SvgElement requires a tag of "svg"');function l(v){return v?.reduce((y,x)=>y+(x.tag?c(x):x),"")||""}function c({tag:v,props:y,children:x}){const _=Object.keys(y).map(w=>`${w}="${y[w]}"`).join(" ");return`<${v} ${_}>${l(x)}</${v}>`}const h=l(s()),f=i()?.style?`${i().style}${r()||""}`:r(),d={...i(),style:f};vn();var p=z8();g5(p,()=>({...d}));var g=ut(p);Yv(g,()=>h,!0),Po(p,v=>o(v),()=>o()),Rt(n,p),en()}function mn(n,t){const e=M1(t,["children","$$slots","$$events","$$legacy"]),i=M1(e,["border","mask","maskId","fixedWidth","inverse","flip","icon","listItem","pull","pulse","rotation","size","spin","spinPulse","spinReverse","beat","fade","beatFade","bounce","shake","symbol","title","titleId","transform","swapOpacity","ref","style"]);tn(t,!1),mt(t,"border",8,!1);let s=mt(t,"mask",8,null),r=mt(t,"maskId",8,null);mt(t,"fixedWidth",8,!1),mt(t,"inverse",8,!1),mt(t,"flip",8,!1);let o=mt(t,"icon",8,null);mt(t,"listItem",8,!1),mt(t,"pull",8,null),mt(t,"pulse",8,!1),mt(t,"rotation",8,null),mt(t,"size",8,null),mt(t,"spin",8,!1),mt(t,"spinPulse",8,!1),mt(t,"spinReverse",8,!1),mt(t,"beat",8,!1),mt(t,"fade",8,!1),mt(t,"beatFade",8,!1),mt(t,"bounce",8,!1),mt(t,"shake",8,!1);let l=mt(t,"symbol",8,!1),c=mt(t,"title",8,""),h=mt(t,"titleId",8,null),f=mt(t,"transform",8,null);mt(t,"swapOpacity",8,!1);let d=mt(t,"ref",12,null),p=mt(t,"style",8,null);const g=e_(o()),v=Af("classes",[...P5(e),...(e.class||"").split(" ")]),y=Af("transform",typeof f()=="string"?np.transform(f()):f()),x=Af("mask",e_(s())),_=U8(g,{...v,...y,...x,symbol:l(),title:c(),titleId:h(),maskId:r()});let w=xe(null);if(!_)B8("Could not find icon",g);else{const{abstract:A}=_;Ft(w,a3((P,N,E)=>({tag:P,props:N,children:E}),A[0],i))}vn();var C=Bn(),S=xn(C);{var T=A=>{H8(A,Hd(()=>U(w),{get style(){return p()},get ref(){return d()},set ref(P){d(P)},$$legacy:!0}))};gn(S,A=>{U(w)&&A(T)})}Rt(n,C),en()}const eo={prefix:"fac",iconName:"faMap",icon:[461,459,[],null,"M27.691 424.958V409.428C27.691 394.473 27.691 364.859 27.5472 349.028C27.393 332.043 26.8197 327.987 26.676 323.056C26.3546 312.033 26.5235 296.326 27.6866 291.817C28.1795 289.906 28.5623 274.954 28.4185 253.033C28.3159 237.386 27.116 224.586 26.9635 211.552C26.8874 205.043 29.1373 201.062 30.3004 197.573C32.6025 190.667 30.601 179.281 29.5816 175.648C28.4364 171.566 28.5623 166.229 27.8391 159.12C26.0872 141.896 29.1373 138.332 29.5773 133.396C30.5283 122.728 29.7297 105.224 28.5666 101.735C27.4035 98.2452 26.2447 94.1939 25.0816 90.4083C24.0013 86.8923 22.7597 83.4425 20.8734 79.9532C19.9774 78.2956 19.8497 76.1763 20.1372 74.0025C20.9997 72.1162 22.1672 70.365 23.4697 68.7706C24.1972 68.0387 25.0598 67.4637 25.9485 66M311.639 418.859C312.502 418.284 313.364 417.709 313.233 416.838C312.386 411.188 306.429 408.126 304.53 404.932C302.501 401.522 301.48 397.967 299.594 394.334C297.559 390.414 297.699 386.065 296.976 380.694C295.906 372.751 295.956 361.74 295.233 354.256C294.825 350.036 294.214 339.087 293.491 329.159C292.285 312.613 291.896 308.523 291.456 303.291C291.014 298.036 290.154 291.673 290.001 276.614C289.938 270.384 292.175 265.832 292.615 260.6C292.986 256.194 293.918 251.595 294.358 243.767C295.008 232.197 294.51 214.131 293.491 209.775C292.361 204.946 292.471 196.741 291.748 182.413C291.276 173.062 291.6 155.513 291.456 145.903C291.295 135.136 290.729 124.183 290.873 108.652C291.004 94.4981 292.175 81.7 293.338 78.2106C294.501 74.7213 295.66 71.2449 297.69 67.7555C298.274 66.8799 298.849 66.0174 299.441 66M437.592 35C437.592 37.5789 438.167 46.3089 438.607 57.0297C438.836 62.6181 439.622 66.3565 440.058 83.908C440.472 100.593 440.206 133.086 440.062 150.254C439.894 170.349 438.463 176.684 437.74 189.844C437.258 198.619 437.592 215.019 437.448 224.037C437.248 236.559 435.571 243.475 433.536 251.181C432.73 254.234 431.232 259.105 430.491 269.673C429.751 280.242 429.751 296.343 429.607 305.068C429.449 314.665 428.879 325.033 429.023 339.84C429.114 349.238 430.326 355.606 430.766 359.818C431.187 363.85 432.364 370.103 433.231 374.921C434.107 379.713 434.394 383.495 435.261 384.658C435.841 384.958 436.703 384.671 437.592 382.632M149.426 35.0227C150.227 34.222 150.639 54.6269 150.84 87.1691C150.924 100.909 151.853 113.767 151.652 130.945C151.559 138.937 150.239 142.166 149.632 151.999C148.214 174.999 149.827 191.905 150.433 195.932C152.004 206.362 151.853 236.936 150.645 254.781C150.546 256.254 149.839 257.802 149.632 270.637C149.426 283.472 149.426 307.492 149.626 320.466C149.884 337.138 151.853 345.123 153.06 351.631C153.866 354.052 154.279 359.292 153.678 365.758C153.078 368.221 151.877 369.022 147 369.847M50.6708 438.461C52.6622 437.328 61.7606 430.496 67.9663 425.741C72.22 422.481 81.5023 415.338 92.5534 405.304C96.8633 401.39 102.137 397.57 110.154 391.703C115.366 387.889 119.887 383.837 123.758 381.532C128.093 378.951 133.603 375.253 138.208 373.09C141.876 371.367 145.071 368.661 149.221 366.228C153.257 363.861 156.229 360.936 159.667 359.923C163.292 358.855 168.795 364.902 186.219 376.901C195.343 383.184 201.137 383.802 205.3 385.952C209.484 388.113 214.304 389.244 219.733 391.527C231.599 396.517 236.621 396.969 243.054 400.394C252.269 405.299 264.929 408.402 270.388 410.132C274.708 411.5 278.68 413.278 282.551 415.136C286.473 417.019 290.13 417.569 294.28 419.427C297.678 420.949 301.855 421.569 305.584 423.007C307.268 423.656 309.022 424.153 310.734 424.44C314.662 425.1 319.021 419.595 324.309 417.157C330.603 414.255 336.763 412.428 342.458 411.149C351.713 409.071 365.028 405.57 378.886 403.853C388.44 402.669 394.272 402.986 400.392 402.557C410.761 402.411 418.88 402.128 421.88 401.699C423.181 401.553 424.03 401.553 424.906 399.836M48.9542 55.6427C46.9716 56.7756 44.9886 57.9087 44.5337 58.2091C42.0941 59.8202 57.4517 53.102 65.1038 50.3553C70.2247 48.5172 76.9703 45.9263 89.2488 41.4973C95.7261 39.1608 101.296 36.4846 106.87 33.622C110.643 31.6851 114.171 30.1844 117.608 28.3261C120.839 26.5797 124.471 25.3262 127.908 23.1761C131.022 21.2287 134.771 20.7427 138.208 20.3092C143.355 19.6603 150.221 20.159 157.203 21.159C175.957 23.8446 184.228 27.5922 193.829 30.0256C208.43 33.7264 214.871 34.7507 221.313 36.609C227.157 38.295 232.329 39.9008 236.913 41.7591C241.404 43.58 245.496 45.0508 249.359 47.0507C255.052 49.9984 259.796 51.9175 263.526 53.9174C267.034 55.799 270.955 58.767 275.109 61.7841C280.244 65.5133 284.121 67.6422 287.559 68.9469C291.926 70.6043 296.996 64.8097 304.121 61.5266C314.601 56.6968 323.322 54.5011 326.317 53.7887C339.324 50.6954 357.08 45.9263 360.518 45.0594C364.374 44.0869 367.38 40.7763 370.818 39.3386C374.161 37.9404 377.68 37.0511 384.251 35.1928C390.933 33.3028 397.422 33.6177 400.86 32.4719C404.297 31.326 408.289 30.1844 412.018 29.7509C416.589 29.0342 421.464 28.751 423.743 28.3218C425.172 28.1759 427.155 28.1759 429.198 28.1759"]},Fh={prefix:"fac",iconName:"faBlueprint",icon:[480,448,[],null,"M128.456 28.3986C117.863 22.9168 108.257 21.5489 101.911 21.0296C90.8175 20.1216 74.9956 20.8496 69.1693 22.2226C64.3023 23.3695 59.5685 25.6423 55.4494 27.7044C48.7411 31.0627 43.7916 39.6913 41.0456 44.4891C37.1073 51.3701 36.5923 56.8257 34.8696 62.4875C32.9782 68.7037 31.4499 80.419 29.7272 91.2746C27.2958 106.596 21.8439 127.77 21.3245 134.142C21.2254 135.358 20.8154 136.368 20.6406 151.487C20.4657 166.605 20.4657 195.794 20.6354 211.509C20.8536 231.712 23.2015 238.517 23.7209 246.066C24.3575 255.319 25.2584 267.664 26.4618 275.871C29.2527 294.907 27.6651 303.29 28.5187 311.204C29.1844 317.376 29.722 322.173 30.5757 326.811C31.6719 332.768 33.4863 338.978 34.0056 343.951C34.5028 348.711 36.5717 353.377 37.9447 359.373C39.2305 364.988 39.6571 369.833 41.8838 374.121C44.2858 378.748 45.4783 383.203 46.1777 386.818C46.2706 387.298 46.3248 387.579 46.3459 387.689M46.3459 387.689C46.36 387.763 46.3594 387.76 46.3459 387.689ZM46.3459 387.689C46.1878 386.865 44.2584 376.778 43.2671 370.589C39.8984 349.556 42.0638 343.833 41.2101 334.772C38.7781 308.958 42.7426 304.051 44.2853 299.932C46.1528 294.946 50.6207 290.681 54.3901 286.732C58.2035 282.736 64.32 280.047 68.7888 277.47C72.6009 275.272 77.0114 274.554 84.5296 273.351C101.49 270.637 105.809 275.562 110.782 278.308C115.41 280.864 118.5 285.497 121.077 289.617C123.644 293.721 125.021 298.868 127.247 302.987C129.492 307.138 130.163 312.238 130.683 318.064C131.093 322.673 132.57 327.994 133.593 331.794C134.549 335.343 136.334 322.913 137.537 318.275C138.794 313.431 138.741 307.836 139.594 295.211C140.191 286.39 139.769 269.741 139.599 260.495C139.43 251.249 139.09 249.892 138.916 240.877C138.418 215.236 138.401 197.079 137.887 190.276C135.739 161.852 138.741 151.549 139.764 143.778C140.427 138.743 141.476 133.324 141.656 92.4985C141.717 78.7981 140.119 70.5868 139.939 57.0777C141.137 51.0354 142.166 47.95 142.68 45.389C142.855 43.8464 142.855 41.8101 142.855 39.7121M64.6903 395.565C60.6175 392.85 57.1618 390.772 54.7655 390.253C53.7384 390.03 53.0479 391.431 52.8679 392.464C52.1325 396.688 56.7916 400.687 59.7073 404.636C62.9046 408.967 68.7836 411.321 73.0724 413.898C77.8196 416.75 83.1823 416.814 88.155 418.187C92.8131 419.473 98.9386 420.249 107.341 421.956C114.638 423.438 122.264 425.041 128.6 426.245C132.463 426.978 136.324 426.759 146.362 427.273C169.606 428.464 186.719 427.109 190.139 426.594C196.277 425.671 207.896 425.391 219.096 424.537C231.945 423.558 238.133 422.655 248.747 422.136C255.056 421.827 259.052 419.57 272.9 419.05C281.039 418.745 287.15 417.513 297.944 416.993C304.02 416.701 309.447 415.456 318.004 414.937C321.471 414.726 333.699 414.078 350.664 414.247C367.002 414.411 386.234 415.785 393.433 416.304C399.05 416.71 403.718 418.192 411.58 419.045C423.814 419.22 432.875 419.56 435.945 420.074C437.997 420.249 441.051 420.249 445.227 418.192M450.369 389.394C451.048 389.734 451.727 390.073 452.246 389.739C458.467 385.735 456.191 370.223 457.564 361.487C459.137 351.472 459.276 336.962 459.795 320.893C460.239 307.179 459.297 285.909 457.574 276.298C455.928 267.115 455.862 260.855 455.342 254.005C455.106 250.887 454.483 240.018 454.653 224.941C454.854 207.087 454.833 185.776 453.63 177.06C451.491 161.571 452.426 153.914 451.573 147.723C450.819 142.258 450.369 115.716 449.516 99.0447C449.164 92.1643 448.312 81.9617 447.459 71.9803C445.937 54.185 448.312 50.696 447.294 48.639C444.101 42.188 419.001 48.9682 405.656 47.7751C396.412 46.9486 389.031 45.2039 373.126 44.6845C362.611 44.3412 353.034 43.147 332.007 42.967C322.771 42.8879 318.745 45.533 313.433 46.9061C307.142 48.532 300.932 49.6469 294.756 51.1897C283.287 54.0543 276.927 53.7609 268.02 54.2802C265.939 54.4016 264.585 54.7893 253.195 54.9642C241.804 55.139 220.422 55.139 208.898 54.9693C192.592 54.1105 185.722 53.7711 180.61 53.2569C176.856 53.0821 170.747 53.0821 164.453 52.0536M202.506 144.617C201.488 142.92 200.47 141.223 200.454 140.009C200.394 135.285 208.657 134.681 213.799 133.308C220.816 131.435 229.905 131.596 235.227 131.077C243.598 130.26 256.645 129.539 264.014 129.02C271.089 128.521 276.536 127.482 285.777 126.963C292.349 126.593 300.52 125.425 327.703 124.906C343.356 124.607 359.843 123.368 368.23 122.849C373.355 122.531 386.151 120.962 394.986 120.108C397.547 119.933 399.964 119.594 402.525 119.079C404.067 118.905 406.104 118.905 409.23 117.876M198.392 170.329C199.071 173.044 199.76 188.018 200.444 209.436C200.884 223.2 204.892 232.675 205.761 239.046C206.443 244.046 207.299 250.18 208.502 257.204C210.099 266.524 209.706 285.703 208.852 297.155C208.416 302.998 207.649 317.277 208.672 326.642C209.017 327.675 209.356 328.694 209.531 330.067C209.706 331.44 209.706 333.137 209.706 333.857M234.389 338.999C236.076 338.999 251.092 336.963 269.98 335.744C280.022 335.096 289.516 333.857 296.252 333.003C301.552 332.331 309.077 331.121 320.226 329.917C328.616 329.012 339.561 328.714 350.381 327.861C355.305 327.472 364.142 327.686 368.518 327.177C372.894 326.667 372.555 325.649 372.21 324.616C370.837 320.497 370.148 313.678 369.295 306.797C368.405 299.624 367.412 294.116 366.893 288.454C365.938 278.039 365.355 264.29 364.836 253.846C363.977 245.449 364.656 236.161 365.176 234.279C365.016 233.415 363.998 232.737 362.949 232.037M232.332 244.379C236.744 247.464 247.739 246.786 280.028 246.266C286.831 246.097 287.849 245.757 288.883 245.413C289.917 245.068 290.935 244.729 293.012 244.379M289.927 221.752C290.606 221.752 290.955 212.928 290.616 199.049C290.277 193.994 289.598 192.976 289.078 191.942C288.559 190.908 288.22 189.89 287.87 186.784"]},Ts={prefix:"fac",iconName:"faHouse",icon:[476,498,[],null,"M20.2409 232.916C22.2057 231.606 24.1706 230.296 32.7147 219.961C41.2588 209.625 56.3226 190.304 64.7377 179.696C76.5969 164.746 82.8632 159.023 88.5903 153.791L88.8566 153.548C94.8376 148.084 100.919 142.97 106.719 137.671C114.065 130.959 121.44 123.123 126.238 118.811C131.203 114.349 135.988 107.245 138.98 102.279C144.709 92.7673 152.203 85.4136 157.825 79.4546C162.488 74.5109 171.355 68.2262 178.828 63.0759C184.645 59.066 190.23 54.6509 194.879 51.1628L195.027 51.0328C198.919 47.6268 201.521 45.3497 202.986 43.5565C203.815 42.7229 204.797 42.068 207.794 40.4008M234.587 50.3243C235.242 50.9792 236.89 52.299 241.003 55.7524C248.302 61.8801 262.601 73.0787 278.638 84.1533C290.724 92.5004 301.352 103.196 310.968 111.329C315.365 115.047 326.776 126.636 337.27 136.47C342.406 141.283 348.668 147.534 353.654 151.697C355.714 153.417 367.78 162.707 385.796 176.258C398.919 186.128 403.246 193.182 407.246 198.169C410.234 201.895 412.535 206.103 417.655 211.724C421.253 215.674 424.106 219.341 429.231 223.305C435.448 228.114 438.991 231.904 442.965 234.891C446.939 237.54 449.916 239.525 451.896 240.681C452.894 241.182 453.876 241.51 455.88 241.847M324.891 30.4774C325.546 34.4071 326.866 48.2205 329.173 69.6849C330.498 79.3603 332.135 86.5647 332.979 92.2409C333.822 97.9171 333.822 101.847 333.822 104.903M353.669 25.5156C358.908 25.5156 371.759 24.2057 387.632 22.0573C393.353 21.2188 394.335 20.8913 396.479 20.7226C398.622 20.5539 401.897 20.5539 405.271 20.5539M419.164 172.383C419.164 171.083 421.783 152.675 423.297 135.874C423.642 132.038 424.125 121.207 423.962 106.327C423.47 99.9614 423.133 83.2304 423.297 58.9229C423.461 50.3342 423.788 49.3518 426.11 46.3549M66.8811 225.969C66.2262 231.864 66.2163 241.45 67.0399 253.338C68.4188 273.241 69.5208 291.742 70.0219 301.353C70.4897 310.325 71.5055 318.218 75.3012 330.121C77.712 337.681 81.4091 357.455 82.9224 370.827C83.8194 378.753 84.4059 387.364 84.9071 408.973C85.0824 416.533 86.3906 421.104 88.3753 426.403C90.1346 431.101 89.7051 439.919 90.5287 450.84C91.7121 466.53 91.6798 477.36 93.6596 477.693C100.852 478.9 111.834 471.416 116.484 470.915C126.006 469.889 141.287 469.431 145.425 468.93C147.926 468.627 150.556 468.102 153.85 467.774C158.535 467.308 177.528 466.117 202.827 465.953C217.701 465.857 228.276 464.47 232.588 463.969C237.327 463.418 242.506 462.148 256.31 461.324C266.465 460.718 285.475 461.155 295.914 461.319C307.673 461.503 320.475 462.148 338.496 461.984C351.343 461.867 360.595 460.5 385.161 459.999C396.655 459.765 407.236 458.516 411.542 457.687C415.088 457.005 413.865 449.604 414.366 432.774C414.624 424.095 415.849 417.512 416.023 384.546C416.079 373.807 413.884 367.914 413.046 362.928C412.708 360.916 412.217 347.164 412.381 326.831C412.482 314.271 413.865 310.339 414.366 300.599C415.194 285.619 414.539 261.059 414.038 251.805C413.875 249.796 413.547 248.813 413.21 247.801"]},mo={prefix:"fac",iconName:"faMoneyBill1",icon:[492,299,[],null,"M20.6001 33.8708C22.1951 51.288 23.2478 81.1461 25.1139 91.5056C28.2798 109.08 26.98 146.253 25.6562 170.721C24.4619 192.793 23.7901 222.366 25.1139 240.916C26.0444 253.954 26.98 265.59 29.0934 274.427C31.5756 284.805 59.8687 271.524 71.3207 269.937C92.2658 267.034 119.776 266.739 139.124 265.415C150.83 264.614 161.437 262.496 174.995 260.367C181.633 259.324 198.569 258.764 220.619 258.501C231.644 258.369 252.224 257.169 280.391 257.432C292.793 257.548 311.781 258.764 338.09 259.027C354.5 259.191 366.138 261.411 394.25 262.217C412.911 262.752 435.265 264.601 442.976 265.407C446.499 265.775 450.162 266.739 454.141 266.476C456.03 266.351 457.594 265.686 458.408 263.046C460.593 255.954 459.748 249.21 460.545 232.606C461.266 217.596 460.816 189.159 461.079 173.464C461.477 149.741 465.059 139.172 465.864 121.93C466.358 111.362 468.791 100.924 470.115 90.5406C472.441 72.2968 471.981 61.0653 471.192 48.8397C470.642 40.331 460.306 37.0926 454.197 34.1419C446.737 30.5386 433.255 32.2758 423.366 30.9519C413.044 29.5701 404.513 28.0331 381.426 24.8431C366.828 22.8261 341.416 22.7059 308.686 21.382C290.516 20.6471 255.765 21.1109 237.08 20.8477C203.586 20.3759 175.888 20.5686 160.752 21.374C136.14 22.6837 97.7336 23.7585 89.2164 24.564C70.6986 25.8958 44.5408 25.3695 43.4642 24.572C43.9666 24.3008 46.5984 24.3008 49.3098 24.3008M285.96 108.911C284.131 94.1626 277.671 83.9884 269.819 78.8944C263.904 75.057 248.646 70.5984 237.016 68.2559C227.224 66.2835 220.84 65.0262 195.73 64.7836C188.925 64.7179 185.716 66.8559 182.028 68.9281C174.458 73.1829 172.769 81.1607 171.147 89.2349C168.363 103.096 176.885 111.641 181.967 116.737L181.98 116.75C188.689 123.477 214.658 128.733 226.336 133.619C231.864 135.932 237.215 138.824 242.659 141.767L242.97 141.935C248.71 145.038 260.927 151.825 274.83 164.543C278.604 167.996 279.487 171.73 280.18 177.018C281.284 185.44 279.044 193.437 276.049 198.282C271.387 205.826 261.98 207.77 242.602 208.483C236.524 208.707 226.897 203.667 211.685 195.378C186.201 175.487 176.928 165.756 175.313 162.991C174.613 161.598 174.155 160.225 175.07 157.425M204.179 229.504C206.48 217.057 215.656 195.017 222.413 177.108C227.936 162.471 238.305 135.857 242.755 114.559C251.473 72.8275 248.978 67.3549 251.529 61.8034C253.137 59.0381 254.537 56.252 255.687 53.4867C256.38 52.0936 257.295 50.7213 258.238 49.3075"]},go={prefix:"fac",iconName:"faCalendarAlt",icon:[492,427,[],null,"M26.948 126.86C27.7034 123.838 28.4588 120.817 28.8479 121.526C35.0692 132.871 26.948 185.918 28.8479 216.1C29.5227 226.819 31.5262 266.174 33.4261 293.506C35.5214 323.648 36.1043 332.832 38.0043 348.421C40.8876 372.078 40.6596 389.327 45.2264 392.371C49.7931 395.416 54.3942 398.483 77.8459 400.772C138.783 406.72 182.583 402.306 190.927 403.451C206.682 405.612 219.209 404.595 243.416 405.74C265.336 406.776 306.904 406.129 329.818 406.507C377.028 407.285 418.337 406.907 438.149 404.996C448.205 404.026 445.852 387.862 450.029 378.316C454.971 367.025 456.519 355.815 461.475 339.047C464.608 328.444 465.675 319.189 466.831 302.044C468.398 278.807 470.253 246.717 472.931 232.982C476.596 214.188 475.61 169.986 473.71 142.54C472.941 131.429 469.521 122.327 468.365 107.46C467.912 101.632 465.698 97.1245 464.553 92.1801C457.86 63.267 373.425 81.8563 360.823 79.1781C346.952 76.2299 328.467 76.4998 292.368 74.5999C267.06 73.2679 218.682 74.2107 192.644 74.5884C164.319 74.9993 139.342 76.4998 103.495 76.8775C78.7447 77.1383 62.1084 82.5888 46.4625 83.7448C40.6333 84.1755 32.3502 85.6562 23.1939 87.167C17.7686 88.0622 21.5915 99.3449 22.7475 108.513C23.1252 110.813 23.8806 113.079 24.2697 118.024C24.6589 122.968 24.6589 130.522 24.6589 138.305M148.27 33.0071C148.27 27.7193 148.27 22.4315 147.137 21.2183C146.004 20.0051 143.737 23.0267 141.815 26.8495C139.892 30.6722 138.381 35.2046 137.603 48.4928C136.824 61.781 136.824 83.6876 141.402 106.258M322.241 39.8744C322.241 37.6082 322.241 35.342 321.108 36.4407C310.954 46.2869 313.084 62.6737 311.184 78.7088C310.795 85.5417 310.795 96.8727 311.928 102.71C313.061 108.547 315.328 108.547 317.662 108.547M104.777 190.954H139.113M111.644 252.76H127.668M107.066 316.854H141.402M237.544 195.533C238.3 196.288 239.055 197.043 243.599 197.432C248.143 197.822 256.452 197.822 265.013 197.822M239.833 245.893H245.899C248.944 245.893 253.476 245.893 256.944 246.27C260.412 246.648 262.678 247.403 265.013 248.182M230.677 312.276C241.253 313.787 248.967 314.565 253.911 314.943C259.611 316.076 264.99 317.61 269.557 318.754C271.858 319.143 274.124 319.143 276.459 319.143M358.866 202.4C355.844 202.4 352.823 202.4 352.777 202.022C352.731 201.644 355.753 200.889 361.842 200.5C367.931 200.111 376.996 200.111 386.335 200.111M347.421 255.049H400.07M335.975 332.878C342.774 332.123 349.572 331.367 358.362 330.978C367.153 330.589 377.728 330.589 388.624 330.589"]},fa={prefix:"fac",iconName:"faArea",icon:[424,438,[],null,"M63.0129 75.4661C67.4676 62.102 68.7485 55.7354 68.7485 54.4353C68.7485 40.4261 70.6604 78.6015 75.421 110.387C78.4647 130.709 78.3079 160.01 79.8948 178.985C80.8819 190.788 82.1317 202.224 85.6209 228.952C86.7195 237.368 87.8674 266.387 87.5519 307.798C87.3556 333.562 84.6936 348.827 83.0972 389.493C82.7644 397.971 80.2581 399.186 78.3366 399.521C76.4152 399.855 74.5224 399.225 73.5474 397.007C72.5723 394.789 72.5723 391.003 72.5723 387.103M20.9514 102.232C33.6463 78.1045 47.6796 56.3854 56.6081 43.6523C63.5019 33.8208 63.6438 25.1453 65.5461 21.6369C66.3126 20.2233 68.7103 21.2832 70.6317 22.8701C81.8614 32.1444 84.6554 50.5733 88.1733 58.2304C91.809 66.144 96.1267 73.5159 101.547 83.0754C108.248 92.6539 113.334 100.282 116.536 107.939C117.177 109.861 117.807 111.754 120.369 113.704M384.209 392.839C351.86 392.839 318.594 393.47 296.789 394.426C277.523 395.27 241.545 394.751 221.757 394.435C189.869 393.927 169.505 391.577 133.571 391.242C111.499 391.037 87.8865 393.47 84.7032 395.372C83.4127 396.644 82.7818 398.536 83.4031 400.458C84.0245 402.379 85.9173 404.272 89.7793 406.222M347.884 356.513C360.54 357.775 386.045 362.861 396.923 368.281C401.157 370.39 402.047 376.244 402.688 381.329C395.107 395.324 378.512 410.027 371.83 413.525C368.934 415.131 367.041 416.393 365.091 417.693M129.929 163.413C152.814 150.718 173.176 135.423 191.033 122.365C196.768 118.216 204.339 113.168 209.186 110.253C214.033 107.337 215.925 106.706 221.699 102.232M154.783 224.593C159.831 222.7 164.878 220.808 194.923 201.851C224.969 182.895 279.859 146.932 309.397 127.775C338.936 108.618 341.46 107.356 345.972 106.056M170.078 287.685C174.495 285.162 178.911 282.638 203.584 266.196C228.257 249.753 273.052 219.469 297.391 203.553C321.494 187.79 324.202 187.019 326.434 186.383L326.499 186.365C328.746 185.724 330.638 185.094 334.5 184.443M198.757 352.689C208.851 350.166 238.658 334.354 277.201 311.421C298.156 297.264 307.677 289.635 317.542 283.269C321.729 280.688 324.253 279.426 326.853 278.126"]},Bs={prefix:"fac",iconName:"faLineChart",icon:[505,506,[],null,"M28.3528 26.703C28.3528 26.0054 28.3528 25.3077 28.5272 25.4716C32.7864 29.4726 30.1075 41.1209 30.6413 46.5911C31.5146 55.5398 32.2216 69.6609 33.1042 75.4746M33.1042 75.4746C34.7167 86.0961 32.5704 69.83 33.1042 75.4746ZM33.1042 75.4746C34.0334 85.3007 32.5704 99.427 33.1042 108.406C33.7833 119.831 32.5915 140.968 31.6983 148.41C31.3575 151.249 30.8157 171.147 30.9901 199.856C31.0608 211.484 31.8727 227.212 31.6983 249.753C31.5854 264.351 30.1181 273.478 29.5843 282.992C29.4643 285.131 29.061 286.522 28.8813 305.205C28.7016 323.888 28.7016 359.817 28.8761 379.023C29.1397 408.051 29.6684 415.576 29.1346 421.565C28.6824 426.637 29.9278 421.092 28.8761 425.5C27.584 430.915 27.1161 435.891 25.705 441.176C24.9573 443.976 25.0072 431.239 25.7049 441.281C25.9464 444.757 24.4576 463.754 25.6996 463.58C30.6682 462.882 29.621 465.705 59.1387 465.171C66.2969 465.042 81.6588 464.289 103.851 464.114C117.035 464.011 126.17 462.534 146.904 462C151.552 461.881 153.294 461.477 166.052 461.297C178.811 461.118 202.531 461.118 215.448 460.943C229.768 460.75 242.36 460.061 259.97 460.235C267.83 460.313 274.483 461.118 282.934 461.292C299.112 461.626 323.138 462.872 332.107 463.406C339.394 463.84 347.767 465.684 355.547 466.752C364.804 468.022 369.648 469.215 377.391 469.748C383.784 470.189 390.789 471.329 397.126 472.565C403.729 473.854 408.758 473.802 414.392 474.679C422.076 475.876 429.18 476.614 438.519 477.148C450.64 477.84 469.009 478.728 473.243 479.262C474.305 479.436 475.351 479.785 476.414 479.965C477.476 480.144 478.523 480.144 479.601 480.144M86.5 385.5C94.3444 375.341 83.1867 393.509 95.3856 373.619C98.7755 368.091 101.531 363.529 104.584 357.711C106.507 354.048 110.834 345.517 116.503 332.575C120.355 323.783 123.666 319.25 125.846 316.345C127.926 313.573 135.547 303.307 146.75 289.628C154.449 280.227 159.761 275.581 164.426 270.192C170.298 263.407 176.655 255.193 180.298 250.393C184.839 244.409 187.417 237.46 192.235 230.882C195.669 226.194 198.791 222.872 202.861 220.963C207.544 218.768 210.723 227.205 213.497 230.415C217.106 234.592 225.556 240.011 232.116 245.252C242.661 253.677 252.059 261.273 257.602 265.208C261.496 267.973 265.756 271.179 270.701 275.101C278.544 281.323 282.057 284.282 285.852 287.339C286.743 288.057 287.595 288.649 288.473 288.658C289.351 288.667 290.216 288.09 290.949 287.361C292.413 285.906 296.601 273.345 304.73 251.694C308.558 241.498 313.878 233.416 318.385 226.57L318.553 226.314C331.311 206.931 336.513 203.078 343.781 195.369C346.828 192.136 350.193 188.227 354.119 184.013C356.963 180.961 364.991 169.665 376.779 154.819C383.469 146.394 387.178 142.506 389.952 138.283C392.566 134.302 397.067 130.574 401.015 126.053C403.815 122.848 404.946 118.921 406.554 115.278C408.431 111.023 411.935 108.438 414.267 104.94C416.791 101.154 422.976 97.9559 427.366 95.3266C429.108 94.1648 430.576 92.706 431.017 91.6839C430.882 91.5267 430.017 92.1032 427.379 94.4443"]},no={prefix:"fac",iconName:"faList",icon:[325,445,[],null,"M48.9555 28.1842C48.7385 26.8823 48.5215 25.5804 48.1182 24.455M48.1182 24.455C47.9037 23.8564 47.6364 23.3077 47.2884 22.8355C46.2862 21.4757 44.6242 20.8109 42.937 20.6346C36.8545 19.9992 32.8591 24.1349 28.4925 27.9979C24.844 31.2256 23.441 35.5575 22.9373 38.9017C22.2408 43.5265 23.0985 47.3125 24.1008 49.4883C27.2256 56.2719 40.8368 58.725 49.2627 59.0776C53.7182 59.264 57.3361 56.7306 59.683 55.2247C61.7802 53.8791 63.0474 50.697 64.5583 46.5168C66.5519 41.0012 63.7424 35.5878 61.063 32.4047C58.5436 29.4118 54.3545 26.8546 49.3282 24.84C48.9173 24.6754 48.5133 24.5478 48.1182 24.455ZM48.1182 24.455C46.3134 24.0312 44.6925 24.3342 43.4406 25.1523C40.1644 27.2932 39.8899 32.5256 40.3885 36.2173C40.583 37.6573 41.8843 37.9146 42.8967 38.0858C43.909 38.2571 44.9062 38.2571 45.4199 37.2598C45.9336 36.2626 45.9336 34.2682 45.435 32.9084C44.9364 31.5485 43.9392 30.8837 40.8972 30.1988M128.365 44.1256C125.705 43.7932 123.046 43.4608 124.335 43.2896C137.974 41.4782 144.118 42.1111 151.164 41.275C156.474 40.6451 160.92 40.7714 186.037 40.2677C209.819 39.7908 256.028 40.0965 276.838 40.0965C297.649 40.0965 291.665 40.0965 288.084 40.2627C284.504 40.4289 283.506 40.7613 282.328 40.9326C281.149 41.1038 279.82 41.1038 277.443 42.1111M57.0137 208.488C57.9 206.715 58.5954 204.931 59.0507 203.201M59.0507 203.201C59.62 201.037 59.814 198.959 59.537 197.096C59.324 195.663 58.0412 195.071 57.0289 194.562C50.6626 191.363 39.2453 194.043 30.6884 198.063C27.6807 199.475 25.798 201.094 23.9547 202.6C19.9387 205.881 20.0867 212.497 20.0767 224.222C20.0699 232.053 29.4545 236.672 34.6672 239.704C39.2269 242.356 46.5581 244.408 54.6366 244.252C61.724 244.115 65.0519 234.033 67.2477 229.656C69.3053 225.555 70.7732 221.603 70.4509 214.894C67.1315 210.455 63.3747 206.042 59.0507 203.201ZM59.0507 203.201C58.1261 202.593 57.1756 202.057 56.1978 201.608C54.3545 201.437 51.6953 201.437 48.9555 201.437M147.531 222.002C144.872 221.669 142.213 221.337 141.341 220.999C138.432 219.873 154.844 218.98 163.114 218.144C169.58 217.49 174.718 217.64 179.719 217.136C190.649 216.036 199.225 216.633 218.192 216.129C235.83 215.958 269.735 215.958 286.702 216.124C303.67 216.29 302.673 216.623 301.645 216.965M57.9018 386.974C59.8962 382.321 60.5912 378.926 59.589 376.917C58.4237 374.58 55.8973 373.547 53.223 373.044C45.6101 371.61 38.8037 377.546 33.5759 381.923C31.2121 383.902 27.9799 387.631 25.0531 393.986M25.0531 393.986C24.9287 394.256 24.8048 394.531 24.6816 394.811C21.2213 402.666 23.9866 409.124 25.155 411.633C28.7168 419.278 34.7141 422.552 41.0852 424.073C48.9394 425.948 53.8525 421.907 59.2213 418.885C66.1404 414.991 68.9618 410.162 71.1576 405.962C73.6329 401.227 74.0183 397.067 74.8544 392.036C76.3995 382.737 71.0166 377.264 66.9824 373.054C63.1765 369.081 56.2498 368.178 47.5268 368.002C39.1783 367.833 32.3974 377.889 28.8719 381.923C27.2175 383.816 26.0112 386.289 25.0039 389.467C24.5985 390.747 24.5974 392.327 25.0531 393.986ZM25.0531 393.986C25.2358 394.651 25.4919 395.329 25.8248 396.005C28.4076 401.248 33.3744 403.756 37.0561 404.763C41.2614 405.914 45.1294 404.108 47.8088 401.932C50.6579 399.619 52.1905 397.057 52.8603 395.048C53.5302 393.038 53.8727 390.681 53.374 388.334C53.1386 387.226 51.8782 386.652 50.6997 386.31C49.5212 385.967 48.1916 385.967 47.008 386.299C45.8245 386.632 44.8272 387.297 43.7998 388.989M142 402C156.348 399.2 173.835 398.276 187.393 397.569C193.689 397.241 198.99 395.476 204.363 394.769C209.777 394.057 215.088 392.676 228.647 391.969C238.24 391.469 250.304 389.876 261.357 389.169C263.737 388.938 264.733 388.476 271.721 388.238C278.709 388 291.658 388 305 388"]},Pf={prefix:"fac",iconName:"faStairs",icon:[464,429,[],null,"M20.7415 408.944C22.314 401.647 23.3519 390.105 24.146 379.891C24.7144 372.581 27.0316 362.365 28.3369 352.631C28.721 349.767 28.6042 345.602 29.3826 342.944C30.161 340.287 31.7178 339.249 34.3361 338.714C45.653 336.403 53.1988 340.79 61.3368 341.584C68.6195 342.295 75.7492 345.508 82.0472 347.607C88.3453 349.706 97.2144 350.76 106.123 349.722C114.809 348.71 111.949 332.99 113.514 322.234C115.229 310.443 116.132 301.004 119.262 270.151C120.878 254.211 143.337 262.697 163.191 261.392C194.818 259.313 216.256 259.049 216.783 255.125C220.008 231.109 216.775 188.819 217.569 179.91C217.903 176.172 219.92 173.078 222.271 170.459C230.24 161.584 253.95 167.306 274.629 166.512C291.181 165.877 310.059 164.161 315.578 160.246C326.112 152.773 318.991 139.032 320.831 127.78C324.435 105.737 323.708 98.1458 326.327 91.5726C331.684 78.1222 363.525 89.1823 371.129 91.2817C372.981 91.793 374.533 92.3274 375.595 91.8163C386.551 86.541 378.748 58.8322 379.542 45.4734C379.811 40.9403 380.855 34.725 381.374 26.8701C381.893 23.6857 382.931 22.1289 393.325 21.3269C403.72 20.5249 423.439 20.5249 443.757 20.5249"]},V8={prefix:"fac",iconName:"faClipboard",icon:[441,511,[],null,"M146.264 23.3009C145.768 24.7902 145.512 35.4857 145.388 50.901C145.292 62.88 144.264 74.9283 143.26 78.8207C142.436 82.013 141.751 87.1958 143.737 92.837C145.815 98.7401 155.027 94.5067 161.996 94.1306C189.09 92.6684 192.13 94.7549 195.143 95.3792C198.357 96.0453 201.908 96.2592 205.169 96.8835C209.377 97.6893 216.906 97.7635 222.965 98.3878C229.966 99.1093 234.491 99.7642 254.495 100.144C262.607 100.298 267.586 101.269 274.979 101.648C277.642 101.785 280.38 102.276 283.26 101.78C287.247 101.093 286.66 95.0257 288.289 90.8851C290.149 86.1542 290.677 81.9835 291.925 77.7226C292.993 74.0777 293.43 69.4527 293.809 61.1904C294.076 55.3897 294.934 48.889 295.314 45.8766C295.729 42.5822 296.438 38.6147 297.442 35.3466C297.907 33.8346 298.198 31.5896 297.826 29.2091C297.314 25.9356 290.947 27.0617 287.431 26.4374C282.725 25.6019 277.168 25.5574 272.14 24.809C267.86 24.1719 262.366 23.5567 256.228 23.1768C249.316 22.749 243.306 22.0524 240.294 21.6725C236.758 21.2266 229.301 20.0517 224.251 18.9159C220.07 17.9758 216.981 17.5395 213.345 17.1597C209.431 16.7508 204.947 16.0352 194.319 15.9036C189.144 16.7798 180.683 17.2838 174.361 17.908C173.109 18.0359 171.371 18.0359 169.581 19.5402M20.6558 54.8911C35.631 54.8911 51.223 55.3875 58.3571 55.8915C66.1082 56.439 73.0052 58.1404 78.6802 58.776C86.7733 59.6823 98.3526 59.9004 111.241 60.2803C113.915 60.4044 114.659 60.6526 115.663 60.7804C116.667 60.9083 117.908 60.9083 119.187 62.4126M317.002 65.4212C320.477 65.4212 335.918 65.4212 356.975 65.5453C365.133 65.5934 370.856 66.1733 378.749 66.2974C382.442 66.3555 392.623 66.9255 407.41 67.0496C413.769 67.103 417.263 67.6776 420.651 67.8017C422.267 67.8609 417.805 76.1468 416.289 82.4536C415.379 86.2418 414.285 91.2198 413.905 98.4893C413.666 103.051 409.802 120.93 406.515 132.964C404.328 140.97 404.507 146.127 404.127 153.644C403.709 161.92 403.002 172.452 402.622 178.345C402.193 185.013 401.002 191.496 400.242 198.645C399.644 204.27 398.986 209.314 398.862 212.692C398.746 215.841 398.234 225.794 398.11 239.201C398.006 250.429 397.233 259.212 396.857 273.006C396.515 285.556 396.729 309.388 396.978 322.656C397.321 340.988 398.73 344.949 399.61 351.463C400.185 355.72 400.49 359.24 401.114 362.508C401.684 365.49 402.491 369.514 403.495 373.41C404.742 378.251 405.499 381.308 405.879 396.93C406.043 403.679 407.756 407.633 408.636 411.27C409.438 414.583 409.516 418.66 410.14 422.052C410.803 425.651 411.517 429.19 412.397 433.082C413.103 436.205 414.029 439.223 414.777 442.608C416.077 448.487 417.037 454.011 417.662 459.396C418.574 467.265 418.542 474.785 419.29 480.964C419.542 482.344 419.79 484.081 419.918 485.721C420.046 487.361 420.046 488.85 420.046 490.384M28.1772 482.111C28.9294 475.108 29.1776 470.34 29.5537 456.297C29.8964 443.5 29.6815 419.171 29.8056 406.144C29.9297 393.117 30.178 392.124 30.3058 385.283C30.4337 378.442 30.4337 365.784 30.806 357.525C31.5814 340.326 34.1944 335.457 34.8187 332.445C35.4847 329.231 35.6987 325.183 36.9473 317.921C38.102 311.205 38.7073 304.123 39.3316 295.89C40.5712 279.544 39.7077 267.756 40.0837 263.401C41.8222 243.27 42.468 233.677 43.7166 226.283C44.4553 221.909 44.7245 208.946 43.9761 200.819C43.6692 197.486 42.7238 193.061 42.7162 182.045C42.7107 173.953 46.9809 164.72 47.6052 161.211C48.5732 155.771 46.4845 152.189 45.4804 148.048C44.3605 143.43 43.4759 138.906 42.5959 133.141C41.3059 124.69 41.2195 121.095 40.2154 118.083C37.056 108.605 38.963 91.0092 38.083 86.7483C37.4176 83.5267 36.7066 80.4792 36.3268 77.4668C35.2023 74.4545 33.698 71.4534 33.8146 58.5766C34.1869 55.899 34.9315 55.4026 36.4509 53.3868M51.4938 485.119C58.2481 484.367 63.2574 483.871 67.398 482.867C72.252 481.69 76.796 481.359 80.5605 480.734C86.2676 479.788 89.8383 479.854 94.7235 478.606C98.0497 477.756 101.12 477.598 106.002 476.974C112.369 476.159 120.872 476.094 126.697 476.718C128.195 476.878 130.951 477.342 137.806 478.094C150.299 479.465 164.256 477.109 173.902 475.229C181.024 473.84 185.602 473.837 190.246 473.213C196.106 472.425 207.098 472.333 215.311 471.709C225.705 470.919 229.738 473.085 233.867 474.83C242.751 478.584 248.03 478.847 252.298 479.975C258.989 481.743 261.584 481.607 272.644 481.983C282.706 482.325 301.823 482.111 312.165 482.235C325.778 482.398 329.773 483.359 343.523 483.491C349.688 483.55 353.09 480.862 358.464 479.982C370.246 478.053 373.398 478.606 378.907 478.474C382.431 479.35 388.659 479.854 396.177 479.606C398.978 479.358 399.723 478.862 401.994 476.846M123.266 201.531C134.821 187.778 141.417 180.074 146.392 172.082C151.121 164.486 156.311 158.568 159.609 156.634C166.09 152.833 172.825 167.875 179.718 176.702C186.805 185.778 194.315 192.671 200.662 199.853C203.395 202.945 206.448 207.019 211.118 210.325C213.346 211.903 216.333 211.449 218.284 210.358C226.165 205.951 225.194 193.861 228.773 186.406C232.399 178.852 234.55 172.9 239.493 169.594C249.578 162.848 270.256 179.413 290.44 187.736C299.754 191.577 306.723 192.704 313.343 196.555C316.641 198.754 319.964 200.969 323.262 202.895C324.923 203.73 326.56 204.275 329.899 204.837M134.837 310.633C144.739 298.533 158.972 283.192 175.288 268.513C177.795 266.257 180.528 268.183 182.198 269.836C190.122 277.681 193.786 289.11 199.555 297.648C203.275 303.153 207.556 306.765 211.126 308.418C212.954 309.264 215.242 308.98 216.639 308.162C224.381 303.627 226.285 284.812 230.971 276.216C231.908 274.497 233.988 273.737 235.922 273.448C245.391 272.031 256.007 285.242 270.876 291.606C286.614 298.343 296.804 286.961 303.425 282.82C306.723 281.44 310.591 281.424 314.988 282.796C317.203 283.622 319.385 284.713 323.286 285.837M103.429 418.082C120.472 398.84 130.407 386.707 136.193 380.087C142.035 373.402 146.938 365.217 152.996 361.333C161.875 355.639 179.9 388.757 190.19 400.419C194.678 405.505 199.29 408.709 203.134 409.263C208.047 409.971 212.515 407.073 216.085 403.783C225.874 394.765 226.847 385.054 230.426 377.061C234.707 367.501 240.617 357.481 243.915 356.101C252.907 352.337 266.454 377.78 289.589 387.203C297.333 388.327 301.78 388.873 308.078 389.699C312.74 389.98 320.377 389.98 328.246 389.98"]},Rf={prefix:"fac",iconName:"faLocation",icon:[294,500,[],null,"M241.5 42.5C238.35 39.8004 230.775 36.7 216.5 29C208.347 24.6024 196.566 22.4028 188.743 21.7245C178.963 20.8765 171.554 20.8144 167.15 20.4736C151.829 19.2878 147.7 21.0394 143.723 21.6052C138.639 22.3283 134.98 22.4028 128.742 23.6435C115.535 26.2706 110.001 29.8881 105.768 31.8276C101.111 33.9612 95.2083 37.6187 91.5679 40.0047C82.3952 46.0168 68.3895 57.1567 66.2251 59.887C63.9711 62.7301 61.5724 65.3373 57.1446 71.1217C53.5537 75.8128 50.215 80.1033 46.5746 84.3095C44.8419 86.3115 41.8094 89.8655 36.2671 100.142C32.3016 107.495 27.8001 120.093 24.9131 128.379C22.026 136.665 21.3511 140.49 21.0034 153.146C20.6558 165.802 20.6558 187.174 21.4431 202.57C22.2305 217.967 23.8053 226.74 24.8415 231.823C26.1166 238.076 27.6911 242.563 29.2795 248.238C30.2524 251.715 32.2313 259.572 34.2765 270.248C35.1939 275.037 36.3216 282.3 38.8167 292.744C40.9702 301.758 45.1703 308.669 47.3518 313.485C48.0009 314.919 49.731 320.265 51.4352 327.873C52.272 331.608 53.8144 339.108 56.9912 349.892C59.6637 358.965 62.6767 365.033 65.5263 370.177C66.0957 371.205 66.5489 372.328 71.055 380.331C75.5612 388.334 84.1099 403.182 88.8512 411.056C95.2095 421.615 100.389 426.633 103.249 430.171C106.32 433.97 108.815 438.236 110.635 440.966C112.39 443.597 113.587 446.417 115.408 449.147L120.861 457.328C122.681 460.058 124.495 462.778 125.749 465.508C127.453 468.238 128.817 470.284 129.611 471.644C129.955 472.329 130.18 473.004 131.094 473.017M224.5 36.5001C247.555 45.5001 260.593 55.9842 262.662 60.7937C264.34 64.696 265.16 68.0642 266.524 71.9261C269.225 79.5782 271.527 93.0559 272.659 103.916C274.108 117.824 272.666 127.83 272.325 132.459C271.129 148.698 271.527 157.314 270.962 164.07C270.342 171.47 267.219 183.261 265.965 188.155C265.289 190.792 264.485 193.5 263.02 200.382C259.77 215.641 257.211 226.679 257.099 228.833C256.889 232.85 254.28 245.447 251.877 254.169C250.681 258.51 248.363 265.721 247.555 271.103C247.091 274.192 246.536 277.351 246.191 282.457C245.92 286.476 245.172 290.072 244.828 295.297C244.615 298.534 243.809 302.561 243.464 305.987C243.186 308.762 238.396 325.835 235.287 337.564C232.926 346.473 226.548 356.198 224.496 359.273C222.461 362.321 221.994 365.742 220.521 369.717C217.497 377.88 215.408 380.74 213.929 384.265C211.545 389.945 209.505 392.561 206.434 398.12C204.68 401.295 202.688 405.5 199.051 412.321C196.781 416.577 196.089 422.325 194.841 425.624C192.555 431.671 188.822 436.191 186.889 438.809C184.975 441.401 181.336 444.59 178.142 447.671C175.181 450.528 170.879 455.715 167.351 460.617C164.332 464.812 160.421 467.782 158.144 470.393C155.186 473.692 153.372 475.962 151.671 477.551C150.87 478.239 150.195 478.689 148.818 479.153M161.455 108.294C153.947 106.183 144.081 104.763 135.937 106.755C128.304 108.622 120.746 116.996 111.003 124.5C98.7649 133.925 94.8681 143.311 91.6581 149.83C90.7375 151.7 90.8283 157.917 91.1779 167.783C91.6946 182.368 96.6903 188.766 100.232 193.738C101.853 196.014 107.612 198.619 116.035 202.43L116.307 202.553C130.466 208.959 136.241 207.878 141.185 208.464C150.31 209.546 155.55 207.412 161.667 204.477C166.215 202.295 169.21 198.951 172.155 195.882C175.227 192.681 177.925 190.235 180.397 187.29C182.945 184.255 183.815 181.054 185.344 178.109C187.13 174.67 189.451 164.64 190.062 150.014C190.484 139.905 184.295 135.147 182.766 131.732C180.77 127.274 176.3 121.262 172.299 117.253C169.231 115.597 166.646 114.185 164.531 113.245C163.581 112.772 162.881 112.306 161.455 111.826"]},Lf={prefix:"fac",iconName:"faHeart",icon:[373,483,[],null,"M188 130.5C174 119.5 171.472 109.88 167.322 102.844C158.108 87.2232 150.857 81.6702 142.557 72.8221C138.063 68.0324 132.434 62.8781 127.171 58.5164C121.351 53.6926 113.641 49.1204 106.388 45.4965C94.7092 39.6613 87.5798 38.9865 80.7064 38.0697C71.7082 36.8694 60.1077 38.5959 51.5959 40.5923C44.549 42.2451 40.5561 45.4748 33.6881 51.784C31.1219 54.1415 30.4114 56.6828 28.2577 64.039C23.0777 81.7321 19.9195 99.6703 20.0985 110.504C20.4251 130.263 27.5145 150.329 28.415 160.077C30.2486 179.926 29.6845 186.502 32.7442 198.779C33.9502 203.618 35.8255 208.56 40.133 220.783C48.6815 245.04 57.1674 261.378 58.0679 264.807C59.6533 270.842 70.1114 287.646 77.229 299.711C80.4974 305.251 84.9975 310.192 88.4424 315.986C91.9409 321.87 96.2164 326.467 116.761 357.113C125.779 370.566 130.567 374.576 133.112 378.921C135.857 383.609 139.247 388.312 143.593 394.284C148.469 400.987 153.699 409.99 158.604 416.711C161.833 421.137 165.287 424.854 169.454 426.856C170.365 426.688 171.081 425.614 171.629 424.523C172.177 423.433 172.535 422.359 172.904 421.252M193 131C193.927 127.738 200.029 125.808 201.466 120.188C203.475 112.334 206.17 104.846 207.618 97.0446C208.805 90.654 210.51 83.493 216.819 71.7479C222.025 62.0564 229.302 55.2614 232.926 51.2849C237.608 46.1475 251.284 36.8816 259.687 31.5651C265.757 27.7247 275.588 25.5977 281.919 23.9702L282.111 23.9208C290.89 21.6636 296.685 20.1739 312.261 20.3409C322.152 20.4469 325.866 26.661 335.615 36.2198C341.992 42.4728 345.396 49.7931 347.941 54.8654C351.065 61.0931 352.644 67.5002 352.655 100.864C352.66 115.741 347.263 132.86 343.438 145.457C341.048 153.329 337.107 162.633 332.957 172.929C328.855 183.106 324.087 196.984 319.937 207.649C316.657 216.079 313.237 225.562 308.908 234.779C304.783 243.562 298.416 254.141 295.698 259.387C293.117 264.369 290.821 270.416 287.566 277.1C283.58 285.283 279.971 289.946 275.094 298.794C271.85 304.679 268.752 308.391 266.045 313.094C262.526 319.209 256.861 330.026 252.662 338.049C249.215 344.636 245.62 349.252 240.374 358.469C237.157 364.121 232.969 371.646 229.334 377.836C226.467 382.719 225.352 388.68 224.805 395.907C224.355 401.83 222.097 407.473 220.649 412.556C219.394 416.961 217.041 421.946 215.045 426.661C213.048 431.378 209.446 435.335 206.729 439.681C204.267 443.616 203.653 448.355 201.304 452.701C199.096 456.784 197.87 460.301 195.705 461.57C191.031 464.312 187.378 453.824 183.949 449.478C180.649 445.296 177.266 441.52 173.821 437.722C171.841 436.095 170.018 434.283 168.575 432.118C167.848 431.028 167.132 429.954 166.394 427.762"]},W8={prefix:"fac",iconName:"faUser",icon:[480,445,[],null,"M292.215 24.1477C263.876 17.5898 230.096 19.7539 211.102 24.1313C196.091 27.591 179.489 35.0338 165.224 42.1491C145.689 51.8934 127.87 76.4796 115.124 95.1204C99.8683 117.43 105.603 156.158 118.698 187.439C140.671 239.93 193.026 248.165 227.739 258.559C276.527 273.168 310.054 237.344 326.422 224.212C344.507 209.703 349.148 181.602 352.817 167.388C358.292 146.178 361.799 101.006 350.808 69.0528C317.55 35.0994 304.93 28.5415 292.263 24.1641L292.215 24.1477ZM292.215 24.1477L282.727 20.8688M20.6612 381.213C20.6612 388.664 20.6612 394.695 20.5291 398.413M20.5291 398.413C20.4737 399.971 20.3951 401.123 20.2835 401.803C19.8485 404.452 19.9017 402.594 20.5291 398.413ZM20.5291 398.413C21.5597 391.544 24.1396 378.405 28.6501 368.68C33.386 358.469 35.1282 345.411 44.6623 324.066C49.7739 312.621 54.2193 303.429 59.5528 294.262C66.3782 282.53 80.1318 272.893 87.3996 264.881C94.7391 256.79 105.312 252.291 114.48 248.457C123.395 244.728 135.802 243.867 146.527 241.967C148.827 241.578 151.094 241.578 153.394 241.2C155.695 240.823 157.961 240.067 164.874 237M457.245 385.102C459.836 393.97 459.924 408.691 459.924 416.393C459.924 450.681 456.124 371.447 453.445 362.279C450.855 353.411 447.746 342.467 443.911 332.521C440.177 322.833 436.3 311.931 428.288 300.863C418.14 286.844 400.453 272.238 391.285 268.026C381.465 263.514 372.984 256.214 363.816 250.48C355.266 245.133 345.515 240.191 336.347 234.457C331.78 232.545 327.179 231.011 322.99 231C321.067 231.744 319.557 234.01 318 236.345"]},G8={prefix:"fac",iconName:"faMoon",icon:[349,502,[],null,"M326.02 28.8363C325.654 27.0084 325.288 25.1805 323.821 24.056C317.41 19.1455 302.135 21.0815 291.339 22.001C278.804 23.0687 272.135 23.2972 266.219 24.2167C260.348 25.1292 254.41 25.5128 240.955 28.2713C231.262 30.2587 222.283 31.052 213.609 32.8909C203.234 35.0904 187.586 38.0534 174.297 41.0113C165.6 42.9473 159.137 45.8082 150.645 48.5833C145.524 50.257 139.949 57.5954 122.435 69.7815C111.384 77.47 101.198 83.8066 95.4203 89.7501C91.3189 93.9694 70.666 115.778 58.8621 130.551C55.0508 135.321 53.1402 140.704 48.72 148.254C39.3063 164.333 36.5228 168.4 33.0165 177.783C28.7074 189.315 28.0147 199.054 26.918 207.124C24.6069 224.131 21.3678 236.72 21.185 240.22C21.019 243.399 20.2599 258.754 20.6255 281.448C20.8211 293.588 23.2068 298.758 24.4974 302.441C25.7532 306.026 32.3795 322.997 42.8983 346.439C48.8811 359.771 53.4725 364.485 59.7484 372.6C63.93 378.007 67.8743 381.479 76.5374 389.4C90.7863 402.428 108.133 419.876 115.677 426.878C129.957 440.131 136.914 447.926 143.206 453.117C148.746 457.686 155.747 459.404 171.417 465.48C179.952 468.79 186.768 469.345 193.428 469.888L193.978 469.933C200.492 470.467 207.815 471.59 213.924 472.149C218.706 472.587 222.97 474.913 227.772 476.209C234.217 477.949 239.587 478.237 244.024 479.715C245.137 480.087 246.234 480.452 257.218 480.641C268.202 480.829 289.04 480.829 300.324 481.012C311.607 481.194 312.704 481.56 314.731 481.748C316.758 481.937 319.683 481.937 323.804 480.829M328.235 55.4241C325.3 55.4241 307.696 61.2734 295.034 67.9591C283.908 73.8333 278.051 76.8273 272.861 79.6024C267.974 82.2151 262.896 86.7977 255.518 93.6164C249.822 98.8801 244.439 103.038 238.706 109.131C233.667 114.487 227.069 119.656 220.433 126.851C214.971 132.773 209.72 142.167 206.574 148.454C201.158 159.276 193.125 167.248 186.821 178.171C181.929 186.649 177.97 201.923 176.098 211.417C174.239 220.843 172.785 230.394 171.849 238.01C171.054 244.481 170.193 252.595 169.999 270.824C169.917 278.559 173.494 284.345 176.264 291.718C183.029 309.728 185.68 315.741 187.719 320.178C189.825 324.763 193.058 330.497 198.049 337.526C201.738 342.722 206.352 350.438 210.789 354.891C215.771 359.892 220.754 365.216 224.089 370.03C227.876 375.497 232.94 381.479 237.194 385.539C240.996 389.167 244.943 393.804 249.092 398.677L249.38 399.016C253.411 403.749 256.204 408.798 259.539 413.235C262.87 417.666 266.552 422.092 272.268 428.551C276.862 433.741 279.845 438.709 283.906 442.963C287.661 446.898 292.763 449.056 297.2 451.095C301.785 453.202 306.057 454.241 310.493 456.446C311.607 457.188 312.704 457.919 313.817 457.93C314.93 457.941 316.027 457.21 317.157 456.457"]},j8={prefix:"fac",iconName:"faSun",icon:[484,464,[],null,"M291.446 150.571C292.051 148.905 292.584 147.29 293.041 145.738M293.041 145.738C294.437 141.004 295.125 136.864 295.009 133.718C294.911 131.036 293.314 128.593 291.153 125.656C287.014 120.031 280.629 119.607 258.716 112.191C251.709 109.82 244.2 109.087 233.969 108.455C210.893 107.03 195.747 108.13 189.432 109.821C177.696 112.965 167.264 118.334 161.386 122.199C151.232 128.878 144.022 146.166 141.681 154.418C140.668 157.987 138.131 172.13 135.343 197.31C133.941 209.974 134.38 222.988 134.687 232.065L134.702 232.502C135.164 246.218 137.48 255.228 140.105 263.42C144.701 277.76 154.189 284.984 159.621 289.946C165.222 295.063 174.596 301.693 191.472 309.605C203.123 315.068 212.744 316.292 218.91 316.756C236.271 318.065 244.371 314.862 258.049 309.454L258.711 309.192C268.087 305.486 275.61 301.451 282.901 297.26C289.655 293.377 294.828 287.827 300.097 281.629C307.576 272.832 309.084 266.138 311.727 261.022C316.761 251.282 318.079 232.404 319.166 221.875C321.749 196.871 317.169 191.794 313.145 179.89C310.95 173.398 308.805 169.175 307.095 164.682C305.701 161.018 299.755 152.895 293.041 145.738ZM293.041 145.738C292.267 144.913 291.482 144.1 290.693 143.308C289.29 142.216 288.063 141.296 286.971 140.516C285.879 139.735 284.959 139.122 283.082 136.631M109.304 79.0151C103.449 76.2551 94.7699 68.8115 86.8755 61.0798C81.8756 56.1828 80.1985 51.1549 77.8707 47.4331C77.0947 45.5791 75.8587 44.3246 75.0781 43.7066C75.2175 43.3953 76.4442 43.0886 79.5666 42.7727M222.678 50.207C223.914 39.7246 225.15 27.3092 225.619 22.5001C225.772 21.4082 226.079 20.4882 226.697 20.1676C227.315 19.847 228.235 20.1537 230.112 20.4696M349.062 81.803C357.082 73.1606 367.611 64.481 373.967 59.3699C385.609 50.0084 389.932 48.9804 393.654 47.2705C394.588 46.8058 395.508 46.1925 396.595 45.8765C397.682 45.5606 398.909 45.5606 400.173 45.5606M416.9 191.46C420.209 191.46 443.199 190.846 449.249 190.377C451.879 189.917 456.209 189.601 461.009 190.061C462.742 190.521 463.049 191.441 463.365 192.389M360.213 346.652C350.642 342.015 343.189 339.533 341.637 339.371C336.816 338.866 347.185 348.176 361.087 362.241C367.945 368.323 372.276 373.267 381.397 382.704C383.436 384.744 384.356 385.664 387.163 387.541M260.779 398.692C260.779 396.546 260.779 394.399 260.166 392.68C259.552 390.961 258.326 389.734 257.387 390.175C250.97 393.193 254.274 404.231 251.96 421.548C251.486 426.85 250.873 431.19 249.79 436.291C249.321 438.633 249.014 440.473 248.698 443.298M107.445 388.47C108.365 386.63 109.285 384.79 109.299 383.535C109.313 382.281 108.393 381.668 107.306 381.505C104.992 381.649 100.048 384.725 91.0992 390.747C85.8301 394.009 79.0834 397.689 73.0616 401.48M85.1424 269.52C80.849 268.907 71.8907 268.898 60.9018 269.516C56.6595 269.827 55.1262 270.134 53.4163 270.292C51.7064 270.45 49.8664 270.45 47.9706 269.52M76.7787 171.015C56.1205 159.585 34.3658 152.132 29.5567 150.422C27.5447 149.344 25.6769 148.099 25.3563 147.17C25.9557 146.854 28.1023 146.854 31.2433 147.783"]};var X8=ce(`<a class="bg-card text-oncard p-8 flex flex-col items-center justify-center
         shadow-lg hover:shadow-xl hover:scale-105 transition-transform transition-shadow
         border-5 border-oncard cursor-pointer
         rounded-xl"><!> <h2 class="text-2xl font-semibold mb-2"> </h2> <p class="text-center text-oncard"> </p></a>`);function cx(n,t){tn(t,!1);let e=mt(t,"href",8),i=mt(t,"icon",8),s=mt(t,"title",8),r=mt(t,"description",8),o=xe(),l=xe("");function c(x){return Math.abs(Math.floor(Math.sin(x)*1e4))%241+15}function h(x,_=0){return Math.abs(Math.floor(Math.sin(x+_)*1e4))%2===0}zn(()=>{if(U(o)){const x=U(o).getBoundingClientRect(),_=c(x.x),w=c(x.y),C=h(x.x,1)?_:15,S=C===15?_:15,T=h(x.y,2)?w:15,A=T===15?w:15,P=h(x.x,3)?_:15,N=P===15?_:15,E=h(x.y,4)?w:15;Ft(l,`
                border-top-left-radius: ${C}px ${S}px;
                border-top-right-radius: ${T}px ${A}px;
                border-bottom-right-radius: ${P}px ${N}px;
                border-bottom-left-radius: ${E}px ${E===15?w:15}px;
            `)}}),vn();var f=X8(),d=ut(f);mn(d,{get icon(){return i()},get class(){return`${zt(i()),ft(()=>i().prefix)??""}-icon text-oncard text-7xl mb-4 transition-colors duration-200`}});var p=St(d,2),g=ut(p),v=St(p,2),y=ut(v);Po(f,x=>Ft(o,x),()=>U(o)),an(()=>{Ce(f,"href",e()),Yi(f,U(l)),We(g,s()),We(y,r())}),Rt(n,f),en()}var Z8=ce('<main class="px-8 py-16 max-w-7xl mx-auto text-black"><header class="text-center mb-16"><h1 class="text-5xl md:text-6xl font-bold mb-4 text-onbg">ChaboStats</h1> <p class="text-lg md:text-xl text-onbg">Explore apartments, stats, and locations all in one place.</p></header> <section class="grid grid-cols-1 md:grid-cols-3 gap-8"></section></main>');function Y8(n){const t=[{title:"Listings",description:"See apartments",icon:no,href:"#/listings"},{title:"Statistics",description:"Graphic content",icon:Bs,href:"#/statistics"},{title:"Map",description:"Location is everything",icon:eo,href:"#/map"}];var e=Z8(),i=St(ut(e),2);Qn(i,5,()=>t,hi,(s,r)=>{cx(s,{get href(){return U(r).href},get icon(){return U(r).icon},get title(){return U(r).title},get description(){return U(r).description}})}),Rt(n,e)}var q8=ce('<div class="animate-pulse space-y-4"><div class="space-y-2"><div class="h-6 bg-onbg/10 rounded w-1/2"></div> <div class="h-4 bg-onbg/10 rounded w-3/4"></div> <div class="h-3 bg-onbg/10 rounded w-1/3"></div></div> <div class="flex flex-wrap gap-2"><div class="h-5 w-20 bg-pri/50 rounded"></div> <div class="h-5 w-24 bg-pri/50 rounded"></div> <div class="h-5 w-32 bg-pri/50 rounded"></div></div> <div class="h-10 bg-pri/50 rounded w-1/3 mt-auto"></div></div>'),$8=ce('<div><div><h2 class="text-2xl font-bold mb-2 text-oncard"> </h2> <p class="text-oncard/70 mb-2"> </p> <p class="text-sm text-oncard/60 mb-4"> </p></div> <div class="flex flex-wrap gap-2 mb-4"><span title="Size" class="bg-privari text-onpri text-sm font-medium px-2 py-1 rounded"><!> </span> <span title="Rent" class="bg-privari text-onpri text-sm font-medium px-2 py-1 rounded"><!> </span> <span title="Published" class="bg-privari text-onpri text-sm font-medium px-2 py-1 rounded"><!> </span></div> <a class="mt-auto inline-block text-onpri bg-pri hover:bg-sec text-center font-semibold py-2 px-4 rounded transition-colors duration-150">More info</a></div>'),K8=ce(`<div class="rounded-xl p-6 bg-card shadow-md flex flex-col justify-between
         transition-shadow duration-200
         hover:shadow-lg"><!></div>`);function n_(n,t){tn(t,!1);let e=mt(t,"apartment",8,null),i=mt(t,"loading",8,!1);vn();var s=K8(),r=ut(s);{var o=c=>{var h=q8();Rt(c,h)},l=c=>{var h=Bn(),f=xn(h);{var d=p=>{var g=$8(),v=ut(g),y=ut(v),x=ut(y),_=St(y,2),w=ut(_),C=St(_,2),S=ut(C),T=St(v,2),A=ut(T),P=ut(A);mn(P,{get icon(){return fa},get class(){return`${zt(fa),ft(()=>fa.prefix)??""}-icon w-5 h-5`}});var N=St(P),E=St(A,2),R=ut(E);mn(R,{get icon(){return mo},get class(){return`${zt(mo),ft(()=>mo.prefix)??""}-icon w-5 h-5`}});var k=St(R),H=St(E,2),q=ut(H);mn(q,{get icon(){return go},get class(){return`${zt(go),ft(()=>go.prefix)??""}-icon w-5 h-5`}});var G=St(q),Y=St(T,2);an(()=>{We(x,(zt(e()),ft(()=>e().type))),We(w,`${zt(e()),ft(()=>e().address)??""}, ${zt(e()),ft(()=>e().location)??""}`),We(S,`Floor: ${zt(e()),ft(()=>e().floor.floor)??""} / ${zt(e()),ft(()=>e().floor.total_floors)??""}`),We(N,` ${zt(e()),ft(()=>e().size_sqrM)??""} mÂ²`),We(k,` ${zt(e()),ft(()=>e().rent_krPerMonth)??""} kr/mÃ¥n`),We(G,` ${zt(e()),ft(()=>e().published)??""}`),Ce(Y,"href",(zt(e()),ft(()=>`#/listings/${e().published}/${e().objectId}`)))}),Rt(p,g)};gn(f,p=>{e()&&p(d)},!0)}Rt(c,h)};gn(r,c=>{i()?c(o):c(l,!1)})}Rt(n,s),en()}var J8=ce("<option> </option>"),Q8=ce('<select class="w-full p-2 border rounded-md border-none bg-card shadow-md/20 text-oncard focus:outline-none focus:ring-2 focus:ring-privari"><option>No selected</option><!></select>'),tC=ce('<div class="p-2 text-sm text-muted">Loading options...</div>');function i_(n,t){tn(t,!0);let e=mt(t,"selected",15,""),i=mt(t,"kvPairs",31,()=>gr({}));e(e()??""),i(i()??{});var s=Bn(),r=xn(s);{var o=c=>{var h=Q8(),f=ut(h);f.value=f.__value="";var d=St(f);Qn(d,17,()=>Object.entries(i()),hi,(p,g)=>{var v=A4(()=>qb(U(g),2));let y=()=>U(v)[0],x=()=>U(v)[1];var _=J8(),w=ut(_),C={};an(()=>{We(w,x()),C!==(C=y())&&(_.value=(_.__value=y())??"")}),Rt(p,_)}),an(()=>Ce(h,"id",t.id)),d5(h,e),Rt(c,h)},l=c=>{var h=tC();Rt(c,h)};gn(r,c=>{Object.keys(i()).length>0?c(o):c(l,!1)})}Rt(n,s),en()}var eC=ce('<div class="relative w-full h-6"><div class="absolute top-1/2 -translate-y-1/2 w-full h-2 rounded bg-oncard/20"></div> <div class="absolute top-1/2 -translate-y-1/2 h-2 rounded bg-pri"></div> <div role="slider" tabindex="0" class="absolute top-1/2 w-4 h-4 rounded-full bg-sec shadow cursor-pointer"></div> <div role="slider" tabindex="0" class="absolute top-1/2 w-4 h-4 rounded-full bg-sec shadow cursor-pointer"></div></div>');function s_(n,t){tn(t,!0),mt(t,"id",3,"");let e=mt(t,"min",3,0),i=mt(t,"max",3,100),s=mt(t,"step",3,1),r=mt(t,"lowPointer",15),o=mt(t,"highPointer",15);r(r()??e()),o(o()??i());let l=null,c;function h(_){const w=e()+_/100*(i()-e());return Math.round(w/s())*s()}function f(_,w){l=_,w.target.setPointerCapture(w.pointerId)}function d(_){if(!l)return;const w=c.getBoundingClientRect(),C=(_.clientX-w.left)/w.width*100,S=h(Math.min(100,Math.max(0,C)));l==="low"?S<=o()?r(S):r(o()):S>=r()?o(S):o(r())}function p(_){l=null,_.target.releasePointerCapture(_.pointerId)}var g=eC(),v=St(ut(g),2),y=St(v,2),x=St(y,2);Po(g,_=>c=_,()=>c),an(()=>{Yi(v,`
      left: ${(r()-e())/(i()-e())*100}%;
      width: ${(o()-r())/(i()-e())*100}%;
    `),Yi(y,`left: ${(r()-e())/(i()-e())*100}%; transform: translate(-50%, -50%);`),Yi(x,`left: ${(o()-e())/(i()-e())*100}%; transform: translate(-50%, -50%);`)}),Hs("pointerdown",y,_=>f("low",_)),Hs("pointerdown",x,_=>f("high",_)),Hs("pointermove",g,d),Hs("pointerup",g,p),Rt(n,g),en()}const nC={building_codes:[{code:"chabo",name:"chabo"},{code:"gibguest",name:"gibraltar guesthouse"},{code:"gasthuset",name:"gÃ¤sthuset"},{code:"rannan",name:"rÃ¤nnan"},{code:"skateberget",name:"skateberget"},{code:"sangsvanen",name:"sÃ¥ngsvanen"},{code:"kappelgangen",name:"kapellgÃ¥ngen"},{code:"gib78",name:"gibraltargatan 78"},{code:"gib80",name:"gibraltargatan 80"},{code:"gib82B_94",name:"gibraltargatan 82 B & 94",alias:["emilsborg 82/94"]},{code:"gib84_92",name:"gibraltargatan 84-92",alias:["emilsborg"]},{code:"uddjaur",name:"uddjaur"},{code:"emilsbro",name:"emilsbro"},{code:"forselius",name:"dr forselius backe",alias:["guldheden"]},{code:"wigardhs",name:"dr wigardhs gata"},{code:"holterman",name:"holterman studenthostel"}]},hx={cha_stu_bo:nC};var iC=ce('<div class="p-6 bg-card rounded-xl shadow-md flex flex-col gap-6"><div class="flex flex-col gap-2"><label for="location" class="font-semibold text-oncard">Location</label> <!> <label for="feature" class="font-semibold text-oncard">Feature</label> <!> <div class="flex justify-between items-center"><label for="sizeRange" class="font-semibold text-oncard">Size (mÂ²)</label> <span class="text-oncard font-medium"> </span></div> <!> <div class="flex flex-col gap-2"><div class="flex justify-between items-center"><label for="rentRange" class="font-semibold text-oncard">Rent</label> <span class="text-oncard font-medium"> </span></div> <!></div></div> <button class="px-4 py-2 bg-pri text-onpri rounded-lg shadow hover:bg-privari">Apply Filters</button></div>');function sC(n,t){tn(t,!0);let e=mt(t,"selectedLocation",15,""),i=mt(t,"selectedFeature",15,""),s=mt(t,"minSize",3,0),r=mt(t,"maxSize",3,100),o=mt(t,"lowSize",15,null),l=mt(t,"highSize",15,null),c=mt(t,"minRent",3,0),h=mt(t,"maxRent",3,1e4),f=mt(t,"lowRent",15,null),d=mt(t,"highRent",15,null),p=mt(t,"onApplyFilters",3,()=>{}),g=["corner","balcony","power_individual_measurement","hot_water_individual_measurement","cycling_room"],v={};g.forEach(G=>{const Y=G.replace(/_/g," ").replace(/\b\w/g,j=>j.toUpperCase());v[G]=Y});let y=Os(gr({}));zn(()=>{const G=hx.cha_stu_bo.building_codes;Ft(y,{},!0),G.forEach(Y=>{const j=Y.code;U(y)[j]=Y.name})});var x=iC(),_=ut(x),w=St(ut(_),2);i_(w,{id:"location",get selected(){return e()},set selected(G){e(G)},get kvPairs(){return U(y)},set kvPairs(G){Ft(y,G,!0)}});var C=St(w,4);i_(C,{id:"feature",get selected(){return i()},set selected(G){i(G)},get kvPairs(){return v},set kvPairs(G){v=G}});var S=St(C,2),T=St(ut(S),2),A=ut(T),P=St(S,2);s_(P,{id:"sizeRange",get min(){return s()},get max(){return r()},get lowPointer(){return o()},set lowPointer(G){o(G)},get highPointer(){return l()},set highPointer(G){l(G)}});var N=St(P,2),E=ut(N),R=St(ut(E),2),k=ut(R),H=St(E,2);s_(H,{id:"rentRange",get min(){return c()},get max(){return h()},get lowPointer(){return f()},set lowPointer(G){f(G)},get highPointer(){return d()},set highPointer(G){d(G)}});var q=St(_,2);q.__click=function(...G){p()?.apply(this,G)},an(()=>{We(A,`${o()??""} - ${l()??""}`),We(k,`${f()??""} - ${d()??""}`)}),Rt(n,x),en()}jv(["click"]);var rC=ce('<p class="col-span-full text-center px-6 py-4 rounded-lg shadow-md text-lg font-medium flex items-center justify-center gap-2 text-onerr bg-err"><span>ð</span> Oops, nothing matched your filters.</p>'),oC=ce('<div class="px-6 md:px-12 lg:px-20 py-8 flex justify-center"><div class="w-full max-w-[300px] md:max-w-[2000px] mx-auto flex flex-wrap md:flex-nowrap gap-8"><div class="w-full max-w-[300px] lg:w-1/4"><!></div> <div class="w-full lg:w-3/4"><div class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6"><!></div></div></div></div>');function aC(n,t){tn(t,!1);let e=xe([]),i=xe(null),s=xe(null),r=xe(null),o=xe(null),l=xe(null),c=xe(null),h=xe(!0);async function f(){Ft(h,!0);try{const T=window.location.hash,[A,P]=T.split("?"),E=new URLSearchParams(P).get("locationCode");E&&!U(l)&&Ft(l,E),d();const R=await fetch(`/ChaboStats/api/listings?minSize=${U(i)}&maxSize=${U(s)}&locationCode=${U(l)}`);Ft(e,await R.json())}catch(T){console.error("Error fetching listings:",T),Ft(e,[])}finally{Ft(h,!1)}}function d(){const T=new URLSearchParams;U(i)!=null&&T.set("minSize",String(U(i))),U(s)!=null&&T.set("maxSize",String(U(s))),U(r)!=null&&T.set("minRent",String(U(r))),U(o)!=null&&T.set("maxRent",String(U(o))),U(l)&&T.set("locationCode",U(l)),window.location.hash=`/listings?${T.toString()}`}zn(()=>{f()}),vn();var p=oC(),g=ut(p),v=ut(g),y=ut(v);sC(y,{onApplyFilters:f,get lowSize(){return U(i)},set lowSize(T){Ft(i,T)},get highSize(){return U(s)},set highSize(T){Ft(s,T)},get lowRent(){return U(r)},set lowRent(T){Ft(r,T)},get highRent(){return U(o)},set highRent(T){Ft(o,T)},get selectedLocation(){return U(l)},set selectedLocation(T){Ft(l,T)},get selectedFeature(){return U(c)},set selectedFeature(T){Ft(c,T)},$$legacy:!0});var x=St(v,2),_=ut(x),w=ut(_);{var C=T=>{var A=Bn(),P=xn(A);Qn(P,0,()=>Array(9),hi,(N,E)=>{n_(N,{loading:!0})}),Rt(T,A)},S=T=>{var A=Bn(),P=xn(A);{var N=R=>{var k=rC();Rt(R,k)},E=R=>{var k=Bn(),H=xn(k);Qn(H,1,()=>U(e),hi,(q,G)=>{n_(q,{get apartment(){return U(G)}})}),Rt(R,k)};gn(P,R=>{U(e).length===0?R(N):R(E,!1)},!0)}Rt(T,A)};gn(w,T=>{U(h)?T(C):T(S,!1)})}Rt(n,p),en()}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Lm="179",da={ROTATE:0,DOLLY:1,PAN:2},aa={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},lC=0,r_=1,cC=2,ux=1,hC=2,Ns=3,Ks=0,ui=1,as=2,Tr=0,pa=1,o_=2,a_=3,l_=4,uC=5,ao=100,fC=101,dC=102,pC=103,mC=104,gC=200,_C=201,vC=202,xC=203,ip=204,sp=205,yC=206,bC=207,MC=208,SC=209,CC=210,wC=211,TC=212,EC=213,AC=214,rp=0,op=1,ap=2,Ta=3,lp=4,cp=5,hp=6,up=7,fx=0,PC=1,RC=2,Er=0,LC=1,IC=2,DC=3,OC=4,NC=5,kC=6,FC=7,c_="attached",UC="detached",dx=300,Ea=301,Aa=302,fp=303,dp=304,Iu=306,Pa=1e3,vr=1001,nu=1002,ni=1003,px=1004,Pl=1005,yi=1006,Uh=1007,Vs=1008,ms=1009,mx=1010,gx=1011,Kl=1012,Im=1013,Mo=1014,ji=1015,xc=1016,Dm=1017,Om=1018,Jl=1020,_x=35902,vx=1021,xx=1022,Ri=1023,Ql=1026,tc=1027,Nm=1028,km=1029,yx=1030,Fm=1031,Um=1033,Bh=33776,zh=33777,Hh=33778,Vh=33779,pp=35840,mp=35841,gp=35842,_p=35843,vp=36196,xp=37492,yp=37496,bp=37808,Mp=37809,Sp=37810,Cp=37811,wp=37812,Tp=37813,Ep=37814,Ap=37815,Pp=37816,Rp=37817,Lp=37818,Ip=37819,Dp=37820,Op=37821,Wh=36492,Np=36494,kp=36495,bx=36283,Fp=36284,Up=36285,Bp=36286,ec=2300,nc=2301,If=2302,h_=2400,u_=2401,f_=2402,BC=2500,zC=0,Mx=1,zp=2,HC=3200,VC=3201,Sx=0,WC=1,pr="",Fn="srgb",si="srgb-linear",iu="linear",Ke="srgb",Vo=7680,d_=519,GC=512,jC=513,XC=514,Cx=515,ZC=516,YC=517,qC=518,$C=519,Hp=35044,p_="300 es",cs=2e3,su=2001;class Ro{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[t]===void 0&&(i[t]=[]),i[t].indexOf(e)===-1&&i[t].push(e)}hasEventListener(t,e){const i=this._listeners;return i===void 0?!1:i[t]!==void 0&&i[t].indexOf(e)!==-1}removeEventListener(t,e){const i=this._listeners;if(i===void 0)return;const s=i[t];if(s!==void 0){const r=s.indexOf(e);r!==-1&&s.splice(r,1)}}dispatchEvent(t){const e=this._listeners;if(e===void 0)return;const i=e[t.type];if(i!==void 0){t.target=this;const s=i.slice(0);for(let r=0,o=s.length;r<o;r++)s[r].call(this,t);t.target=null}}}const Hn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let m_=1234567;const Bl=Math.PI/180,Ra=180/Math.PI;function qi(){const n=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Hn[n&255]+Hn[n>>8&255]+Hn[n>>16&255]+Hn[n>>24&255]+"-"+Hn[t&255]+Hn[t>>8&255]+"-"+Hn[t>>16&15|64]+Hn[t>>24&255]+"-"+Hn[e&63|128]+Hn[e>>8&255]+"-"+Hn[e>>16&255]+Hn[e>>24&255]+Hn[i&255]+Hn[i>>8&255]+Hn[i>>16&255]+Hn[i>>24&255]).toLowerCase()}function Me(n,t,e){return Math.max(t,Math.min(e,n))}function Bm(n,t){return(n%t+t)%t}function KC(n,t,e,i,s){return i+(n-t)*(s-i)/(e-t)}function JC(n,t,e){return n!==t?(e-n)/(t-n):0}function zl(n,t,e){return(1-e)*n+e*t}function QC(n,t,e,i){return zl(n,t,1-Math.exp(-e*i))}function t6(n,t=1){return t-Math.abs(Bm(n,t*2)-t)}function e6(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*(3-2*n))}function n6(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*n*(n*(n*6-15)+10))}function i6(n,t){return n+Math.floor(Math.random()*(t-n+1))}function s6(n,t){return n+Math.random()*(t-n)}function r6(n){return n*(.5-Math.random())}function o6(n){n!==void 0&&(m_=n);let t=m_+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function a6(n){return n*Bl}function l6(n){return n*Ra}function c6(n){return(n&n-1)===0&&n!==0}function h6(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function u6(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function f6(n,t,e,i,s){const r=Math.cos,o=Math.sin,l=r(e/2),c=o(e/2),h=r((t+i)/2),f=o((t+i)/2),d=r((t-i)/2),p=o((t-i)/2),g=r((i-t)/2),v=o((i-t)/2);switch(s){case"XYX":n.set(l*f,c*d,c*p,l*h);break;case"YZY":n.set(c*p,l*f,c*d,l*h);break;case"ZXZ":n.set(c*d,c*p,l*f,l*h);break;case"XZX":n.set(l*f,c*v,c*g,l*h);break;case"YXY":n.set(c*g,l*f,c*v,l*h);break;case"ZYZ":n.set(c*v,c*g,l*f,l*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function Vi(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Xe(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const wx={DEG2RAD:Bl,RAD2DEG:Ra,generateUUID:qi,clamp:Me,euclideanModulo:Bm,mapLinear:KC,inverseLerp:JC,lerp:zl,damp:QC,pingpong:t6,smoothstep:e6,smootherstep:n6,randInt:i6,randFloat:s6,randFloatSpread:r6,seededRandom:o6,degToRad:a6,radToDeg:l6,isPowerOfTwo:c6,ceilPowerOfTwo:h6,floorPowerOfTwo:u6,setQuaternionFromProperEuler:f6,normalize:Xe,denormalize:Vi};class le{constructor(t=0,e=0){le.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,i=this.y,s=t.elements;return this.x=s[0]*e+s[3]*i+s[6],this.y=s[1]*e+s[4]*i+s[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Me(this.x,t.x,e.x),this.y=Me(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=Me(this.x,t,e),this.y=Me(this.y,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Me(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(Me(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const i=Math.cos(e),s=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*i-o*s+t.x,this.y=r*s+o*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class gs{constructor(t=0,e=0,i=0,s=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=s}static slerpFlat(t,e,i,s,r,o,l){let c=i[s+0],h=i[s+1],f=i[s+2],d=i[s+3];const p=r[o+0],g=r[o+1],v=r[o+2],y=r[o+3];if(l===0){t[e+0]=c,t[e+1]=h,t[e+2]=f,t[e+3]=d;return}if(l===1){t[e+0]=p,t[e+1]=g,t[e+2]=v,t[e+3]=y;return}if(d!==y||c!==p||h!==g||f!==v){let x=1-l;const _=c*p+h*g+f*v+d*y,w=_>=0?1:-1,C=1-_*_;if(C>Number.EPSILON){const T=Math.sqrt(C),A=Math.atan2(T,_*w);x=Math.sin(x*A)/T,l=Math.sin(l*A)/T}const S=l*w;if(c=c*x+p*S,h=h*x+g*S,f=f*x+v*S,d=d*x+y*S,x===1-l){const T=1/Math.sqrt(c*c+h*h+f*f+d*d);c*=T,h*=T,f*=T,d*=T}}t[e]=c,t[e+1]=h,t[e+2]=f,t[e+3]=d}static multiplyQuaternionsFlat(t,e,i,s,r,o){const l=i[s],c=i[s+1],h=i[s+2],f=i[s+3],d=r[o],p=r[o+1],g=r[o+2],v=r[o+3];return t[e]=l*v+f*d+c*g-h*p,t[e+1]=c*v+f*p+h*d-l*g,t[e+2]=h*v+f*g+l*p-c*d,t[e+3]=f*v-l*d-c*p-h*g,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,s){return this._x=t,this._y=e,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const i=t._x,s=t._y,r=t._z,o=t._order,l=Math.cos,c=Math.sin,h=l(i/2),f=l(s/2),d=l(r/2),p=c(i/2),g=c(s/2),v=c(r/2);switch(o){case"XYZ":this._x=p*f*d+h*g*v,this._y=h*g*d-p*f*v,this._z=h*f*v+p*g*d,this._w=h*f*d-p*g*v;break;case"YXZ":this._x=p*f*d+h*g*v,this._y=h*g*d-p*f*v,this._z=h*f*v-p*g*d,this._w=h*f*d+p*g*v;break;case"ZXY":this._x=p*f*d-h*g*v,this._y=h*g*d+p*f*v,this._z=h*f*v+p*g*d,this._w=h*f*d-p*g*v;break;case"ZYX":this._x=p*f*d-h*g*v,this._y=h*g*d+p*f*v,this._z=h*f*v-p*g*d,this._w=h*f*d+p*g*v;break;case"YZX":this._x=p*f*d+h*g*v,this._y=h*g*d+p*f*v,this._z=h*f*v-p*g*d,this._w=h*f*d-p*g*v;break;case"XZY":this._x=p*f*d-h*g*v,this._y=h*g*d-p*f*v,this._z=h*f*v+p*g*d,this._w=h*f*d+p*g*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const i=e/2,s=Math.sin(i);return this._x=t.x*s,this._y=t.y*s,this._z=t.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,i=e[0],s=e[4],r=e[8],o=e[1],l=e[5],c=e[9],h=e[2],f=e[6],d=e[10],p=i+l+d;if(p>0){const g=.5/Math.sqrt(p+1);this._w=.25/g,this._x=(f-c)*g,this._y=(r-h)*g,this._z=(o-s)*g}else if(i>l&&i>d){const g=2*Math.sqrt(1+i-l-d);this._w=(f-c)/g,this._x=.25*g,this._y=(s+o)/g,this._z=(r+h)/g}else if(l>d){const g=2*Math.sqrt(1+l-i-d);this._w=(r-h)/g,this._x=(s+o)/g,this._y=.25*g,this._z=(c+f)/g}else{const g=2*Math.sqrt(1+d-i-l);this._w=(o-s)/g,this._x=(r+h)/g,this._y=(c+f)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<1e-8?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Me(this.dot(t),-1,1)))}rotateTowards(t,e){const i=this.angleTo(t);if(i===0)return this;const s=Math.min(1,e/i);return this.slerp(t,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const i=t._x,s=t._y,r=t._z,o=t._w,l=e._x,c=e._y,h=e._z,f=e._w;return this._x=i*f+o*l+s*h-r*c,this._y=s*f+o*c+r*l-i*h,this._z=r*f+o*h+i*c-s*l,this._w=o*f-i*l-s*c-r*h,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);const i=this._x,s=this._y,r=this._z,o=this._w;let l=o*t._w+i*t._x+s*t._y+r*t._z;if(l<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,l=-l):this.copy(t),l>=1)return this._w=o,this._x=i,this._y=s,this._z=r,this;const c=1-l*l;if(c<=Number.EPSILON){const g=1-e;return this._w=g*o+e*this._w,this._x=g*i+e*this._x,this._y=g*s+e*this._y,this._z=g*r+e*this._z,this.normalize(),this}const h=Math.sqrt(c),f=Math.atan2(h,l),d=Math.sin((1-e)*f)/h,p=Math.sin(e*f)/h;return this._w=o*d+this._w*p,this._x=i*d+this._x*p,this._y=s*d+this._y*p,this._z=r*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),i=Math.random(),s=Math.sqrt(1-i),r=Math.sqrt(i);return this.set(s*Math.sin(t),s*Math.cos(t),r*Math.sin(e),r*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class X{constructor(t=0,e=0,i=0){X.prototype.isVector3=!0,this.x=t,this.y=e,this.z=i}set(t,e,i){return i===void 0&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(g_.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(g_.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,i=this.y,s=this.z,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6]*s,this.y=r[1]*e+r[4]*i+r[7]*s,this.z=r[2]*e+r[5]*i+r[8]*s,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,i=this.y,s=this.z,r=t.elements,o=1/(r[3]*e+r[7]*i+r[11]*s+r[15]);return this.x=(r[0]*e+r[4]*i+r[8]*s+r[12])*o,this.y=(r[1]*e+r[5]*i+r[9]*s+r[13])*o,this.z=(r[2]*e+r[6]*i+r[10]*s+r[14])*o,this}applyQuaternion(t){const e=this.x,i=this.y,s=this.z,r=t.x,o=t.y,l=t.z,c=t.w,h=2*(o*s-l*i),f=2*(l*e-r*s),d=2*(r*i-o*e);return this.x=e+c*h+o*d-l*f,this.y=i+c*f+l*h-r*d,this.z=s+c*d+r*f-o*h,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,i=this.y,s=this.z,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*s,this.y=r[1]*e+r[5]*i+r[9]*s,this.z=r[2]*e+r[6]*i+r[10]*s,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Me(this.x,t.x,e.x),this.y=Me(this.y,t.y,e.y),this.z=Me(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=Me(this.x,t,e),this.y=Me(this.y,t,e),this.z=Me(this.z,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Me(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const i=t.x,s=t.y,r=t.z,o=e.x,l=e.y,c=e.z;return this.x=s*c-r*l,this.y=r*o-i*c,this.z=i*l-s*o,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return Df.copy(this).projectOnVector(t),this.sub(Df)}reflect(t){return this.sub(Df.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(Me(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y,s=this.z-t.z;return e*e+i*i+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){const s=Math.sin(e)*t;return this.x=s*Math.sin(i),this.y=Math.cos(e)*t,this.z=s*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),s=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=s,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=Math.random()*2-1,i=Math.sqrt(1-e*e);return this.x=i*Math.cos(t),this.y=e,this.z=i*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Df=new X,g_=new gs;class ge{constructor(t,e,i,s,r,o,l,c,h){ge.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,i,s,r,o,l,c,h)}set(t,e,i,s,r,o,l,c,h){const f=this.elements;return f[0]=t,f[1]=s,f[2]=l,f[3]=e,f[4]=r,f[5]=c,f[6]=i,f[7]=o,f[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,s=e.elements,r=this.elements,o=i[0],l=i[3],c=i[6],h=i[1],f=i[4],d=i[7],p=i[2],g=i[5],v=i[8],y=s[0],x=s[3],_=s[6],w=s[1],C=s[4],S=s[7],T=s[2],A=s[5],P=s[8];return r[0]=o*y+l*w+c*T,r[3]=o*x+l*C+c*A,r[6]=o*_+l*S+c*P,r[1]=h*y+f*w+d*T,r[4]=h*x+f*C+d*A,r[7]=h*_+f*S+d*P,r[2]=p*y+g*w+v*T,r[5]=p*x+g*C+v*A,r[8]=p*_+g*S+v*P,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[1],s=t[2],r=t[3],o=t[4],l=t[5],c=t[6],h=t[7],f=t[8];return e*o*f-e*l*h-i*r*f+i*l*c+s*r*h-s*o*c}invert(){const t=this.elements,e=t[0],i=t[1],s=t[2],r=t[3],o=t[4],l=t[5],c=t[6],h=t[7],f=t[8],d=f*o-l*h,p=l*c-f*r,g=h*r-o*c,v=e*d+i*p+s*g;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/v;return t[0]=d*y,t[1]=(s*h-f*i)*y,t[2]=(l*i-s*o)*y,t[3]=p*y,t[4]=(f*e-s*c)*y,t[5]=(s*r-l*e)*y,t[6]=g*y,t[7]=(i*c-h*e)*y,t[8]=(o*e-i*r)*y,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,s,r,o,l){const c=Math.cos(r),h=Math.sin(r);return this.set(i*c,i*h,-i*(c*o+h*l)+o+t,-s*h,s*c,-s*(-h*o+c*l)+l+e,0,0,1),this}scale(t,e){return this.premultiply(Of.makeScale(t,e)),this}rotate(t){return this.premultiply(Of.makeRotation(-t)),this}translate(t,e){return this.premultiply(Of.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,i,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,i=t.elements;for(let s=0;s<9;s++)if(e[s]!==i[s])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const Of=new ge;function Tx(n){for(let t=n.length-1;t>=0;--t)if(n[t]>=65535)return!0;return!1}function ic(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function d6(){const n=ic("canvas");return n.style.display="block",n}const __={};function ma(n){n in __||(__[n]=!0,console.warn(n))}function p6(n,t,e){return new Promise(function(i,s){function r(){switch(n.clientWaitSync(t,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:s();break;case n.TIMEOUT_EXPIRED:setTimeout(r,e);break;default:i()}}setTimeout(r,e)})}const v_=new ge().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),x_=new ge().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function m6(){const n={enabled:!0,workingColorSpace:si,spaces:{},convert:function(s,r,o){return this.enabled===!1||r===o||!r||!o||(this.spaces[r].transfer===Ke&&(s.r=Ys(s.r),s.g=Ys(s.g),s.b=Ys(s.b)),this.spaces[r].primaries!==this.spaces[o].primaries&&(s.applyMatrix3(this.spaces[r].toXYZ),s.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===Ke&&(s.r=ga(s.r),s.g=ga(s.g),s.b=ga(s.b))),s},workingToColorSpace:function(s,r){return this.convert(s,this.workingColorSpace,r)},colorSpaceToWorking:function(s,r){return this.convert(s,r,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===pr?iu:this.spaces[s].transfer},getLuminanceCoefficients:function(s,r=this.workingColorSpace){return s.fromArray(this.spaces[r].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,r,o){return s.copy(this.spaces[r].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(s,r){return ma("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(s,r)},toWorkingColorSpace:function(s,r){return ma("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(s,r)}},t=[.64,.33,.3,.6,.15,.06],e=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[si]:{primaries:t,whitePoint:i,transfer:iu,toXYZ:v_,fromXYZ:x_,luminanceCoefficients:e,workingColorSpaceConfig:{unpackColorSpace:Fn},outputColorSpaceConfig:{drawingBufferColorSpace:Fn}},[Fn]:{primaries:t,whitePoint:i,transfer:Ke,toXYZ:v_,fromXYZ:x_,luminanceCoefficients:e,outputColorSpaceConfig:{drawingBufferColorSpace:Fn}}}),n}const Fe=m6();function Ys(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function ga(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Wo;class g6{static getDataURL(t,e="image/png"){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let i;if(t instanceof HTMLCanvasElement)i=t;else{Wo===void 0&&(Wo=ic("canvas")),Wo.width=t.width,Wo.height=t.height;const s=Wo.getContext("2d");t instanceof ImageData?s.putImageData(t,0,0):s.drawImage(t,0,0,t.width,t.height),i=Wo}return i.toDataURL(e)}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=ic("canvas");e.width=t.width,e.height=t.height;const i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);const s=i.getImageData(0,0,t.width,t.height),r=s.data;for(let o=0;o<r.length;o++)r[o]=Ys(r[o]/255)*255;return i.putImageData(s,0,0),e}else if(t.data){const e=t.data.slice(0);for(let i=0;i<e.length;i++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[i]=Math.floor(Ys(e[i]/255)*255):e[i]=Ys(e[i]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let _6=0;class zm{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_6++}),this.uuid=qi(),this.data=t,this.dataReady=!0,this.version=0}getSize(t){const e=this.data;return e instanceof HTMLVideoElement?t.set(e.videoWidth,e.videoHeight,0):e instanceof VideoFrame?t.set(e.displayHeight,e.displayWidth,0):e!==null?t.set(e.width,e.height,e.depth||0):t.set(0,0,0),t}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let r;if(Array.isArray(s)){r=[];for(let o=0,l=s.length;o<l;o++)s[o].isDataTexture?r.push(Nf(s[o].image)):r.push(Nf(s[o]))}else r=Nf(s);i.url=r}return e||(t.images[this.uuid]=i),i}}function Nf(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?g6.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let v6=0;const kf=new X;class Dn extends Ro{constructor(t=Dn.DEFAULT_IMAGE,e=Dn.DEFAULT_MAPPING,i=vr,s=vr,r=yi,o=Vs,l=Ri,c=ms,h=Dn.DEFAULT_ANISOTROPY,f=pr){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:v6++}),this.uuid=qi(),this.name="",this.source=new zm(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=i,this.wrapT=s,this.magFilter=r,this.minFilter=o,this.anisotropy=h,this.format=l,this.internalFormat=null,this.type=c,this.offset=new le(0,0),this.repeat=new le(1,1),this.center=new le(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ge,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=f,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(t&&t.depth&&t.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(kf).x}get height(){return this.source.getSize(kf).y}get depth(){return this.source.getSize(kf).z}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isArrayTexture=t.isArrayTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}setValues(t){for(const e in t){const i=t[e];if(i===void 0){console.warn(`THREE.Texture.setValues(): parameter '${e}' has value of undefined.`);continue}const s=this[e];if(s===void 0){console.warn(`THREE.Texture.setValues(): property '${e}' does not exist.`);continue}s&&i&&s.isVector2&&i.isVector2||s&&i&&s.isVector3&&i.isVector3||s&&i&&s.isMatrix3&&i.isMatrix3?s.copy(i):this[e]=i}}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),e||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==dx)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Pa:t.x=t.x-Math.floor(t.x);break;case vr:t.x=t.x<0?0:1;break;case nu:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case Pa:t.y=t.y-Math.floor(t.y);break;case vr:t.y=t.y<0?0:1;break;case nu:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}Dn.DEFAULT_IMAGE=null;Dn.DEFAULT_MAPPING=dx;Dn.DEFAULT_ANISOTROPY=1;class Ge{constructor(t=0,e=0,i=0,s=1){Ge.prototype.isVector4=!0,this.x=t,this.y=e,this.z=i,this.w=s}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,s){return this.x=t,this.y=e,this.z=i,this.w=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,i=this.y,s=this.z,r=this.w,o=t.elements;return this.x=o[0]*e+o[4]*i+o[8]*s+o[12]*r,this.y=o[1]*e+o[5]*i+o[9]*s+o[13]*r,this.z=o[2]*e+o[6]*i+o[10]*s+o[14]*r,this.w=o[3]*e+o[7]*i+o[11]*s+o[15]*r,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,s,r;const c=t.elements,h=c[0],f=c[4],d=c[8],p=c[1],g=c[5],v=c[9],y=c[2],x=c[6],_=c[10];if(Math.abs(f-p)<.01&&Math.abs(d-y)<.01&&Math.abs(v-x)<.01){if(Math.abs(f+p)<.1&&Math.abs(d+y)<.1&&Math.abs(v+x)<.1&&Math.abs(h+g+_-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const C=(h+1)/2,S=(g+1)/2,T=(_+1)/2,A=(f+p)/4,P=(d+y)/4,N=(v+x)/4;return C>S&&C>T?C<.01?(i=0,s=.707106781,r=.707106781):(i=Math.sqrt(C),s=A/i,r=P/i):S>T?S<.01?(i=.707106781,s=0,r=.707106781):(s=Math.sqrt(S),i=A/s,r=N/s):T<.01?(i=.707106781,s=.707106781,r=0):(r=Math.sqrt(T),i=P/r,s=N/r),this.set(i,s,r,e),this}let w=Math.sqrt((x-v)*(x-v)+(d-y)*(d-y)+(p-f)*(p-f));return Math.abs(w)<.001&&(w=1),this.x=(x-v)/w,this.y=(d-y)/w,this.z=(p-f)/w,this.w=Math.acos((h+g+_-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Me(this.x,t.x,e.x),this.y=Me(this.y,t.y,e.y),this.z=Me(this.z,t.z,e.z),this.w=Me(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=Me(this.x,t,e),this.y=Me(this.y,t,e),this.z=Me(this.z,t,e),this.w=Me(this.w,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Me(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class x6 extends Ro{constructor(t=1,e=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:yi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=i.depth,this.scissor=new Ge(0,0,t,e),this.scissorTest=!1,this.viewport=new Ge(0,0,t,e);const s={width:t,height:e,depth:i.depth},r=new Dn(s);this.textures=[];const o=i.count;for(let l=0;l<o;l++)this.textures[l]=r.clone(),this.textures[l].isRenderTargetTexture=!0,this.textures[l].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(t={}){const e={minFilter:yi,generateMipmaps:!1,flipY:!1,internalFormat:null};t.mapping!==void 0&&(e.mapping=t.mapping),t.wrapS!==void 0&&(e.wrapS=t.wrapS),t.wrapT!==void 0&&(e.wrapT=t.wrapT),t.wrapR!==void 0&&(e.wrapR=t.wrapR),t.magFilter!==void 0&&(e.magFilter=t.magFilter),t.minFilter!==void 0&&(e.minFilter=t.minFilter),t.format!==void 0&&(e.format=t.format),t.type!==void 0&&(e.type=t.type),t.anisotropy!==void 0&&(e.anisotropy=t.anisotropy),t.colorSpace!==void 0&&(e.colorSpace=t.colorSpace),t.flipY!==void 0&&(e.flipY=t.flipY),t.generateMipmaps!==void 0&&(e.generateMipmaps=t.generateMipmaps),t.internalFormat!==void 0&&(e.internalFormat=t.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(e)}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),t!==null&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,e,i=1){if(this.width!==t||this.height!==e||this.depth!==i){this.width=t,this.height=e,this.depth=i;for(let s=0,r=this.textures.length;s<r;s++)this.textures[s].image.width=t,this.textures[s].image.height=e,this.textures[s].image.depth=i,this.textures[s].isArrayTexture=this.textures[s].image.depth>1;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let e=0,i=t.textures.length;e<i;e++){this.textures[e]=t.textures[e].clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;const s=Object.assign({},t.textures[e].image);this.textures[e].source=new zm(s)}return this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class So extends x6{constructor(t=1,e=1,i={}){super(t,e,i),this.isWebGLRenderTarget=!0}}class Ex extends Dn{constructor(t=null,e=1,i=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:i,depth:s},this.magFilter=ni,this.minFilter=ni,this.wrapR=vr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class y6 extends Dn{constructor(t=null,e=1,i=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:i,depth:s},this.magFilter=ni,this.minFilter=ni,this.wrapR=vr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class er{constructor(t=new X(1/0,1/0,1/0),e=new X(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e+=3)this.expandByPoint(Bi.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,i=t.count;e<i;e++)this.expandByPoint(Bi.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=Bi.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const i=t.geometry;if(i!==void 0){const r=i.getAttribute("position");if(e===!0&&r!==void 0&&t.isInstancedMesh!==!0)for(let o=0,l=r.count;o<l;o++)t.isMesh===!0?t.getVertexPosition(o,Bi):Bi.fromBufferAttribute(r,o),Bi.applyMatrix4(t.matrixWorld),this.expandByPoint(Bi);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),Gc.copy(t.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Gc.copy(i.boundingBox)),Gc.applyMatrix4(t.matrixWorld),this.union(Gc)}const s=t.children;for(let r=0,o=s.length;r<o;r++)this.expandByObject(s[r],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,Bi),Bi.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(ul),jc.subVectors(this.max,ul),Go.subVectors(t.a,ul),jo.subVectors(t.b,ul),Xo.subVectors(t.c,ul),or.subVectors(jo,Go),ar.subVectors(Xo,jo),Gr.subVectors(Go,Xo);let e=[0,-or.z,or.y,0,-ar.z,ar.y,0,-Gr.z,Gr.y,or.z,0,-or.x,ar.z,0,-ar.x,Gr.z,0,-Gr.x,-or.y,or.x,0,-ar.y,ar.x,0,-Gr.y,Gr.x,0];return!Ff(e,Go,jo,Xo,jc)||(e=[1,0,0,0,1,0,0,0,1],!Ff(e,Go,jo,Xo,jc))?!1:(Xc.crossVectors(or,ar),e=[Xc.x,Xc.y,Xc.z],Ff(e,Go,jo,Xo,jc))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Bi).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(Bi).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(Es[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Es[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Es[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Es[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Es[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Es[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Es[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Es[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Es),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(t){return this.min.fromArray(t.min),this.max.fromArray(t.max),this}}const Es=[new X,new X,new X,new X,new X,new X,new X,new X],Bi=new X,Gc=new er,Go=new X,jo=new X,Xo=new X,or=new X,ar=new X,Gr=new X,ul=new X,jc=new X,Xc=new X,jr=new X;function Ff(n,t,e,i,s){for(let r=0,o=n.length-3;r<=o;r+=3){jr.fromArray(n,r);const l=s.x*Math.abs(jr.x)+s.y*Math.abs(jr.y)+s.z*Math.abs(jr.z),c=t.dot(jr),h=e.dot(jr),f=i.dot(jr);if(Math.max(-Math.max(c,h,f),Math.min(c,h,f))>l)return!1}return!0}const b6=new er,fl=new X,Uf=new X;class xs{constructor(t=new X,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const i=this.center;e!==void 0?i.copy(e):b6.setFromPoints(t).getCenter(i);let s=0;for(let r=0,o=t.length;r<o;r++)s=Math.max(s,i.distanceToSquared(t[r]));return this.radius=Math.sqrt(s),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;fl.subVectors(t,this.center);const e=fl.lengthSq();if(e>this.radius*this.radius){const i=Math.sqrt(e),s=(i-this.radius)*.5;this.center.addScaledVector(fl,s/i),this.radius+=s}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(Uf.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(fl.copy(t.center).add(Uf)),this.expandByPoint(fl.copy(t.center).sub(Uf))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(t){return this.radius=t.radius,this.center.fromArray(t.center),this}}const As=new X,Bf=new X,Zc=new X,lr=new X,zf=new X,Yc=new X,Hf=new X;class Wa{constructor(t=new X,e=new X(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,As)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=As.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(As.copy(this.origin).addScaledVector(this.direction,e),As.distanceToSquared(t))}distanceSqToSegment(t,e,i,s){Bf.copy(t).add(e).multiplyScalar(.5),Zc.copy(e).sub(t).normalize(),lr.copy(this.origin).sub(Bf);const r=t.distanceTo(e)*.5,o=-this.direction.dot(Zc),l=lr.dot(this.direction),c=-lr.dot(Zc),h=lr.lengthSq(),f=Math.abs(1-o*o);let d,p,g,v;if(f>0)if(d=o*c-l,p=o*l-c,v=r*f,d>=0)if(p>=-v)if(p<=v){const y=1/f;d*=y,p*=y,g=d*(d+o*p+2*l)+p*(o*d+p+2*c)+h}else p=r,d=Math.max(0,-(o*p+l)),g=-d*d+p*(p+2*c)+h;else p=-r,d=Math.max(0,-(o*p+l)),g=-d*d+p*(p+2*c)+h;else p<=-v?(d=Math.max(0,-(-o*r+l)),p=d>0?-r:Math.min(Math.max(-r,-c),r),g=-d*d+p*(p+2*c)+h):p<=v?(d=0,p=Math.min(Math.max(-r,-c),r),g=p*(p+2*c)+h):(d=Math.max(0,-(o*r+l)),p=d>0?r:Math.min(Math.max(-r,-c),r),g=-d*d+p*(p+2*c)+h);else p=o>0?-r:r,d=Math.max(0,-(o*p+l)),g=-d*d+p*(p+2*c)+h;return i&&i.copy(this.origin).addScaledVector(this.direction,d),s&&s.copy(Bf).addScaledVector(Zc,p),g}intersectSphere(t,e){As.subVectors(t.center,this.origin);const i=As.dot(this.direction),s=As.dot(As)-i*i,r=t.radius*t.radius;if(s>r)return null;const o=Math.sqrt(r-s),l=i-o,c=i+o;return c<0?null:l<0?this.at(c,e):this.at(l,e)}intersectsSphere(t){return t.radius<0?!1:this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){const i=this.distanceToPlane(t);return i===null?null:this.at(i,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,s,r,o,l,c;const h=1/this.direction.x,f=1/this.direction.y,d=1/this.direction.z,p=this.origin;return h>=0?(i=(t.min.x-p.x)*h,s=(t.max.x-p.x)*h):(i=(t.max.x-p.x)*h,s=(t.min.x-p.x)*h),f>=0?(r=(t.min.y-p.y)*f,o=(t.max.y-p.y)*f):(r=(t.max.y-p.y)*f,o=(t.min.y-p.y)*f),i>o||r>s||((r>i||isNaN(i))&&(i=r),(o<s||isNaN(s))&&(s=o),d>=0?(l=(t.min.z-p.z)*d,c=(t.max.z-p.z)*d):(l=(t.max.z-p.z)*d,c=(t.min.z-p.z)*d),i>c||l>s)||((l>i||i!==i)&&(i=l),(c<s||s!==s)&&(s=c),s<0)?null:this.at(i>=0?i:s,e)}intersectsBox(t){return this.intersectBox(t,As)!==null}intersectTriangle(t,e,i,s,r){zf.subVectors(e,t),Yc.subVectors(i,t),Hf.crossVectors(zf,Yc);let o=this.direction.dot(Hf),l;if(o>0){if(s)return null;l=1}else if(o<0)l=-1,o=-o;else return null;lr.subVectors(this.origin,t);const c=l*this.direction.dot(Yc.crossVectors(lr,Yc));if(c<0)return null;const h=l*this.direction.dot(zf.cross(lr));if(h<0||c+h>o)return null;const f=-l*lr.dot(Hf);return f<0?null:this.at(f/o,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class _e{constructor(t,e,i,s,r,o,l,c,h,f,d,p,g,v,y,x){_e.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,i,s,r,o,l,c,h,f,d,p,g,v,y,x)}set(t,e,i,s,r,o,l,c,h,f,d,p,g,v,y,x){const _=this.elements;return _[0]=t,_[4]=e,_[8]=i,_[12]=s,_[1]=r,_[5]=o,_[9]=l,_[13]=c,_[2]=h,_[6]=f,_[10]=d,_[14]=p,_[3]=g,_[7]=v,_[11]=y,_[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new _e().fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){const e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,i=t.elements,s=1/Zo.setFromMatrixColumn(t,0).length(),r=1/Zo.setFromMatrixColumn(t,1).length(),o=1/Zo.setFromMatrixColumn(t,2).length();return e[0]=i[0]*s,e[1]=i[1]*s,e[2]=i[2]*s,e[3]=0,e[4]=i[4]*r,e[5]=i[5]*r,e[6]=i[6]*r,e[7]=0,e[8]=i[8]*o,e[9]=i[9]*o,e[10]=i[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,i=t.x,s=t.y,r=t.z,o=Math.cos(i),l=Math.sin(i),c=Math.cos(s),h=Math.sin(s),f=Math.cos(r),d=Math.sin(r);if(t.order==="XYZ"){const p=o*f,g=o*d,v=l*f,y=l*d;e[0]=c*f,e[4]=-c*d,e[8]=h,e[1]=g+v*h,e[5]=p-y*h,e[9]=-l*c,e[2]=y-p*h,e[6]=v+g*h,e[10]=o*c}else if(t.order==="YXZ"){const p=c*f,g=c*d,v=h*f,y=h*d;e[0]=p+y*l,e[4]=v*l-g,e[8]=o*h,e[1]=o*d,e[5]=o*f,e[9]=-l,e[2]=g*l-v,e[6]=y+p*l,e[10]=o*c}else if(t.order==="ZXY"){const p=c*f,g=c*d,v=h*f,y=h*d;e[0]=p-y*l,e[4]=-o*d,e[8]=v+g*l,e[1]=g+v*l,e[5]=o*f,e[9]=y-p*l,e[2]=-o*h,e[6]=l,e[10]=o*c}else if(t.order==="ZYX"){const p=o*f,g=o*d,v=l*f,y=l*d;e[0]=c*f,e[4]=v*h-g,e[8]=p*h+y,e[1]=c*d,e[5]=y*h+p,e[9]=g*h-v,e[2]=-h,e[6]=l*c,e[10]=o*c}else if(t.order==="YZX"){const p=o*c,g=o*h,v=l*c,y=l*h;e[0]=c*f,e[4]=y-p*d,e[8]=v*d+g,e[1]=d,e[5]=o*f,e[9]=-l*f,e[2]=-h*f,e[6]=g*d+v,e[10]=p-y*d}else if(t.order==="XZY"){const p=o*c,g=o*h,v=l*c,y=l*h;e[0]=c*f,e[4]=-d,e[8]=h*f,e[1]=p*d+y,e[5]=o*f,e[9]=g*d-v,e[2]=v*d-g,e[6]=l*f,e[10]=y*d+p}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(M6,t,S6)}lookAt(t,e,i){const s=this.elements;return mi.subVectors(t,e),mi.lengthSq()===0&&(mi.z=1),mi.normalize(),cr.crossVectors(i,mi),cr.lengthSq()===0&&(Math.abs(i.z)===1?mi.x+=1e-4:mi.z+=1e-4,mi.normalize(),cr.crossVectors(i,mi)),cr.normalize(),qc.crossVectors(mi,cr),s[0]=cr.x,s[4]=qc.x,s[8]=mi.x,s[1]=cr.y,s[5]=qc.y,s[9]=mi.y,s[2]=cr.z,s[6]=qc.z,s[10]=mi.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,s=e.elements,r=this.elements,o=i[0],l=i[4],c=i[8],h=i[12],f=i[1],d=i[5],p=i[9],g=i[13],v=i[2],y=i[6],x=i[10],_=i[14],w=i[3],C=i[7],S=i[11],T=i[15],A=s[0],P=s[4],N=s[8],E=s[12],R=s[1],k=s[5],H=s[9],q=s[13],G=s[2],Y=s[6],j=s[10],et=s[14],V=s[3],ct=s[7],rt=s[11],gt=s[15];return r[0]=o*A+l*R+c*G+h*V,r[4]=o*P+l*k+c*Y+h*ct,r[8]=o*N+l*H+c*j+h*rt,r[12]=o*E+l*q+c*et+h*gt,r[1]=f*A+d*R+p*G+g*V,r[5]=f*P+d*k+p*Y+g*ct,r[9]=f*N+d*H+p*j+g*rt,r[13]=f*E+d*q+p*et+g*gt,r[2]=v*A+y*R+x*G+_*V,r[6]=v*P+y*k+x*Y+_*ct,r[10]=v*N+y*H+x*j+_*rt,r[14]=v*E+y*q+x*et+_*gt,r[3]=w*A+C*R+S*G+T*V,r[7]=w*P+C*k+S*Y+T*ct,r[11]=w*N+C*H+S*j+T*rt,r[15]=w*E+C*q+S*et+T*gt,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[4],s=t[8],r=t[12],o=t[1],l=t[5],c=t[9],h=t[13],f=t[2],d=t[6],p=t[10],g=t[14],v=t[3],y=t[7],x=t[11],_=t[15];return v*(+r*c*d-s*h*d-r*l*p+i*h*p+s*l*g-i*c*g)+y*(+e*c*g-e*h*p+r*o*p-s*o*g+s*h*f-r*c*f)+x*(+e*h*d-e*l*g-r*o*d+i*o*g+r*l*f-i*h*f)+_*(-s*l*f-e*c*d+e*l*p+s*o*d-i*o*p+i*c*f)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){const s=this.elements;return t.isVector3?(s[12]=t.x,s[13]=t.y,s[14]=t.z):(s[12]=t,s[13]=e,s[14]=i),this}invert(){const t=this.elements,e=t[0],i=t[1],s=t[2],r=t[3],o=t[4],l=t[5],c=t[6],h=t[7],f=t[8],d=t[9],p=t[10],g=t[11],v=t[12],y=t[13],x=t[14],_=t[15],w=d*x*h-y*p*h+y*c*g-l*x*g-d*c*_+l*p*_,C=v*p*h-f*x*h-v*c*g+o*x*g+f*c*_-o*p*_,S=f*y*h-v*d*h+v*l*g-o*y*g-f*l*_+o*d*_,T=v*d*c-f*y*c-v*l*p+o*y*p+f*l*x-o*d*x,A=e*w+i*C+s*S+r*T;if(A===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/A;return t[0]=w*P,t[1]=(y*p*r-d*x*r-y*s*g+i*x*g+d*s*_-i*p*_)*P,t[2]=(l*x*r-y*c*r+y*s*h-i*x*h-l*s*_+i*c*_)*P,t[3]=(d*c*r-l*p*r-d*s*h+i*p*h+l*s*g-i*c*g)*P,t[4]=C*P,t[5]=(f*x*r-v*p*r+v*s*g-e*x*g-f*s*_+e*p*_)*P,t[6]=(v*c*r-o*x*r-v*s*h+e*x*h+o*s*_-e*c*_)*P,t[7]=(o*p*r-f*c*r+f*s*h-e*p*h-o*s*g+e*c*g)*P,t[8]=S*P,t[9]=(v*d*r-f*y*r-v*i*g+e*y*g+f*i*_-e*d*_)*P,t[10]=(o*y*r-v*l*r+v*i*h-e*y*h-o*i*_+e*l*_)*P,t[11]=(f*l*r-o*d*r-f*i*h+e*d*h+o*i*g-e*l*g)*P,t[12]=T*P,t[13]=(f*y*s-v*d*s+v*i*p-e*y*p-f*i*x+e*d*x)*P,t[14]=(v*l*s-o*y*s-v*i*c+e*y*c+o*i*x-e*l*x)*P,t[15]=(o*d*s-f*l*s+f*i*c-e*d*c-o*i*p+e*l*p)*P,this}scale(t){const e=this.elements,i=t.x,s=t.y,r=t.z;return e[0]*=i,e[4]*=s,e[8]*=r,e[1]*=i,e[5]*=s,e[9]*=r,e[2]*=i,e[6]*=s,e[10]*=r,e[3]*=i,e[7]*=s,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],s=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,s))}makeTranslation(t,e,i){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const i=Math.cos(e),s=Math.sin(e),r=1-i,o=t.x,l=t.y,c=t.z,h=r*o,f=r*l;return this.set(h*o+i,h*l-s*c,h*c+s*l,0,h*l+s*c,f*l+i,f*c-s*o,0,h*c-s*l,f*c+s*o,r*c*c+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,s,r,o){return this.set(1,i,r,0,t,1,o,0,e,s,1,0,0,0,0,1),this}compose(t,e,i){const s=this.elements,r=e._x,o=e._y,l=e._z,c=e._w,h=r+r,f=o+o,d=l+l,p=r*h,g=r*f,v=r*d,y=o*f,x=o*d,_=l*d,w=c*h,C=c*f,S=c*d,T=i.x,A=i.y,P=i.z;return s[0]=(1-(y+_))*T,s[1]=(g+S)*T,s[2]=(v-C)*T,s[3]=0,s[4]=(g-S)*A,s[5]=(1-(p+_))*A,s[6]=(x+w)*A,s[7]=0,s[8]=(v+C)*P,s[9]=(x-w)*P,s[10]=(1-(p+y))*P,s[11]=0,s[12]=t.x,s[13]=t.y,s[14]=t.z,s[15]=1,this}decompose(t,e,i){const s=this.elements;let r=Zo.set(s[0],s[1],s[2]).length();const o=Zo.set(s[4],s[5],s[6]).length(),l=Zo.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),t.x=s[12],t.y=s[13],t.z=s[14],zi.copy(this);const h=1/r,f=1/o,d=1/l;return zi.elements[0]*=h,zi.elements[1]*=h,zi.elements[2]*=h,zi.elements[4]*=f,zi.elements[5]*=f,zi.elements[6]*=f,zi.elements[8]*=d,zi.elements[9]*=d,zi.elements[10]*=d,e.setFromRotationMatrix(zi),i.x=r,i.y=o,i.z=l,this}makePerspective(t,e,i,s,r,o,l=cs,c=!1){const h=this.elements,f=2*r/(e-t),d=2*r/(i-s),p=(e+t)/(e-t),g=(i+s)/(i-s);let v,y;if(c)v=r/(o-r),y=o*r/(o-r);else if(l===cs)v=-(o+r)/(o-r),y=-2*o*r/(o-r);else if(l===su)v=-o/(o-r),y=-o*r/(o-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return h[0]=f,h[4]=0,h[8]=p,h[12]=0,h[1]=0,h[5]=d,h[9]=g,h[13]=0,h[2]=0,h[6]=0,h[10]=v,h[14]=y,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(t,e,i,s,r,o,l=cs,c=!1){const h=this.elements,f=2/(e-t),d=2/(i-s),p=-(e+t)/(e-t),g=-(i+s)/(i-s);let v,y;if(c)v=1/(o-r),y=o/(o-r);else if(l===cs)v=-2/(o-r),y=-(o+r)/(o-r);else if(l===su)v=-1/(o-r),y=-r/(o-r);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return h[0]=f,h[4]=0,h[8]=0,h[12]=p,h[1]=0,h[5]=d,h[9]=0,h[13]=g,h[2]=0,h[6]=0,h[10]=v,h[14]=y,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(t){const e=this.elements,i=t.elements;for(let s=0;s<16;s++)if(e[s]!==i[s])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}const Zo=new X,zi=new _e,M6=new X(0,0,0),S6=new X(1,1,1),cr=new X,qc=new X,mi=new X,y_=new _e,b_=new gs;class _s{constructor(t=0,e=0,i=0,s=_s.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=i,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,i,s=this._order){return this._x=t,this._y=e,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,i=!0){const s=t.elements,r=s[0],o=s[4],l=s[8],c=s[1],h=s[5],f=s[9],d=s[2],p=s[6],g=s[10];switch(e){case"XYZ":this._y=Math.asin(Me(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,g),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(p,h),this._z=0);break;case"YXZ":this._x=Math.asin(-Me(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(l,g),this._z=Math.atan2(c,h)):(this._y=Math.atan2(-d,r),this._z=0);break;case"ZXY":this._x=Math.asin(Me(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,g),this._z=Math.atan2(-o,h)):(this._y=0,this._z=Math.atan2(c,r));break;case"ZYX":this._y=Math.asin(-Me(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,g),this._z=Math.atan2(c,r)):(this._x=0,this._z=Math.atan2(-o,h));break;case"YZX":this._z=Math.asin(Me(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-f,h),this._y=Math.atan2(-d,r)):(this._x=0,this._y=Math.atan2(l,g));break;case"XZY":this._z=Math.asin(-Me(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,h),this._y=Math.atan2(l,r)):(this._x=Math.atan2(-f,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,i===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,i){return y_.makeRotationFromQuaternion(t),this.setFromRotationMatrix(y_,e,i)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return b_.setFromEuler(this),this.setFromQuaternion(b_,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}_s.DEFAULT_ORDER="XYZ";class Hm{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let C6=0;const M_=new X,Yo=new gs,Ps=new _e,$c=new X,dl=new X,w6=new X,T6=new gs,S_=new X(1,0,0),C_=new X(0,1,0),w_=new X(0,0,1),T_={type:"added"},E6={type:"removed"},qo={type:"childadded",child:null},Vf={type:"childremoved",child:null};class _n extends Ro{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:C6++}),this.uuid=qi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=_n.DEFAULT_UP.clone();const t=new X,e=new _s,i=new gs,s=new X(1,1,1);function r(){i.setFromEuler(e,!1)}function o(){e.setFromQuaternion(i,void 0,!1)}e._onChange(r),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new _e},normalMatrix:{value:new ge}}),this.matrix=new _e,this.matrixWorld=new _e,this.matrixAutoUpdate=_n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=_n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Hm,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Yo.setFromAxisAngle(t,e),this.quaternion.multiply(Yo),this}rotateOnWorldAxis(t,e){return Yo.setFromAxisAngle(t,e),this.quaternion.premultiply(Yo),this}rotateX(t){return this.rotateOnAxis(S_,t)}rotateY(t){return this.rotateOnAxis(C_,t)}rotateZ(t){return this.rotateOnAxis(w_,t)}translateOnAxis(t,e){return M_.copy(t).applyQuaternion(this.quaternion),this.position.add(M_.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(S_,t)}translateY(t){return this.translateOnAxis(C_,t)}translateZ(t){return this.translateOnAxis(w_,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Ps.copy(this.matrixWorld).invert())}lookAt(t,e,i){t.isVector3?$c.copy(t):$c.set(t,e,i);const s=this.parent;this.updateWorldMatrix(!0,!1),dl.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ps.lookAt(dl,$c,this.up):Ps.lookAt($c,dl,this.up),this.quaternion.setFromRotationMatrix(Ps),s&&(Ps.extractRotation(s.matrixWorld),Yo.setFromRotationMatrix(Ps),this.quaternion.premultiply(Yo.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(T_),qo.child=t,this.dispatchEvent(qo),qo.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(E6),Vf.child=t,this.dispatchEvent(Vf),Vf.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Ps.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Ps.multiply(t.parent.matrixWorld)),t.applyMatrix4(Ps),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(T_),qo.child=t,this.dispatchEvent(qo),qo.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectByProperty(t,e);if(o!==void 0)return o}}getObjectsByProperty(t,e,i=[]){this[t]===e&&i.push(this);const s=this.children;for(let r=0,o=s.length;r<o;r++)s[r].getObjectsByProperty(t,e,i);return i}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(dl,t,w6),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(dl,T6,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let i=0,s=e.length;i<s;i++)e[i].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let i=0,s=e.length;i<s;i++)e[i].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let i=0,s=e.length;i<s;i++)e[i].updateMatrixWorld(t)}updateWorldMatrix(t,e){const i=this.parent;if(t===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),e===!0){const s=this.children;for(let r=0,o=s.length;r<o;r++)s[r].updateWorldMatrix(!1,!0)}}toJSON(t){const e=t===void 0||typeof t=="string",i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.geometryInfo=this._geometryInfo.map(l=>({...l,boundingBox:l.boundingBox?l.boundingBox.toJSON():void 0,boundingSphere:l.boundingSphere?l.boundingSphere.toJSON():void 0})),s.instanceInfo=this._instanceInfo.map(l=>({...l})),s.availableInstanceIds=this._availableInstanceIds.slice(),s.availableGeometryIds=this._availableGeometryIds.slice(),s.nextIndexStart=this._nextIndexStart,s.nextVertexStart=this._nextVertexStart,s.geometryCount=this._geometryCount,s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.matricesTexture=this._matricesTexture.toJSON(t),s.indirectTexture=this._indirectTexture.toJSON(t),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(s.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(s.boundingBox=this.boundingBox.toJSON()));function r(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(t)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=r(t.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const c=l.shapes;if(Array.isArray(c))for(let h=0,f=c.length;h<f;h++){const d=c[h];r(t.shapes,d)}else r(t.shapes,c)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let c=0,h=this.material.length;c<h;c++)l.push(r(t.materials,this.material[c]));s.material=l}else s.material=r(t.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++){const c=this.animations[l];s.animations.push(r(t.animations,c))}}if(e){const l=o(t.geometries),c=o(t.materials),h=o(t.textures),f=o(t.images),d=o(t.shapes),p=o(t.skeletons),g=o(t.animations),v=o(t.nodes);l.length>0&&(i.geometries=l),c.length>0&&(i.materials=c),h.length>0&&(i.textures=h),f.length>0&&(i.images=f),d.length>0&&(i.shapes=d),p.length>0&&(i.skeletons=p),g.length>0&&(i.animations=g),v.length>0&&(i.nodes=v)}return i.object=s,i;function o(l){const c=[];for(const h in l){const f=l[h];delete f.metadata,c.push(f)}return c}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let i=0;i<t.children.length;i++){const s=t.children[i];this.add(s.clone())}return this}}_n.DEFAULT_UP=new X(0,1,0);_n.DEFAULT_MATRIX_AUTO_UPDATE=!0;_n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Hi=new X,Rs=new X,Wf=new X,Ls=new X,$o=new X,Ko=new X,E_=new X,Gf=new X,jf=new X,Xf=new X,Zf=new Ge,Yf=new Ge,qf=new Ge;class Wi{constructor(t=new X,e=new X,i=new X){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,s){s.subVectors(i,e),Hi.subVectors(t,e),s.cross(Hi);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(t,e,i,s,r){Hi.subVectors(s,e),Rs.subVectors(i,e),Wf.subVectors(t,e);const o=Hi.dot(Hi),l=Hi.dot(Rs),c=Hi.dot(Wf),h=Rs.dot(Rs),f=Rs.dot(Wf),d=o*h-l*l;if(d===0)return r.set(0,0,0),null;const p=1/d,g=(h*c-l*f)*p,v=(o*f-l*c)*p;return r.set(1-g-v,v,g)}static containsPoint(t,e,i,s){return this.getBarycoord(t,e,i,s,Ls)===null?!1:Ls.x>=0&&Ls.y>=0&&Ls.x+Ls.y<=1}static getInterpolation(t,e,i,s,r,o,l,c){return this.getBarycoord(t,e,i,s,Ls)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(r,Ls.x),c.addScaledVector(o,Ls.y),c.addScaledVector(l,Ls.z),c)}static getInterpolatedAttribute(t,e,i,s,r,o){return Zf.setScalar(0),Yf.setScalar(0),qf.setScalar(0),Zf.fromBufferAttribute(t,e),Yf.fromBufferAttribute(t,i),qf.fromBufferAttribute(t,s),o.setScalar(0),o.addScaledVector(Zf,r.x),o.addScaledVector(Yf,r.y),o.addScaledVector(qf,r.z),o}static isFrontFacing(t,e,i,s){return Hi.subVectors(i,e),Rs.subVectors(t,e),Hi.cross(Rs).dot(s)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,s){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[s]),this}setFromAttributeAndIndices(t,e,i,s){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,s),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Hi.subVectors(this.c,this.b),Rs.subVectors(this.a,this.b),Hi.cross(Rs).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Wi.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Wi.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,i,s,r){return Wi.getInterpolation(t,this.a,this.b,this.c,e,i,s,r)}containsPoint(t){return Wi.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Wi.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const i=this.a,s=this.b,r=this.c;let o,l;$o.subVectors(s,i),Ko.subVectors(r,i),Gf.subVectors(t,i);const c=$o.dot(Gf),h=Ko.dot(Gf);if(c<=0&&h<=0)return e.copy(i);jf.subVectors(t,s);const f=$o.dot(jf),d=Ko.dot(jf);if(f>=0&&d<=f)return e.copy(s);const p=c*d-f*h;if(p<=0&&c>=0&&f<=0)return o=c/(c-f),e.copy(i).addScaledVector($o,o);Xf.subVectors(t,r);const g=$o.dot(Xf),v=Ko.dot(Xf);if(v>=0&&g<=v)return e.copy(r);const y=g*h-c*v;if(y<=0&&h>=0&&v<=0)return l=h/(h-v),e.copy(i).addScaledVector(Ko,l);const x=f*v-g*d;if(x<=0&&d-f>=0&&g-v>=0)return E_.subVectors(r,s),l=(d-f)/(d-f+(g-v)),e.copy(s).addScaledVector(E_,l);const _=1/(x+y+p);return o=y*_,l=p*_,e.copy(i).addScaledVector($o,o).addScaledVector(Ko,l)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const Ax={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},hr={h:0,s:0,l:0},Kc={h:0,s:0,l:0};function $f(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*6*(2/3-e):n}let pe=class{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,i)}set(t,e,i){if(e===void 0&&i===void 0){const s=t;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(t,e,i);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Fn){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Fe.colorSpaceToWorking(this,e),this}setRGB(t,e,i,s=Fe.workingColorSpace){return this.r=t,this.g=e,this.b=i,Fe.colorSpaceToWorking(this,s),this}setHSL(t,e,i,s=Fe.workingColorSpace){if(t=Bm(t,1),e=Me(e,0,1),i=Me(i,0,1),e===0)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+e):i+e-i*e,o=2*i-r;this.r=$f(o,r,t+1/3),this.g=$f(o,r,t),this.b=$f(o,r,t-1/3)}return Fe.colorSpaceToWorking(this,s),this}setStyle(t,e=Fn){function i(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(t)){let r;const o=s[1],l=s[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,e);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,e);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){const r=s[1],o=r.length;if(o===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,e);if(o===6)return this.setHex(parseInt(r,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Fn){const i=Ax[t.toLowerCase()];return i!==void 0?this.setHex(i,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Ys(t.r),this.g=Ys(t.g),this.b=Ys(t.b),this}copyLinearToSRGB(t){return this.r=ga(t.r),this.g=ga(t.g),this.b=ga(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Fn){return Fe.workingToColorSpace(Vn.copy(this),t),Math.round(Me(Vn.r*255,0,255))*65536+Math.round(Me(Vn.g*255,0,255))*256+Math.round(Me(Vn.b*255,0,255))}getHexString(t=Fn){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Fe.workingColorSpace){Fe.workingToColorSpace(Vn.copy(this),e);const i=Vn.r,s=Vn.g,r=Vn.b,o=Math.max(i,s,r),l=Math.min(i,s,r);let c,h;const f=(l+o)/2;if(l===o)c=0,h=0;else{const d=o-l;switch(h=f<=.5?d/(o+l):d/(2-o-l),o){case i:c=(s-r)/d+(s<r?6:0);break;case s:c=(r-i)/d+2;break;case r:c=(i-s)/d+4;break}c/=6}return t.h=c,t.s=h,t.l=f,t}getRGB(t,e=Fe.workingColorSpace){return Fe.workingToColorSpace(Vn.copy(this),e),t.r=Vn.r,t.g=Vn.g,t.b=Vn.b,t}getStyle(t=Fn){Fe.workingToColorSpace(Vn.copy(this),t);const e=Vn.r,i=Vn.g,s=Vn.b;return t!==Fn?`color(${t} ${e.toFixed(3)} ${i.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(i*255)},${Math.round(s*255)})`}offsetHSL(t,e,i){return this.getHSL(hr),this.setHSL(hr.h+t,hr.s+e,hr.l+i)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(hr),t.getHSL(Kc);const i=zl(hr.h,Kc.h,e),s=zl(hr.s,Kc.s,e),r=zl(hr.l,Kc.l,e);return this.setHSL(i,s,r),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,i=this.g,s=this.b,r=t.elements;return this.r=r[0]*e+r[3]*i+r[6]*s,this.g=r[1]*e+r[4]*i+r[7]*s,this.b=r[2]*e+r[5]*i+r[8]*s,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Vn=new pe;pe.NAMES=Ax;let A6=0;class us extends Ro{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:A6++}),this.uuid=qi(),this.name="",this.type="Material",this.blending=pa,this.side=Ks,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=ip,this.blendDst=sp,this.blendEquation=ao,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new pe(0,0,0),this.blendAlpha=0,this.depthFunc=Ta,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=d_,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Vo,this.stencilZFail=Vo,this.stencilZPass=Vo,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const e in t){const i=t[e];if(i===void 0){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const s=this[e];if(s===void 0){console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[e]=i}}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==pa&&(i.blending=this.blending),this.side!==Ks&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==ip&&(i.blendSrc=this.blendSrc),this.blendDst!==sp&&(i.blendDst=this.blendDst),this.blendEquation!==ao&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Ta&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==d_&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Vo&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Vo&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Vo&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function s(r){const o=[];for(const l in r){const c=r[l];delete c.metadata,o.push(c)}return o}if(e){const r=s(t.textures),o=s(t.images);r.length>0&&(i.textures=r),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let i=null;if(e!==null){const s=e.length;i=new Array(s);for(let r=0;r!==s;++r)i[r]=e[r].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}class xr extends us{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new pe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new _s,this.combine=fx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Sn=new X,Jc=new le;let P6=0;class ii{constructor(t,e,i=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:P6++}),this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=i,this.usage=Hp,this.updateRanges=[],this.gpuType=ji,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[t+s]=e.array[i+s];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,i=this.count;e<i;e++)Jc.fromBufferAttribute(this,e),Jc.applyMatrix3(t),this.setXY(e,Jc.x,Jc.y);else if(this.itemSize===3)for(let e=0,i=this.count;e<i;e++)Sn.fromBufferAttribute(this,e),Sn.applyMatrix3(t),this.setXYZ(e,Sn.x,Sn.y,Sn.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)Sn.fromBufferAttribute(this,e),Sn.applyMatrix4(t),this.setXYZ(e,Sn.x,Sn.y,Sn.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)Sn.fromBufferAttribute(this,e),Sn.applyNormalMatrix(t),this.setXYZ(e,Sn.x,Sn.y,Sn.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)Sn.fromBufferAttribute(this,e),Sn.transformDirection(t),this.setXYZ(e,Sn.x,Sn.y,Sn.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let i=this.array[t*this.itemSize+e];return this.normalized&&(i=Vi(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=Xe(i,this.array)),this.array[t*this.itemSize+e]=i,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=Vi(e,this.array)),e}setX(t,e){return this.normalized&&(e=Xe(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=Vi(e,this.array)),e}setY(t,e){return this.normalized&&(e=Xe(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=Vi(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Xe(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=Vi(e,this.array)),e}setW(t,e){return this.normalized&&(e=Xe(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=Xe(e,this.array),i=Xe(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,s){return t*=this.itemSize,this.normalized&&(e=Xe(e,this.array),i=Xe(i,this.array),s=Xe(s,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=s,this}setXYZW(t,e,i,s,r){return t*=this.itemSize,this.normalized&&(e=Xe(e,this.array),i=Xe(i,this.array),s=Xe(s,this.array),r=Xe(r,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=s,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==Hp&&(t.usage=this.usage),t}}class Px extends ii{constructor(t,e,i){super(new Uint16Array(t),e,i)}}class Rx extends ii{constructor(t,e,i){super(new Uint32Array(t),e,i)}}class Ii extends ii{constructor(t,e,i){super(new Float32Array(t),e,i)}}let R6=0;const Ti=new _e,Kf=new _n,Jo=new X,gi=new er,pl=new er,Rn=new X;class Ni extends Ro{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:R6++}),this.uuid=qi(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(Tx(t)?Rx:Px)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const r=new ge().getNormalMatrix(t);i.applyNormalMatrix(r),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(t),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return Ti.makeRotationFromQuaternion(t),this.applyMatrix4(Ti),this}rotateX(t){return Ti.makeRotationX(t),this.applyMatrix4(Ti),this}rotateY(t){return Ti.makeRotationY(t),this.applyMatrix4(Ti),this}rotateZ(t){return Ti.makeRotationZ(t),this.applyMatrix4(Ti),this}translate(t,e,i){return Ti.makeTranslation(t,e,i),this.applyMatrix4(Ti),this}scale(t,e,i){return Ti.makeScale(t,e,i),this.applyMatrix4(Ti),this}lookAt(t){return Kf.lookAt(t),Kf.updateMatrix(),this.applyMatrix4(Kf.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Jo).negate(),this.translate(Jo.x,Jo.y,Jo.z),this}setFromPoints(t){const e=this.getAttribute("position");if(e===void 0){const i=[];for(let s=0,r=t.length;s<r;s++){const o=t[s];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Ii(i,3))}else{const i=Math.min(t.length,e.count);for(let s=0;s<i;s++){const r=t[s];e.setXYZ(s,r.x,r.y,r.z||0)}t.length>e.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new er);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new X(-1/0,-1/0,-1/0),new X(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,s=e.length;i<s;i++){const r=e[i];gi.setFromBufferAttribute(r),this.morphTargetsRelative?(Rn.addVectors(this.boundingBox.min,gi.min),this.boundingBox.expandByPoint(Rn),Rn.addVectors(this.boundingBox.max,gi.max),this.boundingBox.expandByPoint(Rn)):(this.boundingBox.expandByPoint(gi.min),this.boundingBox.expandByPoint(gi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new xs);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new X,1/0);return}if(t){const i=this.boundingSphere.center;if(gi.setFromBufferAttribute(t),e)for(let r=0,o=e.length;r<o;r++){const l=e[r];pl.setFromBufferAttribute(l),this.morphTargetsRelative?(Rn.addVectors(gi.min,pl.min),gi.expandByPoint(Rn),Rn.addVectors(gi.max,pl.max),gi.expandByPoint(Rn)):(gi.expandByPoint(pl.min),gi.expandByPoint(pl.max))}gi.getCenter(i);let s=0;for(let r=0,o=t.count;r<o;r++)Rn.fromBufferAttribute(t,r),s=Math.max(s,i.distanceToSquared(Rn));if(e)for(let r=0,o=e.length;r<o;r++){const l=e[r],c=this.morphTargetsRelative;for(let h=0,f=l.count;h<f;h++)Rn.fromBufferAttribute(l,h),c&&(Jo.fromBufferAttribute(t,h),Rn.add(Jo)),s=Math.max(s,i.distanceToSquared(Rn))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.position,s=e.normal,r=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ii(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),l=[],c=[];for(let N=0;N<i.count;N++)l[N]=new X,c[N]=new X;const h=new X,f=new X,d=new X,p=new le,g=new le,v=new le,y=new X,x=new X;function _(N,E,R){h.fromBufferAttribute(i,N),f.fromBufferAttribute(i,E),d.fromBufferAttribute(i,R),p.fromBufferAttribute(r,N),g.fromBufferAttribute(r,E),v.fromBufferAttribute(r,R),f.sub(h),d.sub(h),g.sub(p),v.sub(p);const k=1/(g.x*v.y-v.x*g.y);isFinite(k)&&(y.copy(f).multiplyScalar(v.y).addScaledVector(d,-g.y).multiplyScalar(k),x.copy(d).multiplyScalar(g.x).addScaledVector(f,-v.x).multiplyScalar(k),l[N].add(y),l[E].add(y),l[R].add(y),c[N].add(x),c[E].add(x),c[R].add(x))}let w=this.groups;w.length===0&&(w=[{start:0,count:t.count}]);for(let N=0,E=w.length;N<E;++N){const R=w[N],k=R.start,H=R.count;for(let q=k,G=k+H;q<G;q+=3)_(t.getX(q+0),t.getX(q+1),t.getX(q+2))}const C=new X,S=new X,T=new X,A=new X;function P(N){T.fromBufferAttribute(s,N),A.copy(T);const E=l[N];C.copy(E),C.sub(T.multiplyScalar(T.dot(E))).normalize(),S.crossVectors(A,E);const k=S.dot(c[N])<0?-1:1;o.setXYZW(N,C.x,C.y,C.z,k)}for(let N=0,E=w.length;N<E;++N){const R=w[N],k=R.start,H=R.count;for(let q=k,G=k+H;q<G;q+=3)P(t.getX(q+0)),P(t.getX(q+1)),P(t.getX(q+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new ii(new Float32Array(e.count*3),3),this.setAttribute("normal",i);else for(let p=0,g=i.count;p<g;p++)i.setXYZ(p,0,0,0);const s=new X,r=new X,o=new X,l=new X,c=new X,h=new X,f=new X,d=new X;if(t)for(let p=0,g=t.count;p<g;p+=3){const v=t.getX(p+0),y=t.getX(p+1),x=t.getX(p+2);s.fromBufferAttribute(e,v),r.fromBufferAttribute(e,y),o.fromBufferAttribute(e,x),f.subVectors(o,r),d.subVectors(s,r),f.cross(d),l.fromBufferAttribute(i,v),c.fromBufferAttribute(i,y),h.fromBufferAttribute(i,x),l.add(f),c.add(f),h.add(f),i.setXYZ(v,l.x,l.y,l.z),i.setXYZ(y,c.x,c.y,c.z),i.setXYZ(x,h.x,h.y,h.z)}else for(let p=0,g=e.count;p<g;p+=3)s.fromBufferAttribute(e,p+0),r.fromBufferAttribute(e,p+1),o.fromBufferAttribute(e,p+2),f.subVectors(o,r),d.subVectors(s,r),f.cross(d),i.setXYZ(p+0,f.x,f.y,f.z),i.setXYZ(p+1,f.x,f.y,f.z),i.setXYZ(p+2,f.x,f.y,f.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)Rn.fromBufferAttribute(t,e),Rn.normalize(),t.setXYZ(e,Rn.x,Rn.y,Rn.z)}toNonIndexed(){function t(l,c){const h=l.array,f=l.itemSize,d=l.normalized,p=new h.constructor(c.length*f);let g=0,v=0;for(let y=0,x=c.length;y<x;y++){l.isInterleavedBufferAttribute?g=c[y]*l.data.stride+l.offset:g=c[y]*f;for(let _=0;_<f;_++)p[v++]=h[g++]}return new ii(p,f,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Ni,i=this.index.array,s=this.attributes;for(const l in s){const c=s[l],h=t(c,i);e.setAttribute(l,h)}const r=this.morphAttributes;for(const l in r){const c=[],h=r[l];for(let f=0,d=h.length;f<d;f++){const p=h[f],g=t(p,i);c.push(g)}e.morphAttributes[l]=c}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let l=0,c=o.length;l<c;l++){const h=o[l];e.addGroup(h.start,h.count,h.materialIndex)}return e}toJSON(){const t={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const h in c)c[h]!==void 0&&(t[h]=c[h]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const i=this.attributes;for(const c in i){const h=i[c];t.data.attributes[c]=h.toJSON(t.data)}const s={};let r=!1;for(const c in this.morphAttributes){const h=this.morphAttributes[c],f=[];for(let d=0,p=h.length;d<p;d++){const g=h[d];f.push(g.toJSON(t.data))}f.length>0&&(s[c]=f,r=!0)}r&&(t.data.morphAttributes=s,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return l!==null&&(t.data.boundingSphere=l.toJSON()),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const i=t.index;i!==null&&this.setIndex(i.clone());const s=t.attributes;for(const h in s){const f=s[h];this.setAttribute(h,f.clone(e))}const r=t.morphAttributes;for(const h in r){const f=[],d=r[h];for(let p=0,g=d.length;p<g;p++)f.push(d[p].clone(e));this.morphAttributes[h]=f}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let h=0,f=o.length;h<f;h++){const d=o[h];this.addGroup(d.start,d.count,d.materialIndex)}const l=t.boundingBox;l!==null&&(this.boundingBox=l.clone());const c=t.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const A_=new _e,Xr=new Wa,Qc=new xs,P_=new X,th=new X,eh=new X,nh=new X,Jf=new X,ih=new X,R_=new X,sh=new X;class ti extends _n{constructor(t=new Ni,e=new xr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){const s=e[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const l=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=r}}}}getVertexPosition(t,e){const i=this.geometry,s=i.attributes.position,r=i.morphAttributes.position,o=i.morphTargetsRelative;e.fromBufferAttribute(s,t);const l=this.morphTargetInfluences;if(r&&l){ih.set(0,0,0);for(let c=0,h=r.length;c<h;c++){const f=l[c],d=r[c];f!==0&&(Jf.fromBufferAttribute(d,t),o?ih.addScaledVector(Jf,f):ih.addScaledVector(Jf.sub(e),f))}e.add(ih)}return e}raycast(t,e){const i=this.geometry,s=this.material,r=this.matrixWorld;s!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Qc.copy(i.boundingSphere),Qc.applyMatrix4(r),Xr.copy(t.ray).recast(t.near),!(Qc.containsPoint(Xr.origin)===!1&&(Xr.intersectSphere(Qc,P_)===null||Xr.origin.distanceToSquared(P_)>(t.far-t.near)**2))&&(A_.copy(r).invert(),Xr.copy(t.ray).applyMatrix4(A_),!(i.boundingBox!==null&&Xr.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(t,e,Xr)))}_computeIntersections(t,e,i){let s;const r=this.geometry,o=this.material,l=r.index,c=r.attributes.position,h=r.attributes.uv,f=r.attributes.uv1,d=r.attributes.normal,p=r.groups,g=r.drawRange;if(l!==null)if(Array.isArray(o))for(let v=0,y=p.length;v<y;v++){const x=p[v],_=o[x.materialIndex],w=Math.max(x.start,g.start),C=Math.min(l.count,Math.min(x.start+x.count,g.start+g.count));for(let S=w,T=C;S<T;S+=3){const A=l.getX(S),P=l.getX(S+1),N=l.getX(S+2);s=rh(this,_,t,i,h,f,d,A,P,N),s&&(s.faceIndex=Math.floor(S/3),s.face.materialIndex=x.materialIndex,e.push(s))}}else{const v=Math.max(0,g.start),y=Math.min(l.count,g.start+g.count);for(let x=v,_=y;x<_;x+=3){const w=l.getX(x),C=l.getX(x+1),S=l.getX(x+2);s=rh(this,o,t,i,h,f,d,w,C,S),s&&(s.faceIndex=Math.floor(x/3),e.push(s))}}else if(c!==void 0)if(Array.isArray(o))for(let v=0,y=p.length;v<y;v++){const x=p[v],_=o[x.materialIndex],w=Math.max(x.start,g.start),C=Math.min(c.count,Math.min(x.start+x.count,g.start+g.count));for(let S=w,T=C;S<T;S+=3){const A=S,P=S+1,N=S+2;s=rh(this,_,t,i,h,f,d,A,P,N),s&&(s.faceIndex=Math.floor(S/3),s.face.materialIndex=x.materialIndex,e.push(s))}}else{const v=Math.max(0,g.start),y=Math.min(c.count,g.start+g.count);for(let x=v,_=y;x<_;x+=3){const w=x,C=x+1,S=x+2;s=rh(this,o,t,i,h,f,d,w,C,S),s&&(s.faceIndex=Math.floor(x/3),e.push(s))}}}}function L6(n,t,e,i,s,r,o,l){let c;if(t.side===ui?c=i.intersectTriangle(o,r,s,!0,l):c=i.intersectTriangle(s,r,o,t.side===Ks,l),c===null)return null;sh.copy(l),sh.applyMatrix4(n.matrixWorld);const h=e.ray.origin.distanceTo(sh);return h<e.near||h>e.far?null:{distance:h,point:sh.clone(),object:n}}function rh(n,t,e,i,s,r,o,l,c,h){n.getVertexPosition(l,th),n.getVertexPosition(c,eh),n.getVertexPosition(h,nh);const f=L6(n,t,e,i,th,eh,nh,R_);if(f){const d=new X;Wi.getBarycoord(R_,th,eh,nh,d),s&&(f.uv=Wi.getInterpolatedAttribute(s,l,c,h,d,new le)),r&&(f.uv1=Wi.getInterpolatedAttribute(r,l,c,h,d,new le)),o&&(f.normal=Wi.getInterpolatedAttribute(o,l,c,h,d,new X),f.normal.dot(i.direction)>0&&f.normal.multiplyScalar(-1));const p={a:l,b:c,c:h,normal:new X,materialIndex:0};Wi.getNormal(th,eh,nh,p.normal),f.face=p,f.barycoord=d}return f}class Ga extends Ni{constructor(t=1,e=1,i=1,s=1,r=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:s,heightSegments:r,depthSegments:o};const l=this;s=Math.floor(s),r=Math.floor(r),o=Math.floor(o);const c=[],h=[],f=[],d=[];let p=0,g=0;v("z","y","x",-1,-1,i,e,t,o,r,0),v("z","y","x",1,-1,i,e,-t,o,r,1),v("x","z","y",1,1,t,i,e,s,o,2),v("x","z","y",1,-1,t,i,-e,s,o,3),v("x","y","z",1,-1,t,e,i,s,r,4),v("x","y","z",-1,-1,t,e,-i,s,r,5),this.setIndex(c),this.setAttribute("position",new Ii(h,3)),this.setAttribute("normal",new Ii(f,3)),this.setAttribute("uv",new Ii(d,2));function v(y,x,_,w,C,S,T,A,P,N,E){const R=S/P,k=T/N,H=S/2,q=T/2,G=A/2,Y=P+1,j=N+1;let et=0,V=0;const ct=new X;for(let rt=0;rt<j;rt++){const gt=rt*k-q;for(let It=0;It<Y;It++){const Dt=It*R-H;ct[y]=Dt*w,ct[x]=gt*C,ct[_]=G,h.push(ct.x,ct.y,ct.z),ct[y]=0,ct[x]=0,ct[_]=A>0?1:-1,f.push(ct.x,ct.y,ct.z),d.push(It/P),d.push(1-rt/N),et+=1}}for(let rt=0;rt<N;rt++)for(let gt=0;gt<P;gt++){const It=p+gt+Y*rt,Dt=p+gt+Y*(rt+1),At=p+(gt+1)+Y*(rt+1),K=p+(gt+1)+Y*rt;c.push(It,Dt,K),c.push(Dt,At,K),V+=6}l.addGroup(g,V,E),g+=V,p+=et}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Ga(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function La(n){const t={};for(const e in n){t[e]={};for(const i in n[e]){const s=n[e][i];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][i]=null):t[e][i]=s.clone():Array.isArray(s)?t[e][i]=s.slice():t[e][i]=s}}return t}function $n(n){const t={};for(let e=0;e<n.length;e++){const i=La(n[e]);for(const s in i)t[s]=i[s]}return t}function I6(n){const t=[];for(let e=0;e<n.length;e++)t.push(n[e].clone());return t}function Lx(n){const t=n.getRenderTarget();return t===null?n.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:Fe.workingColorSpace}const D6={clone:La,merge:$n};var O6=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,N6=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Dr extends us{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=O6,this.fragmentShader=N6,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=La(t.uniforms),this.uniformsGroups=I6(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const s in this.uniforms){const o=this.uniforms[s].value;o&&o.isTexture?e.uniforms[s]={type:"t",value:o.toJSON(t).uuid}:o&&o.isColor?e.uniforms[s]={type:"c",value:o.getHex()}:o&&o.isVector2?e.uniforms[s]={type:"v2",value:o.toArray()}:o&&o.isVector3?e.uniforms[s]={type:"v3",value:o.toArray()}:o&&o.isVector4?e.uniforms[s]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?e.uniforms[s]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?e.uniforms[s]={type:"m4",value:o.toArray()}:e.uniforms[s]={value:o}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const i={};for(const s in this.extensions)this.extensions[s]===!0&&(i[s]=!0);return Object.keys(i).length>0&&(e.extensions=i),e}}class Ix extends _n{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new _e,this.projectionMatrix=new _e,this.projectionMatrixInverse=new _e,this.coordinateSystem=cs,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const ur=new X,L_=new le,I_=new le;class Jn extends Ix{constructor(t=50,e=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=Ra*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(Bl*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return Ra*2*Math.atan(Math.tan(Bl*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,i){ur.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(ur.x,ur.y).multiplyScalar(-t/ur.z),ur.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(ur.x,ur.y).multiplyScalar(-t/ur.z)}getViewSize(t,e){return this.getViewBounds(t,L_,I_),e.subVectors(I_,L_)}setViewOffset(t,e,i,s,r,o){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=s,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(Bl*.5*this.fov)/this.zoom,i=2*e,s=this.aspect*i,r=-.5*s;const o=this.view;if(this.view!==null&&this.view.enabled){const c=o.fullWidth,h=o.fullHeight;r+=o.offsetX*s/c,e-=o.offsetY*i/h,s*=o.width/c,i*=o.height/h}const l=this.filmOffset;l!==0&&(r+=t*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+s,e,e-i,t,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const Qo=-90,ta=1;class k6 extends _n{constructor(t,e,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new Jn(Qo,ta,t,e);s.layers=this.layers,this.add(s);const r=new Jn(Qo,ta,t,e);r.layers=this.layers,this.add(r);const o=new Jn(Qo,ta,t,e);o.layers=this.layers,this.add(o);const l=new Jn(Qo,ta,t,e);l.layers=this.layers,this.add(l);const c=new Jn(Qo,ta,t,e);c.layers=this.layers,this.add(c);const h=new Jn(Qo,ta,t,e);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[i,s,r,o,l,c]=e;for(const h of e)this.remove(h);if(t===cs)i.up.set(0,1,0),i.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(t===su)i.up.set(0,-1,0),i.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(const h of e)this.add(h),h.updateMatrixWorld()}update(t,e){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:s}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[r,o,l,c,h,f]=this.children,d=t.getRenderTarget(),p=t.getActiveCubeFace(),g=t.getActiveMipmapLevel(),v=t.xr.enabled;t.xr.enabled=!1;const y=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0,s),t.render(e,r),t.setRenderTarget(i,1,s),t.render(e,o),t.setRenderTarget(i,2,s),t.render(e,l),t.setRenderTarget(i,3,s),t.render(e,c),t.setRenderTarget(i,4,s),t.render(e,h),i.texture.generateMipmaps=y,t.setRenderTarget(i,5,s),t.render(e,f),t.setRenderTarget(d,p,g),t.xr.enabled=v,i.texture.needsPMREMUpdate=!0}}class Dx extends Dn{constructor(t=[],e=Ea,i,s,r,o,l,c,h,f){super(t,e,i,s,r,o,l,c,h,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class F6 extends So{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const i={width:t,height:t,depth:1},s=[i,i,i,i,i,i];this.texture=new Dx(s),this._setTextureOptions(e),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new Ga(5,5,5),r=new Dr({name:"CubemapFromEquirect",uniforms:La(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:ui,blending:Tr});r.uniforms.tEquirect.value=e;const o=new ti(s,r),l=e.minFilter;return e.minFilter===Vs&&(e.minFilter=yi),new k6(1,10,this).update(t,o),e.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(t,e=!0,i=!0,s=!0){const r=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,i,s);t.setRenderTarget(r)}}class ho extends _n{constructor(){super(),this.isGroup=!0,this.type="Group"}}const U6={type:"move"};class Qf{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ho,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ho,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new X,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new X),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ho,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new X,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new X),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const i of t.hand.values())this._getHandJoint(e,i)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,i){let s=null,r=null,o=null;const l=this._targetRay,c=this._grip,h=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(h&&t.hand){o=!0;for(const y of t.hand.values()){const x=e.getJointPose(y,i),_=this._getHandJoint(h,y);x!==null&&(_.matrix.fromArray(x.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=x.radius),_.visible=x!==null}const f=h.joints["index-finger-tip"],d=h.joints["thumb-tip"],p=f.position.distanceTo(d.position),g=.02,v=.005;h.inputState.pinching&&p>g+v?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!h.inputState.pinching&&p<=g-v&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else c!==null&&t.gripSpace&&(r=e.getPose(t.gripSpace,i),r!==null&&(c.matrix.fromArray(r.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,r.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(r.linearVelocity)):c.hasLinearVelocity=!1,r.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(r.angularVelocity)):c.hasAngularVelocity=!1));l!==null&&(s=e.getPose(t.targetRaySpace,i),s===null&&r!==null&&(s=r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(U6)))}return l!==null&&(l.visible=s!==null),c!==null&&(c.visible=r!==null),h!==null&&(h.visible=o!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){const i=new ho;i.matrixAutoUpdate=!1,i.visible=!1,t.joints[e.jointName]=i,t.add(i)}return t.joints[e.jointName]}}class B6 extends _n{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new _s,this.environmentIntensity=1,this.environmentRotation=new _s,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}}class z6{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=Hp,this.updateRanges=[],this.version=0,this.uuid=qi()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,i){t*=this.stride,i*=e.stride;for(let s=0,r=this.stride;s<r;s++)this.array[t+s]=e.array[i+s];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=qi()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(e,this.stride);return i.setUsage(this.usage),i}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=qi()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const qn=new X;class Vm{constructor(t,e,i,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=i,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,i=this.data.count;e<i;e++)qn.fromBufferAttribute(this,e),qn.applyMatrix4(t),this.setXYZ(e,qn.x,qn.y,qn.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)qn.fromBufferAttribute(this,e),qn.applyNormalMatrix(t),this.setXYZ(e,qn.x,qn.y,qn.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)qn.fromBufferAttribute(this,e),qn.transformDirection(t),this.setXYZ(e,qn.x,qn.y,qn.z);return this}getComponent(t,e){let i=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(i=Vi(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=Xe(i,this.array)),this.data.array[t*this.data.stride+this.offset+e]=i,this}setX(t,e){return this.normalized&&(e=Xe(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=Xe(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=Xe(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=Xe(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=Vi(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=Vi(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=Vi(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=Vi(e,this.array)),e}setXY(t,e,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=Xe(e,this.array),i=Xe(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this}setXYZ(t,e,i,s){return t=t*this.data.stride+this.offset,this.normalized&&(e=Xe(e,this.array),i=Xe(i,this.array),s=Xe(s,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=s,this}setXYZW(t,e,i,s,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=Xe(e,this.array),i=Xe(i,this.array),s=Xe(s,this.array),r=Xe(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=s,this.data.array[t+3]=r,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[s+r])}return new ii(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Vm(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[s+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const D_=new X,O_=new Ge,N_=new Ge,H6=new X,k_=new _e,oh=new X,td=new xs,F_=new _e,ed=new Wa;class V6 extends ti{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=c_,this.bindMatrix=new _e,this.bindMatrixInverse=new _e,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;this.boundingBox===null&&(this.boundingBox=new er),this.boundingBox.makeEmpty();const e=t.getAttribute("position");for(let i=0;i<e.count;i++)this.getVertexPosition(i,oh),this.boundingBox.expandByPoint(oh)}computeBoundingSphere(){const t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new xs),this.boundingSphere.makeEmpty();const e=t.getAttribute("position");for(let i=0;i<e.count;i++)this.getVertexPosition(i,oh),this.boundingSphere.expandByPoint(oh)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){const i=this.material,s=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),td.copy(this.boundingSphere),td.applyMatrix4(s),t.ray.intersectsSphere(td)!==!1&&(F_.copy(s).invert(),ed.copy(t.ray).applyMatrix4(F_),!(this.boundingBox!==null&&ed.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(t,e,ed)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Ge,e=this.geometry.attributes.skinWeight;for(let i=0,s=e.count;i<s;i++){t.fromBufferAttribute(e,i);const r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===c_?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===UC?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){const i=this.skeleton,s=this.geometry;O_.fromBufferAttribute(s.attributes.skinIndex,t),N_.fromBufferAttribute(s.attributes.skinWeight,t),D_.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let r=0;r<4;r++){const o=N_.getComponent(r);if(o!==0){const l=O_.getComponent(r);k_.multiplyMatrices(i.bones[l].matrixWorld,i.boneInverses[l]),e.addScaledVector(H6.copy(D_).applyMatrix4(k_),o)}}return e.applyMatrix4(this.bindMatrixInverse)}}class Ox extends _n{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Nx extends Dn{constructor(t=null,e=1,i=1,s,r,o,l,c,h=ni,f=ni,d,p){super(null,o,l,c,h,f,s,r,d,p),this.isDataTexture=!0,this.image={data:t,width:e,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const U_=new _e,W6=new _e;class Wm{constructor(t=[],e=[]){this.uuid=qi(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,s=this.bones.length;i<s;i++)this.boneInverses.push(new _e)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const i=new _e;this.bones[t]&&i.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const i=this.bones[t];i&&i.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const i=this.bones[t];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const t=this.bones,e=this.boneInverses,i=this.boneMatrices,s=this.boneTexture;for(let r=0,o=t.length;r<o;r++){const l=t[r]?t[r].matrixWorld:W6;U_.multiplyMatrices(l,e[r]),U_.toArray(i,r*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new Wm(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const i=new Nx(e,t,t,Ri,ji);return i.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=i,this}getBoneByName(t){for(let e=0,i=this.bones.length;e<i;e++){const s=this.bones[e];if(s.name===t)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let i=0,s=t.bones.length;i<s;i++){const r=t.bones[i];let o=e[r];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),o=new Ox),this.bones.push(o),this.boneInverses.push(new _e().fromArray(t.boneInverses[i]))}return this.init(),this}toJSON(){const t={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,i=this.boneInverses;for(let s=0,r=e.length;s<r;s++){const o=e[s];t.bones.push(o.uuid);const l=i[s];t.boneInverses.push(l.toArray())}return t}}class Vp extends ii{constructor(t,e,i,s=1){super(t,e,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const ea=new _e,B_=new _e,ah=[],z_=new er,G6=new _e,ml=new ti,gl=new xs;class j6 extends ti{constructor(t,e,i){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new Vp(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<i;s++)this.setMatrixAt(s,G6)}computeBoundingBox(){const t=this.geometry,e=this.count;this.boundingBox===null&&(this.boundingBox=new er),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<e;i++)this.getMatrixAt(i,ea),z_.copy(t.boundingBox).applyMatrix4(ea),this.boundingBox.union(z_)}computeBoundingSphere(){const t=this.geometry,e=this.count;this.boundingSphere===null&&(this.boundingSphere=new xs),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<e;i++)this.getMatrixAt(i,ea),gl.copy(t.boundingSphere).applyMatrix4(ea),this.boundingSphere.union(gl)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),t.morphTexture!==null&&(this.morphTexture=t.morphTexture.clone()),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,t*16)}getMorphAt(t,e){const i=e.morphTargetInfluences,s=this.morphTexture.source.data.data,r=i.length+1,o=t*r+1;for(let l=0;l<i.length;l++)i[l]=s[o+l]}raycast(t,e){const i=this.matrixWorld,s=this.count;if(ml.geometry=this.geometry,ml.material=this.material,ml.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),gl.copy(this.boundingSphere),gl.applyMatrix4(i),t.ray.intersectsSphere(gl)!==!1))for(let r=0;r<s;r++){this.getMatrixAt(r,ea),B_.multiplyMatrices(i,ea),ml.matrixWorld=B_,ml.raycast(t,ah);for(let o=0,l=ah.length;o<l;o++){const c=ah[o];c.instanceId=r,c.object=this,e.push(c)}ah.length=0}}setColorAt(t,e){this.instanceColor===null&&(this.instanceColor=new Vp(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),e.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,t*16)}setMorphAt(t,e){const i=e.morphTargetInfluences,s=i.length+1;this.morphTexture===null&&(this.morphTexture=new Nx(new Float32Array(s*this.count),s,this.count,Nm,ji));const r=this.morphTexture.source.data.data;let o=0;for(let h=0;h<i.length;h++)o+=i[h];const l=this.geometry.morphTargetsRelative?1:1-o,c=s*t;r[c]=l,r.set(i,c+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const nd=new X,X6=new X,Z6=new ge;class dr{constructor(t=new X(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,s){return this.normal.set(t,e,i),this.constant=s,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){const s=nd.subVectors(i,e).cross(X6.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(s,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const i=t.delta(nd),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;const r=-(t.start.dot(this.normal)+this.constant)/s;return r<0||r>1?null:e.copy(t.start).addScaledVector(i,r)}intersectsLine(t){const e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const i=e||Z6.getNormalMatrix(t),s=this.coplanarPoint(nd).applyMatrix4(t),r=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Zr=new xs,Y6=new le(.5,.5),lh=new X;class Gm{constructor(t=new dr,e=new dr,i=new dr,s=new dr,r=new dr,o=new dr){this.planes=[t,e,i,s,r,o]}set(t,e,i,s,r,o){const l=this.planes;return l[0].copy(t),l[1].copy(e),l[2].copy(i),l[3].copy(s),l[4].copy(r),l[5].copy(o),this}copy(t){const e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t,e=cs,i=!1){const s=this.planes,r=t.elements,o=r[0],l=r[1],c=r[2],h=r[3],f=r[4],d=r[5],p=r[6],g=r[7],v=r[8],y=r[9],x=r[10],_=r[11],w=r[12],C=r[13],S=r[14],T=r[15];if(s[0].setComponents(h-o,g-f,_-v,T-w).normalize(),s[1].setComponents(h+o,g+f,_+v,T+w).normalize(),s[2].setComponents(h+l,g+d,_+y,T+C).normalize(),s[3].setComponents(h-l,g-d,_-y,T-C).normalize(),i)s[4].setComponents(c,p,x,S).normalize(),s[5].setComponents(h-c,g-p,_-x,T-S).normalize();else if(s[4].setComponents(h-c,g-p,_-x,T-S).normalize(),e===cs)s[5].setComponents(h+c,g+p,_+x,T+S).normalize();else if(e===su)s[5].setComponents(c,p,x,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),Zr.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),Zr.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Zr)}intersectsSprite(t){Zr.center.set(0,0,0);const e=Y6.distanceTo(t.center);return Zr.radius=.7071067811865476+e,Zr.applyMatrix4(t.matrixWorld),this.intersectsSphere(Zr)}intersectsSphere(t){const e=this.planes,i=t.center,s=-t.radius;for(let r=0;r<6;r++)if(e[r].distanceToPoint(i)<s)return!1;return!0}intersectsBox(t){const e=this.planes;for(let i=0;i<6;i++){const s=e[i];if(lh.x=s.normal.x>0?t.max.x:t.min.x,lh.y=s.normal.y>0?t.max.y:t.min.y,lh.z=s.normal.z>0?t.max.z:t.min.z,s.distanceToPoint(lh)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class jm extends us{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new pe(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const ru=new X,ou=new X,H_=new _e,_l=new Wa,ch=new xs,id=new X,V_=new X;class Du extends _n{constructor(t=new Ni,e=new jm){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,i=[0];for(let s=1,r=e.count;s<r;s++)ru.fromBufferAttribute(e,s-1),ou.fromBufferAttribute(e,s),i[s]=i[s-1],i[s]+=ru.distanceTo(ou);t.setAttribute("lineDistance",new Ii(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const i=this.geometry,s=this.matrixWorld,r=t.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),ch.copy(i.boundingSphere),ch.applyMatrix4(s),ch.radius+=r,t.ray.intersectsSphere(ch)===!1)return;H_.copy(s).invert(),_l.copy(t.ray).applyMatrix4(H_);const l=r/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,h=this.isLineSegments?2:1,f=i.index,p=i.attributes.position;if(f!==null){const g=Math.max(0,o.start),v=Math.min(f.count,o.start+o.count);for(let y=g,x=v-1;y<x;y+=h){const _=f.getX(y),w=f.getX(y+1),C=hh(this,t,_l,c,_,w,y);C&&e.push(C)}if(this.isLineLoop){const y=f.getX(v-1),x=f.getX(g),_=hh(this,t,_l,c,y,x,v-1);_&&e.push(_)}}else{const g=Math.max(0,o.start),v=Math.min(p.count,o.start+o.count);for(let y=g,x=v-1;y<x;y+=h){const _=hh(this,t,_l,c,y,y+1,y);_&&e.push(_)}if(this.isLineLoop){const y=hh(this,t,_l,c,v-1,g,v-1);y&&e.push(y)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){const s=e[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const l=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=r}}}}}function hh(n,t,e,i,s,r,o){const l=n.geometry.attributes.position;if(ru.fromBufferAttribute(l,s),ou.fromBufferAttribute(l,r),e.distanceSqToSegment(ru,ou,id,V_)>i)return;id.applyMatrix4(n.matrixWorld);const h=t.ray.origin.distanceTo(id);if(!(h<t.near||h>t.far))return{distance:h,point:V_.clone().applyMatrix4(n.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:n}}const W_=new X,G_=new X;class q6 extends Du{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,i=[];for(let s=0,r=e.count;s<r;s+=2)W_.fromBufferAttribute(e,s),G_.fromBufferAttribute(e,s+1),i[s]=s===0?0:i[s-1],i[s+1]=i[s]+W_.distanceTo(G_);t.setAttribute("lineDistance",new Ii(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class $6 extends Du{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class kx extends us{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new pe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const j_=new _e,Wp=new Wa,uh=new xs,fh=new X;class K6 extends _n{constructor(t=new Ni,e=new kx){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){const i=this.geometry,s=this.matrixWorld,r=t.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),uh.copy(i.boundingSphere),uh.applyMatrix4(s),uh.radius+=r,t.ray.intersectsSphere(uh)===!1)return;j_.copy(s).invert(),Wp.copy(t.ray).applyMatrix4(j_);const l=r/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,h=i.index,d=i.attributes.position;if(h!==null){const p=Math.max(0,o.start),g=Math.min(h.count,o.start+o.count);for(let v=p,y=g;v<y;v++){const x=h.getX(v);fh.fromBufferAttribute(d,x),X_(fh,x,c,s,t,e,this)}}else{const p=Math.max(0,o.start),g=Math.min(d.count,o.start+o.count);for(let v=p,y=g;v<y;v++)fh.fromBufferAttribute(d,v),X_(fh,v,c,s,t,e,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){const s=e[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const l=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=r}}}}}function X_(n,t,e,i,s,r,o){const l=Wp.distanceSqToPoint(n);if(l<e){const c=new X;Wp.closestPointToPoint(n,c),c.applyMatrix4(i);const h=s.ray.origin.distanceTo(c);if(h<s.near||h>s.far)return;r.push({distance:h,distanceToRay:Math.sqrt(l),point:c,index:t,face:null,faceIndex:null,barycoord:null,object:o})}}class Fx extends Dn{constructor(t,e,i=Mo,s,r,o,l=ni,c=ni,h,f=Ql,d=1){if(f!==Ql&&f!==tc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const p={width:t,height:e,depth:d};super(p,s,r,o,l,c,f,i,h),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.source=new zm(Object.assign({},t.image)),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}}class Ou extends Ni{constructor(t=1,e=1,i=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:s};const r=t/2,o=e/2,l=Math.floor(i),c=Math.floor(s),h=l+1,f=c+1,d=t/l,p=e/c,g=[],v=[],y=[],x=[];for(let _=0;_<f;_++){const w=_*p-o;for(let C=0;C<h;C++){const S=C*d-r;v.push(S,-w,0),y.push(0,0,1),x.push(C/l),x.push(1-_/c)}}for(let _=0;_<c;_++)for(let w=0;w<l;w++){const C=w+h*_,S=w+h*(_+1),T=w+1+h*(_+1),A=w+1+h*_;g.push(C,S,A),g.push(S,T,A)}this.setIndex(g),this.setAttribute("position",new Ii(v,3)),this.setAttribute("normal",new Ii(y,3)),this.setAttribute("uv",new Ii(x,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Ou(t.width,t.height,t.widthSegments,t.heightSegments)}}class Xm extends Ni{constructor(t=1,e=32,i=16,s=0,r=Math.PI*2,o=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:s,phiLength:r,thetaStart:o,thetaLength:l},e=Math.max(3,Math.floor(e)),i=Math.max(2,Math.floor(i));const c=Math.min(o+l,Math.PI);let h=0;const f=[],d=new X,p=new X,g=[],v=[],y=[],x=[];for(let _=0;_<=i;_++){const w=[],C=_/i;let S=0;_===0&&o===0?S=.5/e:_===i&&c===Math.PI&&(S=-.5/e);for(let T=0;T<=e;T++){const A=T/e;d.x=-t*Math.cos(s+A*r)*Math.sin(o+C*l),d.y=t*Math.cos(o+C*l),d.z=t*Math.sin(s+A*r)*Math.sin(o+C*l),v.push(d.x,d.y,d.z),p.copy(d).normalize(),y.push(p.x,p.y,p.z),x.push(A+S,1-C),w.push(h++)}f.push(w)}for(let _=0;_<i;_++)for(let w=0;w<e;w++){const C=f[_][w+1],S=f[_][w],T=f[_+1][w],A=f[_+1][w+1];(_!==0||o>0)&&g.push(C,S,A),(_!==i-1||c<Math.PI)&&g.push(S,T,A)}this.setIndex(g),this.setAttribute("position",new Ii(v,3)),this.setAttribute("normal",new Ii(y,3)),this.setAttribute("uv",new Ii(x,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Xm(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class Nu extends us{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new pe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sx,this.normalScale=new le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new _s,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class ys extends Nu{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new le(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Me(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new pe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new pe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new pe(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class J6 extends us{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=HC,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class Q6 extends us{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function dh(n,t){return!n||n.constructor===t?n:typeof t.BYTES_PER_ELEMENT=="number"?new t(n):Array.prototype.slice.call(n)}function t9(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function e9(n){function t(s,r){return n[s]-n[r]}const e=n.length,i=new Array(e);for(let s=0;s!==e;++s)i[s]=s;return i.sort(t),i}function Z_(n,t,e){const i=n.length,s=new n.constructor(i);for(let r=0,o=0;o!==i;++r){const l=e[r]*t;for(let c=0;c!==t;++c)s[o++]=n[l+c]}return s}function Ux(n,t,e,i){let s=1,r=n[0];for(;r!==void 0&&r[i]===void 0;)r=n[s++];if(r===void 0)return;let o=r[i];if(o!==void 0)if(Array.isArray(o))do o=r[i],o!==void 0&&(t.push(r.time),e.push(...o)),r=n[s++];while(r!==void 0);else if(o.toArray!==void 0)do o=r[i],o!==void 0&&(t.push(r.time),o.toArray(e,e.length)),r=n[s++];while(r!==void 0);else do o=r[i],o!==void 0&&(t.push(r.time),e.push(o)),r=n[s++];while(r!==void 0)}class yc{constructor(t,e,i,s){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let i=this._cachedIndex,s=e[i],r=e[i-1];n:{t:{let o;e:{i:if(!(t<s)){for(let l=i+2;;){if(s===void 0){if(t<r)break i;return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===l)break;if(r=s,s=e[++i],t<s)break t}o=e.length;break e}if(!(t>=r)){const l=e[1];t<l&&(i=2,r=l);for(let c=i-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(s=r,r=e[--i-1],t>=r)break t}o=i,i=0;break e}break n}for(;i<o;){const l=i+o>>>1;t<e[l]?o=l:i=l+1}if(s=e[i],r=e[i-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,r,s)}return this.interpolate_(i,r,t,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,i=this.sampleValues,s=this.valueSize,r=t*s;for(let o=0;o!==s;++o)e[o]=i[r+o];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class n9 extends yc{constructor(t,e,i,s){super(t,e,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:h_,endingEnd:h_}}intervalChanged_(t,e,i){const s=this.parameterPositions;let r=t-2,o=t+1,l=s[r],c=s[o];if(l===void 0)switch(this.getSettings_().endingStart){case u_:r=t,l=2*e-i;break;case f_:r=s.length-2,l=e+s[r]-s[r+1];break;default:r=t,l=i}if(c===void 0)switch(this.getSettings_().endingEnd){case u_:o=t,c=2*i-e;break;case f_:o=1,c=i+s[1]-s[0];break;default:o=t-1,c=e}const h=(i-e)*.5,f=this.valueSize;this._weightPrev=h/(e-l),this._weightNext=h/(c-i),this._offsetPrev=r*f,this._offsetNext=o*f}interpolate_(t,e,i,s){const r=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=t*l,h=c-l,f=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,g=this._weightNext,v=(i-e)/(s-e),y=v*v,x=y*v,_=-p*x+2*p*y-p*v,w=(1+p)*x+(-1.5-2*p)*y+(-.5+p)*v+1,C=(-1-g)*x+(1.5+g)*y+.5*v,S=g*x-g*y;for(let T=0;T!==l;++T)r[T]=_*o[f+T]+w*o[h+T]+C*o[c+T]+S*o[d+T];return r}}class i9 extends yc{constructor(t,e,i,s){super(t,e,i,s)}interpolate_(t,e,i,s){const r=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=t*l,h=c-l,f=(i-e)/(s-e),d=1-f;for(let p=0;p!==l;++p)r[p]=o[h+p]*d+o[c+p]*f;return r}}class s9 extends yc{constructor(t,e,i,s){super(t,e,i,s)}interpolate_(t){return this.copySampleValue_(t-1)}}class Ki{constructor(t,e,i,s){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=dh(e,this.TimeBufferType),this.values=dh(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let i;if(e.toJSON!==this.toJSON)i=e.toJSON(t);else{i={name:t.name,times:dh(t.times,Array),values:dh(t.values,Array)};const s=t.getInterpolation();s!==t.DefaultInterpolation&&(i.interpolation=s)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new s9(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new i9(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new n9(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case ec:e=this.InterpolantFactoryMethodDiscrete;break;case nc:e=this.InterpolantFactoryMethodLinear;break;case If:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ec;case this.InterpolantFactoryMethodLinear:return nc;case this.InterpolantFactoryMethodSmooth:return If}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const e=this.times;for(let i=0,s=e.length;i!==s;++i)e[i]+=t}return this}scale(t){if(t!==1){const e=this.times;for(let i=0,s=e.length;i!==s;++i)e[i]*=t}return this}trim(t,e){const i=this.times,s=i.length;let r=0,o=s-1;for(;r!==s&&i[r]<t;)++r;for(;o!==-1&&i[o]>e;)--o;if(++o,r!==0||o!==s){r>=o&&(o=Math.max(o,1),r=o-1);const l=this.getValueSize();this.times=i.slice(r,o),this.values=this.values.slice(r*l,o*l)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const i=this.times,s=this.values,r=i.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let l=0;l!==r;l++){const c=i[l];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,c),t=!1;break}if(o!==null&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,c,o),t=!1;break}o=c}if(s!==void 0&&t9(s))for(let l=0,c=s.length;l!==c;++l){const h=s[l];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,h),t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),i=this.getValueSize(),s=this.getInterpolation()===If,r=t.length-1;let o=1;for(let l=1;l<r;++l){let c=!1;const h=t[l],f=t[l+1];if(h!==f&&(l!==1||h!==t[0]))if(s)c=!0;else{const d=l*i,p=d-i,g=d+i;for(let v=0;v!==i;++v){const y=e[d+v];if(y!==e[p+v]||y!==e[g+v]){c=!0;break}}}if(c){if(l!==o){t[o]=t[l];const d=l*i,p=o*i;for(let g=0;g!==i;++g)e[p+g]=e[d+g]}++o}}if(r>0){t[o]=t[r];for(let l=r*i,c=o*i,h=0;h!==i;++h)e[c+h]=e[l+h];++o}return o!==t.length?(this.times=t.slice(0,o),this.values=e.slice(0,o*i)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),i=this.constructor,s=new i(this.name,t,e);return s.createInterpolant=this.createInterpolant,s}}Ki.prototype.ValueTypeName="";Ki.prototype.TimeBufferType=Float32Array;Ki.prototype.ValueBufferType=Float32Array;Ki.prototype.DefaultInterpolation=nc;class ja extends Ki{constructor(t,e,i){super(t,e,i)}}ja.prototype.ValueTypeName="bool";ja.prototype.ValueBufferType=Array;ja.prototype.DefaultInterpolation=ec;ja.prototype.InterpolantFactoryMethodLinear=void 0;ja.prototype.InterpolantFactoryMethodSmooth=void 0;class Bx extends Ki{constructor(t,e,i,s){super(t,e,i,s)}}Bx.prototype.ValueTypeName="color";class Ia extends Ki{constructor(t,e,i,s){super(t,e,i,s)}}Ia.prototype.ValueTypeName="number";class r9 extends yc{constructor(t,e,i,s){super(t,e,i,s)}interpolate_(t,e,i,s){const r=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=(i-e)/(s-e);let h=t*l;for(let f=h+l;h!==f;h+=4)gs.slerpFlat(r,0,o,h-l,o,h,c);return r}}class Da extends Ki{constructor(t,e,i,s){super(t,e,i,s)}InterpolantFactoryMethodLinear(t){return new r9(this.times,this.values,this.getValueSize(),t)}}Da.prototype.ValueTypeName="quaternion";Da.prototype.InterpolantFactoryMethodSmooth=void 0;class Xa extends Ki{constructor(t,e,i){super(t,e,i)}}Xa.prototype.ValueTypeName="string";Xa.prototype.ValueBufferType=Array;Xa.prototype.DefaultInterpolation=ec;Xa.prototype.InterpolantFactoryMethodLinear=void 0;Xa.prototype.InterpolantFactoryMethodSmooth=void 0;class Oa extends Ki{constructor(t,e,i,s){super(t,e,i,s)}}Oa.prototype.ValueTypeName="vector";class o9{constructor(t="",e=-1,i=[],s=BC){this.name=t,this.tracks=i,this.duration=e,this.blendMode=s,this.uuid=qi(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],i=t.tracks,s=1/(t.fps||1);for(let o=0,l=i.length;o!==l;++o)e.push(l9(i[o]).scale(s));const r=new this(t.name,t.duration,e,t.blendMode);return r.uuid=t.uuid,r}static toJSON(t){const e=[],i=t.tracks,s={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let r=0,o=i.length;r!==o;++r)e.push(Ki.toJSON(i[r]));return s}static CreateFromMorphTargetSequence(t,e,i,s){const r=e.length,o=[];for(let l=0;l<r;l++){let c=[],h=[];c.push((l+r-1)%r,l,(l+1)%r),h.push(0,1,0);const f=e9(c);c=Z_(c,1,f),h=Z_(h,1,f),!s&&c[0]===0&&(c.push(r),h.push(h[0])),o.push(new Ia(".morphTargetInfluences["+e[l].name+"]",c,h).scale(1/i))}return new this(t,-1,o)}static findByName(t,e){let i=t;if(!Array.isArray(t)){const s=t;i=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<i.length;s++)if(i[s].name===e)return i[s];return null}static CreateClipsFromMorphTargetSequences(t,e,i){const s={},r=/^([\w-]*?)([\d]+)$/;for(let l=0,c=t.length;l<c;l++){const h=t[l],f=h.name.match(r);if(f&&f.length>1){const d=f[1];let p=s[d];p||(s[d]=p=[]),p.push(h)}}const o=[];for(const l in s)o.push(this.CreateFromMorphTargetSequence(l,s[l],e,i));return o}static parseAnimation(t,e){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,p,g,v,y){if(g.length!==0){const x=[],_=[];Ux(g,x,_,v),x.length!==0&&y.push(new d(p,x,_))}},s=[],r=t.name||"default",o=t.fps||30,l=t.blendMode;let c=t.length||-1;const h=t.hierarchy||[];for(let d=0;d<h.length;d++){const p=h[d].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const g={};let v;for(v=0;v<p.length;v++)if(p[v].morphTargets)for(let y=0;y<p[v].morphTargets.length;y++)g[p[v].morphTargets[y]]=-1;for(const y in g){const x=[],_=[];for(let w=0;w!==p[v].morphTargets.length;++w){const C=p[v];x.push(C.time),_.push(C.morphTarget===y?1:0)}s.push(new Ia(".morphTargetInfluence["+y+"]",x,_))}c=g.length*o}else{const g=".bones["+e[d].name+"]";i(Oa,g+".position",p,"pos",s),i(Da,g+".quaternion",p,"rot",s),i(Oa,g+".scale",p,"scl",s)}}return s.length===0?null:new this(r,c,s,l)}resetDuration(){const t=this.tracks;let e=0;for(let i=0,s=t.length;i!==s;++i){const r=this.tracks[i];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function a9(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ia;case"vector":case"vector2":case"vector3":case"vector4":return Oa;case"color":return Bx;case"quaternion":return Da;case"bool":case"boolean":return ja;case"string":return Xa}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function l9(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=a9(n.type);if(n.times===void 0){const e=[],i=[];Ux(n.keys,e,i,"value"),n.times=e,n.values=i}return t.parse!==void 0?t.parse(n):new t(n.name,n.times,n.values,n.interpolation)}const Ws={enabled:!1,files:{},add:function(n,t){this.enabled!==!1&&(this.files[n]=t)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class c9{constructor(t,e,i){const s=this;let r=!1,o=0,l=0,c;const h=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.abortController=new AbortController,this.itemStart=function(f){l++,r===!1&&s.onStart!==void 0&&s.onStart(f,o,l),r=!0},this.itemEnd=function(f){o++,s.onProgress!==void 0&&s.onProgress(f,o,l),o===l&&(r=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(f){s.onError!==void 0&&s.onError(f)},this.resolveURL=function(f){return c?c(f):f},this.setURLModifier=function(f){return c=f,this},this.addHandler=function(f,d){return h.push(f,d),this},this.removeHandler=function(f){const d=h.indexOf(f);return d!==-1&&h.splice(d,2),this},this.getHandler=function(f){for(let d=0,p=h.length;d<p;d+=2){const g=h[d],v=h[d+1];if(g.global&&(g.lastIndex=0),g.test(f))return v}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}}const h9=new c9;class Za{constructor(t){this.manager=t!==void 0?t:h9,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const i=this;return new Promise(function(s,r){i.load(t,s,e,r)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}abort(){return this}}Za.DEFAULT_MATERIAL_NAME="__DEFAULT";const Is={};class u9 extends Error{constructor(t,e){super(t),this.response=e}}class zx extends Za{constructor(t){super(t),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(t,e,i,s){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=Ws.get(`file:${t}`);if(r!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(r),this.manager.itemEnd(t)},0),r;if(Is[t]!==void 0){Is[t].push({onLoad:e,onProgress:i,onError:s});return}Is[t]=[],Is[t].push({onLoad:e,onProgress:i,onError:s});const o=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),l=this.mimeType,c=this.responseType;fetch(o).then(h=>{if(h.status===200||h.status===0){if(h.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||h.body===void 0||h.body.getReader===void 0)return h;const f=Is[t],d=h.body.getReader(),p=h.headers.get("X-File-Size")||h.headers.get("Content-Length"),g=p?parseInt(p):0,v=g!==0;let y=0;const x=new ReadableStream({start(_){w();function w(){d.read().then(({done:C,value:S})=>{if(C)_.close();else{y+=S.byteLength;const T=new ProgressEvent("progress",{lengthComputable:v,loaded:y,total:g});for(let A=0,P=f.length;A<P;A++){const N=f[A];N.onProgress&&N.onProgress(T)}_.enqueue(S),w()}},C=>{_.error(C)})}}});return new Response(x)}else throw new u9(`fetch for "${h.url}" responded with ${h.status}: ${h.statusText}`,h)}).then(h=>{switch(c){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"document":return h.text().then(f=>new DOMParser().parseFromString(f,l));case"json":return h.json();default:if(l==="")return h.text();{const d=/charset="?([^;"\s]*)"?/i.exec(l),p=d&&d[1]?d[1].toLowerCase():void 0,g=new TextDecoder(p);return h.arrayBuffer().then(v=>g.decode(v))}}}).then(h=>{Ws.add(`file:${t}`,h);const f=Is[t];delete Is[t];for(let d=0,p=f.length;d<p;d++){const g=f[d];g.onLoad&&g.onLoad(h)}}).catch(h=>{const f=Is[t];if(f===void 0)throw this.manager.itemError(t),h;delete Is[t];for(let d=0,p=f.length;d<p;d++){const g=f[d];g.onError&&g.onError(h)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}const na=new WeakMap;class f9 extends Za{constructor(t){super(t)}load(t,e,i,s){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,o=Ws.get(`image:${t}`);if(o!==void 0){if(o.complete===!0)r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0);else{let d=na.get(o);d===void 0&&(d=[],na.set(o,d)),d.push({onLoad:e,onError:s})}return o}const l=ic("img");function c(){f(),e&&e(this);const d=na.get(this)||[];for(let p=0;p<d.length;p++){const g=d[p];g.onLoad&&g.onLoad(this)}na.delete(this),r.manager.itemEnd(t)}function h(d){f(),s&&s(d),Ws.remove(`image:${t}`);const p=na.get(this)||[];for(let g=0;g<p.length;g++){const v=p[g];v.onError&&v.onError(d)}na.delete(this),r.manager.itemError(t),r.manager.itemEnd(t)}function f(){l.removeEventListener("load",c,!1),l.removeEventListener("error",h,!1)}return l.addEventListener("load",c,!1),l.addEventListener("error",h,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),Ws.add(`image:${t}`,l),r.manager.itemStart(t),l.src=t,l}}class d9 extends Za{constructor(t){super(t)}load(t,e,i,s){const r=new Dn,o=new f9(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(l){r.image=l,r.needsUpdate=!0,e!==void 0&&e(r)},i,s),r}}class Zm extends _n{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new pe(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(e.object.target=this.target.uuid),e}}const sd=new _e,Y_=new X,q_=new X;class Ym{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new le(512,512),this.mapType=ms,this.map=null,this.mapPass=null,this.matrix=new _e,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Gm,this._frameExtents=new le(1,1),this._viewportCount=1,this._viewports=[new Ge(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,i=this.matrix;Y_.setFromMatrixPosition(t.matrixWorld),e.position.copy(Y_),q_.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(q_),e.updateMatrixWorld(),sd.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(sd,e.coordinateSystem,e.reversedDepth),e.reversedDepth?i.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(sd)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.autoUpdate=t.autoUpdate,this.needsUpdate=t.needsUpdate,this.normalBias=t.normalBias,this.blurSamples=t.blurSamples,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class p9 extends Ym{constructor(){super(new Jn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(t){const e=this.camera,i=Ra*2*t.angle*this.focus,s=this.mapSize.width/this.mapSize.height*this.aspect,r=t.distance||e.far;(i!==e.fov||s!==e.aspect||r!==e.far)&&(e.fov=i,e.aspect=s,e.far=r,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class m9 extends Zm{constructor(t,e,i=0,s=Math.PI/3,r=0,o=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(_n.DEFAULT_UP),this.updateMatrix(),this.target=new _n,this.distance=i,this.angle=s,this.penumbra=r,this.decay=o,this.map=null,this.shadow=new p9}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const $_=new _e,vl=new X,rd=new X;class g9 extends Ym{constructor(){super(new Jn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new le(4,2),this._viewportCount=6,this._viewports=[new Ge(2,1,1,1),new Ge(0,1,1,1),new Ge(3,1,1,1),new Ge(1,1,1,1),new Ge(3,0,1,1),new Ge(1,0,1,1)],this._cubeDirections=[new X(1,0,0),new X(-1,0,0),new X(0,0,1),new X(0,0,-1),new X(0,1,0),new X(0,-1,0)],this._cubeUps=[new X(0,1,0),new X(0,1,0),new X(0,1,0),new X(0,1,0),new X(0,0,1),new X(0,0,-1)]}updateMatrices(t,e=0){const i=this.camera,s=this.matrix,r=t.distance||i.far;r!==i.far&&(i.far=r,i.updateProjectionMatrix()),vl.setFromMatrixPosition(t.matrixWorld),i.position.copy(vl),rd.copy(i.position),rd.add(this._cubeDirections[e]),i.up.copy(this._cubeUps[e]),i.lookAt(rd),i.updateMatrixWorld(),s.makeTranslation(-vl.x,-vl.y,-vl.z),$_.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix($_,i.coordinateSystem,i.reversedDepth)}}class _9 extends Zm{constructor(t,e,i=0,s=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new g9}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class qm extends Ix{constructor(t=-1,e=1,i=1,s=-1,r=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=s,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,i,s,r,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=s,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let r=i-t,o=i+t,l=s+e,c=s-e;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=h*this.view.offsetX,o=r+h*this.view.width,l-=f*this.view.offsetY,c=l-f*this.view.height}this.projectionMatrix.makeOrthographic(r,o,l,c,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}}class v9 extends Ym{constructor(){super(new qm(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Hx extends Zm{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(_n.DEFAULT_UP),this.updateMatrix(),this.target=new _n,this.shadow=new v9}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class Hl{static extractUrlBase(t){const e=t.lastIndexOf("/");return e===-1?"./":t.slice(0,e+1)}static resolveURL(t,e){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}const od=new WeakMap;class x9 extends Za{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(t){return this.options=t,this}load(t,e,i,s){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,o=Ws.get(`image-bitmap:${t}`);if(o!==void 0){if(r.manager.itemStart(t),o.then){o.then(h=>{if(od.has(o)===!0)s&&s(od.get(o)),r.manager.itemError(t),r.manager.itemEnd(t);else return e&&e(h),r.manager.itemEnd(t),h});return}return setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader,l.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const c=fetch(t,l).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(h){return Ws.add(`image-bitmap:${t}`,h),e&&e(h),r.manager.itemEnd(t),h}).catch(function(h){s&&s(h),od.set(c,h),Ws.remove(`image-bitmap:${t}`),r.manager.itemError(t),r.manager.itemEnd(t)});Ws.add(`image-bitmap:${t}`,c),r.manager.itemStart(t)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class y9 extends Jn{constructor(t=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=t}}const $m="\\[\\]\\.:\\/",b9=new RegExp("["+$m+"]","g"),Km="[^"+$m+"]",M9="[^"+$m.replace("\\.","")+"]",S9=/((?:WC+[\/:])*)/.source.replace("WC",Km),C9=/(WCOD+)?/.source.replace("WCOD",M9),w9=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Km),T9=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Km),E9=new RegExp("^"+S9+C9+w9+T9+"$"),A9=["material","materials","bones","map"];class P9{constructor(t,e,i){const s=i||Ze.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,s)}getValue(t,e){this.bind();const i=this._targetGroup.nCachedObjects_,s=this._bindings[i];s!==void 0&&s.getValue(t,e)}setValue(t,e){const i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,r=i.length;s!==r;++s)i[s].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}}class Ze{constructor(t,e,i){this.path=e,this.parsedPath=i||Ze.parseTrackName(e),this.node=Ze.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,i){return t&&t.isAnimationObjectGroup?new Ze.Composite(t,e,i):new Ze(t,e,i)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(b9,"")}static parseTrackName(t){const e=E9.exec(t);if(e===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const i={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},s=i.nodeName&&i.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const r=i.nodeName.substring(s+1);A9.indexOf(r)!==-1&&(i.nodeName=i.nodeName.substring(0,s),i.objectName=r)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}static findNode(t,e){if(e===void 0||e===""||e==="."||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){const i=t.skeleton.getBoneByName(e);if(i!==void 0)return i}if(t.children){const i=function(r){for(let o=0;o<r.length;o++){const l=r[o];if(l.name===e||l.uuid===e)return l;const c=i(l.children);if(c)return c}return null},s=i(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)t[e++]=i[s]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,i=e.objectName,s=e.propertyName;let r=e.propertyIndex;if(t||(t=Ze.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let h=e.objectIndex;switch(i){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let f=0;f<t.length;f++)if(t[f].name===h){h=f;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[i]}if(h!==void 0){if(t[h]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[h]}}const o=t[s];if(o===void 0){const h=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+s+" but it wasn't found.",t);return}let l=this.Versioning.None;this.targetObject=t,t.isMaterial===!0?l=this.Versioning.NeedsUpdate:t.isObject3D===!0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(r!==void 0){if(s==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[r]!==void 0&&(r=t.morphTargetDictionary[r])}c=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else o.fromArray!==void 0&&o.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(c=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Ze.Composite=P9;Ze.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ze.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ze.prototype.GetterByBindingType=[Ze.prototype._getValue_direct,Ze.prototype._getValue_array,Ze.prototype._getValue_arrayElement,Ze.prototype._getValue_toArray];Ze.prototype.SetterByBindingTypeAndVersioning=[[Ze.prototype._setValue_direct,Ze.prototype._setValue_direct_setNeedsUpdate,Ze.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ze.prototype._setValue_array,Ze.prototype._setValue_array_setNeedsUpdate,Ze.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ze.prototype._setValue_arrayElement,Ze.prototype._setValue_arrayElement_setNeedsUpdate,Ze.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ze.prototype._setValue_fromArray,Ze.prototype._setValue_fromArray_setNeedsUpdate,Ze.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];const K_=new _e;class R9{constructor(t,e,i=0,s=1/0){this.ray=new Wa(t,e),this.near=i,this.far=s,this.camera=null,this.layers=new Hm,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}setFromXRController(t){return K_.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(K_),this}intersectObject(t,e=!0,i=[]){return Gp(t,this,i,e),i.sort(J_),i}intersectObjects(t,e=!0,i=[]){for(let s=0,r=t.length;s<r;s++)Gp(t[s],this,i,e);return i.sort(J_),i}}function J_(n,t){return n.distance-t.distance}function Gp(n,t,e,i){let s=!0;if(n.layers.test(t.layers)&&n.raycast(t,e)===!1&&(s=!1),s===!0&&i===!0){const r=n.children;for(let o=0,l=r.length;o<l;o++)Gp(r[o],t,e,!0)}}class Q_{constructor(t=1,e=0,i=0){this.radius=t,this.phi=e,this.theta=i}set(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Me(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,i){return this.radius=Math.sqrt(t*t+e*e+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(Me(e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class L9 extends Ro{constructor(t,e=null){super(),this.object=t,this.domElement=e,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(t){if(t===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=t}disconnect(){}dispose(){}update(){}}function t0(n,t,e,i){const s=I9(i);switch(e){case vx:return n*t;case Nm:return n*t/s.components*s.byteLength;case km:return n*t/s.components*s.byteLength;case yx:return n*t*2/s.components*s.byteLength;case Fm:return n*t*2/s.components*s.byteLength;case xx:return n*t*3/s.components*s.byteLength;case Ri:return n*t*4/s.components*s.byteLength;case Um:return n*t*4/s.components*s.byteLength;case Bh:case zh:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*8;case Hh:case Vh:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case mp:case _p:return Math.max(n,16)*Math.max(t,8)/4;case pp:case gp:return Math.max(n,8)*Math.max(t,8)/2;case vp:case xp:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*8;case yp:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case bp:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case Mp:return Math.floor((n+4)/5)*Math.floor((t+3)/4)*16;case Sp:return Math.floor((n+4)/5)*Math.floor((t+4)/5)*16;case Cp:return Math.floor((n+5)/6)*Math.floor((t+4)/5)*16;case wp:return Math.floor((n+5)/6)*Math.floor((t+5)/6)*16;case Tp:return Math.floor((n+7)/8)*Math.floor((t+4)/5)*16;case Ep:return Math.floor((n+7)/8)*Math.floor((t+5)/6)*16;case Ap:return Math.floor((n+7)/8)*Math.floor((t+7)/8)*16;case Pp:return Math.floor((n+9)/10)*Math.floor((t+4)/5)*16;case Rp:return Math.floor((n+9)/10)*Math.floor((t+5)/6)*16;case Lp:return Math.floor((n+9)/10)*Math.floor((t+7)/8)*16;case Ip:return Math.floor((n+9)/10)*Math.floor((t+9)/10)*16;case Dp:return Math.floor((n+11)/12)*Math.floor((t+9)/10)*16;case Op:return Math.floor((n+11)/12)*Math.floor((t+11)/12)*16;case Wh:case Np:case kp:return Math.ceil(n/4)*Math.ceil(t/4)*16;case bx:case Fp:return Math.ceil(n/4)*Math.ceil(t/4)*8;case Up:case Bp:return Math.ceil(n/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${e} format.`)}function I9(n){switch(n){case ms:case mx:return{byteLength:1,components:1};case Kl:case gx:case xc:return{byteLength:2,components:1};case Dm:case Om:return{byteLength:2,components:4};case Mo:case Im:case ji:return{byteLength:4,components:1};case _x:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Lm}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Lm);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function Vx(){let n=null,t=!1,e=null,i=null;function s(r,o){e(r,o),i=n.requestAnimationFrame(s)}return{start:function(){t!==!0&&e!==null&&(i=n.requestAnimationFrame(s),t=!0)},stop:function(){n.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(r){e=r},setContext:function(r){n=r}}}function D9(n){const t=new WeakMap;function e(l,c){const h=l.array,f=l.usage,d=h.byteLength,p=n.createBuffer();n.bindBuffer(c,p),n.bufferData(c,h,f),l.onUploadCallback();let g;if(h instanceof Float32Array)g=n.FLOAT;else if(typeof Float16Array<"u"&&h instanceof Float16Array)g=n.HALF_FLOAT;else if(h instanceof Uint16Array)l.isFloat16BufferAttribute?g=n.HALF_FLOAT:g=n.UNSIGNED_SHORT;else if(h instanceof Int16Array)g=n.SHORT;else if(h instanceof Uint32Array)g=n.UNSIGNED_INT;else if(h instanceof Int32Array)g=n.INT;else if(h instanceof Int8Array)g=n.BYTE;else if(h instanceof Uint8Array)g=n.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)g=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:p,type:g,bytesPerElement:h.BYTES_PER_ELEMENT,version:l.version,size:d}}function i(l,c,h){const f=c.array,d=c.updateRanges;if(n.bindBuffer(h,l),d.length===0)n.bufferSubData(h,0,f);else{d.sort((g,v)=>g.start-v.start);let p=0;for(let g=1;g<d.length;g++){const v=d[p],y=d[g];y.start<=v.start+v.count+1?v.count=Math.max(v.count,y.start+y.count-v.start):(++p,d[p]=y)}d.length=p+1;for(let g=0,v=d.length;g<v;g++){const y=d[g];n.bufferSubData(h,y.start*f.BYTES_PER_ELEMENT,f,y.start,y.count)}c.clearUpdateRanges()}c.onUploadCallback()}function s(l){return l.isInterleavedBufferAttribute&&(l=l.data),t.get(l)}function r(l){l.isInterleavedBufferAttribute&&(l=l.data);const c=t.get(l);c&&(n.deleteBuffer(c.buffer),t.delete(l))}function o(l,c){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const f=t.get(l);(!f||f.version<l.version)&&t.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const h=t.get(l);if(h===void 0)t.set(l,e(l,c));else if(h.version<l.version){if(h.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(h.buffer,l,c),h.version=l.version}}return{get:s,remove:r,update:o}}var O9=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,N9=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,k9=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,F9=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,U9=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,B9=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,z9=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,H9=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,V9=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,W9=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,G9=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,j9=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,X9=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Z9=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Y9=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,q9=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,$9=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,K9=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,J9=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Q9=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,t7=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,e7=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,n7=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,i7=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,s7=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,r7=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,o7=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,a7=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,l7=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,c7=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,h7="gl_FragColor = linearToOutputTexel( gl_FragColor );",u7=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,f7=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,d7=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,p7=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,m7=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,g7=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,_7=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,v7=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,x7=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,y7=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,b7=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,M7=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,S7=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,C7=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,w7=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,T7=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,E7=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,A7=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,P7=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,R7=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,L7=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,I7=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,D7=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,O7=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,N7=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,k7=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,F7=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,U7=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,B7=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,z7=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,H7=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,V7=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,W7=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,G7=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,j7=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,X7=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Z7=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Y7=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,q7=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,$7=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,K7=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,J7=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Q7=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,tw=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,ew=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,nw=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,iw=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,sw=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,rw=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,ow=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,aw=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,lw=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,cw=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,hw=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,uw=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,fw=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,dw=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,pw=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,mw=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSEDEPTHBUF
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSEDEPTHBUF
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare , distribution.x );
		#endif
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,gw=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,_w=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,vw=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,xw=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,yw=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,bw=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Mw=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Sw=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Cw=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,ww=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Tw=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Ew=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Aw=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Pw=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Rw=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Lw=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Iw=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Dw=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Ow=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Nw=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,kw=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Fw=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Uw=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Bw=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,zw=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSEDEPTHBUF
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Hw=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Vw=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Ww=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Gw=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,jw=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Xw=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Zw=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Yw=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qw=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$w=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Kw=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Jw=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Qw=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,tT=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,eT=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,nT=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,iT=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,sT=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rT=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,oT=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,aT=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,lT=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,cT=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hT=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,uT=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fT=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ve={alphahash_fragment:O9,alphahash_pars_fragment:N9,alphamap_fragment:k9,alphamap_pars_fragment:F9,alphatest_fragment:U9,alphatest_pars_fragment:B9,aomap_fragment:z9,aomap_pars_fragment:H9,batching_pars_vertex:V9,batching_vertex:W9,begin_vertex:G9,beginnormal_vertex:j9,bsdfs:X9,iridescence_fragment:Z9,bumpmap_pars_fragment:Y9,clipping_planes_fragment:q9,clipping_planes_pars_fragment:$9,clipping_planes_pars_vertex:K9,clipping_planes_vertex:J9,color_fragment:Q9,color_pars_fragment:t7,color_pars_vertex:e7,color_vertex:n7,common:i7,cube_uv_reflection_fragment:s7,defaultnormal_vertex:r7,displacementmap_pars_vertex:o7,displacementmap_vertex:a7,emissivemap_fragment:l7,emissivemap_pars_fragment:c7,colorspace_fragment:h7,colorspace_pars_fragment:u7,envmap_fragment:f7,envmap_common_pars_fragment:d7,envmap_pars_fragment:p7,envmap_pars_vertex:m7,envmap_physical_pars_fragment:T7,envmap_vertex:g7,fog_vertex:_7,fog_pars_vertex:v7,fog_fragment:x7,fog_pars_fragment:y7,gradientmap_pars_fragment:b7,lightmap_pars_fragment:M7,lights_lambert_fragment:S7,lights_lambert_pars_fragment:C7,lights_pars_begin:w7,lights_toon_fragment:E7,lights_toon_pars_fragment:A7,lights_phong_fragment:P7,lights_phong_pars_fragment:R7,lights_physical_fragment:L7,lights_physical_pars_fragment:I7,lights_fragment_begin:D7,lights_fragment_maps:O7,lights_fragment_end:N7,logdepthbuf_fragment:k7,logdepthbuf_pars_fragment:F7,logdepthbuf_pars_vertex:U7,logdepthbuf_vertex:B7,map_fragment:z7,map_pars_fragment:H7,map_particle_fragment:V7,map_particle_pars_fragment:W7,metalnessmap_fragment:G7,metalnessmap_pars_fragment:j7,morphinstance_vertex:X7,morphcolor_vertex:Z7,morphnormal_vertex:Y7,morphtarget_pars_vertex:q7,morphtarget_vertex:$7,normal_fragment_begin:K7,normal_fragment_maps:J7,normal_pars_fragment:Q7,normal_pars_vertex:tw,normal_vertex:ew,normalmap_pars_fragment:nw,clearcoat_normal_fragment_begin:iw,clearcoat_normal_fragment_maps:sw,clearcoat_pars_fragment:rw,iridescence_pars_fragment:ow,opaque_fragment:aw,packing:lw,premultiplied_alpha_fragment:cw,project_vertex:hw,dithering_fragment:uw,dithering_pars_fragment:fw,roughnessmap_fragment:dw,roughnessmap_pars_fragment:pw,shadowmap_pars_fragment:mw,shadowmap_pars_vertex:gw,shadowmap_vertex:_w,shadowmask_pars_fragment:vw,skinbase_vertex:xw,skinning_pars_vertex:yw,skinning_vertex:bw,skinnormal_vertex:Mw,specularmap_fragment:Sw,specularmap_pars_fragment:Cw,tonemapping_fragment:ww,tonemapping_pars_fragment:Tw,transmission_fragment:Ew,transmission_pars_fragment:Aw,uv_pars_fragment:Pw,uv_pars_vertex:Rw,uv_vertex:Lw,worldpos_vertex:Iw,background_vert:Dw,background_frag:Ow,backgroundCube_vert:Nw,backgroundCube_frag:kw,cube_vert:Fw,cube_frag:Uw,depth_vert:Bw,depth_frag:zw,distanceRGBA_vert:Hw,distanceRGBA_frag:Vw,equirect_vert:Ww,equirect_frag:Gw,linedashed_vert:jw,linedashed_frag:Xw,meshbasic_vert:Zw,meshbasic_frag:Yw,meshlambert_vert:qw,meshlambert_frag:$w,meshmatcap_vert:Kw,meshmatcap_frag:Jw,meshnormal_vert:Qw,meshnormal_frag:tT,meshphong_vert:eT,meshphong_frag:nT,meshphysical_vert:iT,meshphysical_frag:sT,meshtoon_vert:rT,meshtoon_frag:oT,points_vert:aT,points_frag:lT,shadow_vert:cT,shadow_frag:hT,sprite_vert:uT,sprite_frag:fT},Et={common:{diffuse:{value:new pe(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new ge},alphaMap:{value:null},alphaMapTransform:{value:new ge},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new ge}},envmap:{envMap:{value:null},envMapRotation:{value:new ge},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new ge}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new ge}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new ge},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new ge},normalScale:{value:new le(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new ge},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new ge}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new ge}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new ge}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new pe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new pe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new ge},alphaTest:{value:0},uvTransform:{value:new ge}},sprite:{diffuse:{value:new pe(16777215)},opacity:{value:1},center:{value:new le(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new ge},alphaMap:{value:null},alphaMapTransform:{value:new ge},alphaTest:{value:0}}},rs={basic:{uniforms:$n([Et.common,Et.specularmap,Et.envmap,Et.aomap,Et.lightmap,Et.fog]),vertexShader:ve.meshbasic_vert,fragmentShader:ve.meshbasic_frag},lambert:{uniforms:$n([Et.common,Et.specularmap,Et.envmap,Et.aomap,Et.lightmap,Et.emissivemap,Et.bumpmap,Et.normalmap,Et.displacementmap,Et.fog,Et.lights,{emissive:{value:new pe(0)}}]),vertexShader:ve.meshlambert_vert,fragmentShader:ve.meshlambert_frag},phong:{uniforms:$n([Et.common,Et.specularmap,Et.envmap,Et.aomap,Et.lightmap,Et.emissivemap,Et.bumpmap,Et.normalmap,Et.displacementmap,Et.fog,Et.lights,{emissive:{value:new pe(0)},specular:{value:new pe(1118481)},shininess:{value:30}}]),vertexShader:ve.meshphong_vert,fragmentShader:ve.meshphong_frag},standard:{uniforms:$n([Et.common,Et.envmap,Et.aomap,Et.lightmap,Et.emissivemap,Et.bumpmap,Et.normalmap,Et.displacementmap,Et.roughnessmap,Et.metalnessmap,Et.fog,Et.lights,{emissive:{value:new pe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ve.meshphysical_vert,fragmentShader:ve.meshphysical_frag},toon:{uniforms:$n([Et.common,Et.aomap,Et.lightmap,Et.emissivemap,Et.bumpmap,Et.normalmap,Et.displacementmap,Et.gradientmap,Et.fog,Et.lights,{emissive:{value:new pe(0)}}]),vertexShader:ve.meshtoon_vert,fragmentShader:ve.meshtoon_frag},matcap:{uniforms:$n([Et.common,Et.bumpmap,Et.normalmap,Et.displacementmap,Et.fog,{matcap:{value:null}}]),vertexShader:ve.meshmatcap_vert,fragmentShader:ve.meshmatcap_frag},points:{uniforms:$n([Et.points,Et.fog]),vertexShader:ve.points_vert,fragmentShader:ve.points_frag},dashed:{uniforms:$n([Et.common,Et.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ve.linedashed_vert,fragmentShader:ve.linedashed_frag},depth:{uniforms:$n([Et.common,Et.displacementmap]),vertexShader:ve.depth_vert,fragmentShader:ve.depth_frag},normal:{uniforms:$n([Et.common,Et.bumpmap,Et.normalmap,Et.displacementmap,{opacity:{value:1}}]),vertexShader:ve.meshnormal_vert,fragmentShader:ve.meshnormal_frag},sprite:{uniforms:$n([Et.sprite,Et.fog]),vertexShader:ve.sprite_vert,fragmentShader:ve.sprite_frag},background:{uniforms:{uvTransform:{value:new ge},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ve.background_vert,fragmentShader:ve.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new ge}},vertexShader:ve.backgroundCube_vert,fragmentShader:ve.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ve.cube_vert,fragmentShader:ve.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ve.equirect_vert,fragmentShader:ve.equirect_frag},distanceRGBA:{uniforms:$n([Et.common,Et.displacementmap,{referencePosition:{value:new X},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ve.distanceRGBA_vert,fragmentShader:ve.distanceRGBA_frag},shadow:{uniforms:$n([Et.lights,Et.fog,{color:{value:new pe(0)},opacity:{value:1}}]),vertexShader:ve.shadow_vert,fragmentShader:ve.shadow_frag}};rs.physical={uniforms:$n([rs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new ge},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new ge},clearcoatNormalScale:{value:new le(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new ge},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new ge},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new ge},sheen:{value:0},sheenColor:{value:new pe(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new ge},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new ge},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new ge},transmissionSamplerSize:{value:new le},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new ge},attenuationDistance:{value:0},attenuationColor:{value:new pe(0)},specularColor:{value:new pe(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new ge},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new ge},anisotropyVector:{value:new le},anisotropyMap:{value:null},anisotropyMapTransform:{value:new ge}}]),vertexShader:ve.meshphysical_vert,fragmentShader:ve.meshphysical_frag};const ph={r:0,b:0,g:0},Yr=new _s,dT=new _e;function pT(n,t,e,i,s,r,o){const l=new pe(0);let c=r===!0?0:1,h,f,d=null,p=0,g=null;function v(C){let S=C.isScene===!0?C.background:null;return S&&S.isTexture&&(S=(C.backgroundBlurriness>0?e:t).get(S)),S}function y(C){let S=!1;const T=v(C);T===null?_(l,c):T&&T.isColor&&(_(T,1),S=!0);const A=n.xr.getEnvironmentBlendMode();A==="additive"?i.buffers.color.setClear(0,0,0,1,o):A==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||S)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function x(C,S){const T=v(S);T&&(T.isCubeTexture||T.mapping===Iu)?(f===void 0&&(f=new ti(new Ga(1,1,1),new Dr({name:"BackgroundCubeMaterial",uniforms:La(rs.backgroundCube.uniforms),vertexShader:rs.backgroundCube.vertexShader,fragmentShader:rs.backgroundCube.fragmentShader,side:ui,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(A,P,N){this.matrixWorld.copyPosition(N.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(f)),Yr.copy(S.backgroundRotation),Yr.x*=-1,Yr.y*=-1,Yr.z*=-1,T.isCubeTexture&&T.isRenderTargetTexture===!1&&(Yr.y*=-1,Yr.z*=-1),f.material.uniforms.envMap.value=T,f.material.uniforms.flipEnvMap.value=T.isCubeTexture&&T.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=S.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4(dT.makeRotationFromEuler(Yr)),f.material.toneMapped=Fe.getTransfer(T.colorSpace)!==Ke,(d!==T||p!==T.version||g!==n.toneMapping)&&(f.material.needsUpdate=!0,d=T,p=T.version,g=n.toneMapping),f.layers.enableAll(),C.unshift(f,f.geometry,f.material,0,0,null)):T&&T.isTexture&&(h===void 0&&(h=new ti(new Ou(2,2),new Dr({name:"BackgroundMaterial",uniforms:La(rs.background.uniforms),vertexShader:rs.background.vertexShader,fragmentShader:rs.background.fragmentShader,side:Ks,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(h)),h.material.uniforms.t2D.value=T,h.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,h.material.toneMapped=Fe.getTransfer(T.colorSpace)!==Ke,T.matrixAutoUpdate===!0&&T.updateMatrix(),h.material.uniforms.uvTransform.value.copy(T.matrix),(d!==T||p!==T.version||g!==n.toneMapping)&&(h.material.needsUpdate=!0,d=T,p=T.version,g=n.toneMapping),h.layers.enableAll(),C.unshift(h,h.geometry,h.material,0,0,null))}function _(C,S){C.getRGB(ph,Lx(n)),i.buffers.color.setClear(ph.r,ph.g,ph.b,S,o)}function w(){f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0),h!==void 0&&(h.geometry.dispose(),h.material.dispose(),h=void 0)}return{getClearColor:function(){return l},setClearColor:function(C,S=1){l.set(C),c=S,_(l,c)},getClearAlpha:function(){return c},setClearAlpha:function(C){c=C,_(l,c)},render:y,addToRenderList:x,dispose:w}}function mT(n,t){const e=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},s=p(null);let r=s,o=!1;function l(R,k,H,q,G){let Y=!1;const j=d(q,H,k);r!==j&&(r=j,h(r.object)),Y=g(R,q,H,G),Y&&v(R,q,H,G),G!==null&&t.update(G,n.ELEMENT_ARRAY_BUFFER),(Y||o)&&(o=!1,S(R,k,H,q),G!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(G).buffer))}function c(){return n.createVertexArray()}function h(R){return n.bindVertexArray(R)}function f(R){return n.deleteVertexArray(R)}function d(R,k,H){const q=H.wireframe===!0;let G=i[R.id];G===void 0&&(G={},i[R.id]=G);let Y=G[k.id];Y===void 0&&(Y={},G[k.id]=Y);let j=Y[q];return j===void 0&&(j=p(c()),Y[q]=j),j}function p(R){const k=[],H=[],q=[];for(let G=0;G<e;G++)k[G]=0,H[G]=0,q[G]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:k,enabledAttributes:H,attributeDivisors:q,object:R,attributes:{},index:null}}function g(R,k,H,q){const G=r.attributes,Y=k.attributes;let j=0;const et=H.getAttributes();for(const V in et)if(et[V].location>=0){const rt=G[V];let gt=Y[V];if(gt===void 0&&(V==="instanceMatrix"&&R.instanceMatrix&&(gt=R.instanceMatrix),V==="instanceColor"&&R.instanceColor&&(gt=R.instanceColor)),rt===void 0||rt.attribute!==gt||gt&&rt.data!==gt.data)return!0;j++}return r.attributesNum!==j||r.index!==q}function v(R,k,H,q){const G={},Y=k.attributes;let j=0;const et=H.getAttributes();for(const V in et)if(et[V].location>=0){let rt=Y[V];rt===void 0&&(V==="instanceMatrix"&&R.instanceMatrix&&(rt=R.instanceMatrix),V==="instanceColor"&&R.instanceColor&&(rt=R.instanceColor));const gt={};gt.attribute=rt,rt&&rt.data&&(gt.data=rt.data),G[V]=gt,j++}r.attributes=G,r.attributesNum=j,r.index=q}function y(){const R=r.newAttributes;for(let k=0,H=R.length;k<H;k++)R[k]=0}function x(R){_(R,0)}function _(R,k){const H=r.newAttributes,q=r.enabledAttributes,G=r.attributeDivisors;H[R]=1,q[R]===0&&(n.enableVertexAttribArray(R),q[R]=1),G[R]!==k&&(n.vertexAttribDivisor(R,k),G[R]=k)}function w(){const R=r.newAttributes,k=r.enabledAttributes;for(let H=0,q=k.length;H<q;H++)k[H]!==R[H]&&(n.disableVertexAttribArray(H),k[H]=0)}function C(R,k,H,q,G,Y,j){j===!0?n.vertexAttribIPointer(R,k,H,G,Y):n.vertexAttribPointer(R,k,H,q,G,Y)}function S(R,k,H,q){y();const G=q.attributes,Y=H.getAttributes(),j=k.defaultAttributeValues;for(const et in Y){const V=Y[et];if(V.location>=0){let ct=G[et];if(ct===void 0&&(et==="instanceMatrix"&&R.instanceMatrix&&(ct=R.instanceMatrix),et==="instanceColor"&&R.instanceColor&&(ct=R.instanceColor)),ct!==void 0){const rt=ct.normalized,gt=ct.itemSize,It=t.get(ct);if(It===void 0)continue;const Dt=It.buffer,At=It.type,K=It.bytesPerElement,st=At===n.INT||At===n.UNSIGNED_INT||ct.gpuType===Im;if(ct.isInterleavedBufferAttribute){const dt=ct.data,Ut=dt.stride,Xt=ct.offset;if(dt.isInstancedInterleavedBuffer){for(let Ht=0;Ht<V.locationSize;Ht++)_(V.location+Ht,dt.meshPerAttribute);R.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=dt.meshPerAttribute*dt.count)}else for(let Ht=0;Ht<V.locationSize;Ht++)x(V.location+Ht);n.bindBuffer(n.ARRAY_BUFFER,Dt);for(let Ht=0;Ht<V.locationSize;Ht++)C(V.location+Ht,gt/V.locationSize,At,rt,Ut*K,(Xt+gt/V.locationSize*Ht)*K,st)}else{if(ct.isInstancedBufferAttribute){for(let dt=0;dt<V.locationSize;dt++)_(V.location+dt,ct.meshPerAttribute);R.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=ct.meshPerAttribute*ct.count)}else for(let dt=0;dt<V.locationSize;dt++)x(V.location+dt);n.bindBuffer(n.ARRAY_BUFFER,Dt);for(let dt=0;dt<V.locationSize;dt++)C(V.location+dt,gt/V.locationSize,At,rt,gt*K,gt/V.locationSize*dt*K,st)}}else if(j!==void 0){const rt=j[et];if(rt!==void 0)switch(rt.length){case 2:n.vertexAttrib2fv(V.location,rt);break;case 3:n.vertexAttrib3fv(V.location,rt);break;case 4:n.vertexAttrib4fv(V.location,rt);break;default:n.vertexAttrib1fv(V.location,rt)}}}}w()}function T(){N();for(const R in i){const k=i[R];for(const H in k){const q=k[H];for(const G in q)f(q[G].object),delete q[G];delete k[H]}delete i[R]}}function A(R){if(i[R.id]===void 0)return;const k=i[R.id];for(const H in k){const q=k[H];for(const G in q)f(q[G].object),delete q[G];delete k[H]}delete i[R.id]}function P(R){for(const k in i){const H=i[k];if(H[R.id]===void 0)continue;const q=H[R.id];for(const G in q)f(q[G].object),delete q[G];delete H[R.id]}}function N(){E(),o=!0,r!==s&&(r=s,h(r.object))}function E(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:l,reset:N,resetDefaultState:E,dispose:T,releaseStatesOfGeometry:A,releaseStatesOfProgram:P,initAttributes:y,enableAttribute:x,disableUnusedAttributes:w}}function gT(n,t,e){let i;function s(h){i=h}function r(h,f){n.drawArrays(i,h,f),e.update(f,i,1)}function o(h,f,d){d!==0&&(n.drawArraysInstanced(i,h,f,d),e.update(f,i,d))}function l(h,f,d){if(d===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,h,0,f,0,d);let g=0;for(let v=0;v<d;v++)g+=f[v];e.update(g,i,1)}function c(h,f,d,p){if(d===0)return;const g=t.get("WEBGL_multi_draw");if(g===null)for(let v=0;v<h.length;v++)o(h[v],f[v],p[v]);else{g.multiDrawArraysInstancedWEBGL(i,h,0,f,0,p,0,d);let v=0;for(let y=0;y<d;y++)v+=f[y]*p[y];e.update(v,i,1)}}this.setMode=s,this.render=r,this.renderInstances=o,this.renderMultiDraw=l,this.renderMultiDrawInstances=c}function _T(n,t,e,i){let s;function r(){if(s!==void 0)return s;if(t.has("EXT_texture_filter_anisotropic")===!0){const P=t.get("EXT_texture_filter_anisotropic");s=n.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function o(P){return!(P!==Ri&&i.convert(P)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(P){const N=P===xc&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(P!==ms&&i.convert(P)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&P!==ji&&!N)}function c(P){if(P==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let h=e.precision!==void 0?e.precision:"highp";const f=c(h);f!==h&&(console.warn("THREE.WebGLRenderer:",h,"not supported, using",f,"instead."),h=f);const d=e.logarithmicDepthBuffer===!0,p=e.reversedDepthBuffer===!0&&t.has("EXT_clip_control"),g=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),y=n.getParameter(n.MAX_TEXTURE_SIZE),x=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),_=n.getParameter(n.MAX_VERTEX_ATTRIBS),w=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),C=n.getParameter(n.MAX_VARYING_VECTORS),S=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),T=v>0,A=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:r,getMaxPrecision:c,textureFormatReadable:o,textureTypeReadable:l,precision:h,logarithmicDepthBuffer:d,reversedDepthBuffer:p,maxTextures:g,maxVertexTextures:v,maxTextureSize:y,maxCubemapSize:x,maxAttributes:_,maxVertexUniforms:w,maxVaryings:C,maxFragmentUniforms:S,vertexTextures:T,maxSamples:A}}function vT(n){const t=this;let e=null,i=0,s=!1,r=!1;const o=new dr,l=new ge,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(d,p){const g=d.length!==0||p||i!==0||s;return s=p,i=d.length,g},this.beginShadows=function(){r=!0,f(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(d,p){e=f(d,p,0)},this.setState=function(d,p,g){const v=d.clippingPlanes,y=d.clipIntersection,x=d.clipShadows,_=n.get(d);if(!s||v===null||v.length===0||r&&!x)r?f(null):h();else{const w=r?0:i,C=w*4;let S=_.clippingState||null;c.value=S,S=f(v,p,C,g);for(let T=0;T!==C;++T)S[T]=e[T];_.clippingState=S,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=w}};function h(){c.value!==e&&(c.value=e,c.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function f(d,p,g,v){const y=d!==null?d.length:0;let x=null;if(y!==0){if(x=c.value,v!==!0||x===null){const _=g+y*4,w=p.matrixWorldInverse;l.getNormalMatrix(w),(x===null||x.length<_)&&(x=new Float32Array(_));for(let C=0,S=g;C!==y;++C,S+=4)o.copy(d[C]).applyMatrix4(w,l),o.normal.toArray(x,S),x[S+3]=o.constant}c.value=x,c.needsUpdate=!0}return t.numPlanes=y,t.numIntersection=0,x}}function xT(n){let t=new WeakMap;function e(o,l){return l===fp?o.mapping=Ea:l===dp&&(o.mapping=Aa),o}function i(o){if(o&&o.isTexture){const l=o.mapping;if(l===fp||l===dp)if(t.has(o)){const c=t.get(o).texture;return e(c,o.mapping)}else{const c=o.image;if(c&&c.height>0){const h=new F6(c.height);return h.fromEquirectangularTexture(n,o),t.set(o,h),o.addEventListener("dispose",s),e(h.texture,o.mapping)}else return null}}return o}function s(o){const l=o.target;l.removeEventListener("dispose",s);const c=t.get(l);c!==void 0&&(t.delete(l),c.dispose())}function r(){t=new WeakMap}return{get:i,dispose:r}}const la=4,e0=[.125,.215,.35,.446,.526,.582],lo=20,ad=new qm,n0=new pe;let ld=null,cd=0,hd=0,ud=!1;const io=(1+Math.sqrt(5))/2,ia=1/io,i0=[new X(-io,ia,0),new X(io,ia,0),new X(-ia,0,io),new X(ia,0,io),new X(0,io,-ia),new X(0,io,ia),new X(-1,1,-1),new X(1,1,-1),new X(-1,1,1),new X(1,1,1)],yT=new X;class s0{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,i=.1,s=100,r={}){const{size:o=256,position:l=yT}=r;ld=this._renderer.getRenderTarget(),cd=this._renderer.getActiveCubeFace(),hd=this._renderer.getActiveMipmapLevel(),ud=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(t,i,s,c,l),e>0&&this._blur(c,0,0,e),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=a0(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=o0(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(ld,cd,hd),this._renderer.xr.enabled=ud,t.scissorTest=!1,mh(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===Ea||t.mapping===Aa?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),ld=this._renderer.getRenderTarget(),cd=this._renderer.getActiveCubeFace(),hd=this._renderer.getActiveMipmapLevel(),ud=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=e||this._allocateTargets();return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,i={magFilter:yi,minFilter:yi,generateMipmaps:!1,type:xc,format:Ri,colorSpace:si,depthBuffer:!1},s=r0(t,e,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=r0(t,e,i);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=bT(r)),this._blurMaterial=MT(r,t,e)}return s}_compileMaterial(t){const e=new ti(this._lodPlanes[0],t);this._renderer.compile(e,ad)}_sceneToCubeUV(t,e,i,s,r){const c=new Jn(90,1,e,i),h=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],d=this._renderer,p=d.autoClear,g=d.toneMapping;d.getClearColor(n0),d.toneMapping=Er,d.autoClear=!1,d.state.buffers.depth.getReversed()&&(d.setRenderTarget(s),d.clearDepth(),d.setRenderTarget(null));const y=new xr({name:"PMREM.Background",side:ui,depthWrite:!1,depthTest:!1}),x=new ti(new Ga,y);let _=!1;const w=t.background;w?w.isColor&&(y.color.copy(w),t.background=null,_=!0):(y.color.copy(n0),_=!0);for(let C=0;C<6;C++){const S=C%3;S===0?(c.up.set(0,h[C],0),c.position.set(r.x,r.y,r.z),c.lookAt(r.x+f[C],r.y,r.z)):S===1?(c.up.set(0,0,h[C]),c.position.set(r.x,r.y,r.z),c.lookAt(r.x,r.y+f[C],r.z)):(c.up.set(0,h[C],0),c.position.set(r.x,r.y,r.z),c.lookAt(r.x,r.y,r.z+f[C]));const T=this._cubeSize;mh(s,S*T,C>2?T:0,T,T),d.setRenderTarget(s),_&&d.render(x,c),d.render(t,c)}x.geometry.dispose(),x.material.dispose(),d.toneMapping=g,d.autoClear=p,t.background=w}_textureToCubeUV(t,e){const i=this._renderer,s=t.mapping===Ea||t.mapping===Aa;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=a0()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=o0());const r=s?this._cubemapMaterial:this._equirectMaterial,o=new ti(this._lodPlanes[0],r),l=r.uniforms;l.envMap.value=t;const c=this._cubeSize;mh(e,0,0,3*c,2*c),i.setRenderTarget(e),i.render(o,ad)}_applyPMREM(t){const e=this._renderer,i=e.autoClear;e.autoClear=!1;const s=this._lodPlanes.length;for(let r=1;r<s;r++){const o=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),l=i0[(s-r-1)%i0.length];this._blur(t,r-1,r,o,l)}e.autoClear=i}_blur(t,e,i,s,r){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,i,s,"latitudinal",r),this._halfBlur(o,t,i,i,s,"longitudinal",r)}_halfBlur(t,e,i,s,r,o,l){const c=this._renderer,h=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const f=3,d=new ti(this._lodPlanes[s],h),p=h.uniforms,g=this._sizeLods[i]-1,v=isFinite(r)?Math.PI/(2*g):2*Math.PI/(2*lo-1),y=r/v,x=isFinite(r)?1+Math.floor(f*y):lo;x>lo&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${lo}`);const _=[];let w=0;for(let P=0;P<lo;++P){const N=P/y,E=Math.exp(-N*N/2);_.push(E),P===0?w+=E:P<x&&(w+=2*E)}for(let P=0;P<_.length;P++)_[P]=_[P]/w;p.envMap.value=t.texture,p.samples.value=x,p.weights.value=_,p.latitudinal.value=o==="latitudinal",l&&(p.poleAxis.value=l);const{_lodMax:C}=this;p.dTheta.value=v,p.mipInt.value=C-i;const S=this._sizeLods[s],T=3*S*(s>C-la?s-C+la:0),A=4*(this._cubeSize-S);mh(e,T,A,3*S,2*S),c.setRenderTarget(e),c.render(d,ad)}}function bT(n){const t=[],e=[],i=[];let s=n;const r=n-la+1+e0.length;for(let o=0;o<r;o++){const l=Math.pow(2,s);e.push(l);let c=1/l;o>n-la?c=e0[o-n+la-1]:o===0&&(c=0),i.push(c);const h=1/(l-2),f=-h,d=1+h,p=[f,f,d,f,d,d,f,f,d,d,f,d],g=6,v=6,y=3,x=2,_=1,w=new Float32Array(y*v*g),C=new Float32Array(x*v*g),S=new Float32Array(_*v*g);for(let A=0;A<g;A++){const P=A%3*2/3-1,N=A>2?0:-1,E=[P,N,0,P+2/3,N,0,P+2/3,N+1,0,P,N,0,P+2/3,N+1,0,P,N+1,0];w.set(E,y*v*A),C.set(p,x*v*A);const R=[A,A,A,A,A,A];S.set(R,_*v*A)}const T=new Ni;T.setAttribute("position",new ii(w,y)),T.setAttribute("uv",new ii(C,x)),T.setAttribute("faceIndex",new ii(S,_)),t.push(T),s>la&&s--}return{lodPlanes:t,sizeLods:e,sigmas:i}}function r0(n,t,e){const i=new So(n,t,e);return i.texture.mapping=Iu,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function mh(n,t,e,i,s){n.viewport.set(t,e,i,s),n.scissor.set(t,e,i,s)}function MT(n,t,e){const i=new Float32Array(lo),s=new X(0,1,0);return new Dr({name:"SphericalGaussianBlur",defines:{n:lo,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:Jm(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Tr,depthTest:!1,depthWrite:!1})}function o0(){return new Dr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Jm(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Tr,depthTest:!1,depthWrite:!1})}function a0(){return new Dr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Jm(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Tr,depthTest:!1,depthWrite:!1})}function Jm(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function ST(n){let t=new WeakMap,e=null;function i(l){if(l&&l.isTexture){const c=l.mapping,h=c===fp||c===dp,f=c===Ea||c===Aa;if(h||f){let d=t.get(l);const p=d!==void 0?d.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==p)return e===null&&(e=new s0(n)),d=h?e.fromEquirectangular(l,d):e.fromCubemap(l,d),d.texture.pmremVersion=l.pmremVersion,t.set(l,d),d.texture;if(d!==void 0)return d.texture;{const g=l.image;return h&&g&&g.height>0||f&&g&&s(g)?(e===null&&(e=new s0(n)),d=h?e.fromEquirectangular(l):e.fromCubemap(l),d.texture.pmremVersion=l.pmremVersion,t.set(l,d),l.addEventListener("dispose",r),d.texture):null}}}return l}function s(l){let c=0;const h=6;for(let f=0;f<h;f++)l[f]!==void 0&&c++;return c===h}function r(l){const c=l.target;c.removeEventListener("dispose",r);const h=t.get(c);h!==void 0&&(t.delete(c),h.dispose())}function o(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:i,dispose:o}}function CT(n){const t={};function e(i){if(t[i]!==void 0)return t[i];let s;switch(i){case"WEBGL_depth_texture":s=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=n.getExtension(i)}return t[i]=s,s}return{has:function(i){return e(i)!==null},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(i){const s=e(i);return s===null&&ma("THREE.WebGLRenderer: "+i+" extension not supported."),s}}}function wT(n,t,e,i){const s={},r=new WeakMap;function o(d){const p=d.target;p.index!==null&&t.remove(p.index);for(const v in p.attributes)t.remove(p.attributes[v]);p.removeEventListener("dispose",o),delete s[p.id];const g=r.get(p);g&&(t.remove(g),r.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,e.memory.geometries--}function l(d,p){return s[p.id]===!0||(p.addEventListener("dispose",o),s[p.id]=!0,e.memory.geometries++),p}function c(d){const p=d.attributes;for(const g in p)t.update(p[g],n.ARRAY_BUFFER)}function h(d){const p=[],g=d.index,v=d.attributes.position;let y=0;if(g!==null){const w=g.array;y=g.version;for(let C=0,S=w.length;C<S;C+=3){const T=w[C+0],A=w[C+1],P=w[C+2];p.push(T,A,A,P,P,T)}}else if(v!==void 0){const w=v.array;y=v.version;for(let C=0,S=w.length/3-1;C<S;C+=3){const T=C+0,A=C+1,P=C+2;p.push(T,A,A,P,P,T)}}else return;const x=new(Tx(p)?Rx:Px)(p,1);x.version=y;const _=r.get(d);_&&t.remove(_),r.set(d,x)}function f(d){const p=r.get(d);if(p){const g=d.index;g!==null&&p.version<g.version&&h(d)}else h(d);return r.get(d)}return{get:l,update:c,getWireframeAttribute:f}}function TT(n,t,e){let i;function s(p){i=p}let r,o;function l(p){r=p.type,o=p.bytesPerElement}function c(p,g){n.drawElements(i,g,r,p*o),e.update(g,i,1)}function h(p,g,v){v!==0&&(n.drawElementsInstanced(i,g,r,p*o,v),e.update(g,i,v))}function f(p,g,v){if(v===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,g,0,r,p,0,v);let x=0;for(let _=0;_<v;_++)x+=g[_];e.update(x,i,1)}function d(p,g,v,y){if(v===0)return;const x=t.get("WEBGL_multi_draw");if(x===null)for(let _=0;_<p.length;_++)h(p[_]/o,g[_],y[_]);else{x.multiDrawElementsInstancedWEBGL(i,g,0,r,p,0,y,0,v);let _=0;for(let w=0;w<v;w++)_+=g[w]*y[w];e.update(_,i,1)}}this.setMode=s,this.setIndex=l,this.render=c,this.renderInstances=h,this.renderMultiDraw=f,this.renderMultiDrawInstances=d}function ET(n){const t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function i(r,o,l){switch(e.calls++,o){case n.TRIANGLES:e.triangles+=l*(r/3);break;case n.LINES:e.lines+=l*(r/2);break;case n.LINE_STRIP:e.lines+=l*(r-1);break;case n.LINE_LOOP:e.lines+=l*r;break;case n.POINTS:e.points+=l*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function s(){e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:s,update:i}}function AT(n,t,e){const i=new WeakMap,s=new Ge;function r(o,l,c){const h=o.morphTargetInfluences,f=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,d=f!==void 0?f.length:0;let p=i.get(l);if(p===void 0||p.count!==d){let R=function(){N.dispose(),i.delete(l),l.removeEventListener("dispose",R)};var g=R;p!==void 0&&p.texture.dispose();const v=l.morphAttributes.position!==void 0,y=l.morphAttributes.normal!==void 0,x=l.morphAttributes.color!==void 0,_=l.morphAttributes.position||[],w=l.morphAttributes.normal||[],C=l.morphAttributes.color||[];let S=0;v===!0&&(S=1),y===!0&&(S=2),x===!0&&(S=3);let T=l.attributes.position.count*S,A=1;T>t.maxTextureSize&&(A=Math.ceil(T/t.maxTextureSize),T=t.maxTextureSize);const P=new Float32Array(T*A*4*d),N=new Ex(P,T,A,d);N.type=ji,N.needsUpdate=!0;const E=S*4;for(let k=0;k<d;k++){const H=_[k],q=w[k],G=C[k],Y=T*A*4*k;for(let j=0;j<H.count;j++){const et=j*E;v===!0&&(s.fromBufferAttribute(H,j),P[Y+et+0]=s.x,P[Y+et+1]=s.y,P[Y+et+2]=s.z,P[Y+et+3]=0),y===!0&&(s.fromBufferAttribute(q,j),P[Y+et+4]=s.x,P[Y+et+5]=s.y,P[Y+et+6]=s.z,P[Y+et+7]=0),x===!0&&(s.fromBufferAttribute(G,j),P[Y+et+8]=s.x,P[Y+et+9]=s.y,P[Y+et+10]=s.z,P[Y+et+11]=G.itemSize===4?s.w:1)}}p={count:d,texture:N,size:new le(T,A)},i.set(l,p),l.addEventListener("dispose",R)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)c.getUniforms().setValue(n,"morphTexture",o.morphTexture,e);else{let v=0;for(let x=0;x<h.length;x++)v+=h[x];const y=l.morphTargetsRelative?1:1-v;c.getUniforms().setValue(n,"morphTargetBaseInfluence",y),c.getUniforms().setValue(n,"morphTargetInfluences",h)}c.getUniforms().setValue(n,"morphTargetsTexture",p.texture,e),c.getUniforms().setValue(n,"morphTargetsTextureSize",p.size)}return{update:r}}function PT(n,t,e,i){let s=new WeakMap;function r(c){const h=i.render.frame,f=c.geometry,d=t.get(c,f);if(s.get(d)!==h&&(t.update(d),s.set(d,h)),c.isInstancedMesh&&(c.hasEventListener("dispose",l)===!1&&c.addEventListener("dispose",l),s.get(c)!==h&&(e.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&e.update(c.instanceColor,n.ARRAY_BUFFER),s.set(c,h))),c.isSkinnedMesh){const p=c.skeleton;s.get(p)!==h&&(p.update(),s.set(p,h))}return d}function o(){s=new WeakMap}function l(c){const h=c.target;h.removeEventListener("dispose",l),e.remove(h.instanceMatrix),h.instanceColor!==null&&e.remove(h.instanceColor)}return{update:r,dispose:o}}const Wx=new Dn,l0=new Fx(1,1),Gx=new Ex,jx=new y6,Xx=new Dx,c0=[],h0=[],u0=new Float32Array(16),f0=new Float32Array(9),d0=new Float32Array(4);function Ya(n,t,e){const i=n[0];if(i<=0||i>0)return n;const s=t*e;let r=c0[s];if(r===void 0&&(r=new Float32Array(s),c0[s]=r),t!==0){i.toArray(r,0);for(let o=1,l=0;o!==t;++o)l+=e,n[o].toArray(r,l)}return r}function En(n,t){if(n.length!==t.length)return!1;for(let e=0,i=n.length;e<i;e++)if(n[e]!==t[e])return!1;return!0}function An(n,t){for(let e=0,i=t.length;e<i;e++)n[e]=t[e]}function ku(n,t){let e=h0[t];e===void 0&&(e=new Int32Array(t),h0[t]=e);for(let i=0;i!==t;++i)e[i]=n.allocateTextureUnit();return e}function RT(n,t){const e=this.cache;e[0]!==t&&(n.uniform1f(this.addr,t),e[0]=t)}function LT(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(En(e,t))return;n.uniform2fv(this.addr,t),An(e,t)}}function IT(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(n.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(En(e,t))return;n.uniform3fv(this.addr,t),An(e,t)}}function DT(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(En(e,t))return;n.uniform4fv(this.addr,t),An(e,t)}}function OT(n,t){const e=this.cache,i=t.elements;if(i===void 0){if(En(e,t))return;n.uniformMatrix2fv(this.addr,!1,t),An(e,t)}else{if(En(e,i))return;d0.set(i),n.uniformMatrix2fv(this.addr,!1,d0),An(e,i)}}function NT(n,t){const e=this.cache,i=t.elements;if(i===void 0){if(En(e,t))return;n.uniformMatrix3fv(this.addr,!1,t),An(e,t)}else{if(En(e,i))return;f0.set(i),n.uniformMatrix3fv(this.addr,!1,f0),An(e,i)}}function kT(n,t){const e=this.cache,i=t.elements;if(i===void 0){if(En(e,t))return;n.uniformMatrix4fv(this.addr,!1,t),An(e,t)}else{if(En(e,i))return;u0.set(i),n.uniformMatrix4fv(this.addr,!1,u0),An(e,i)}}function FT(n,t){const e=this.cache;e[0]!==t&&(n.uniform1i(this.addr,t),e[0]=t)}function UT(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(En(e,t))return;n.uniform2iv(this.addr,t),An(e,t)}}function BT(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(En(e,t))return;n.uniform3iv(this.addr,t),An(e,t)}}function zT(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(En(e,t))return;n.uniform4iv(this.addr,t),An(e,t)}}function HT(n,t){const e=this.cache;e[0]!==t&&(n.uniform1ui(this.addr,t),e[0]=t)}function VT(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(En(e,t))return;n.uniform2uiv(this.addr,t),An(e,t)}}function WT(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(En(e,t))return;n.uniform3uiv(this.addr,t),An(e,t)}}function GT(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(En(e,t))return;n.uniform4uiv(this.addr,t),An(e,t)}}function jT(n,t,e){const i=this.cache,s=e.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s);let r;this.type===n.SAMPLER_2D_SHADOW?(l0.compareFunction=Cx,r=l0):r=Wx,e.setTexture2D(t||r,s)}function XT(n,t,e){const i=this.cache,s=e.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),e.setTexture3D(t||jx,s)}function ZT(n,t,e){const i=this.cache,s=e.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),e.setTextureCube(t||Xx,s)}function YT(n,t,e){const i=this.cache,s=e.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),e.setTexture2DArray(t||Gx,s)}function qT(n){switch(n){case 5126:return RT;case 35664:return LT;case 35665:return IT;case 35666:return DT;case 35674:return OT;case 35675:return NT;case 35676:return kT;case 5124:case 35670:return FT;case 35667:case 35671:return UT;case 35668:case 35672:return BT;case 35669:case 35673:return zT;case 5125:return HT;case 36294:return VT;case 36295:return WT;case 36296:return GT;case 35678:case 36198:case 36298:case 36306:case 35682:return jT;case 35679:case 36299:case 36307:return XT;case 35680:case 36300:case 36308:case 36293:return ZT;case 36289:case 36303:case 36311:case 36292:return YT}}function $T(n,t){n.uniform1fv(this.addr,t)}function KT(n,t){const e=Ya(t,this.size,2);n.uniform2fv(this.addr,e)}function JT(n,t){const e=Ya(t,this.size,3);n.uniform3fv(this.addr,e)}function QT(n,t){const e=Ya(t,this.size,4);n.uniform4fv(this.addr,e)}function tE(n,t){const e=Ya(t,this.size,4);n.uniformMatrix2fv(this.addr,!1,e)}function eE(n,t){const e=Ya(t,this.size,9);n.uniformMatrix3fv(this.addr,!1,e)}function nE(n,t){const e=Ya(t,this.size,16);n.uniformMatrix4fv(this.addr,!1,e)}function iE(n,t){n.uniform1iv(this.addr,t)}function sE(n,t){n.uniform2iv(this.addr,t)}function rE(n,t){n.uniform3iv(this.addr,t)}function oE(n,t){n.uniform4iv(this.addr,t)}function aE(n,t){n.uniform1uiv(this.addr,t)}function lE(n,t){n.uniform2uiv(this.addr,t)}function cE(n,t){n.uniform3uiv(this.addr,t)}function hE(n,t){n.uniform4uiv(this.addr,t)}function uE(n,t,e){const i=this.cache,s=t.length,r=ku(e,s);En(i,r)||(n.uniform1iv(this.addr,r),An(i,r));for(let o=0;o!==s;++o)e.setTexture2D(t[o]||Wx,r[o])}function fE(n,t,e){const i=this.cache,s=t.length,r=ku(e,s);En(i,r)||(n.uniform1iv(this.addr,r),An(i,r));for(let o=0;o!==s;++o)e.setTexture3D(t[o]||jx,r[o])}function dE(n,t,e){const i=this.cache,s=t.length,r=ku(e,s);En(i,r)||(n.uniform1iv(this.addr,r),An(i,r));for(let o=0;o!==s;++o)e.setTextureCube(t[o]||Xx,r[o])}function pE(n,t,e){const i=this.cache,s=t.length,r=ku(e,s);En(i,r)||(n.uniform1iv(this.addr,r),An(i,r));for(let o=0;o!==s;++o)e.setTexture2DArray(t[o]||Gx,r[o])}function mE(n){switch(n){case 5126:return $T;case 35664:return KT;case 35665:return JT;case 35666:return QT;case 35674:return tE;case 35675:return eE;case 35676:return nE;case 5124:case 35670:return iE;case 35667:case 35671:return sE;case 35668:case 35672:return rE;case 35669:case 35673:return oE;case 5125:return aE;case 36294:return lE;case 36295:return cE;case 36296:return hE;case 35678:case 36198:case 36298:case 36306:case 35682:return uE;case 35679:case 36299:case 36307:return fE;case 35680:case 36300:case 36308:case 36293:return dE;case 36289:case 36303:case 36311:case 36292:return pE}}class gE{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.setValue=qT(e.type)}}class _E{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=mE(e.type)}}class vE{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,i){const s=this.seq;for(let r=0,o=s.length;r!==o;++r){const l=s[r];l.setValue(t,e[l.id],i)}}}const fd=/(\w+)(\])?(\[|\.)?/g;function p0(n,t){n.seq.push(t),n.map[t.id]=t}function xE(n,t,e){const i=n.name,s=i.length;for(fd.lastIndex=0;;){const r=fd.exec(i),o=fd.lastIndex;let l=r[1];const c=r[2]==="]",h=r[3];if(c&&(l=l|0),h===void 0||h==="["&&o+2===s){p0(e,h===void 0?new gE(l,n,t):new _E(l,n,t));break}else{let d=e.map[l];d===void 0&&(d=new vE(l),p0(e,d)),e=d}}}class Gh{constructor(t,e){this.seq=[],this.map={};const i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let s=0;s<i;++s){const r=t.getActiveUniform(e,s),o=t.getUniformLocation(e,r.name);xE(r,o,this)}}setValue(t,e,i,s){const r=this.map[e];r!==void 0&&r.setValue(t,i,s)}setOptional(t,e,i){const s=e[i];s!==void 0&&this.setValue(t,i,s)}static upload(t,e,i,s){for(let r=0,o=e.length;r!==o;++r){const l=e[r],c=i[l.id];c.needsUpdate!==!1&&l.setValue(t,c.value,s)}}static seqWithValue(t,e){const i=[];for(let s=0,r=t.length;s!==r;++s){const o=t[s];o.id in e&&i.push(o)}return i}}function m0(n,t,e){const i=n.createShader(t);return n.shaderSource(i,e),n.compileShader(i),i}const yE=37297;let bE=0;function ME(n,t){const e=n.split(`
`),i=[],s=Math.max(t-6,0),r=Math.min(t+6,e.length);for(let o=s;o<r;o++){const l=o+1;i.push(`${l===t?">":" "} ${l}: ${e[o]}`)}return i.join(`
`)}const g0=new ge;function SE(n){Fe._getMatrix(g0,Fe.workingColorSpace,n);const t=`mat3( ${g0.elements.map(e=>e.toFixed(4))} )`;switch(Fe.getTransfer(n)){case iu:return[t,"LinearTransferOETF"];case Ke:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[t,"LinearTransferOETF"]}}function _0(n,t,e){const i=n.getShaderParameter(t,n.COMPILE_STATUS),r=(n.getShaderInfoLog(t)||"").trim();if(i&&r==="")return"";const o=/ERROR: 0:(\d+)/.exec(r);if(o){const l=parseInt(o[1]);return e.toUpperCase()+`

`+r+`

`+ME(n.getShaderSource(t),l)}else return r}function CE(n,t){const e=SE(t);return[`vec4 ${n}( vec4 value ) {`,`	return ${e[1]}( vec4( value.rgb * ${e[0]}, value.a ) );`,"}"].join(`
`)}function wE(n,t){let e;switch(t){case LC:e="Linear";break;case IC:e="Reinhard";break;case DC:e="Cineon";break;case OC:e="ACESFilmic";break;case kC:e="AgX";break;case FC:e="Neutral";break;case NC:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+n+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}const gh=new X;function TE(){Fe.getLuminanceCoefficients(gh);const n=gh.x.toFixed(4),t=gh.y.toFixed(4),e=gh.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${t}, ${e} );`,"	return dot( weights, rgb );","}"].join(`
`)}function EE(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Rl).join(`
`)}function AE(n){const t=[];for(const e in n){const i=n[e];i!==!1&&t.push("#define "+e+" "+i)}return t.join(`
`)}function PE(n,t){const e={},i=n.getProgramParameter(t,n.ACTIVE_ATTRIBUTES);for(let s=0;s<i;s++){const r=n.getActiveAttrib(t,s),o=r.name;let l=1;r.type===n.FLOAT_MAT2&&(l=2),r.type===n.FLOAT_MAT3&&(l=3),r.type===n.FLOAT_MAT4&&(l=4),e[o]={type:r.type,location:n.getAttribLocation(t,o),locationSize:l}}return e}function Rl(n){return n!==""}function v0(n,t){const e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function x0(n,t){return n.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const RE=/^[ \t]*#include +<([\w\d./]+)>/gm;function jp(n){return n.replace(RE,IE)}const LE=new Map;function IE(n,t){let e=ve[t];if(e===void 0){const i=LE.get(t);if(i!==void 0)e=ve[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,i);else throw new Error("Can not resolve #include <"+t+">")}return jp(e)}const DE=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function y0(n){return n.replace(DE,OE)}function OE(n,t,e,i){let s="";for(let r=parseInt(t);r<parseInt(e);r++)s+=i.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function b0(n){let t=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?t+=`
#define HIGH_PRECISION`:n.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function NE(n){let t="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===ux?t="SHADOWMAP_TYPE_PCF":n.shadowMapType===hC?t="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Ns&&(t="SHADOWMAP_TYPE_VSM"),t}function kE(n){let t="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Ea:case Aa:t="ENVMAP_TYPE_CUBE";break;case Iu:t="ENVMAP_TYPE_CUBE_UV";break}return t}function FE(n){let t="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Aa:t="ENVMAP_MODE_REFRACTION";break}return t}function UE(n){let t="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case fx:t="ENVMAP_BLENDING_MULTIPLY";break;case PC:t="ENVMAP_BLENDING_MIX";break;case RC:t="ENVMAP_BLENDING_ADD";break}return t}function BE(n){const t=n.envMapCubeUVHeight;if(t===null)return null;const e=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),112)),texelHeight:i,maxMip:e}}function zE(n,t,e,i){const s=n.getContext(),r=e.defines;let o=e.vertexShader,l=e.fragmentShader;const c=NE(e),h=kE(e),f=FE(e),d=UE(e),p=BE(e),g=EE(e),v=AE(r),y=s.createProgram();let x,_,w=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(x=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,v].filter(Rl).join(`
`),x.length>0&&(x+=`
`),_=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,v].filter(Rl).join(`
`),_.length>0&&(_+=`
`)):(x=[b0(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,v,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.batchingColor?"#define USE_BATCHING_COLOR":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+f:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+c:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reversedDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Rl).join(`
`),_=[b0(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,v,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+h:"",e.envMap?"#define "+f:"",e.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.dispersion?"#define USE_DISPERSION":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor||e.batchingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+c:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reversedDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==Er?"#define TONE_MAPPING":"",e.toneMapping!==Er?ve.tonemapping_pars_fragment:"",e.toneMapping!==Er?wE("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",ve.colorspace_pars_fragment,CE("linearToOutputTexel",e.outputColorSpace),TE(),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(Rl).join(`
`)),o=jp(o),o=v0(o,e),o=x0(o,e),l=jp(l),l=v0(l,e),l=x0(l,e),o=y0(o),l=y0(l),e.isRawShaderMaterial!==!0&&(w=`#version 300 es
`,x=[g,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,_=["#define varying in",e.glslVersion===p_?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===p_?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);const C=w+x+o,S=w+_+l,T=m0(s,s.VERTEX_SHADER,C),A=m0(s,s.FRAGMENT_SHADER,S);s.attachShader(y,T),s.attachShader(y,A),e.index0AttributeName!==void 0?s.bindAttribLocation(y,0,e.index0AttributeName):e.morphTargets===!0&&s.bindAttribLocation(y,0,"position"),s.linkProgram(y);function P(k){if(n.debug.checkShaderErrors){const H=s.getProgramInfoLog(y)||"",q=s.getShaderInfoLog(T)||"",G=s.getShaderInfoLog(A)||"",Y=H.trim(),j=q.trim(),et=G.trim();let V=!0,ct=!0;if(s.getProgramParameter(y,s.LINK_STATUS)===!1)if(V=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(s,y,T,A);else{const rt=_0(s,T,"vertex"),gt=_0(s,A,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(y,s.VALIDATE_STATUS)+`

Material Name: `+k.name+`
Material Type: `+k.type+`

Program Info Log: `+Y+`
`+rt+`
`+gt)}else Y!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Y):(j===""||et==="")&&(ct=!1);ct&&(k.diagnostics={runnable:V,programLog:Y,vertexShader:{log:j,prefix:x},fragmentShader:{log:et,prefix:_}})}s.deleteShader(T),s.deleteShader(A),N=new Gh(s,y),E=PE(s,y)}let N;this.getUniforms=function(){return N===void 0&&P(this),N};let E;this.getAttributes=function(){return E===void 0&&P(this),E};let R=e.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return R===!1&&(R=s.getProgramParameter(y,yE)),R},this.destroy=function(){i.releaseStatesOfProgram(this),s.deleteProgram(y),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=bE++,this.cacheKey=t,this.usedTimes=1,this.program=y,this.vertexShader=T,this.fragmentShader=A,this}let HE=0;class VE{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,i=t.fragmentShader,s=this._getShaderStage(e),r=this._getShaderStage(i),o=this._getShaderCacheForMaterial(t);return o.has(s)===!1&&(o.add(s),s.usedTimes++),o.has(r)===!1&&(o.add(r),r.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const i of e)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let i=e.get(t);return i===void 0&&(i=new Set,e.set(t,i)),i}_getShaderStage(t){const e=this.shaderCache;let i=e.get(t);return i===void 0&&(i=new WE(t),e.set(t,i)),i}}class WE{constructor(t){this.id=HE++,this.code=t,this.usedTimes=0}}function GE(n,t,e,i,s,r,o){const l=new Hm,c=new VE,h=new Set,f=[],d=s.logarithmicDepthBuffer,p=s.vertexTextures;let g=s.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(E){return h.add(E),E===0?"uv":`uv${E}`}function x(E,R,k,H,q){const G=H.fog,Y=q.geometry,j=E.isMeshStandardMaterial?H.environment:null,et=(E.isMeshStandardMaterial?e:t).get(E.envMap||j),V=et&&et.mapping===Iu?et.image.height:null,ct=v[E.type];E.precision!==null&&(g=s.getMaxPrecision(E.precision),g!==E.precision&&console.warn("THREE.WebGLProgram.getParameters:",E.precision,"not supported, using",g,"instead."));const rt=Y.morphAttributes.position||Y.morphAttributes.normal||Y.morphAttributes.color,gt=rt!==void 0?rt.length:0;let It=0;Y.morphAttributes.position!==void 0&&(It=1),Y.morphAttributes.normal!==void 0&&(It=2),Y.morphAttributes.color!==void 0&&(It=3);let Dt,At,K,st;if(ct){const Be=rs[ct];Dt=Be.vertexShader,At=Be.fragmentShader}else Dt=E.vertexShader,At=E.fragmentShader,c.update(E),K=c.getVertexShaderID(E),st=c.getFragmentShaderID(E);const dt=n.getRenderTarget(),Ut=n.state.buffers.depth.getReversed(),Xt=q.isInstancedMesh===!0,Ht=q.isBatchedMesh===!0,Le=!!E.map,se=!!E.matcap,z=!!et,Oe=!!E.aoMap,Vt=!!E.lightMap,ye=!!E.bumpMap,Wt=!!E.normalMap,Ve=!!E.displacementMap,Nt=!!E.emissiveMap,ue=!!E.metalnessMap,hn=!!E.roughnessMap,nn=E.anisotropy>0,F=E.clearcoat>0,D=E.dispersion>0,Q=E.iridescence>0,at=E.sheen>0,pt=E.transmission>0,ot=nn&&!!E.anisotropyMap,$t=F&&!!E.clearcoatMap,Mt=F&&!!E.clearcoatNormalMap,jt=F&&!!E.clearcoatRoughnessMap,Zt=Q&&!!E.iridescenceMap,xt=Q&&!!E.iridescenceThicknessMap,Tt=at&&!!E.sheenColorMap,re=at&&!!E.sheenRoughnessMap,Yt=!!E.specularMap,wt=!!E.specularColorMap,de=!!E.specularIntensityMap,W=pt&&!!E.transmissionMap,yt=pt&&!!E.thicknessMap,Ct=!!E.gradientMap,kt=!!E.alphaMap,_t=E.alphaTest>0,lt=!!E.alphaHash,Gt=!!E.extensions;let he=Er;E.toneMapped&&(dt===null||dt.isXRRenderTarget===!0)&&(he=n.toneMapping);const qe={shaderID:ct,shaderType:E.type,shaderName:E.name,vertexShader:Dt,fragmentShader:At,defines:E.defines,customVertexShaderID:K,customFragmentShaderID:st,isRawShaderMaterial:E.isRawShaderMaterial===!0,glslVersion:E.glslVersion,precision:g,batching:Ht,batchingColor:Ht&&q._colorsTexture!==null,instancing:Xt,instancingColor:Xt&&q.instanceColor!==null,instancingMorph:Xt&&q.morphTexture!==null,supportsVertexTextures:p,outputColorSpace:dt===null?n.outputColorSpace:dt.isXRRenderTarget===!0?dt.texture.colorSpace:si,alphaToCoverage:!!E.alphaToCoverage,map:Le,matcap:se,envMap:z,envMapMode:z&&et.mapping,envMapCubeUVHeight:V,aoMap:Oe,lightMap:Vt,bumpMap:ye,normalMap:Wt,displacementMap:p&&Ve,emissiveMap:Nt,normalMapObjectSpace:Wt&&E.normalMapType===WC,normalMapTangentSpace:Wt&&E.normalMapType===Sx,metalnessMap:ue,roughnessMap:hn,anisotropy:nn,anisotropyMap:ot,clearcoat:F,clearcoatMap:$t,clearcoatNormalMap:Mt,clearcoatRoughnessMap:jt,dispersion:D,iridescence:Q,iridescenceMap:Zt,iridescenceThicknessMap:xt,sheen:at,sheenColorMap:Tt,sheenRoughnessMap:re,specularMap:Yt,specularColorMap:wt,specularIntensityMap:de,transmission:pt,transmissionMap:W,thicknessMap:yt,gradientMap:Ct,opaque:E.transparent===!1&&E.blending===pa&&E.alphaToCoverage===!1,alphaMap:kt,alphaTest:_t,alphaHash:lt,combine:E.combine,mapUv:Le&&y(E.map.channel),aoMapUv:Oe&&y(E.aoMap.channel),lightMapUv:Vt&&y(E.lightMap.channel),bumpMapUv:ye&&y(E.bumpMap.channel),normalMapUv:Wt&&y(E.normalMap.channel),displacementMapUv:Ve&&y(E.displacementMap.channel),emissiveMapUv:Nt&&y(E.emissiveMap.channel),metalnessMapUv:ue&&y(E.metalnessMap.channel),roughnessMapUv:hn&&y(E.roughnessMap.channel),anisotropyMapUv:ot&&y(E.anisotropyMap.channel),clearcoatMapUv:$t&&y(E.clearcoatMap.channel),clearcoatNormalMapUv:Mt&&y(E.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:jt&&y(E.clearcoatRoughnessMap.channel),iridescenceMapUv:Zt&&y(E.iridescenceMap.channel),iridescenceThicknessMapUv:xt&&y(E.iridescenceThicknessMap.channel),sheenColorMapUv:Tt&&y(E.sheenColorMap.channel),sheenRoughnessMapUv:re&&y(E.sheenRoughnessMap.channel),specularMapUv:Yt&&y(E.specularMap.channel),specularColorMapUv:wt&&y(E.specularColorMap.channel),specularIntensityMapUv:de&&y(E.specularIntensityMap.channel),transmissionMapUv:W&&y(E.transmissionMap.channel),thicknessMapUv:yt&&y(E.thicknessMap.channel),alphaMapUv:kt&&y(E.alphaMap.channel),vertexTangents:!!Y.attributes.tangent&&(Wt||nn),vertexColors:E.vertexColors,vertexAlphas:E.vertexColors===!0&&!!Y.attributes.color&&Y.attributes.color.itemSize===4,pointsUvs:q.isPoints===!0&&!!Y.attributes.uv&&(Le||kt),fog:!!G,useFog:E.fog===!0,fogExp2:!!G&&G.isFogExp2,flatShading:E.flatShading===!0&&E.wireframe===!1,sizeAttenuation:E.sizeAttenuation===!0,logarithmicDepthBuffer:d,reversedDepthBuffer:Ut,skinning:q.isSkinnedMesh===!0,morphTargets:Y.morphAttributes.position!==void 0,morphNormals:Y.morphAttributes.normal!==void 0,morphColors:Y.morphAttributes.color!==void 0,morphTargetsCount:gt,morphTextureStride:It,numDirLights:R.directional.length,numPointLights:R.point.length,numSpotLights:R.spot.length,numSpotLightMaps:R.spotLightMap.length,numRectAreaLights:R.rectArea.length,numHemiLights:R.hemi.length,numDirLightShadows:R.directionalShadowMap.length,numPointLightShadows:R.pointShadowMap.length,numSpotLightShadows:R.spotShadowMap.length,numSpotLightShadowsWithMaps:R.numSpotLightShadowsWithMaps,numLightProbes:R.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:E.dithering,shadowMapEnabled:n.shadowMap.enabled&&k.length>0,shadowMapType:n.shadowMap.type,toneMapping:he,decodeVideoTexture:Le&&E.map.isVideoTexture===!0&&Fe.getTransfer(E.map.colorSpace)===Ke,decodeVideoTextureEmissive:Nt&&E.emissiveMap.isVideoTexture===!0&&Fe.getTransfer(E.emissiveMap.colorSpace)===Ke,premultipliedAlpha:E.premultipliedAlpha,doubleSided:E.side===as,flipSided:E.side===ui,useDepthPacking:E.depthPacking>=0,depthPacking:E.depthPacking||0,index0AttributeName:E.index0AttributeName,extensionClipCullDistance:Gt&&E.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Gt&&E.extensions.multiDraw===!0||Ht)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:E.customProgramCacheKey()};return qe.vertexUv1s=h.has(1),qe.vertexUv2s=h.has(2),qe.vertexUv3s=h.has(3),h.clear(),qe}function _(E){const R=[];if(E.shaderID?R.push(E.shaderID):(R.push(E.customVertexShaderID),R.push(E.customFragmentShaderID)),E.defines!==void 0)for(const k in E.defines)R.push(k),R.push(E.defines[k]);return E.isRawShaderMaterial===!1&&(w(R,E),C(R,E),R.push(n.outputColorSpace)),R.push(E.customProgramCacheKey),R.join()}function w(E,R){E.push(R.precision),E.push(R.outputColorSpace),E.push(R.envMapMode),E.push(R.envMapCubeUVHeight),E.push(R.mapUv),E.push(R.alphaMapUv),E.push(R.lightMapUv),E.push(R.aoMapUv),E.push(R.bumpMapUv),E.push(R.normalMapUv),E.push(R.displacementMapUv),E.push(R.emissiveMapUv),E.push(R.metalnessMapUv),E.push(R.roughnessMapUv),E.push(R.anisotropyMapUv),E.push(R.clearcoatMapUv),E.push(R.clearcoatNormalMapUv),E.push(R.clearcoatRoughnessMapUv),E.push(R.iridescenceMapUv),E.push(R.iridescenceThicknessMapUv),E.push(R.sheenColorMapUv),E.push(R.sheenRoughnessMapUv),E.push(R.specularMapUv),E.push(R.specularColorMapUv),E.push(R.specularIntensityMapUv),E.push(R.transmissionMapUv),E.push(R.thicknessMapUv),E.push(R.combine),E.push(R.fogExp2),E.push(R.sizeAttenuation),E.push(R.morphTargetsCount),E.push(R.morphAttributeCount),E.push(R.numDirLights),E.push(R.numPointLights),E.push(R.numSpotLights),E.push(R.numSpotLightMaps),E.push(R.numHemiLights),E.push(R.numRectAreaLights),E.push(R.numDirLightShadows),E.push(R.numPointLightShadows),E.push(R.numSpotLightShadows),E.push(R.numSpotLightShadowsWithMaps),E.push(R.numLightProbes),E.push(R.shadowMapType),E.push(R.toneMapping),E.push(R.numClippingPlanes),E.push(R.numClipIntersection),E.push(R.depthPacking)}function C(E,R){l.disableAll(),R.supportsVertexTextures&&l.enable(0),R.instancing&&l.enable(1),R.instancingColor&&l.enable(2),R.instancingMorph&&l.enable(3),R.matcap&&l.enable(4),R.envMap&&l.enable(5),R.normalMapObjectSpace&&l.enable(6),R.normalMapTangentSpace&&l.enable(7),R.clearcoat&&l.enable(8),R.iridescence&&l.enable(9),R.alphaTest&&l.enable(10),R.vertexColors&&l.enable(11),R.vertexAlphas&&l.enable(12),R.vertexUv1s&&l.enable(13),R.vertexUv2s&&l.enable(14),R.vertexUv3s&&l.enable(15),R.vertexTangents&&l.enable(16),R.anisotropy&&l.enable(17),R.alphaHash&&l.enable(18),R.batching&&l.enable(19),R.dispersion&&l.enable(20),R.batchingColor&&l.enable(21),R.gradientMap&&l.enable(22),E.push(l.mask),l.disableAll(),R.fog&&l.enable(0),R.useFog&&l.enable(1),R.flatShading&&l.enable(2),R.logarithmicDepthBuffer&&l.enable(3),R.reversedDepthBuffer&&l.enable(4),R.skinning&&l.enable(5),R.morphTargets&&l.enable(6),R.morphNormals&&l.enable(7),R.morphColors&&l.enable(8),R.premultipliedAlpha&&l.enable(9),R.shadowMapEnabled&&l.enable(10),R.doubleSided&&l.enable(11),R.flipSided&&l.enable(12),R.useDepthPacking&&l.enable(13),R.dithering&&l.enable(14),R.transmission&&l.enable(15),R.sheen&&l.enable(16),R.opaque&&l.enable(17),R.pointsUvs&&l.enable(18),R.decodeVideoTexture&&l.enable(19),R.decodeVideoTextureEmissive&&l.enable(20),R.alphaToCoverage&&l.enable(21),E.push(l.mask)}function S(E){const R=v[E.type];let k;if(R){const H=rs[R];k=D6.clone(H.uniforms)}else k=E.uniforms;return k}function T(E,R){let k;for(let H=0,q=f.length;H<q;H++){const G=f[H];if(G.cacheKey===R){k=G,++k.usedTimes;break}}return k===void 0&&(k=new zE(n,R,E,r),f.push(k)),k}function A(E){if(--E.usedTimes===0){const R=f.indexOf(E);f[R]=f[f.length-1],f.pop(),E.destroy()}}function P(E){c.remove(E)}function N(){c.dispose()}return{getParameters:x,getProgramCacheKey:_,getUniforms:S,acquireProgram:T,releaseProgram:A,releaseShaderCache:P,programs:f,dispose:N}}function jE(){let n=new WeakMap;function t(o){return n.has(o)}function e(o){let l=n.get(o);return l===void 0&&(l={},n.set(o,l)),l}function i(o){n.delete(o)}function s(o,l,c){n.get(o)[l]=c}function r(){n=new WeakMap}return{has:t,get:e,remove:i,update:s,dispose:r}}function XE(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.material.id!==t.material.id?n.material.id-t.material.id:n.z!==t.z?n.z-t.z:n.id-t.id}function M0(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.z!==t.z?t.z-n.z:n.id-t.id}function S0(){const n=[];let t=0;const e=[],i=[],s=[];function r(){t=0,e.length=0,i.length=0,s.length=0}function o(d,p,g,v,y,x){let _=n[t];return _===void 0?(_={id:d.id,object:d,geometry:p,material:g,groupOrder:v,renderOrder:d.renderOrder,z:y,group:x},n[t]=_):(_.id=d.id,_.object=d,_.geometry=p,_.material=g,_.groupOrder=v,_.renderOrder=d.renderOrder,_.z=y,_.group=x),t++,_}function l(d,p,g,v,y,x){const _=o(d,p,g,v,y,x);g.transmission>0?i.push(_):g.transparent===!0?s.push(_):e.push(_)}function c(d,p,g,v,y,x){const _=o(d,p,g,v,y,x);g.transmission>0?i.unshift(_):g.transparent===!0?s.unshift(_):e.unshift(_)}function h(d,p){e.length>1&&e.sort(d||XE),i.length>1&&i.sort(p||M0),s.length>1&&s.sort(p||M0)}function f(){for(let d=t,p=n.length;d<p;d++){const g=n[d];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:e,transmissive:i,transparent:s,init:r,push:l,unshift:c,finish:f,sort:h}}function ZE(){let n=new WeakMap;function t(i,s){const r=n.get(i);let o;return r===void 0?(o=new S0,n.set(i,[o])):s>=r.length?(o=new S0,r.push(o)):o=r[s],o}function e(){n=new WeakMap}return{get:t,dispose:e}}function YE(){const n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new X,color:new pe};break;case"SpotLight":e={position:new X,direction:new X,color:new pe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new X,color:new pe,distance:0,decay:0};break;case"HemisphereLight":e={direction:new X,skyColor:new pe,groundColor:new pe};break;case"RectAreaLight":e={color:new pe,position:new X,halfWidth:new X,halfHeight:new X};break}return n[t.id]=e,e}}}function qE(){const n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new le};break;case"SpotLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new le};break;case"PointLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new le,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[t.id]=e,e}}}let $E=0;function KE(n,t){return(t.castShadow?2:0)-(n.castShadow?2:0)+(t.map?1:0)-(n.map?1:0)}function JE(n){const t=new YE,e=qE(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let h=0;h<9;h++)i.probe.push(new X);const s=new X,r=new _e,o=new _e;function l(h){let f=0,d=0,p=0;for(let E=0;E<9;E++)i.probe[E].set(0,0,0);let g=0,v=0,y=0,x=0,_=0,w=0,C=0,S=0,T=0,A=0,P=0;h.sort(KE);for(let E=0,R=h.length;E<R;E++){const k=h[E],H=k.color,q=k.intensity,G=k.distance,Y=k.shadow&&k.shadow.map?k.shadow.map.texture:null;if(k.isAmbientLight)f+=H.r*q,d+=H.g*q,p+=H.b*q;else if(k.isLightProbe){for(let j=0;j<9;j++)i.probe[j].addScaledVector(k.sh.coefficients[j],q);P++}else if(k.isDirectionalLight){const j=t.get(k);if(j.color.copy(k.color).multiplyScalar(k.intensity),k.castShadow){const et=k.shadow,V=e.get(k);V.shadowIntensity=et.intensity,V.shadowBias=et.bias,V.shadowNormalBias=et.normalBias,V.shadowRadius=et.radius,V.shadowMapSize=et.mapSize,i.directionalShadow[g]=V,i.directionalShadowMap[g]=Y,i.directionalShadowMatrix[g]=k.shadow.matrix,w++}i.directional[g]=j,g++}else if(k.isSpotLight){const j=t.get(k);j.position.setFromMatrixPosition(k.matrixWorld),j.color.copy(H).multiplyScalar(q),j.distance=G,j.coneCos=Math.cos(k.angle),j.penumbraCos=Math.cos(k.angle*(1-k.penumbra)),j.decay=k.decay,i.spot[y]=j;const et=k.shadow;if(k.map&&(i.spotLightMap[T]=k.map,T++,et.updateMatrices(k),k.castShadow&&A++),i.spotLightMatrix[y]=et.matrix,k.castShadow){const V=e.get(k);V.shadowIntensity=et.intensity,V.shadowBias=et.bias,V.shadowNormalBias=et.normalBias,V.shadowRadius=et.radius,V.shadowMapSize=et.mapSize,i.spotShadow[y]=V,i.spotShadowMap[y]=Y,S++}y++}else if(k.isRectAreaLight){const j=t.get(k);j.color.copy(H).multiplyScalar(q),j.halfWidth.set(k.width*.5,0,0),j.halfHeight.set(0,k.height*.5,0),i.rectArea[x]=j,x++}else if(k.isPointLight){const j=t.get(k);if(j.color.copy(k.color).multiplyScalar(k.intensity),j.distance=k.distance,j.decay=k.decay,k.castShadow){const et=k.shadow,V=e.get(k);V.shadowIntensity=et.intensity,V.shadowBias=et.bias,V.shadowNormalBias=et.normalBias,V.shadowRadius=et.radius,V.shadowMapSize=et.mapSize,V.shadowCameraNear=et.camera.near,V.shadowCameraFar=et.camera.far,i.pointShadow[v]=V,i.pointShadowMap[v]=Y,i.pointShadowMatrix[v]=k.shadow.matrix,C++}i.point[v]=j,v++}else if(k.isHemisphereLight){const j=t.get(k);j.skyColor.copy(k.color).multiplyScalar(q),j.groundColor.copy(k.groundColor).multiplyScalar(q),i.hemi[_]=j,_++}}x>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Et.LTC_FLOAT_1,i.rectAreaLTC2=Et.LTC_FLOAT_2):(i.rectAreaLTC1=Et.LTC_HALF_1,i.rectAreaLTC2=Et.LTC_HALF_2)),i.ambient[0]=f,i.ambient[1]=d,i.ambient[2]=p;const N=i.hash;(N.directionalLength!==g||N.pointLength!==v||N.spotLength!==y||N.rectAreaLength!==x||N.hemiLength!==_||N.numDirectionalShadows!==w||N.numPointShadows!==C||N.numSpotShadows!==S||N.numSpotMaps!==T||N.numLightProbes!==P)&&(i.directional.length=g,i.spot.length=y,i.rectArea.length=x,i.point.length=v,i.hemi.length=_,i.directionalShadow.length=w,i.directionalShadowMap.length=w,i.pointShadow.length=C,i.pointShadowMap.length=C,i.spotShadow.length=S,i.spotShadowMap.length=S,i.directionalShadowMatrix.length=w,i.pointShadowMatrix.length=C,i.spotLightMatrix.length=S+T-A,i.spotLightMap.length=T,i.numSpotLightShadowsWithMaps=A,i.numLightProbes=P,N.directionalLength=g,N.pointLength=v,N.spotLength=y,N.rectAreaLength=x,N.hemiLength=_,N.numDirectionalShadows=w,N.numPointShadows=C,N.numSpotShadows=S,N.numSpotMaps=T,N.numLightProbes=P,i.version=$E++)}function c(h,f){let d=0,p=0,g=0,v=0,y=0;const x=f.matrixWorldInverse;for(let _=0,w=h.length;_<w;_++){const C=h[_];if(C.isDirectionalLight){const S=i.directional[d];S.direction.setFromMatrixPosition(C.matrixWorld),s.setFromMatrixPosition(C.target.matrixWorld),S.direction.sub(s),S.direction.transformDirection(x),d++}else if(C.isSpotLight){const S=i.spot[g];S.position.setFromMatrixPosition(C.matrixWorld),S.position.applyMatrix4(x),S.direction.setFromMatrixPosition(C.matrixWorld),s.setFromMatrixPosition(C.target.matrixWorld),S.direction.sub(s),S.direction.transformDirection(x),g++}else if(C.isRectAreaLight){const S=i.rectArea[v];S.position.setFromMatrixPosition(C.matrixWorld),S.position.applyMatrix4(x),o.identity(),r.copy(C.matrixWorld),r.premultiply(x),o.extractRotation(r),S.halfWidth.set(C.width*.5,0,0),S.halfHeight.set(0,C.height*.5,0),S.halfWidth.applyMatrix4(o),S.halfHeight.applyMatrix4(o),v++}else if(C.isPointLight){const S=i.point[p];S.position.setFromMatrixPosition(C.matrixWorld),S.position.applyMatrix4(x),p++}else if(C.isHemisphereLight){const S=i.hemi[y];S.direction.setFromMatrixPosition(C.matrixWorld),S.direction.transformDirection(x),y++}}}return{setup:l,setupView:c,state:i}}function C0(n){const t=new JE(n),e=[],i=[];function s(f){h.camera=f,e.length=0,i.length=0}function r(f){e.push(f)}function o(f){i.push(f)}function l(){t.setup(e)}function c(f){t.setupView(e,f)}const h={lightsArray:e,shadowsArray:i,camera:null,lights:t,transmissionRenderTarget:{}};return{init:s,state:h,setupLights:l,setupLightsView:c,pushLight:r,pushShadow:o}}function QE(n){let t=new WeakMap;function e(s,r=0){const o=t.get(s);let l;return o===void 0?(l=new C0(n),t.set(s,[l])):r>=o.length?(l=new C0(n),o.push(l)):l=o[r],l}function i(){t=new WeakMap}return{get:e,dispose:i}}const tA=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,eA=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function nA(n,t,e){let i=new Gm;const s=new le,r=new le,o=new Ge,l=new J6({depthPacking:VC}),c=new Q6,h={},f=e.maxTextureSize,d={[Ks]:ui,[ui]:Ks,[as]:as},p=new Dr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new le},radius:{value:4}},vertexShader:tA,fragmentShader:eA}),g=p.clone();g.defines.HORIZONTAL_PASS=1;const v=new Ni;v.setAttribute("position",new ii(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new ti(v,p),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ux;let _=this.type;this.render=function(A,P,N){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||A.length===0)return;const E=n.getRenderTarget(),R=n.getActiveCubeFace(),k=n.getActiveMipmapLevel(),H=n.state;H.setBlending(Tr),H.buffers.depth.getReversed()?H.buffers.color.setClear(0,0,0,0):H.buffers.color.setClear(1,1,1,1),H.buffers.depth.setTest(!0),H.setScissorTest(!1);const q=_!==Ns&&this.type===Ns,G=_===Ns&&this.type!==Ns;for(let Y=0,j=A.length;Y<j;Y++){const et=A[Y],V=et.shadow;if(V===void 0){console.warn("THREE.WebGLShadowMap:",et,"has no shadow.");continue}if(V.autoUpdate===!1&&V.needsUpdate===!1)continue;s.copy(V.mapSize);const ct=V.getFrameExtents();if(s.multiply(ct),r.copy(V.mapSize),(s.x>f||s.y>f)&&(s.x>f&&(r.x=Math.floor(f/ct.x),s.x=r.x*ct.x,V.mapSize.x=r.x),s.y>f&&(r.y=Math.floor(f/ct.y),s.y=r.y*ct.y,V.mapSize.y=r.y)),V.map===null||q===!0||G===!0){const gt=this.type!==Ns?{minFilter:ni,magFilter:ni}:{};V.map!==null&&V.map.dispose(),V.map=new So(s.x,s.y,gt),V.map.texture.name=et.name+".shadowMap",V.camera.updateProjectionMatrix()}n.setRenderTarget(V.map),n.clear();const rt=V.getViewportCount();for(let gt=0;gt<rt;gt++){const It=V.getViewport(gt);o.set(r.x*It.x,r.y*It.y,r.x*It.z,r.y*It.w),H.viewport(o),V.updateMatrices(et,gt),i=V.getFrustum(),S(P,N,V.camera,et,this.type)}V.isPointLightShadow!==!0&&this.type===Ns&&w(V,N),V.needsUpdate=!1}_=this.type,x.needsUpdate=!1,n.setRenderTarget(E,R,k)};function w(A,P){const N=t.update(y);p.defines.VSM_SAMPLES!==A.blurSamples&&(p.defines.VSM_SAMPLES=A.blurSamples,g.defines.VSM_SAMPLES=A.blurSamples,p.needsUpdate=!0,g.needsUpdate=!0),A.mapPass===null&&(A.mapPass=new So(s.x,s.y)),p.uniforms.shadow_pass.value=A.map.texture,p.uniforms.resolution.value=A.mapSize,p.uniforms.radius.value=A.radius,n.setRenderTarget(A.mapPass),n.clear(),n.renderBufferDirect(P,null,N,p,y,null),g.uniforms.shadow_pass.value=A.mapPass.texture,g.uniforms.resolution.value=A.mapSize,g.uniforms.radius.value=A.radius,n.setRenderTarget(A.map),n.clear(),n.renderBufferDirect(P,null,N,g,y,null)}function C(A,P,N,E){let R=null;const k=N.isPointLight===!0?A.customDistanceMaterial:A.customDepthMaterial;if(k!==void 0)R=k;else if(R=N.isPointLight===!0?c:l,n.localClippingEnabled&&P.clipShadows===!0&&Array.isArray(P.clippingPlanes)&&P.clippingPlanes.length!==0||P.displacementMap&&P.displacementScale!==0||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0||P.alphaToCoverage===!0){const H=R.uuid,q=P.uuid;let G=h[H];G===void 0&&(G={},h[H]=G);let Y=G[q];Y===void 0&&(Y=R.clone(),G[q]=Y,P.addEventListener("dispose",T)),R=Y}if(R.visible=P.visible,R.wireframe=P.wireframe,E===Ns?R.side=P.shadowSide!==null?P.shadowSide:P.side:R.side=P.shadowSide!==null?P.shadowSide:d[P.side],R.alphaMap=P.alphaMap,R.alphaTest=P.alphaToCoverage===!0?.5:P.alphaTest,R.map=P.map,R.clipShadows=P.clipShadows,R.clippingPlanes=P.clippingPlanes,R.clipIntersection=P.clipIntersection,R.displacementMap=P.displacementMap,R.displacementScale=P.displacementScale,R.displacementBias=P.displacementBias,R.wireframeLinewidth=P.wireframeLinewidth,R.linewidth=P.linewidth,N.isPointLight===!0&&R.isMeshDistanceMaterial===!0){const H=n.properties.get(R);H.light=N}return R}function S(A,P,N,E,R){if(A.visible===!1)return;if(A.layers.test(P.layers)&&(A.isMesh||A.isLine||A.isPoints)&&(A.castShadow||A.receiveShadow&&R===Ns)&&(!A.frustumCulled||i.intersectsObject(A))){A.modelViewMatrix.multiplyMatrices(N.matrixWorldInverse,A.matrixWorld);const q=t.update(A),G=A.material;if(Array.isArray(G)){const Y=q.groups;for(let j=0,et=Y.length;j<et;j++){const V=Y[j],ct=G[V.materialIndex];if(ct&&ct.visible){const rt=C(A,ct,E,R);A.onBeforeShadow(n,A,P,N,q,rt,V),n.renderBufferDirect(N,null,q,rt,A,V),A.onAfterShadow(n,A,P,N,q,rt,V)}}}else if(G.visible){const Y=C(A,G,E,R);A.onBeforeShadow(n,A,P,N,q,Y,null),n.renderBufferDirect(N,null,q,Y,A,null),A.onAfterShadow(n,A,P,N,q,Y,null)}}const H=A.children;for(let q=0,G=H.length;q<G;q++)S(H[q],P,N,E,R)}function T(A){A.target.removeEventListener("dispose",T);for(const N in h){const E=h[N],R=A.target.uuid;R in E&&(E[R].dispose(),delete E[R])}}}const iA={[rp]:op,[ap]:hp,[lp]:up,[Ta]:cp,[op]:rp,[hp]:ap,[up]:lp,[cp]:Ta};function sA(n,t){function e(){let W=!1;const yt=new Ge;let Ct=null;const kt=new Ge(0,0,0,0);return{setMask:function(_t){Ct!==_t&&!W&&(n.colorMask(_t,_t,_t,_t),Ct=_t)},setLocked:function(_t){W=_t},setClear:function(_t,lt,Gt,he,qe){qe===!0&&(_t*=he,lt*=he,Gt*=he),yt.set(_t,lt,Gt,he),kt.equals(yt)===!1&&(n.clearColor(_t,lt,Gt,he),kt.copy(yt))},reset:function(){W=!1,Ct=null,kt.set(-1,0,0,0)}}}function i(){let W=!1,yt=!1,Ct=null,kt=null,_t=null;return{setReversed:function(lt){if(yt!==lt){const Gt=t.get("EXT_clip_control");lt?Gt.clipControlEXT(Gt.LOWER_LEFT_EXT,Gt.ZERO_TO_ONE_EXT):Gt.clipControlEXT(Gt.LOWER_LEFT_EXT,Gt.NEGATIVE_ONE_TO_ONE_EXT),yt=lt;const he=_t;_t=null,this.setClear(he)}},getReversed:function(){return yt},setTest:function(lt){lt?dt(n.DEPTH_TEST):Ut(n.DEPTH_TEST)},setMask:function(lt){Ct!==lt&&!W&&(n.depthMask(lt),Ct=lt)},setFunc:function(lt){if(yt&&(lt=iA[lt]),kt!==lt){switch(lt){case rp:n.depthFunc(n.NEVER);break;case op:n.depthFunc(n.ALWAYS);break;case ap:n.depthFunc(n.LESS);break;case Ta:n.depthFunc(n.LEQUAL);break;case lp:n.depthFunc(n.EQUAL);break;case cp:n.depthFunc(n.GEQUAL);break;case hp:n.depthFunc(n.GREATER);break;case up:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}kt=lt}},setLocked:function(lt){W=lt},setClear:function(lt){_t!==lt&&(yt&&(lt=1-lt),n.clearDepth(lt),_t=lt)},reset:function(){W=!1,Ct=null,kt=null,_t=null,yt=!1}}}function s(){let W=!1,yt=null,Ct=null,kt=null,_t=null,lt=null,Gt=null,he=null,qe=null;return{setTest:function(Be){W||(Be?dt(n.STENCIL_TEST):Ut(n.STENCIL_TEST))},setMask:function(Be){yt!==Be&&!W&&(n.stencilMask(Be),yt=Be)},setFunc:function(Be,fi,Si){(Ct!==Be||kt!==fi||_t!==Si)&&(n.stencilFunc(Be,fi,Si),Ct=Be,kt=fi,_t=Si)},setOp:function(Be,fi,Si){(lt!==Be||Gt!==fi||he!==Si)&&(n.stencilOp(Be,fi,Si),lt=Be,Gt=fi,he=Si)},setLocked:function(Be){W=Be},setClear:function(Be){qe!==Be&&(n.clearStencil(Be),qe=Be)},reset:function(){W=!1,yt=null,Ct=null,kt=null,_t=null,lt=null,Gt=null,he=null,qe=null}}}const r=new e,o=new i,l=new s,c=new WeakMap,h=new WeakMap;let f={},d={},p=new WeakMap,g=[],v=null,y=!1,x=null,_=null,w=null,C=null,S=null,T=null,A=null,P=new pe(0,0,0),N=0,E=!1,R=null,k=null,H=null,q=null,G=null;const Y=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let j=!1,et=0;const V=n.getParameter(n.VERSION);V.indexOf("WebGL")!==-1?(et=parseFloat(/^WebGL (\d)/.exec(V)[1]),j=et>=1):V.indexOf("OpenGL ES")!==-1&&(et=parseFloat(/^OpenGL ES (\d)/.exec(V)[1]),j=et>=2);let ct=null,rt={};const gt=n.getParameter(n.SCISSOR_BOX),It=n.getParameter(n.VIEWPORT),Dt=new Ge().fromArray(gt),At=new Ge().fromArray(It);function K(W,yt,Ct,kt){const _t=new Uint8Array(4),lt=n.createTexture();n.bindTexture(W,lt),n.texParameteri(W,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(W,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Gt=0;Gt<Ct;Gt++)W===n.TEXTURE_3D||W===n.TEXTURE_2D_ARRAY?n.texImage3D(yt,0,n.RGBA,1,1,kt,0,n.RGBA,n.UNSIGNED_BYTE,_t):n.texImage2D(yt+Gt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,_t);return lt}const st={};st[n.TEXTURE_2D]=K(n.TEXTURE_2D,n.TEXTURE_2D,1),st[n.TEXTURE_CUBE_MAP]=K(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),st[n.TEXTURE_2D_ARRAY]=K(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),st[n.TEXTURE_3D]=K(n.TEXTURE_3D,n.TEXTURE_3D,1,1),r.setClear(0,0,0,1),o.setClear(1),l.setClear(0),dt(n.DEPTH_TEST),o.setFunc(Ta),ye(!1),Wt(r_),dt(n.CULL_FACE),Oe(Tr);function dt(W){f[W]!==!0&&(n.enable(W),f[W]=!0)}function Ut(W){f[W]!==!1&&(n.disable(W),f[W]=!1)}function Xt(W,yt){return d[W]!==yt?(n.bindFramebuffer(W,yt),d[W]=yt,W===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=yt),W===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=yt),!0):!1}function Ht(W,yt){let Ct=g,kt=!1;if(W){Ct=p.get(yt),Ct===void 0&&(Ct=[],p.set(yt,Ct));const _t=W.textures;if(Ct.length!==_t.length||Ct[0]!==n.COLOR_ATTACHMENT0){for(let lt=0,Gt=_t.length;lt<Gt;lt++)Ct[lt]=n.COLOR_ATTACHMENT0+lt;Ct.length=_t.length,kt=!0}}else Ct[0]!==n.BACK&&(Ct[0]=n.BACK,kt=!0);kt&&n.drawBuffers(Ct)}function Le(W){return v!==W?(n.useProgram(W),v=W,!0):!1}const se={[ao]:n.FUNC_ADD,[fC]:n.FUNC_SUBTRACT,[dC]:n.FUNC_REVERSE_SUBTRACT};se[pC]=n.MIN,se[mC]=n.MAX;const z={[gC]:n.ZERO,[_C]:n.ONE,[vC]:n.SRC_COLOR,[ip]:n.SRC_ALPHA,[CC]:n.SRC_ALPHA_SATURATE,[MC]:n.DST_COLOR,[yC]:n.DST_ALPHA,[xC]:n.ONE_MINUS_SRC_COLOR,[sp]:n.ONE_MINUS_SRC_ALPHA,[SC]:n.ONE_MINUS_DST_COLOR,[bC]:n.ONE_MINUS_DST_ALPHA,[wC]:n.CONSTANT_COLOR,[TC]:n.ONE_MINUS_CONSTANT_COLOR,[EC]:n.CONSTANT_ALPHA,[AC]:n.ONE_MINUS_CONSTANT_ALPHA};function Oe(W,yt,Ct,kt,_t,lt,Gt,he,qe,Be){if(W===Tr){y===!0&&(Ut(n.BLEND),y=!1);return}if(y===!1&&(dt(n.BLEND),y=!0),W!==uC){if(W!==x||Be!==E){if((_!==ao||S!==ao)&&(n.blendEquation(n.FUNC_ADD),_=ao,S=ao),Be)switch(W){case pa:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case o_:n.blendFunc(n.ONE,n.ONE);break;case a_:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case l_:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",W);break}else switch(W){case pa:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case o_:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case a_:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case l_:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",W);break}w=null,C=null,T=null,A=null,P.set(0,0,0),N=0,x=W,E=Be}return}_t=_t||yt,lt=lt||Ct,Gt=Gt||kt,(yt!==_||_t!==S)&&(n.blendEquationSeparate(se[yt],se[_t]),_=yt,S=_t),(Ct!==w||kt!==C||lt!==T||Gt!==A)&&(n.blendFuncSeparate(z[Ct],z[kt],z[lt],z[Gt]),w=Ct,C=kt,T=lt,A=Gt),(he.equals(P)===!1||qe!==N)&&(n.blendColor(he.r,he.g,he.b,qe),P.copy(he),N=qe),x=W,E=!1}function Vt(W,yt){W.side===as?Ut(n.CULL_FACE):dt(n.CULL_FACE);let Ct=W.side===ui;yt&&(Ct=!Ct),ye(Ct),W.blending===pa&&W.transparent===!1?Oe(Tr):Oe(W.blending,W.blendEquation,W.blendSrc,W.blendDst,W.blendEquationAlpha,W.blendSrcAlpha,W.blendDstAlpha,W.blendColor,W.blendAlpha,W.premultipliedAlpha),o.setFunc(W.depthFunc),o.setTest(W.depthTest),o.setMask(W.depthWrite),r.setMask(W.colorWrite);const kt=W.stencilWrite;l.setTest(kt),kt&&(l.setMask(W.stencilWriteMask),l.setFunc(W.stencilFunc,W.stencilRef,W.stencilFuncMask),l.setOp(W.stencilFail,W.stencilZFail,W.stencilZPass)),Nt(W.polygonOffset,W.polygonOffsetFactor,W.polygonOffsetUnits),W.alphaToCoverage===!0?dt(n.SAMPLE_ALPHA_TO_COVERAGE):Ut(n.SAMPLE_ALPHA_TO_COVERAGE)}function ye(W){R!==W&&(W?n.frontFace(n.CW):n.frontFace(n.CCW),R=W)}function Wt(W){W!==lC?(dt(n.CULL_FACE),W!==k&&(W===r_?n.cullFace(n.BACK):W===cC?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Ut(n.CULL_FACE),k=W}function Ve(W){W!==H&&(j&&n.lineWidth(W),H=W)}function Nt(W,yt,Ct){W?(dt(n.POLYGON_OFFSET_FILL),(q!==yt||G!==Ct)&&(n.polygonOffset(yt,Ct),q=yt,G=Ct)):Ut(n.POLYGON_OFFSET_FILL)}function ue(W){W?dt(n.SCISSOR_TEST):Ut(n.SCISSOR_TEST)}function hn(W){W===void 0&&(W=n.TEXTURE0+Y-1),ct!==W&&(n.activeTexture(W),ct=W)}function nn(W,yt,Ct){Ct===void 0&&(ct===null?Ct=n.TEXTURE0+Y-1:Ct=ct);let kt=rt[Ct];kt===void 0&&(kt={type:void 0,texture:void 0},rt[Ct]=kt),(kt.type!==W||kt.texture!==yt)&&(ct!==Ct&&(n.activeTexture(Ct),ct=Ct),n.bindTexture(W,yt||st[W]),kt.type=W,kt.texture=yt)}function F(){const W=rt[ct];W!==void 0&&W.type!==void 0&&(n.bindTexture(W.type,null),W.type=void 0,W.texture=void 0)}function D(){try{n.compressedTexImage2D(...arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function Q(){try{n.compressedTexImage3D(...arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function at(){try{n.texSubImage2D(...arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function pt(){try{n.texSubImage3D(...arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function ot(){try{n.compressedTexSubImage2D(...arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function $t(){try{n.compressedTexSubImage3D(...arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function Mt(){try{n.texStorage2D(...arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function jt(){try{n.texStorage3D(...arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function Zt(){try{n.texImage2D(...arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function xt(){try{n.texImage3D(...arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function Tt(W){Dt.equals(W)===!1&&(n.scissor(W.x,W.y,W.z,W.w),Dt.copy(W))}function re(W){At.equals(W)===!1&&(n.viewport(W.x,W.y,W.z,W.w),At.copy(W))}function Yt(W,yt){let Ct=h.get(yt);Ct===void 0&&(Ct=new WeakMap,h.set(yt,Ct));let kt=Ct.get(W);kt===void 0&&(kt=n.getUniformBlockIndex(yt,W.name),Ct.set(W,kt))}function wt(W,yt){const kt=h.get(yt).get(W);c.get(yt)!==kt&&(n.uniformBlockBinding(yt,kt,W.__bindingPointIndex),c.set(yt,kt))}function de(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),f={},ct=null,rt={},d={},p=new WeakMap,g=[],v=null,y=!1,x=null,_=null,w=null,C=null,S=null,T=null,A=null,P=new pe(0,0,0),N=0,E=!1,R=null,k=null,H=null,q=null,G=null,Dt.set(0,0,n.canvas.width,n.canvas.height),At.set(0,0,n.canvas.width,n.canvas.height),r.reset(),o.reset(),l.reset()}return{buffers:{color:r,depth:o,stencil:l},enable:dt,disable:Ut,bindFramebuffer:Xt,drawBuffers:Ht,useProgram:Le,setBlending:Oe,setMaterial:Vt,setFlipSided:ye,setCullFace:Wt,setLineWidth:Ve,setPolygonOffset:Nt,setScissorTest:ue,activeTexture:hn,bindTexture:nn,unbindTexture:F,compressedTexImage2D:D,compressedTexImage3D:Q,texImage2D:Zt,texImage3D:xt,updateUBOMapping:Yt,uniformBlockBinding:wt,texStorage2D:Mt,texStorage3D:jt,texSubImage2D:at,texSubImage3D:pt,compressedTexSubImage2D:ot,compressedTexSubImage3D:$t,scissor:Tt,viewport:re,reset:de}}function rA(n,t,e,i,s,r,o){const l=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),h=new le,f=new WeakMap;let d;const p=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(F,D){return g?new OffscreenCanvas(F,D):ic("canvas")}function y(F,D,Q){let at=1;const pt=nn(F);if((pt.width>Q||pt.height>Q)&&(at=Q/Math.max(pt.width,pt.height)),at<1)if(typeof HTMLImageElement<"u"&&F instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&F instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&F instanceof ImageBitmap||typeof VideoFrame<"u"&&F instanceof VideoFrame){const ot=Math.floor(at*pt.width),$t=Math.floor(at*pt.height);d===void 0&&(d=v(ot,$t));const Mt=D?v(ot,$t):d;return Mt.width=ot,Mt.height=$t,Mt.getContext("2d").drawImage(F,0,0,ot,$t),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+pt.width+"x"+pt.height+") to ("+ot+"x"+$t+")."),Mt}else return"data"in F&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+pt.width+"x"+pt.height+")."),F;return F}function x(F){return F.generateMipmaps}function _(F){n.generateMipmap(F)}function w(F){return F.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:F.isWebGL3DRenderTarget?n.TEXTURE_3D:F.isWebGLArrayRenderTarget||F.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function C(F,D,Q,at,pt=!1){if(F!==null){if(n[F]!==void 0)return n[F];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+F+"'")}let ot=D;if(D===n.RED&&(Q===n.FLOAT&&(ot=n.R32F),Q===n.HALF_FLOAT&&(ot=n.R16F),Q===n.UNSIGNED_BYTE&&(ot=n.R8)),D===n.RED_INTEGER&&(Q===n.UNSIGNED_BYTE&&(ot=n.R8UI),Q===n.UNSIGNED_SHORT&&(ot=n.R16UI),Q===n.UNSIGNED_INT&&(ot=n.R32UI),Q===n.BYTE&&(ot=n.R8I),Q===n.SHORT&&(ot=n.R16I),Q===n.INT&&(ot=n.R32I)),D===n.RG&&(Q===n.FLOAT&&(ot=n.RG32F),Q===n.HALF_FLOAT&&(ot=n.RG16F),Q===n.UNSIGNED_BYTE&&(ot=n.RG8)),D===n.RG_INTEGER&&(Q===n.UNSIGNED_BYTE&&(ot=n.RG8UI),Q===n.UNSIGNED_SHORT&&(ot=n.RG16UI),Q===n.UNSIGNED_INT&&(ot=n.RG32UI),Q===n.BYTE&&(ot=n.RG8I),Q===n.SHORT&&(ot=n.RG16I),Q===n.INT&&(ot=n.RG32I)),D===n.RGB_INTEGER&&(Q===n.UNSIGNED_BYTE&&(ot=n.RGB8UI),Q===n.UNSIGNED_SHORT&&(ot=n.RGB16UI),Q===n.UNSIGNED_INT&&(ot=n.RGB32UI),Q===n.BYTE&&(ot=n.RGB8I),Q===n.SHORT&&(ot=n.RGB16I),Q===n.INT&&(ot=n.RGB32I)),D===n.RGBA_INTEGER&&(Q===n.UNSIGNED_BYTE&&(ot=n.RGBA8UI),Q===n.UNSIGNED_SHORT&&(ot=n.RGBA16UI),Q===n.UNSIGNED_INT&&(ot=n.RGBA32UI),Q===n.BYTE&&(ot=n.RGBA8I),Q===n.SHORT&&(ot=n.RGBA16I),Q===n.INT&&(ot=n.RGBA32I)),D===n.RGB&&Q===n.UNSIGNED_INT_5_9_9_9_REV&&(ot=n.RGB9_E5),D===n.RGBA){const $t=pt?iu:Fe.getTransfer(at);Q===n.FLOAT&&(ot=n.RGBA32F),Q===n.HALF_FLOAT&&(ot=n.RGBA16F),Q===n.UNSIGNED_BYTE&&(ot=$t===Ke?n.SRGB8_ALPHA8:n.RGBA8),Q===n.UNSIGNED_SHORT_4_4_4_4&&(ot=n.RGBA4),Q===n.UNSIGNED_SHORT_5_5_5_1&&(ot=n.RGB5_A1)}return(ot===n.R16F||ot===n.R32F||ot===n.RG16F||ot===n.RG32F||ot===n.RGBA16F||ot===n.RGBA32F)&&t.get("EXT_color_buffer_float"),ot}function S(F,D){let Q;return F?D===null||D===Mo||D===Jl?Q=n.DEPTH24_STENCIL8:D===ji?Q=n.DEPTH32F_STENCIL8:D===Kl&&(Q=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):D===null||D===Mo||D===Jl?Q=n.DEPTH_COMPONENT24:D===ji?Q=n.DEPTH_COMPONENT32F:D===Kl&&(Q=n.DEPTH_COMPONENT16),Q}function T(F,D){return x(F)===!0||F.isFramebufferTexture&&F.minFilter!==ni&&F.minFilter!==yi?Math.log2(Math.max(D.width,D.height))+1:F.mipmaps!==void 0&&F.mipmaps.length>0?F.mipmaps.length:F.isCompressedTexture&&Array.isArray(F.image)?D.mipmaps.length:1}function A(F){const D=F.target;D.removeEventListener("dispose",A),N(D),D.isVideoTexture&&f.delete(D)}function P(F){const D=F.target;D.removeEventListener("dispose",P),R(D)}function N(F){const D=i.get(F);if(D.__webglInit===void 0)return;const Q=F.source,at=p.get(Q);if(at){const pt=at[D.__cacheKey];pt.usedTimes--,pt.usedTimes===0&&E(F),Object.keys(at).length===0&&p.delete(Q)}i.remove(F)}function E(F){const D=i.get(F);n.deleteTexture(D.__webglTexture);const Q=F.source,at=p.get(Q);delete at[D.__cacheKey],o.memory.textures--}function R(F){const D=i.get(F);if(F.depthTexture&&(F.depthTexture.dispose(),i.remove(F.depthTexture)),F.isWebGLCubeRenderTarget)for(let at=0;at<6;at++){if(Array.isArray(D.__webglFramebuffer[at]))for(let pt=0;pt<D.__webglFramebuffer[at].length;pt++)n.deleteFramebuffer(D.__webglFramebuffer[at][pt]);else n.deleteFramebuffer(D.__webglFramebuffer[at]);D.__webglDepthbuffer&&n.deleteRenderbuffer(D.__webglDepthbuffer[at])}else{if(Array.isArray(D.__webglFramebuffer))for(let at=0;at<D.__webglFramebuffer.length;at++)n.deleteFramebuffer(D.__webglFramebuffer[at]);else n.deleteFramebuffer(D.__webglFramebuffer);if(D.__webglDepthbuffer&&n.deleteRenderbuffer(D.__webglDepthbuffer),D.__webglMultisampledFramebuffer&&n.deleteFramebuffer(D.__webglMultisampledFramebuffer),D.__webglColorRenderbuffer)for(let at=0;at<D.__webglColorRenderbuffer.length;at++)D.__webglColorRenderbuffer[at]&&n.deleteRenderbuffer(D.__webglColorRenderbuffer[at]);D.__webglDepthRenderbuffer&&n.deleteRenderbuffer(D.__webglDepthRenderbuffer)}const Q=F.textures;for(let at=0,pt=Q.length;at<pt;at++){const ot=i.get(Q[at]);ot.__webglTexture&&(n.deleteTexture(ot.__webglTexture),o.memory.textures--),i.remove(Q[at])}i.remove(F)}let k=0;function H(){k=0}function q(){const F=k;return F>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+F+" texture units while this GPU supports only "+s.maxTextures),k+=1,F}function G(F){const D=[];return D.push(F.wrapS),D.push(F.wrapT),D.push(F.wrapR||0),D.push(F.magFilter),D.push(F.minFilter),D.push(F.anisotropy),D.push(F.internalFormat),D.push(F.format),D.push(F.type),D.push(F.generateMipmaps),D.push(F.premultiplyAlpha),D.push(F.flipY),D.push(F.unpackAlignment),D.push(F.colorSpace),D.join()}function Y(F,D){const Q=i.get(F);if(F.isVideoTexture&&ue(F),F.isRenderTargetTexture===!1&&F.isExternalTexture!==!0&&F.version>0&&Q.__version!==F.version){const at=F.image;if(at===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(at.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{st(Q,F,D);return}}else F.isExternalTexture&&(Q.__webglTexture=F.sourceTexture?F.sourceTexture:null);e.bindTexture(n.TEXTURE_2D,Q.__webglTexture,n.TEXTURE0+D)}function j(F,D){const Q=i.get(F);if(F.isRenderTargetTexture===!1&&F.version>0&&Q.__version!==F.version){st(Q,F,D);return}e.bindTexture(n.TEXTURE_2D_ARRAY,Q.__webglTexture,n.TEXTURE0+D)}function et(F,D){const Q=i.get(F);if(F.isRenderTargetTexture===!1&&F.version>0&&Q.__version!==F.version){st(Q,F,D);return}e.bindTexture(n.TEXTURE_3D,Q.__webglTexture,n.TEXTURE0+D)}function V(F,D){const Q=i.get(F);if(F.version>0&&Q.__version!==F.version){dt(Q,F,D);return}e.bindTexture(n.TEXTURE_CUBE_MAP,Q.__webglTexture,n.TEXTURE0+D)}const ct={[Pa]:n.REPEAT,[vr]:n.CLAMP_TO_EDGE,[nu]:n.MIRRORED_REPEAT},rt={[ni]:n.NEAREST,[px]:n.NEAREST_MIPMAP_NEAREST,[Pl]:n.NEAREST_MIPMAP_LINEAR,[yi]:n.LINEAR,[Uh]:n.LINEAR_MIPMAP_NEAREST,[Vs]:n.LINEAR_MIPMAP_LINEAR},gt={[GC]:n.NEVER,[$C]:n.ALWAYS,[jC]:n.LESS,[Cx]:n.LEQUAL,[XC]:n.EQUAL,[qC]:n.GEQUAL,[ZC]:n.GREATER,[YC]:n.NOTEQUAL};function It(F,D){if(D.type===ji&&t.has("OES_texture_float_linear")===!1&&(D.magFilter===yi||D.magFilter===Uh||D.magFilter===Pl||D.magFilter===Vs||D.minFilter===yi||D.minFilter===Uh||D.minFilter===Pl||D.minFilter===Vs)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(F,n.TEXTURE_WRAP_S,ct[D.wrapS]),n.texParameteri(F,n.TEXTURE_WRAP_T,ct[D.wrapT]),(F===n.TEXTURE_3D||F===n.TEXTURE_2D_ARRAY)&&n.texParameteri(F,n.TEXTURE_WRAP_R,ct[D.wrapR]),n.texParameteri(F,n.TEXTURE_MAG_FILTER,rt[D.magFilter]),n.texParameteri(F,n.TEXTURE_MIN_FILTER,rt[D.minFilter]),D.compareFunction&&(n.texParameteri(F,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(F,n.TEXTURE_COMPARE_FUNC,gt[D.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(D.magFilter===ni||D.minFilter!==Pl&&D.minFilter!==Vs||D.type===ji&&t.has("OES_texture_float_linear")===!1)return;if(D.anisotropy>1||i.get(D).__currentAnisotropy){const Q=t.get("EXT_texture_filter_anisotropic");n.texParameterf(F,Q.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(D.anisotropy,s.getMaxAnisotropy())),i.get(D).__currentAnisotropy=D.anisotropy}}}function Dt(F,D){let Q=!1;F.__webglInit===void 0&&(F.__webglInit=!0,D.addEventListener("dispose",A));const at=D.source;let pt=p.get(at);pt===void 0&&(pt={},p.set(at,pt));const ot=G(D);if(ot!==F.__cacheKey){pt[ot]===void 0&&(pt[ot]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,Q=!0),pt[ot].usedTimes++;const $t=pt[F.__cacheKey];$t!==void 0&&(pt[F.__cacheKey].usedTimes--,$t.usedTimes===0&&E(D)),F.__cacheKey=ot,F.__webglTexture=pt[ot].texture}return Q}function At(F,D,Q){return Math.floor(Math.floor(F/Q)/D)}function K(F,D,Q,at){const ot=F.updateRanges;if(ot.length===0)e.texSubImage2D(n.TEXTURE_2D,0,0,0,D.width,D.height,Q,at,D.data);else{ot.sort((xt,Tt)=>xt.start-Tt.start);let $t=0;for(let xt=1;xt<ot.length;xt++){const Tt=ot[$t],re=ot[xt],Yt=Tt.start+Tt.count,wt=At(re.start,D.width,4),de=At(Tt.start,D.width,4);re.start<=Yt+1&&wt===de&&At(re.start+re.count-1,D.width,4)===wt?Tt.count=Math.max(Tt.count,re.start+re.count-Tt.start):(++$t,ot[$t]=re)}ot.length=$t+1;const Mt=n.getParameter(n.UNPACK_ROW_LENGTH),jt=n.getParameter(n.UNPACK_SKIP_PIXELS),Zt=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,D.width);for(let xt=0,Tt=ot.length;xt<Tt;xt++){const re=ot[xt],Yt=Math.floor(re.start/4),wt=Math.ceil(re.count/4),de=Yt%D.width,W=Math.floor(Yt/D.width),yt=wt,Ct=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,de),n.pixelStorei(n.UNPACK_SKIP_ROWS,W),e.texSubImage2D(n.TEXTURE_2D,0,de,W,yt,Ct,Q,at,D.data)}F.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,Mt),n.pixelStorei(n.UNPACK_SKIP_PIXELS,jt),n.pixelStorei(n.UNPACK_SKIP_ROWS,Zt)}}function st(F,D,Q){let at=n.TEXTURE_2D;(D.isDataArrayTexture||D.isCompressedArrayTexture)&&(at=n.TEXTURE_2D_ARRAY),D.isData3DTexture&&(at=n.TEXTURE_3D);const pt=Dt(F,D),ot=D.source;e.bindTexture(at,F.__webglTexture,n.TEXTURE0+Q);const $t=i.get(ot);if(ot.version!==$t.__version||pt===!0){e.activeTexture(n.TEXTURE0+Q);const Mt=Fe.getPrimaries(Fe.workingColorSpace),jt=D.colorSpace===pr?null:Fe.getPrimaries(D.colorSpace),Zt=D.colorSpace===pr||Mt===jt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,D.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,D.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Zt);let xt=y(D.image,!1,s.maxTextureSize);xt=hn(D,xt);const Tt=r.convert(D.format,D.colorSpace),re=r.convert(D.type);let Yt=C(D.internalFormat,Tt,re,D.colorSpace,D.isVideoTexture);It(at,D);let wt;const de=D.mipmaps,W=D.isVideoTexture!==!0,yt=$t.__version===void 0||pt===!0,Ct=ot.dataReady,kt=T(D,xt);if(D.isDepthTexture)Yt=S(D.format===tc,D.type),yt&&(W?e.texStorage2D(n.TEXTURE_2D,1,Yt,xt.width,xt.height):e.texImage2D(n.TEXTURE_2D,0,Yt,xt.width,xt.height,0,Tt,re,null));else if(D.isDataTexture)if(de.length>0){W&&yt&&e.texStorage2D(n.TEXTURE_2D,kt,Yt,de[0].width,de[0].height);for(let _t=0,lt=de.length;_t<lt;_t++)wt=de[_t],W?Ct&&e.texSubImage2D(n.TEXTURE_2D,_t,0,0,wt.width,wt.height,Tt,re,wt.data):e.texImage2D(n.TEXTURE_2D,_t,Yt,wt.width,wt.height,0,Tt,re,wt.data);D.generateMipmaps=!1}else W?(yt&&e.texStorage2D(n.TEXTURE_2D,kt,Yt,xt.width,xt.height),Ct&&K(D,xt,Tt,re)):e.texImage2D(n.TEXTURE_2D,0,Yt,xt.width,xt.height,0,Tt,re,xt.data);else if(D.isCompressedTexture)if(D.isCompressedArrayTexture){W&&yt&&e.texStorage3D(n.TEXTURE_2D_ARRAY,kt,Yt,de[0].width,de[0].height,xt.depth);for(let _t=0,lt=de.length;_t<lt;_t++)if(wt=de[_t],D.format!==Ri)if(Tt!==null)if(W){if(Ct)if(D.layerUpdates.size>0){const Gt=t0(wt.width,wt.height,D.format,D.type);for(const he of D.layerUpdates){const qe=wt.data.subarray(he*Gt/wt.data.BYTES_PER_ELEMENT,(he+1)*Gt/wt.data.BYTES_PER_ELEMENT);e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,_t,0,0,he,wt.width,wt.height,1,Tt,qe)}D.clearLayerUpdates()}else e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,_t,0,0,0,wt.width,wt.height,xt.depth,Tt,wt.data)}else e.compressedTexImage3D(n.TEXTURE_2D_ARRAY,_t,Yt,wt.width,wt.height,xt.depth,0,wt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else W?Ct&&e.texSubImage3D(n.TEXTURE_2D_ARRAY,_t,0,0,0,wt.width,wt.height,xt.depth,Tt,re,wt.data):e.texImage3D(n.TEXTURE_2D_ARRAY,_t,Yt,wt.width,wt.height,xt.depth,0,Tt,re,wt.data)}else{W&&yt&&e.texStorage2D(n.TEXTURE_2D,kt,Yt,de[0].width,de[0].height);for(let _t=0,lt=de.length;_t<lt;_t++)wt=de[_t],D.format!==Ri?Tt!==null?W?Ct&&e.compressedTexSubImage2D(n.TEXTURE_2D,_t,0,0,wt.width,wt.height,Tt,wt.data):e.compressedTexImage2D(n.TEXTURE_2D,_t,Yt,wt.width,wt.height,0,wt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):W?Ct&&e.texSubImage2D(n.TEXTURE_2D,_t,0,0,wt.width,wt.height,Tt,re,wt.data):e.texImage2D(n.TEXTURE_2D,_t,Yt,wt.width,wt.height,0,Tt,re,wt.data)}else if(D.isDataArrayTexture)if(W){if(yt&&e.texStorage3D(n.TEXTURE_2D_ARRAY,kt,Yt,xt.width,xt.height,xt.depth),Ct)if(D.layerUpdates.size>0){const _t=t0(xt.width,xt.height,D.format,D.type);for(const lt of D.layerUpdates){const Gt=xt.data.subarray(lt*_t/xt.data.BYTES_PER_ELEMENT,(lt+1)*_t/xt.data.BYTES_PER_ELEMENT);e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,lt,xt.width,xt.height,1,Tt,re,Gt)}D.clearLayerUpdates()}else e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,xt.width,xt.height,xt.depth,Tt,re,xt.data)}else e.texImage3D(n.TEXTURE_2D_ARRAY,0,Yt,xt.width,xt.height,xt.depth,0,Tt,re,xt.data);else if(D.isData3DTexture)W?(yt&&e.texStorage3D(n.TEXTURE_3D,kt,Yt,xt.width,xt.height,xt.depth),Ct&&e.texSubImage3D(n.TEXTURE_3D,0,0,0,0,xt.width,xt.height,xt.depth,Tt,re,xt.data)):e.texImage3D(n.TEXTURE_3D,0,Yt,xt.width,xt.height,xt.depth,0,Tt,re,xt.data);else if(D.isFramebufferTexture){if(yt)if(W)e.texStorage2D(n.TEXTURE_2D,kt,Yt,xt.width,xt.height);else{let _t=xt.width,lt=xt.height;for(let Gt=0;Gt<kt;Gt++)e.texImage2D(n.TEXTURE_2D,Gt,Yt,_t,lt,0,Tt,re,null),_t>>=1,lt>>=1}}else if(de.length>0){if(W&&yt){const _t=nn(de[0]);e.texStorage2D(n.TEXTURE_2D,kt,Yt,_t.width,_t.height)}for(let _t=0,lt=de.length;_t<lt;_t++)wt=de[_t],W?Ct&&e.texSubImage2D(n.TEXTURE_2D,_t,0,0,Tt,re,wt):e.texImage2D(n.TEXTURE_2D,_t,Yt,Tt,re,wt);D.generateMipmaps=!1}else if(W){if(yt){const _t=nn(xt);e.texStorage2D(n.TEXTURE_2D,kt,Yt,_t.width,_t.height)}Ct&&e.texSubImage2D(n.TEXTURE_2D,0,0,0,Tt,re,xt)}else e.texImage2D(n.TEXTURE_2D,0,Yt,Tt,re,xt);x(D)&&_(at),$t.__version=ot.version,D.onUpdate&&D.onUpdate(D)}F.__version=D.version}function dt(F,D,Q){if(D.image.length!==6)return;const at=Dt(F,D),pt=D.source;e.bindTexture(n.TEXTURE_CUBE_MAP,F.__webglTexture,n.TEXTURE0+Q);const ot=i.get(pt);if(pt.version!==ot.__version||at===!0){e.activeTexture(n.TEXTURE0+Q);const $t=Fe.getPrimaries(Fe.workingColorSpace),Mt=D.colorSpace===pr?null:Fe.getPrimaries(D.colorSpace),jt=D.colorSpace===pr||$t===Mt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,D.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,D.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,jt);const Zt=D.isCompressedTexture||D.image[0].isCompressedTexture,xt=D.image[0]&&D.image[0].isDataTexture,Tt=[];for(let lt=0;lt<6;lt++)!Zt&&!xt?Tt[lt]=y(D.image[lt],!0,s.maxCubemapSize):Tt[lt]=xt?D.image[lt].image:D.image[lt],Tt[lt]=hn(D,Tt[lt]);const re=Tt[0],Yt=r.convert(D.format,D.colorSpace),wt=r.convert(D.type),de=C(D.internalFormat,Yt,wt,D.colorSpace),W=D.isVideoTexture!==!0,yt=ot.__version===void 0||at===!0,Ct=pt.dataReady;let kt=T(D,re);It(n.TEXTURE_CUBE_MAP,D);let _t;if(Zt){W&&yt&&e.texStorage2D(n.TEXTURE_CUBE_MAP,kt,de,re.width,re.height);for(let lt=0;lt<6;lt++){_t=Tt[lt].mipmaps;for(let Gt=0;Gt<_t.length;Gt++){const he=_t[Gt];D.format!==Ri?Yt!==null?W?Ct&&e.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+lt,Gt,0,0,he.width,he.height,Yt,he.data):e.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+lt,Gt,de,he.width,he.height,0,he.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):W?Ct&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+lt,Gt,0,0,he.width,he.height,Yt,wt,he.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+lt,Gt,de,he.width,he.height,0,Yt,wt,he.data)}}}else{if(_t=D.mipmaps,W&&yt){_t.length>0&&kt++;const lt=nn(Tt[0]);e.texStorage2D(n.TEXTURE_CUBE_MAP,kt,de,lt.width,lt.height)}for(let lt=0;lt<6;lt++)if(xt){W?Ct&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+lt,0,0,0,Tt[lt].width,Tt[lt].height,Yt,wt,Tt[lt].data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+lt,0,de,Tt[lt].width,Tt[lt].height,0,Yt,wt,Tt[lt].data);for(let Gt=0;Gt<_t.length;Gt++){const qe=_t[Gt].image[lt].image;W?Ct&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+lt,Gt+1,0,0,qe.width,qe.height,Yt,wt,qe.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+lt,Gt+1,de,qe.width,qe.height,0,Yt,wt,qe.data)}}else{W?Ct&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+lt,0,0,0,Yt,wt,Tt[lt]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+lt,0,de,Yt,wt,Tt[lt]);for(let Gt=0;Gt<_t.length;Gt++){const he=_t[Gt];W?Ct&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+lt,Gt+1,0,0,Yt,wt,he.image[lt]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+lt,Gt+1,de,Yt,wt,he.image[lt])}}}x(D)&&_(n.TEXTURE_CUBE_MAP),ot.__version=pt.version,D.onUpdate&&D.onUpdate(D)}F.__version=D.version}function Ut(F,D,Q,at,pt,ot){const $t=r.convert(Q.format,Q.colorSpace),Mt=r.convert(Q.type),jt=C(Q.internalFormat,$t,Mt,Q.colorSpace),Zt=i.get(D),xt=i.get(Q);if(xt.__renderTarget=D,!Zt.__hasExternalTextures){const Tt=Math.max(1,D.width>>ot),re=Math.max(1,D.height>>ot);pt===n.TEXTURE_3D||pt===n.TEXTURE_2D_ARRAY?e.texImage3D(pt,ot,jt,Tt,re,D.depth,0,$t,Mt,null):e.texImage2D(pt,ot,jt,Tt,re,0,$t,Mt,null)}e.bindFramebuffer(n.FRAMEBUFFER,F),Nt(D)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,at,pt,xt.__webglTexture,0,Ve(D)):(pt===n.TEXTURE_2D||pt>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&pt<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,at,pt,xt.__webglTexture,ot),e.bindFramebuffer(n.FRAMEBUFFER,null)}function Xt(F,D,Q){if(n.bindRenderbuffer(n.RENDERBUFFER,F),D.depthBuffer){const at=D.depthTexture,pt=at&&at.isDepthTexture?at.type:null,ot=S(D.stencilBuffer,pt),$t=D.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Mt=Ve(D);Nt(D)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Mt,ot,D.width,D.height):Q?n.renderbufferStorageMultisample(n.RENDERBUFFER,Mt,ot,D.width,D.height):n.renderbufferStorage(n.RENDERBUFFER,ot,D.width,D.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,$t,n.RENDERBUFFER,F)}else{const at=D.textures;for(let pt=0;pt<at.length;pt++){const ot=at[pt],$t=r.convert(ot.format,ot.colorSpace),Mt=r.convert(ot.type),jt=C(ot.internalFormat,$t,Mt,ot.colorSpace),Zt=Ve(D);Q&&Nt(D)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Zt,jt,D.width,D.height):Nt(D)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Zt,jt,D.width,D.height):n.renderbufferStorage(n.RENDERBUFFER,jt,D.width,D.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ht(F,D){if(D&&D.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(n.FRAMEBUFFER,F),!(D.depthTexture&&D.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const at=i.get(D.depthTexture);at.__renderTarget=D,(!at.__webglTexture||D.depthTexture.image.width!==D.width||D.depthTexture.image.height!==D.height)&&(D.depthTexture.image.width=D.width,D.depthTexture.image.height=D.height,D.depthTexture.needsUpdate=!0),Y(D.depthTexture,0);const pt=at.__webglTexture,ot=Ve(D);if(D.depthTexture.format===Ql)Nt(D)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,pt,0,ot):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,pt,0);else if(D.depthTexture.format===tc)Nt(D)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,pt,0,ot):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,pt,0);else throw new Error("Unknown depthTexture format")}function Le(F){const D=i.get(F),Q=F.isWebGLCubeRenderTarget===!0;if(D.__boundDepthTexture!==F.depthTexture){const at=F.depthTexture;if(D.__depthDisposeCallback&&D.__depthDisposeCallback(),at){const pt=()=>{delete D.__boundDepthTexture,delete D.__depthDisposeCallback,at.removeEventListener("dispose",pt)};at.addEventListener("dispose",pt),D.__depthDisposeCallback=pt}D.__boundDepthTexture=at}if(F.depthTexture&&!D.__autoAllocateDepthBuffer){if(Q)throw new Error("target.depthTexture not supported in Cube render targets");const at=F.texture.mipmaps;at&&at.length>0?Ht(D.__webglFramebuffer[0],F):Ht(D.__webglFramebuffer,F)}else if(Q){D.__webglDepthbuffer=[];for(let at=0;at<6;at++)if(e.bindFramebuffer(n.FRAMEBUFFER,D.__webglFramebuffer[at]),D.__webglDepthbuffer[at]===void 0)D.__webglDepthbuffer[at]=n.createRenderbuffer(),Xt(D.__webglDepthbuffer[at],F,!1);else{const pt=F.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ot=D.__webglDepthbuffer[at];n.bindRenderbuffer(n.RENDERBUFFER,ot),n.framebufferRenderbuffer(n.FRAMEBUFFER,pt,n.RENDERBUFFER,ot)}}else{const at=F.texture.mipmaps;if(at&&at.length>0?e.bindFramebuffer(n.FRAMEBUFFER,D.__webglFramebuffer[0]):e.bindFramebuffer(n.FRAMEBUFFER,D.__webglFramebuffer),D.__webglDepthbuffer===void 0)D.__webglDepthbuffer=n.createRenderbuffer(),Xt(D.__webglDepthbuffer,F,!1);else{const pt=F.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ot=D.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,ot),n.framebufferRenderbuffer(n.FRAMEBUFFER,pt,n.RENDERBUFFER,ot)}}e.bindFramebuffer(n.FRAMEBUFFER,null)}function se(F,D,Q){const at=i.get(F);D!==void 0&&Ut(at.__webglFramebuffer,F,F.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),Q!==void 0&&Le(F)}function z(F){const D=F.texture,Q=i.get(F),at=i.get(D);F.addEventListener("dispose",P);const pt=F.textures,ot=F.isWebGLCubeRenderTarget===!0,$t=pt.length>1;if($t||(at.__webglTexture===void 0&&(at.__webglTexture=n.createTexture()),at.__version=D.version,o.memory.textures++),ot){Q.__webglFramebuffer=[];for(let Mt=0;Mt<6;Mt++)if(D.mipmaps&&D.mipmaps.length>0){Q.__webglFramebuffer[Mt]=[];for(let jt=0;jt<D.mipmaps.length;jt++)Q.__webglFramebuffer[Mt][jt]=n.createFramebuffer()}else Q.__webglFramebuffer[Mt]=n.createFramebuffer()}else{if(D.mipmaps&&D.mipmaps.length>0){Q.__webglFramebuffer=[];for(let Mt=0;Mt<D.mipmaps.length;Mt++)Q.__webglFramebuffer[Mt]=n.createFramebuffer()}else Q.__webglFramebuffer=n.createFramebuffer();if($t)for(let Mt=0,jt=pt.length;Mt<jt;Mt++){const Zt=i.get(pt[Mt]);Zt.__webglTexture===void 0&&(Zt.__webglTexture=n.createTexture(),o.memory.textures++)}if(F.samples>0&&Nt(F)===!1){Q.__webglMultisampledFramebuffer=n.createFramebuffer(),Q.__webglColorRenderbuffer=[],e.bindFramebuffer(n.FRAMEBUFFER,Q.__webglMultisampledFramebuffer);for(let Mt=0;Mt<pt.length;Mt++){const jt=pt[Mt];Q.__webglColorRenderbuffer[Mt]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,Q.__webglColorRenderbuffer[Mt]);const Zt=r.convert(jt.format,jt.colorSpace),xt=r.convert(jt.type),Tt=C(jt.internalFormat,Zt,xt,jt.colorSpace,F.isXRRenderTarget===!0),re=Ve(F);n.renderbufferStorageMultisample(n.RENDERBUFFER,re,Tt,F.width,F.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Mt,n.RENDERBUFFER,Q.__webglColorRenderbuffer[Mt])}n.bindRenderbuffer(n.RENDERBUFFER,null),F.depthBuffer&&(Q.__webglDepthRenderbuffer=n.createRenderbuffer(),Xt(Q.__webglDepthRenderbuffer,F,!0)),e.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ot){e.bindTexture(n.TEXTURE_CUBE_MAP,at.__webglTexture),It(n.TEXTURE_CUBE_MAP,D);for(let Mt=0;Mt<6;Mt++)if(D.mipmaps&&D.mipmaps.length>0)for(let jt=0;jt<D.mipmaps.length;jt++)Ut(Q.__webglFramebuffer[Mt][jt],F,D,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,jt);else Ut(Q.__webglFramebuffer[Mt],F,D,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,0);x(D)&&_(n.TEXTURE_CUBE_MAP),e.unbindTexture()}else if($t){for(let Mt=0,jt=pt.length;Mt<jt;Mt++){const Zt=pt[Mt],xt=i.get(Zt);let Tt=n.TEXTURE_2D;(F.isWebGL3DRenderTarget||F.isWebGLArrayRenderTarget)&&(Tt=F.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),e.bindTexture(Tt,xt.__webglTexture),It(Tt,Zt),Ut(Q.__webglFramebuffer,F,Zt,n.COLOR_ATTACHMENT0+Mt,Tt,0),x(Zt)&&_(Tt)}e.unbindTexture()}else{let Mt=n.TEXTURE_2D;if((F.isWebGL3DRenderTarget||F.isWebGLArrayRenderTarget)&&(Mt=F.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),e.bindTexture(Mt,at.__webglTexture),It(Mt,D),D.mipmaps&&D.mipmaps.length>0)for(let jt=0;jt<D.mipmaps.length;jt++)Ut(Q.__webglFramebuffer[jt],F,D,n.COLOR_ATTACHMENT0,Mt,jt);else Ut(Q.__webglFramebuffer,F,D,n.COLOR_ATTACHMENT0,Mt,0);x(D)&&_(Mt),e.unbindTexture()}F.depthBuffer&&Le(F)}function Oe(F){const D=F.textures;for(let Q=0,at=D.length;Q<at;Q++){const pt=D[Q];if(x(pt)){const ot=w(F),$t=i.get(pt).__webglTexture;e.bindTexture(ot,$t),_(ot),e.unbindTexture()}}}const Vt=[],ye=[];function Wt(F){if(F.samples>0){if(Nt(F)===!1){const D=F.textures,Q=F.width,at=F.height;let pt=n.COLOR_BUFFER_BIT;const ot=F.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,$t=i.get(F),Mt=D.length>1;if(Mt)for(let Zt=0;Zt<D.length;Zt++)e.bindFramebuffer(n.FRAMEBUFFER,$t.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Zt,n.RENDERBUFFER,null),e.bindFramebuffer(n.FRAMEBUFFER,$t.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Zt,n.TEXTURE_2D,null,0);e.bindFramebuffer(n.READ_FRAMEBUFFER,$t.__webglMultisampledFramebuffer);const jt=F.texture.mipmaps;jt&&jt.length>0?e.bindFramebuffer(n.DRAW_FRAMEBUFFER,$t.__webglFramebuffer[0]):e.bindFramebuffer(n.DRAW_FRAMEBUFFER,$t.__webglFramebuffer);for(let Zt=0;Zt<D.length;Zt++){if(F.resolveDepthBuffer&&(F.depthBuffer&&(pt|=n.DEPTH_BUFFER_BIT),F.stencilBuffer&&F.resolveStencilBuffer&&(pt|=n.STENCIL_BUFFER_BIT)),Mt){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,$t.__webglColorRenderbuffer[Zt]);const xt=i.get(D[Zt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,xt,0)}n.blitFramebuffer(0,0,Q,at,0,0,Q,at,pt,n.NEAREST),c===!0&&(Vt.length=0,ye.length=0,Vt.push(n.COLOR_ATTACHMENT0+Zt),F.depthBuffer&&F.resolveDepthBuffer===!1&&(Vt.push(ot),ye.push(ot),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,ye)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Vt))}if(e.bindFramebuffer(n.READ_FRAMEBUFFER,null),e.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Mt)for(let Zt=0;Zt<D.length;Zt++){e.bindFramebuffer(n.FRAMEBUFFER,$t.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Zt,n.RENDERBUFFER,$t.__webglColorRenderbuffer[Zt]);const xt=i.get(D[Zt]).__webglTexture;e.bindFramebuffer(n.FRAMEBUFFER,$t.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Zt,n.TEXTURE_2D,xt,0)}e.bindFramebuffer(n.DRAW_FRAMEBUFFER,$t.__webglMultisampledFramebuffer)}else if(F.depthBuffer&&F.resolveDepthBuffer===!1&&c){const D=F.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[D])}}}function Ve(F){return Math.min(s.maxSamples,F.samples)}function Nt(F){const D=i.get(F);return F.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&D.__useRenderToTexture!==!1}function ue(F){const D=o.render.frame;f.get(F)!==D&&(f.set(F,D),F.update())}function hn(F,D){const Q=F.colorSpace,at=F.format,pt=F.type;return F.isCompressedTexture===!0||F.isVideoTexture===!0||Q!==si&&Q!==pr&&(Fe.getTransfer(Q)===Ke?(at!==Ri||pt!==ms)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Q)),D}function nn(F){return typeof HTMLImageElement<"u"&&F instanceof HTMLImageElement?(h.width=F.naturalWidth||F.width,h.height=F.naturalHeight||F.height):typeof VideoFrame<"u"&&F instanceof VideoFrame?(h.width=F.displayWidth,h.height=F.displayHeight):(h.width=F.width,h.height=F.height),h}this.allocateTextureUnit=q,this.resetTextureUnits=H,this.setTexture2D=Y,this.setTexture2DArray=j,this.setTexture3D=et,this.setTextureCube=V,this.rebindTextures=se,this.setupRenderTarget=z,this.updateRenderTargetMipmap=Oe,this.updateMultisampleRenderTarget=Wt,this.setupDepthRenderbuffer=Le,this.setupFrameBufferTexture=Ut,this.useMultisampledRTT=Nt}function oA(n,t){function e(i,s=pr){let r;const o=Fe.getTransfer(s);if(i===ms)return n.UNSIGNED_BYTE;if(i===Dm)return n.UNSIGNED_SHORT_4_4_4_4;if(i===Om)return n.UNSIGNED_SHORT_5_5_5_1;if(i===_x)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===mx)return n.BYTE;if(i===gx)return n.SHORT;if(i===Kl)return n.UNSIGNED_SHORT;if(i===Im)return n.INT;if(i===Mo)return n.UNSIGNED_INT;if(i===ji)return n.FLOAT;if(i===xc)return n.HALF_FLOAT;if(i===vx)return n.ALPHA;if(i===xx)return n.RGB;if(i===Ri)return n.RGBA;if(i===Ql)return n.DEPTH_COMPONENT;if(i===tc)return n.DEPTH_STENCIL;if(i===Nm)return n.RED;if(i===km)return n.RED_INTEGER;if(i===yx)return n.RG;if(i===Fm)return n.RG_INTEGER;if(i===Um)return n.RGBA_INTEGER;if(i===Bh||i===zh||i===Hh||i===Vh)if(o===Ke)if(r=t.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(i===Bh)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===zh)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Hh)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Vh)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=t.get("WEBGL_compressed_texture_s3tc"),r!==null){if(i===Bh)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===zh)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Hh)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Vh)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===pp||i===mp||i===gp||i===_p)if(r=t.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(i===pp)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===mp)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===gp)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===_p)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===vp||i===xp||i===yp)if(r=t.get("WEBGL_compressed_texture_etc"),r!==null){if(i===vp||i===xp)return o===Ke?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(i===yp)return o===Ke?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===bp||i===Mp||i===Sp||i===Cp||i===wp||i===Tp||i===Ep||i===Ap||i===Pp||i===Rp||i===Lp||i===Ip||i===Dp||i===Op)if(r=t.get("WEBGL_compressed_texture_astc"),r!==null){if(i===bp)return o===Ke?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Mp)return o===Ke?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Sp)return o===Ke?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Cp)return o===Ke?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===wp)return o===Ke?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Tp)return o===Ke?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===Ep)return o===Ke?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Ap)return o===Ke?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Pp)return o===Ke?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Rp)return o===Ke?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Lp)return o===Ke?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Ip)return o===Ke?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Dp)return o===Ke?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Op)return o===Ke?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Wh||i===Np||i===kp)if(r=t.get("EXT_texture_compression_bptc"),r!==null){if(i===Wh)return o===Ke?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===Np)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===kp)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===bx||i===Fp||i===Up||i===Bp)if(r=t.get("EXT_texture_compression_rgtc"),r!==null){if(i===Wh)return r.COMPRESSED_RED_RGTC1_EXT;if(i===Fp)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===Up)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===Bp)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Jl?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:e}}class Zx extends Dn{constructor(t=null){super(),this.sourceTexture=t,this.isExternalTexture=!0}}const aA=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,lA=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class cA{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e){if(this.texture===null){const i=new Zx(t.texture);(t.depthNear!==e.depthNear||t.depthFar!==e.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(t){if(this.texture!==null&&this.mesh===null){const e=t.cameras[0].viewport,i=new Dr({vertexShader:aA,fragmentShader:lA,uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new ti(new Ou(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class hA extends Ro{constructor(t,e){super();const i=this;let s=null,r=1,o=null,l="local-floor",c=1,h=null,f=null,d=null,p=null,g=null,v=null;const y=new cA,x={},_=e.getContextAttributes();let w=null,C=null;const S=[],T=[],A=new le;let P=null;const N=new Jn;N.viewport=new Ge;const E=new Jn;E.viewport=new Ge;const R=[N,E],k=new y9;let H=null,q=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(K){let st=S[K];return st===void 0&&(st=new Qf,S[K]=st),st.getTargetRaySpace()},this.getControllerGrip=function(K){let st=S[K];return st===void 0&&(st=new Qf,S[K]=st),st.getGripSpace()},this.getHand=function(K){let st=S[K];return st===void 0&&(st=new Qf,S[K]=st),st.getHandSpace()};function G(K){const st=T.indexOf(K.inputSource);if(st===-1)return;const dt=S[st];dt!==void 0&&(dt.update(K.inputSource,K.frame,h||o),dt.dispatchEvent({type:K.type,data:K.inputSource}))}function Y(){s.removeEventListener("select",G),s.removeEventListener("selectstart",G),s.removeEventListener("selectend",G),s.removeEventListener("squeeze",G),s.removeEventListener("squeezestart",G),s.removeEventListener("squeezeend",G),s.removeEventListener("end",Y),s.removeEventListener("inputsourceschange",j);for(let K=0;K<S.length;K++){const st=T[K];st!==null&&(T[K]=null,S[K].disconnect(st))}H=null,q=null,y.reset();for(const K in x)delete x[K];t.setRenderTarget(w),g=null,p=null,d=null,s=null,C=null,At.stop(),i.isPresenting=!1,t.setPixelRatio(P),t.setSize(A.width,A.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(K){r=K,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(K){l=K,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||o},this.setReferenceSpace=function(K){h=K},this.getBaseLayer=function(){return p!==null?p:g},this.getBinding=function(){return d},this.getFrame=function(){return v},this.getSession=function(){return s},this.setSession=async function(K){if(s=K,s!==null){if(w=t.getRenderTarget(),s.addEventListener("select",G),s.addEventListener("selectstart",G),s.addEventListener("selectend",G),s.addEventListener("squeeze",G),s.addEventListener("squeezestart",G),s.addEventListener("squeezeend",G),s.addEventListener("end",Y),s.addEventListener("inputsourceschange",j),_.xrCompatible!==!0&&await e.makeXRCompatible(),P=t.getPixelRatio(),t.getSize(A),typeof XRWebGLBinding<"u"&&(d=new XRWebGLBinding(s,e)),d!==null&&"createProjectionLayer"in XRWebGLBinding.prototype){let dt=null,Ut=null,Xt=null;_.depth&&(Xt=_.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,dt=_.stencil?tc:Ql,Ut=_.stencil?Jl:Mo);const Ht={colorFormat:e.RGBA8,depthFormat:Xt,scaleFactor:r};p=d.createProjectionLayer(Ht),s.updateRenderState({layers:[p]}),t.setPixelRatio(1),t.setSize(p.textureWidth,p.textureHeight,!1),C=new So(p.textureWidth,p.textureHeight,{format:Ri,type:ms,depthTexture:new Fx(p.textureWidth,p.textureHeight,Ut,void 0,void 0,void 0,void 0,void 0,void 0,dt),stencilBuffer:_.stencil,colorSpace:t.outputColorSpace,samples:_.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1,resolveStencilBuffer:p.ignoreDepthValues===!1})}else{const dt={antialias:_.antialias,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:r};g=new XRWebGLLayer(s,e,dt),s.updateRenderState({baseLayer:g}),t.setPixelRatio(1),t.setSize(g.framebufferWidth,g.framebufferHeight,!1),C=new So(g.framebufferWidth,g.framebufferHeight,{format:Ri,type:ms,colorSpace:t.outputColorSpace,stencilBuffer:_.stencil,resolveDepthBuffer:g.ignoreDepthValues===!1,resolveStencilBuffer:g.ignoreDepthValues===!1})}C.isXRRenderTarget=!0,this.setFoveation(c),h=null,o=await s.requestReferenceSpace(l),At.setContext(s),At.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return y.getDepthTexture()};function j(K){for(let st=0;st<K.removed.length;st++){const dt=K.removed[st],Ut=T.indexOf(dt);Ut>=0&&(T[Ut]=null,S[Ut].disconnect(dt))}for(let st=0;st<K.added.length;st++){const dt=K.added[st];let Ut=T.indexOf(dt);if(Ut===-1){for(let Ht=0;Ht<S.length;Ht++)if(Ht>=T.length){T.push(dt),Ut=Ht;break}else if(T[Ht]===null){T[Ht]=dt,Ut=Ht;break}if(Ut===-1)break}const Xt=S[Ut];Xt&&Xt.connect(dt)}}const et=new X,V=new X;function ct(K,st,dt){et.setFromMatrixPosition(st.matrixWorld),V.setFromMatrixPosition(dt.matrixWorld);const Ut=et.distanceTo(V),Xt=st.projectionMatrix.elements,Ht=dt.projectionMatrix.elements,Le=Xt[14]/(Xt[10]-1),se=Xt[14]/(Xt[10]+1),z=(Xt[9]+1)/Xt[5],Oe=(Xt[9]-1)/Xt[5],Vt=(Xt[8]-1)/Xt[0],ye=(Ht[8]+1)/Ht[0],Wt=Le*Vt,Ve=Le*ye,Nt=Ut/(-Vt+ye),ue=Nt*-Vt;if(st.matrixWorld.decompose(K.position,K.quaternion,K.scale),K.translateX(ue),K.translateZ(Nt),K.matrixWorld.compose(K.position,K.quaternion,K.scale),K.matrixWorldInverse.copy(K.matrixWorld).invert(),Xt[10]===-1)K.projectionMatrix.copy(st.projectionMatrix),K.projectionMatrixInverse.copy(st.projectionMatrixInverse);else{const hn=Le+Nt,nn=se+Nt,F=Wt-ue,D=Ve+(Ut-ue),Q=z*se/nn*hn,at=Oe*se/nn*hn;K.projectionMatrix.makePerspective(F,D,Q,at,hn,nn),K.projectionMatrixInverse.copy(K.projectionMatrix).invert()}}function rt(K,st){st===null?K.matrixWorld.copy(K.matrix):K.matrixWorld.multiplyMatrices(st.matrixWorld,K.matrix),K.matrixWorldInverse.copy(K.matrixWorld).invert()}this.updateCamera=function(K){if(s===null)return;let st=K.near,dt=K.far;y.texture!==null&&(y.depthNear>0&&(st=y.depthNear),y.depthFar>0&&(dt=y.depthFar)),k.near=E.near=N.near=st,k.far=E.far=N.far=dt,(H!==k.near||q!==k.far)&&(s.updateRenderState({depthNear:k.near,depthFar:k.far}),H=k.near,q=k.far),k.layers.mask=K.layers.mask|6,N.layers.mask=k.layers.mask&3,E.layers.mask=k.layers.mask&5;const Ut=K.parent,Xt=k.cameras;rt(k,Ut);for(let Ht=0;Ht<Xt.length;Ht++)rt(Xt[Ht],Ut);Xt.length===2?ct(k,N,E):k.projectionMatrix.copy(N.projectionMatrix),gt(K,k,Ut)};function gt(K,st,dt){dt===null?K.matrix.copy(st.matrixWorld):(K.matrix.copy(dt.matrixWorld),K.matrix.invert(),K.matrix.multiply(st.matrixWorld)),K.matrix.decompose(K.position,K.quaternion,K.scale),K.updateMatrixWorld(!0),K.projectionMatrix.copy(st.projectionMatrix),K.projectionMatrixInverse.copy(st.projectionMatrixInverse),K.isPerspectiveCamera&&(K.fov=Ra*2*Math.atan(1/K.projectionMatrix.elements[5]),K.zoom=1)}this.getCamera=function(){return k},this.getFoveation=function(){if(!(p===null&&g===null))return c},this.setFoveation=function(K){c=K,p!==null&&(p.fixedFoveation=K),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=K)},this.hasDepthSensing=function(){return y.texture!==null},this.getDepthSensingMesh=function(){return y.getMesh(k)},this.getCameraTexture=function(K){return x[K]};let It=null;function Dt(K,st){if(f=st.getViewerPose(h||o),v=st,f!==null){const dt=f.views;g!==null&&(t.setRenderTargetFramebuffer(C,g.framebuffer),t.setRenderTarget(C));let Ut=!1;dt.length!==k.cameras.length&&(k.cameras.length=0,Ut=!0);for(let se=0;se<dt.length;se++){const z=dt[se];let Oe=null;if(g!==null)Oe=g.getViewport(z);else{const ye=d.getViewSubImage(p,z);Oe=ye.viewport,se===0&&(t.setRenderTargetTextures(C,ye.colorTexture,ye.depthStencilTexture),t.setRenderTarget(C))}let Vt=R[se];Vt===void 0&&(Vt=new Jn,Vt.layers.enable(se),Vt.viewport=new Ge,R[se]=Vt),Vt.matrix.fromArray(z.transform.matrix),Vt.matrix.decompose(Vt.position,Vt.quaternion,Vt.scale),Vt.projectionMatrix.fromArray(z.projectionMatrix),Vt.projectionMatrixInverse.copy(Vt.projectionMatrix).invert(),Vt.viewport.set(Oe.x,Oe.y,Oe.width,Oe.height),se===0&&(k.matrix.copy(Vt.matrix),k.matrix.decompose(k.position,k.quaternion,k.scale)),Ut===!0&&k.cameras.push(Vt)}const Xt=s.enabledFeatures;if(Xt&&Xt.includes("depth-sensing")&&s.depthUsage=="gpu-optimized"&&d){const se=d.getDepthInformation(dt[0]);se&&se.isValid&&se.texture&&y.init(se,s.renderState)}if(Xt&&Xt.includes("camera-access")&&(t.state.unbindTexture(),d))for(let se=0;se<dt.length;se++){const z=dt[se].camera;if(z){let Oe=x[z];Oe||(Oe=new Zx,x[z]=Oe);const Vt=d.getCameraImage(z);Oe.sourceTexture=Vt}}}for(let dt=0;dt<S.length;dt++){const Ut=T[dt],Xt=S[dt];Ut!==null&&Xt!==void 0&&Xt.update(Ut,st,h||o)}It&&It(K,st),st.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:st}),v=null}const At=new Vx;At.setAnimationLoop(Dt),this.setAnimationLoop=function(K){It=K},this.dispose=function(){}}}const qr=new _s,uA=new _e;function fA(n,t){function e(x,_){x.matrixAutoUpdate===!0&&x.updateMatrix(),_.value.copy(x.matrix)}function i(x,_){_.color.getRGB(x.fogColor.value,Lx(n)),_.isFog?(x.fogNear.value=_.near,x.fogFar.value=_.far):_.isFogExp2&&(x.fogDensity.value=_.density)}function s(x,_,w,C,S){_.isMeshBasicMaterial||_.isMeshLambertMaterial?r(x,_):_.isMeshToonMaterial?(r(x,_),d(x,_)):_.isMeshPhongMaterial?(r(x,_),f(x,_)):_.isMeshStandardMaterial?(r(x,_),p(x,_),_.isMeshPhysicalMaterial&&g(x,_,S)):_.isMeshMatcapMaterial?(r(x,_),v(x,_)):_.isMeshDepthMaterial?r(x,_):_.isMeshDistanceMaterial?(r(x,_),y(x,_)):_.isMeshNormalMaterial?r(x,_):_.isLineBasicMaterial?(o(x,_),_.isLineDashedMaterial&&l(x,_)):_.isPointsMaterial?c(x,_,w,C):_.isSpriteMaterial?h(x,_):_.isShadowMaterial?(x.color.value.copy(_.color),x.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function r(x,_){x.opacity.value=_.opacity,_.color&&x.diffuse.value.copy(_.color),_.emissive&&x.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(x.map.value=_.map,e(_.map,x.mapTransform)),_.alphaMap&&(x.alphaMap.value=_.alphaMap,e(_.alphaMap,x.alphaMapTransform)),_.bumpMap&&(x.bumpMap.value=_.bumpMap,e(_.bumpMap,x.bumpMapTransform),x.bumpScale.value=_.bumpScale,_.side===ui&&(x.bumpScale.value*=-1)),_.normalMap&&(x.normalMap.value=_.normalMap,e(_.normalMap,x.normalMapTransform),x.normalScale.value.copy(_.normalScale),_.side===ui&&x.normalScale.value.negate()),_.displacementMap&&(x.displacementMap.value=_.displacementMap,e(_.displacementMap,x.displacementMapTransform),x.displacementScale.value=_.displacementScale,x.displacementBias.value=_.displacementBias),_.emissiveMap&&(x.emissiveMap.value=_.emissiveMap,e(_.emissiveMap,x.emissiveMapTransform)),_.specularMap&&(x.specularMap.value=_.specularMap,e(_.specularMap,x.specularMapTransform)),_.alphaTest>0&&(x.alphaTest.value=_.alphaTest);const w=t.get(_),C=w.envMap,S=w.envMapRotation;C&&(x.envMap.value=C,qr.copy(S),qr.x*=-1,qr.y*=-1,qr.z*=-1,C.isCubeTexture&&C.isRenderTargetTexture===!1&&(qr.y*=-1,qr.z*=-1),x.envMapRotation.value.setFromMatrix4(uA.makeRotationFromEuler(qr)),x.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=_.reflectivity,x.ior.value=_.ior,x.refractionRatio.value=_.refractionRatio),_.lightMap&&(x.lightMap.value=_.lightMap,x.lightMapIntensity.value=_.lightMapIntensity,e(_.lightMap,x.lightMapTransform)),_.aoMap&&(x.aoMap.value=_.aoMap,x.aoMapIntensity.value=_.aoMapIntensity,e(_.aoMap,x.aoMapTransform))}function o(x,_){x.diffuse.value.copy(_.color),x.opacity.value=_.opacity,_.map&&(x.map.value=_.map,e(_.map,x.mapTransform))}function l(x,_){x.dashSize.value=_.dashSize,x.totalSize.value=_.dashSize+_.gapSize,x.scale.value=_.scale}function c(x,_,w,C){x.diffuse.value.copy(_.color),x.opacity.value=_.opacity,x.size.value=_.size*w,x.scale.value=C*.5,_.map&&(x.map.value=_.map,e(_.map,x.uvTransform)),_.alphaMap&&(x.alphaMap.value=_.alphaMap,e(_.alphaMap,x.alphaMapTransform)),_.alphaTest>0&&(x.alphaTest.value=_.alphaTest)}function h(x,_){x.diffuse.value.copy(_.color),x.opacity.value=_.opacity,x.rotation.value=_.rotation,_.map&&(x.map.value=_.map,e(_.map,x.mapTransform)),_.alphaMap&&(x.alphaMap.value=_.alphaMap,e(_.alphaMap,x.alphaMapTransform)),_.alphaTest>0&&(x.alphaTest.value=_.alphaTest)}function f(x,_){x.specular.value.copy(_.specular),x.shininess.value=Math.max(_.shininess,1e-4)}function d(x,_){_.gradientMap&&(x.gradientMap.value=_.gradientMap)}function p(x,_){x.metalness.value=_.metalness,_.metalnessMap&&(x.metalnessMap.value=_.metalnessMap,e(_.metalnessMap,x.metalnessMapTransform)),x.roughness.value=_.roughness,_.roughnessMap&&(x.roughnessMap.value=_.roughnessMap,e(_.roughnessMap,x.roughnessMapTransform)),_.envMap&&(x.envMapIntensity.value=_.envMapIntensity)}function g(x,_,w){x.ior.value=_.ior,_.sheen>0&&(x.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),x.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(x.sheenColorMap.value=_.sheenColorMap,e(_.sheenColorMap,x.sheenColorMapTransform)),_.sheenRoughnessMap&&(x.sheenRoughnessMap.value=_.sheenRoughnessMap,e(_.sheenRoughnessMap,x.sheenRoughnessMapTransform))),_.clearcoat>0&&(x.clearcoat.value=_.clearcoat,x.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(x.clearcoatMap.value=_.clearcoatMap,e(_.clearcoatMap,x.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,e(_.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(x.clearcoatNormalMap.value=_.clearcoatNormalMap,e(_.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===ui&&x.clearcoatNormalScale.value.negate())),_.dispersion>0&&(x.dispersion.value=_.dispersion),_.iridescence>0&&(x.iridescence.value=_.iridescence,x.iridescenceIOR.value=_.iridescenceIOR,x.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(x.iridescenceMap.value=_.iridescenceMap,e(_.iridescenceMap,x.iridescenceMapTransform)),_.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=_.iridescenceThicknessMap,e(_.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),_.transmission>0&&(x.transmission.value=_.transmission,x.transmissionSamplerMap.value=w.texture,x.transmissionSamplerSize.value.set(w.width,w.height),_.transmissionMap&&(x.transmissionMap.value=_.transmissionMap,e(_.transmissionMap,x.transmissionMapTransform)),x.thickness.value=_.thickness,_.thicknessMap&&(x.thicknessMap.value=_.thicknessMap,e(_.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=_.attenuationDistance,x.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(x.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(x.anisotropyMap.value=_.anisotropyMap,e(_.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=_.specularIntensity,x.specularColor.value.copy(_.specularColor),_.specularColorMap&&(x.specularColorMap.value=_.specularColorMap,e(_.specularColorMap,x.specularColorMapTransform)),_.specularIntensityMap&&(x.specularIntensityMap.value=_.specularIntensityMap,e(_.specularIntensityMap,x.specularIntensityMapTransform))}function v(x,_){_.matcap&&(x.matcap.value=_.matcap)}function y(x,_){const w=t.get(_).light;x.referencePosition.value.setFromMatrixPosition(w.matrixWorld),x.nearDistance.value=w.shadow.camera.near,x.farDistance.value=w.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:s}}function dA(n,t,e,i){let s={},r={},o=[];const l=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function c(w,C){const S=C.program;i.uniformBlockBinding(w,S)}function h(w,C){let S=s[w.id];S===void 0&&(v(w),S=f(w),s[w.id]=S,w.addEventListener("dispose",x));const T=C.program;i.updateUBOMapping(w,T);const A=t.render.frame;r[w.id]!==A&&(p(w),r[w.id]=A)}function f(w){const C=d();w.__bindingPointIndex=C;const S=n.createBuffer(),T=w.__size,A=w.usage;return n.bindBuffer(n.UNIFORM_BUFFER,S),n.bufferData(n.UNIFORM_BUFFER,T,A),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,C,S),S}function d(){for(let w=0;w<l;w++)if(o.indexOf(w)===-1)return o.push(w),w;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(w){const C=s[w.id],S=w.uniforms,T=w.__cache;n.bindBuffer(n.UNIFORM_BUFFER,C);for(let A=0,P=S.length;A<P;A++){const N=Array.isArray(S[A])?S[A]:[S[A]];for(let E=0,R=N.length;E<R;E++){const k=N[E];if(g(k,A,E,T)===!0){const H=k.__offset,q=Array.isArray(k.value)?k.value:[k.value];let G=0;for(let Y=0;Y<q.length;Y++){const j=q[Y],et=y(j);typeof j=="number"||typeof j=="boolean"?(k.__data[0]=j,n.bufferSubData(n.UNIFORM_BUFFER,H+G,k.__data)):j.isMatrix3?(k.__data[0]=j.elements[0],k.__data[1]=j.elements[1],k.__data[2]=j.elements[2],k.__data[3]=0,k.__data[4]=j.elements[3],k.__data[5]=j.elements[4],k.__data[6]=j.elements[5],k.__data[7]=0,k.__data[8]=j.elements[6],k.__data[9]=j.elements[7],k.__data[10]=j.elements[8],k.__data[11]=0):(j.toArray(k.__data,G),G+=et.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,H,k.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function g(w,C,S,T){const A=w.value,P=C+"_"+S;if(T[P]===void 0)return typeof A=="number"||typeof A=="boolean"?T[P]=A:T[P]=A.clone(),!0;{const N=T[P];if(typeof A=="number"||typeof A=="boolean"){if(N!==A)return T[P]=A,!0}else if(N.equals(A)===!1)return N.copy(A),!0}return!1}function v(w){const C=w.uniforms;let S=0;const T=16;for(let P=0,N=C.length;P<N;P++){const E=Array.isArray(C[P])?C[P]:[C[P]];for(let R=0,k=E.length;R<k;R++){const H=E[R],q=Array.isArray(H.value)?H.value:[H.value];for(let G=0,Y=q.length;G<Y;G++){const j=q[G],et=y(j),V=S%T,ct=V%et.boundary,rt=V+ct;S+=ct,rt!==0&&T-rt<et.storage&&(S+=T-rt),H.__data=new Float32Array(et.storage/Float32Array.BYTES_PER_ELEMENT),H.__offset=S,S+=et.storage}}}const A=S%T;return A>0&&(S+=T-A),w.__size=S,w.__cache={},this}function y(w){const C={boundary:0,storage:0};return typeof w=="number"||typeof w=="boolean"?(C.boundary=4,C.storage=4):w.isVector2?(C.boundary=8,C.storage=8):w.isVector3||w.isColor?(C.boundary=16,C.storage=12):w.isVector4?(C.boundary=16,C.storage=16):w.isMatrix3?(C.boundary=48,C.storage=48):w.isMatrix4?(C.boundary=64,C.storage=64):w.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",w),C}function x(w){const C=w.target;C.removeEventListener("dispose",x);const S=o.indexOf(C.__bindingPointIndex);o.splice(S,1),n.deleteBuffer(s[C.id]),delete s[C.id],delete r[C.id]}function _(){for(const w in s)n.deleteBuffer(s[w]);o=[],s={},r={}}return{bind:c,update:h,dispose:_}}class pA{constructor(t={}){const{canvas:e=d6(),context:i=null,depth:s=!0,stencil:r=!1,alpha:o=!1,antialias:l=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:h=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:d=!1,reversedDepthBuffer:p=!1}=t;this.isWebGLRenderer=!0;let g;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");g=i.getContextAttributes().alpha}else g=o;const v=new Uint32Array(4),y=new Int32Array(4);let x=null,_=null;const w=[],C=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Er,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const S=this;let T=!1;this._outputColorSpace=Fn;let A=0,P=0,N=null,E=-1,R=null;const k=new Ge,H=new Ge;let q=null;const G=new pe(0);let Y=0,j=e.width,et=e.height,V=1,ct=null,rt=null;const gt=new Ge(0,0,j,et),It=new Ge(0,0,j,et);let Dt=!1;const At=new Gm;let K=!1,st=!1;const dt=new _e,Ut=new X,Xt=new Ge,Ht={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Le=!1;function se(){return N===null?V:1}let z=i;function Oe(O,Z){return e.getContext(O,Z)}try{const O={alpha:!0,depth:s,stencil:r,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:h,powerPreference:f,failIfMajorPerformanceCaveat:d};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Lm}`),e.addEventListener("webglcontextlost",Ct,!1),e.addEventListener("webglcontextrestored",kt,!1),e.addEventListener("webglcontextcreationerror",_t,!1),z===null){const Z="webgl2";if(z=Oe(Z,O),z===null)throw Oe(Z)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(O){throw console.error("THREE.WebGLRenderer: "+O.message),O}let Vt,ye,Wt,Ve,Nt,ue,hn,nn,F,D,Q,at,pt,ot,$t,Mt,jt,Zt,xt,Tt,re,Yt,wt,de;function W(){Vt=new CT(z),Vt.init(),Yt=new oA(z,Vt),ye=new _T(z,Vt,t,Yt),Wt=new sA(z,Vt),ye.reversedDepthBuffer&&p&&Wt.buffers.depth.setReversed(!0),Ve=new ET(z),Nt=new jE,ue=new rA(z,Vt,Wt,Nt,ye,Yt,Ve),hn=new xT(S),nn=new ST(S),F=new D9(z),wt=new mT(z,F),D=new wT(z,F,Ve,wt),Q=new PT(z,D,F,Ve),xt=new AT(z,ye,ue),Mt=new vT(Nt),at=new GE(S,hn,nn,Vt,ye,wt,Mt),pt=new fA(S,Nt),ot=new ZE,$t=new QE(Vt),Zt=new pT(S,hn,nn,Wt,Q,g,c),jt=new nA(S,Q,ye),de=new dA(z,Ve,ye,Wt),Tt=new gT(z,Vt,Ve),re=new TT(z,Vt,Ve),Ve.programs=at.programs,S.capabilities=ye,S.extensions=Vt,S.properties=Nt,S.renderLists=ot,S.shadowMap=jt,S.state=Wt,S.info=Ve}W();const yt=new hA(S,z);this.xr=yt,this.getContext=function(){return z},this.getContextAttributes=function(){return z.getContextAttributes()},this.forceContextLoss=function(){const O=Vt.get("WEBGL_lose_context");O&&O.loseContext()},this.forceContextRestore=function(){const O=Vt.get("WEBGL_lose_context");O&&O.restoreContext()},this.getPixelRatio=function(){return V},this.setPixelRatio=function(O){O!==void 0&&(V=O,this.setSize(j,et,!1))},this.getSize=function(O){return O.set(j,et)},this.setSize=function(O,Z,nt=!0){if(yt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}j=O,et=Z,e.width=Math.floor(O*V),e.height=Math.floor(Z*V),nt===!0&&(e.style.width=O+"px",e.style.height=Z+"px"),this.setViewport(0,0,O,Z)},this.getDrawingBufferSize=function(O){return O.set(j*V,et*V).floor()},this.setDrawingBufferSize=function(O,Z,nt){j=O,et=Z,V=nt,e.width=Math.floor(O*nt),e.height=Math.floor(Z*nt),this.setViewport(0,0,O,Z)},this.getCurrentViewport=function(O){return O.copy(k)},this.getViewport=function(O){return O.copy(gt)},this.setViewport=function(O,Z,nt,tt){O.isVector4?gt.set(O.x,O.y,O.z,O.w):gt.set(O,Z,nt,tt),Wt.viewport(k.copy(gt).multiplyScalar(V).round())},this.getScissor=function(O){return O.copy(It)},this.setScissor=function(O,Z,nt,tt){O.isVector4?It.set(O.x,O.y,O.z,O.w):It.set(O,Z,nt,tt),Wt.scissor(H.copy(It).multiplyScalar(V).round())},this.getScissorTest=function(){return Dt},this.setScissorTest=function(O){Wt.setScissorTest(Dt=O)},this.setOpaqueSort=function(O){ct=O},this.setTransparentSort=function(O){rt=O},this.getClearColor=function(O){return O.copy(Zt.getClearColor())},this.setClearColor=function(){Zt.setClearColor(...arguments)},this.getClearAlpha=function(){return Zt.getClearAlpha()},this.setClearAlpha=function(){Zt.setClearAlpha(...arguments)},this.clear=function(O=!0,Z=!0,nt=!0){let tt=0;if(O){let $=!1;if(N!==null){const vt=N.texture.format;$=vt===Um||vt===Fm||vt===km}if($){const vt=N.texture.type,Pt=vt===ms||vt===Mo||vt===Kl||vt===Jl||vt===Dm||vt===Om,Bt=Zt.getClearColor(),Ot=Zt.getClearAlpha(),ne=Bt.r,ie=Bt.g,Jt=Bt.b;Pt?(v[0]=ne,v[1]=ie,v[2]=Jt,v[3]=Ot,z.clearBufferuiv(z.COLOR,0,v)):(y[0]=ne,y[1]=ie,y[2]=Jt,y[3]=Ot,z.clearBufferiv(z.COLOR,0,y))}else tt|=z.COLOR_BUFFER_BIT}Z&&(tt|=z.DEPTH_BUFFER_BIT),nt&&(tt|=z.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),z.clear(tt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ct,!1),e.removeEventListener("webglcontextrestored",kt,!1),e.removeEventListener("webglcontextcreationerror",_t,!1),Zt.dispose(),ot.dispose(),$t.dispose(),Nt.dispose(),hn.dispose(),nn.dispose(),Q.dispose(),wt.dispose(),de.dispose(),at.dispose(),yt.dispose(),yt.removeEventListener("sessionstart",Si),yt.removeEventListener("sessionend",Cc),bs.stop()};function Ct(O){O.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),T=!0}function kt(){console.log("THREE.WebGLRenderer: Context Restored."),T=!1;const O=Ve.autoReset,Z=jt.enabled,nt=jt.autoUpdate,tt=jt.needsUpdate,$=jt.type;W(),Ve.autoReset=O,jt.enabled=Z,jt.autoUpdate=nt,jt.needsUpdate=tt,jt.type=$}function _t(O){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",O.statusMessage)}function lt(O){const Z=O.target;Z.removeEventListener("dispose",lt),Gt(Z)}function Gt(O){he(O),Nt.remove(O)}function he(O){const Z=Nt.get(O).programs;Z!==void 0&&(Z.forEach(function(nt){at.releaseProgram(nt)}),O.isShaderMaterial&&at.releaseShaderCache(O))}this.renderBufferDirect=function(O,Z,nt,tt,$,vt){Z===null&&(Z=Ht);const Pt=$.isMesh&&$.matrixWorld.determinant()<0,Bt=wc(O,Z,nt,tt,$);Wt.setMaterial(tt,Pt);let Ot=nt.index,ne=1;if(tt.wireframe===!0){if(Ot=D.getWireframeAttribute(nt),Ot===void 0)return;ne=2}const ie=nt.drawRange,Jt=nt.attributes.position;let be=ie.start*ne,Ne=(ie.start+ie.count)*ne;vt!==null&&(be=Math.max(be,vt.start*ne),Ne=Math.min(Ne,(vt.start+vt.count)*ne)),Ot!==null?(be=Math.max(be,0),Ne=Math.min(Ne,Ot.count)):Jt!=null&&(be=Math.max(be,0),Ne=Math.min(Ne,Jt.count));const Qt=Ne-be;if(Qt<0||Qt===1/0)return;wt.setup($,tt,Bt,nt,Ot);let oe,ze=Tt;if(Ot!==null&&(oe=F.get(Ot),ze=re,ze.setIndex(oe)),$.isMesh)tt.wireframe===!0?(Wt.setLineWidth(tt.wireframeLinewidth*se()),ze.setMode(z.LINES)):ze.setMode(z.TRIANGLES);else if($.isLine){let Kt=tt.linewidth;Kt===void 0&&(Kt=1),Wt.setLineWidth(Kt*se()),$.isLineSegments?ze.setMode(z.LINES):$.isLineLoop?ze.setMode(z.LINE_LOOP):ze.setMode(z.LINE_STRIP)}else $.isPoints?ze.setMode(z.POINTS):$.isSprite&&ze.setMode(z.TRIANGLES);if($.isBatchedMesh)if($._multiDrawInstances!==null)ma("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),ze.renderMultiDrawInstances($._multiDrawStarts,$._multiDrawCounts,$._multiDrawCount,$._multiDrawInstances);else if(Vt.get("WEBGL_multi_draw"))ze.renderMultiDraw($._multiDrawStarts,$._multiDrawCounts,$._multiDrawCount);else{const Kt=$._multiDrawStarts,je=$._multiDrawCounts,Ae=$._multiDrawCount,ee=Ot?F.get(Ot).bytesPerElement:1,$e=Nt.get(tt).currentProgram.getUniforms();for(let On=0;On<Ae;On++)$e.setValue(z,"_gl_DrawID",On),ze.render(Kt[On]/ee,je[On])}else if($.isInstancedMesh)ze.renderInstances(be,Qt,$.count);else if(nt.isInstancedBufferGeometry){const Kt=nt._maxInstanceCount!==void 0?nt._maxInstanceCount:1/0,je=Math.min(nt.instanceCount,Kt);ze.renderInstances(be,Qt,je)}else ze.render(be,Qt)};function qe(O,Z,nt){O.transparent===!0&&O.side===as&&O.forceSinglePass===!1?(O.side=ui,O.needsUpdate=!0,zr(O,Z,nt),O.side=Ks,O.needsUpdate=!0,zr(O,Z,nt),O.side=as):zr(O,Z,nt)}this.compile=function(O,Z,nt=null){nt===null&&(nt=O),_=$t.get(nt),_.init(Z),C.push(_),nt.traverseVisible(function($){$.isLight&&$.layers.test(Z.layers)&&(_.pushLight($),$.castShadow&&_.pushShadow($))}),O!==nt&&O.traverseVisible(function($){$.isLight&&$.layers.test(Z.layers)&&(_.pushLight($),$.castShadow&&_.pushShadow($))}),_.setupLights();const tt=new Set;return O.traverse(function($){if(!($.isMesh||$.isPoints||$.isLine||$.isSprite))return;const vt=$.material;if(vt)if(Array.isArray(vt))for(let Pt=0;Pt<vt.length;Pt++){const Bt=vt[Pt];qe(Bt,nt,$),tt.add(Bt)}else qe(vt,nt,$),tt.add(vt)}),_=C.pop(),tt},this.compileAsync=function(O,Z,nt=null){const tt=this.compile(O,Z,nt);return new Promise($=>{function vt(){if(tt.forEach(function(Pt){Nt.get(Pt).currentProgram.isReady()&&tt.delete(Pt)}),tt.size===0){$(O);return}setTimeout(vt,10)}Vt.get("KHR_parallel_shader_compile")!==null?vt():setTimeout(vt,10)})};let Be=null;function fi(O){Be&&Be(O)}function Si(){bs.stop()}function Cc(){bs.start()}const bs=new Vx;bs.setAnimationLoop(fi),typeof self<"u"&&bs.setContext(self),this.setAnimationLoop=function(O){Be=O,yt.setAnimationLoop(O),O===null?bs.stop():bs.start()},yt.addEventListener("sessionstart",Si),yt.addEventListener("sessionend",Cc),this.render=function(O,Z){if(Z!==void 0&&Z.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(T===!0)return;if(O.matrixWorldAutoUpdate===!0&&O.updateMatrixWorld(),Z.parent===null&&Z.matrixWorldAutoUpdate===!0&&Z.updateMatrixWorld(),yt.enabled===!0&&yt.isPresenting===!0&&(yt.cameraAutoUpdate===!0&&yt.updateCamera(Z),Z=yt.getCamera()),O.isScene===!0&&O.onBeforeRender(S,O,Z,N),_=$t.get(O,C.length),_.init(Z),C.push(_),dt.multiplyMatrices(Z.projectionMatrix,Z.matrixWorldInverse),At.setFromProjectionMatrix(dt,cs,Z.reversedDepth),st=this.localClippingEnabled,K=Mt.init(this.clippingPlanes,st),x=ot.get(O,w.length),x.init(),w.push(x),yt.enabled===!0&&yt.isPresenting===!0){const vt=S.xr.getDepthSensingMesh();vt!==null&&qa(vt,Z,-1/0,S.sortObjects)}qa(O,Z,0,S.sortObjects),x.finish(),S.sortObjects===!0&&x.sort(ct,rt),Le=yt.enabled===!1||yt.isPresenting===!1||yt.hasDepthSensing()===!1,Le&&Zt.addToRenderList(x,O),this.info.render.frame++,K===!0&&Mt.beginShadows();const nt=_.state.shadowsArray;jt.render(nt,O,Z),K===!0&&Mt.endShadows(),this.info.autoReset===!0&&this.info.reset();const tt=x.opaque,$=x.transmissive;if(_.setupLights(),Z.isArrayCamera){const vt=Z.cameras;if($.length>0)for(let Pt=0,Bt=vt.length;Pt<Bt;Pt++){const Ot=vt[Pt];qt(tt,$,O,Ot)}Le&&Zt.render(O);for(let Pt=0,Bt=vt.length;Pt<Bt;Pt++){const Ot=vt[Pt];di(x,O,Ot,Ot.viewport)}}else $.length>0&&qt(tt,$,O,Z),Le&&Zt.render(O),di(x,O,Z);N!==null&&P===0&&(ue.updateMultisampleRenderTarget(N),ue.updateRenderTargetMipmap(N)),O.isScene===!0&&O.onAfterRender(S,O,Z),wt.resetDefaultState(),E=-1,R=null,C.pop(),C.length>0?(_=C[C.length-1],K===!0&&Mt.setGlobalState(S.clippingPlanes,_.state.camera)):_=null,w.pop(),w.length>0?x=w[w.length-1]:x=null};function qa(O,Z,nt,tt){if(O.visible===!1)return;if(O.layers.test(Z.layers)){if(O.isGroup)nt=O.renderOrder;else if(O.isLOD)O.autoUpdate===!0&&O.update(Z);else if(O.isLight)_.pushLight(O),O.castShadow&&_.pushShadow(O);else if(O.isSprite){if(!O.frustumCulled||At.intersectsSprite(O)){tt&&Xt.setFromMatrixPosition(O.matrixWorld).applyMatrix4(dt);const Pt=Q.update(O),Bt=O.material;Bt.visible&&x.push(O,Pt,Bt,nt,Xt.z,null)}}else if((O.isMesh||O.isLine||O.isPoints)&&(!O.frustumCulled||At.intersectsObject(O))){const Pt=Q.update(O),Bt=O.material;if(tt&&(O.boundingSphere!==void 0?(O.boundingSphere===null&&O.computeBoundingSphere(),Xt.copy(O.boundingSphere.center)):(Pt.boundingSphere===null&&Pt.computeBoundingSphere(),Xt.copy(Pt.boundingSphere.center)),Xt.applyMatrix4(O.matrixWorld).applyMatrix4(dt)),Array.isArray(Bt)){const Ot=Pt.groups;for(let ne=0,ie=Ot.length;ne<ie;ne++){const Jt=Ot[ne],be=Bt[Jt.materialIndex];be&&be.visible&&x.push(O,Pt,be,nt,Xt.z,Jt)}}else Bt.visible&&x.push(O,Pt,Bt,nt,Xt.z,null)}}const vt=O.children;for(let Pt=0,Bt=vt.length;Pt<Bt;Pt++)qa(vt[Pt],Z,nt,tt)}function di(O,Z,nt,tt){const $=O.opaque,vt=O.transmissive,Pt=O.transparent;_.setupLightsView(nt),K===!0&&Mt.setGlobalState(S.clippingPlanes,nt),tt&&Wt.viewport(k.copy(tt)),$.length>0&&Br($,Z,nt),vt.length>0&&Br(vt,Z,nt),Pt.length>0&&Br(Pt,Z,nt),Wt.buffers.depth.setTest(!0),Wt.buffers.depth.setMask(!0),Wt.buffers.color.setMask(!0),Wt.setPolygonOffset(!1)}function qt(O,Z,nt,tt){if((nt.isScene===!0?nt.overrideMaterial:null)!==null)return;_.state.transmissionRenderTarget[tt.id]===void 0&&(_.state.transmissionRenderTarget[tt.id]=new So(1,1,{generateMipmaps:!0,type:Vt.has("EXT_color_buffer_half_float")||Vt.has("EXT_color_buffer_float")?xc:ms,minFilter:Vs,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Fe.workingColorSpace}));const vt=_.state.transmissionRenderTarget[tt.id],Pt=tt.viewport||k;vt.setSize(Pt.z*S.transmissionResolutionScale,Pt.w*S.transmissionResolutionScale);const Bt=S.getRenderTarget(),Ot=S.getActiveCubeFace(),ne=S.getActiveMipmapLevel();S.setRenderTarget(vt),S.getClearColor(G),Y=S.getClearAlpha(),Y<1&&S.setClearColor(16777215,.5),S.clear(),Le&&Zt.render(nt);const ie=S.toneMapping;S.toneMapping=Er;const Jt=tt.viewport;if(tt.viewport!==void 0&&(tt.viewport=void 0),_.setupLightsView(tt),K===!0&&Mt.setGlobalState(S.clippingPlanes,tt),Br(O,nt,tt),ue.updateMultisampleRenderTarget(vt),ue.updateRenderTargetMipmap(vt),Vt.has("WEBGL_multisampled_render_to_texture")===!1){let be=!1;for(let Ne=0,Qt=Z.length;Ne<Qt;Ne++){const oe=Z[Ne],ze=oe.object,Kt=oe.geometry,je=oe.material,Ae=oe.group;if(je.side===as&&ze.layers.test(tt.layers)){const ee=je.side;je.side=ui,je.needsUpdate=!0,$a(ze,nt,tt,Kt,je,Ae),je.side=ee,je.needsUpdate=!0,be=!0}}be===!0&&(ue.updateMultisampleRenderTarget(vt),ue.updateRenderTargetMipmap(vt))}S.setRenderTarget(Bt,Ot,ne),S.setClearColor(G,Y),Jt!==void 0&&(tt.viewport=Jt),S.toneMapping=ie}function Br(O,Z,nt){const tt=Z.isScene===!0?Z.overrideMaterial:null;for(let $=0,vt=O.length;$<vt;$++){const Pt=O[$],Bt=Pt.object,Ot=Pt.geometry,ne=Pt.group;let ie=Pt.material;ie.allowOverride===!0&&tt!==null&&(ie=tt),Bt.layers.test(nt.layers)&&$a(Bt,Z,nt,Ot,ie,ne)}}function $a(O,Z,nt,tt,$,vt){O.onBeforeRender(S,Z,nt,tt,$,vt),O.modelViewMatrix.multiplyMatrices(nt.matrixWorldInverse,O.matrixWorld),O.normalMatrix.getNormalMatrix(O.modelViewMatrix),$.onBeforeRender(S,Z,nt,tt,O,vt),$.transparent===!0&&$.side===as&&$.forceSinglePass===!1?($.side=ui,$.needsUpdate=!0,S.renderBufferDirect(nt,Z,tt,$,O,vt),$.side=Ks,$.needsUpdate=!0,S.renderBufferDirect(nt,Z,tt,$,O,vt),$.side=as):S.renderBufferDirect(nt,Z,tt,$,O,vt),O.onAfterRender(S,Z,nt,tt,$,vt)}function zr(O,Z,nt){Z.isScene!==!0&&(Z=Ht);const tt=Nt.get(O),$=_.state.lights,vt=_.state.shadowsArray,Pt=$.state.version,Bt=at.getParameters(O,$.state,vt,Z,nt),Ot=at.getProgramCacheKey(Bt);let ne=tt.programs;tt.environment=O.isMeshStandardMaterial?Z.environment:null,tt.fog=Z.fog,tt.envMap=(O.isMeshStandardMaterial?nn:hn).get(O.envMap||tt.environment),tt.envMapRotation=tt.environment!==null&&O.envMap===null?Z.environmentRotation:O.envMapRotation,ne===void 0&&(O.addEventListener("dispose",lt),ne=new Map,tt.programs=ne);let ie=ne.get(Ot);if(ie!==void 0){if(tt.currentProgram===ie&&tt.lightsStateVersion===Pt)return Io(O,Bt),ie}else Bt.uniforms=at.getUniforms(O),O.onBeforeCompile(Bt,S),ie=at.acquireProgram(Bt,Ot),ne.set(Ot,ie),tt.uniforms=Bt.uniforms;const Jt=tt.uniforms;return(!O.isShaderMaterial&&!O.isRawShaderMaterial||O.clipping===!0)&&(Jt.clippingPlanes=Mt.uniform),Io(O,Bt),tt.needsLights=Tc(O),tt.lightsStateVersion=Pt,tt.needsLights&&(Jt.ambientLightColor.value=$.state.ambient,Jt.lightProbe.value=$.state.probe,Jt.directionalLights.value=$.state.directional,Jt.directionalLightShadows.value=$.state.directionalShadow,Jt.spotLights.value=$.state.spot,Jt.spotLightShadows.value=$.state.spotShadow,Jt.rectAreaLights.value=$.state.rectArea,Jt.ltc_1.value=$.state.rectAreaLTC1,Jt.ltc_2.value=$.state.rectAreaLTC2,Jt.pointLights.value=$.state.point,Jt.pointLightShadows.value=$.state.pointShadow,Jt.hemisphereLights.value=$.state.hemi,Jt.directionalShadowMap.value=$.state.directionalShadowMap,Jt.directionalShadowMatrix.value=$.state.directionalShadowMatrix,Jt.spotShadowMap.value=$.state.spotShadowMap,Jt.spotLightMatrix.value=$.state.spotLightMatrix,Jt.spotLightMap.value=$.state.spotLightMap,Jt.pointShadowMap.value=$.state.pointShadowMap,Jt.pointShadowMatrix.value=$.state.pointShadowMatrix),tt.currentProgram=ie,tt.uniformsList=null,ie}function Ka(O){if(O.uniformsList===null){const Z=O.currentProgram.getUniforms();O.uniformsList=Gh.seqWithValue(Z.seq,O.uniforms)}return O.uniformsList}function Io(O,Z){const nt=Nt.get(O);nt.outputColorSpace=Z.outputColorSpace,nt.batching=Z.batching,nt.batchingColor=Z.batchingColor,nt.instancing=Z.instancing,nt.instancingColor=Z.instancingColor,nt.instancingMorph=Z.instancingMorph,nt.skinning=Z.skinning,nt.morphTargets=Z.morphTargets,nt.morphNormals=Z.morphNormals,nt.morphColors=Z.morphColors,nt.morphTargetsCount=Z.morphTargetsCount,nt.numClippingPlanes=Z.numClippingPlanes,nt.numIntersection=Z.numClipIntersection,nt.vertexAlphas=Z.vertexAlphas,nt.vertexTangents=Z.vertexTangents,nt.toneMapping=Z.toneMapping}function wc(O,Z,nt,tt,$){Z.isScene!==!0&&(Z=Ht),ue.resetTextureUnits();const vt=Z.fog,Pt=tt.isMeshStandardMaterial?Z.environment:null,Bt=N===null?S.outputColorSpace:N.isXRRenderTarget===!0?N.texture.colorSpace:si,Ot=(tt.isMeshStandardMaterial?nn:hn).get(tt.envMap||Pt),ne=tt.vertexColors===!0&&!!nt.attributes.color&&nt.attributes.color.itemSize===4,ie=!!nt.attributes.tangent&&(!!tt.normalMap||tt.anisotropy>0),Jt=!!nt.morphAttributes.position,be=!!nt.morphAttributes.normal,Ne=!!nt.morphAttributes.color;let Qt=Er;tt.toneMapped&&(N===null||N.isXRRenderTarget===!0)&&(Qt=S.toneMapping);const oe=nt.morphAttributes.position||nt.morphAttributes.normal||nt.morphAttributes.color,ze=oe!==void 0?oe.length:0,Kt=Nt.get(tt),je=_.state.lights;if(K===!0&&(st===!0||O!==R)){const pn=O===R&&tt.id===E;Mt.setState(tt,O,pn)}let Ae=!1;tt.version===Kt.__version?(Kt.needsLights&&Kt.lightsStateVersion!==je.state.version||Kt.outputColorSpace!==Bt||$.isBatchedMesh&&Kt.batching===!1||!$.isBatchedMesh&&Kt.batching===!0||$.isBatchedMesh&&Kt.batchingColor===!0&&$.colorTexture===null||$.isBatchedMesh&&Kt.batchingColor===!1&&$.colorTexture!==null||$.isInstancedMesh&&Kt.instancing===!1||!$.isInstancedMesh&&Kt.instancing===!0||$.isSkinnedMesh&&Kt.skinning===!1||!$.isSkinnedMesh&&Kt.skinning===!0||$.isInstancedMesh&&Kt.instancingColor===!0&&$.instanceColor===null||$.isInstancedMesh&&Kt.instancingColor===!1&&$.instanceColor!==null||$.isInstancedMesh&&Kt.instancingMorph===!0&&$.morphTexture===null||$.isInstancedMesh&&Kt.instancingMorph===!1&&$.morphTexture!==null||Kt.envMap!==Ot||tt.fog===!0&&Kt.fog!==vt||Kt.numClippingPlanes!==void 0&&(Kt.numClippingPlanes!==Mt.numPlanes||Kt.numIntersection!==Mt.numIntersection)||Kt.vertexAlphas!==ne||Kt.vertexTangents!==ie||Kt.morphTargets!==Jt||Kt.morphNormals!==be||Kt.morphColors!==Ne||Kt.toneMapping!==Qt||Kt.morphTargetsCount!==ze)&&(Ae=!0):(Ae=!0,Kt.__version=tt.version);let ee=Kt.currentProgram;Ae===!0&&(ee=zr(tt,Z,$));let $e=!1,On=!1,Ji=!1;const Pe=ee.getUniforms(),ri=Kt.uniforms;if(Wt.useProgram(ee.program)&&($e=!0,On=!0,Ji=!0),tt.id!==E&&(E=tt.id,On=!0),$e||R!==O){Wt.buffers.depth.getReversed()&&O.reversedDepth!==!0&&(O._reversedDepth=!0,O.updateProjectionMatrix()),Pe.setValue(z,"projectionMatrix",O.projectionMatrix),Pe.setValue(z,"viewMatrix",O.matrixWorldInverse);const Ie=Pe.map.cameraPosition;Ie!==void 0&&Ie.setValue(z,Ut.setFromMatrixPosition(O.matrixWorld)),ye.logarithmicDepthBuffer&&Pe.setValue(z,"logDepthBufFC",2/(Math.log(O.far+1)/Math.LN2)),(tt.isMeshPhongMaterial||tt.isMeshToonMaterial||tt.isMeshLambertMaterial||tt.isMeshBasicMaterial||tt.isMeshStandardMaterial||tt.isShaderMaterial)&&Pe.setValue(z,"isOrthographic",O.isOrthographicCamera===!0),R!==O&&(R=O,On=!0,Ji=!0)}if($.isSkinnedMesh){Pe.setOptional(z,$,"bindMatrix"),Pe.setOptional(z,$,"bindMatrixInverse");const pn=$.skeleton;pn&&(pn.boneTexture===null&&pn.computeBoneTexture(),Pe.setValue(z,"boneTexture",pn.boneTexture,ue))}$.isBatchedMesh&&(Pe.setOptional(z,$,"batchingTexture"),Pe.setValue(z,"batchingTexture",$._matricesTexture,ue),Pe.setOptional(z,$,"batchingIdTexture"),Pe.setValue(z,"batchingIdTexture",$._indirectTexture,ue),Pe.setOptional(z,$,"batchingColorTexture"),$._colorsTexture!==null&&Pe.setValue(z,"batchingColorTexture",$._colorsTexture,ue));const Nn=nt.morphAttributes;if((Nn.position!==void 0||Nn.normal!==void 0||Nn.color!==void 0)&&xt.update($,nt,ee),(On||Kt.receiveShadow!==$.receiveShadow)&&(Kt.receiveShadow=$.receiveShadow,Pe.setValue(z,"receiveShadow",$.receiveShadow)),tt.isMeshGouraudMaterial&&tt.envMap!==null&&(ri.envMap.value=Ot,ri.flipEnvMap.value=Ot.isCubeTexture&&Ot.isRenderTargetTexture===!1?-1:1),tt.isMeshStandardMaterial&&tt.envMap===null&&Z.environment!==null&&(ri.envMapIntensity.value=Z.environmentIntensity),On&&(Pe.setValue(z,"toneMappingExposure",S.toneMappingExposure),Kt.needsLights&&ir(ri,Ji),vt&&tt.fog===!0&&pt.refreshFogUniforms(ri,vt),pt.refreshMaterialUniforms(ri,tt,V,et,_.state.transmissionRenderTarget[O.id]),Gh.upload(z,Ka(Kt),ri,ue)),tt.isShaderMaterial&&tt.uniformsNeedUpdate===!0&&(Gh.upload(z,Ka(Kt),ri,ue),tt.uniformsNeedUpdate=!1),tt.isSpriteMaterial&&Pe.setValue(z,"center",$.center),Pe.setValue(z,"modelViewMatrix",$.modelViewMatrix),Pe.setValue(z,"normalMatrix",$.normalMatrix),Pe.setValue(z,"modelMatrix",$.matrixWorld),tt.isShaderMaterial||tt.isRawShaderMaterial){const pn=tt.uniformsGroups;for(let Ie=0,ki=pn.length;Ie<ki;Ie++){const pi=pn[Ie];de.update(pi,ee),de.bind(pi,ee)}}return ee}function ir(O,Z){O.ambientLightColor.needsUpdate=Z,O.lightProbe.needsUpdate=Z,O.directionalLights.needsUpdate=Z,O.directionalLightShadows.needsUpdate=Z,O.pointLights.needsUpdate=Z,O.pointLightShadows.needsUpdate=Z,O.spotLights.needsUpdate=Z,O.spotLightShadows.needsUpdate=Z,O.rectAreaLights.needsUpdate=Z,O.hemisphereLights.needsUpdate=Z}function Tc(O){return O.isMeshLambertMaterial||O.isMeshToonMaterial||O.isMeshPhongMaterial||O.isMeshStandardMaterial||O.isShadowMaterial||O.isShaderMaterial&&O.lights===!0}this.getActiveCubeFace=function(){return A},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return N},this.setRenderTargetTextures=function(O,Z,nt){const tt=Nt.get(O);tt.__autoAllocateDepthBuffer=O.resolveDepthBuffer===!1,tt.__autoAllocateDepthBuffer===!1&&(tt.__useRenderToTexture=!1),Nt.get(O.texture).__webglTexture=Z,Nt.get(O.depthTexture).__webglTexture=tt.__autoAllocateDepthBuffer?void 0:nt,tt.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(O,Z){const nt=Nt.get(O);nt.__webglFramebuffer=Z,nt.__useDefaultFramebuffer=Z===void 0};const ju=z.createFramebuffer();this.setRenderTarget=function(O,Z=0,nt=0){N=O,A=Z,P=nt;let tt=!0,$=null,vt=!1,Pt=!1;if(O){const Ot=Nt.get(O);if(Ot.__useDefaultFramebuffer!==void 0)Wt.bindFramebuffer(z.FRAMEBUFFER,null),tt=!1;else if(Ot.__webglFramebuffer===void 0)ue.setupRenderTarget(O);else if(Ot.__hasExternalTextures)ue.rebindTextures(O,Nt.get(O.texture).__webglTexture,Nt.get(O.depthTexture).__webglTexture);else if(O.depthBuffer){const Jt=O.depthTexture;if(Ot.__boundDepthTexture!==Jt){if(Jt!==null&&Nt.has(Jt)&&(O.width!==Jt.image.width||O.height!==Jt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ue.setupDepthRenderbuffer(O)}}const ne=O.texture;(ne.isData3DTexture||ne.isDataArrayTexture||ne.isCompressedArrayTexture)&&(Pt=!0);const ie=Nt.get(O).__webglFramebuffer;O.isWebGLCubeRenderTarget?(Array.isArray(ie[Z])?$=ie[Z][nt]:$=ie[Z],vt=!0):O.samples>0&&ue.useMultisampledRTT(O)===!1?$=Nt.get(O).__webglMultisampledFramebuffer:Array.isArray(ie)?$=ie[nt]:$=ie,k.copy(O.viewport),H.copy(O.scissor),q=O.scissorTest}else k.copy(gt).multiplyScalar(V).floor(),H.copy(It).multiplyScalar(V).floor(),q=Dt;if(nt!==0&&($=ju),Wt.bindFramebuffer(z.FRAMEBUFFER,$)&&tt&&Wt.drawBuffers(O,$),Wt.viewport(k),Wt.scissor(H),Wt.setScissorTest(q),vt){const Ot=Nt.get(O.texture);z.framebufferTexture2D(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,z.TEXTURE_CUBE_MAP_POSITIVE_X+Z,Ot.__webglTexture,nt)}else if(Pt){const Ot=Z;for(let ne=0;ne<O.textures.length;ne++){const ie=Nt.get(O.textures[ne]);z.framebufferTextureLayer(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0+ne,ie.__webglTexture,nt,Ot)}}else if(O!==null&&nt!==0){const Ot=Nt.get(O.texture);z.framebufferTexture2D(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,z.TEXTURE_2D,Ot.__webglTexture,nt)}E=-1},this.readRenderTargetPixels=function(O,Z,nt,tt,$,vt,Pt,Bt=0){if(!(O&&O.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ot=Nt.get(O).__webglFramebuffer;if(O.isWebGLCubeRenderTarget&&Pt!==void 0&&(Ot=Ot[Pt]),Ot){Wt.bindFramebuffer(z.FRAMEBUFFER,Ot);try{const ne=O.textures[Bt],ie=ne.format,Jt=ne.type;if(!ye.textureFormatReadable(ie)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!ye.textureTypeReadable(Jt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Z>=0&&Z<=O.width-tt&&nt>=0&&nt<=O.height-$&&(O.textures.length>1&&z.readBuffer(z.COLOR_ATTACHMENT0+Bt),z.readPixels(Z,nt,tt,$,Yt.convert(ie),Yt.convert(Jt),vt))}finally{const ne=N!==null?Nt.get(N).__webglFramebuffer:null;Wt.bindFramebuffer(z.FRAMEBUFFER,ne)}}},this.readRenderTargetPixelsAsync=async function(O,Z,nt,tt,$,vt,Pt,Bt=0){if(!(O&&O.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ot=Nt.get(O).__webglFramebuffer;if(O.isWebGLCubeRenderTarget&&Pt!==void 0&&(Ot=Ot[Pt]),Ot)if(Z>=0&&Z<=O.width-tt&&nt>=0&&nt<=O.height-$){Wt.bindFramebuffer(z.FRAMEBUFFER,Ot);const ne=O.textures[Bt],ie=ne.format,Jt=ne.type;if(!ye.textureFormatReadable(ie))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ye.textureTypeReadable(Jt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const be=z.createBuffer();z.bindBuffer(z.PIXEL_PACK_BUFFER,be),z.bufferData(z.PIXEL_PACK_BUFFER,vt.byteLength,z.STREAM_READ),O.textures.length>1&&z.readBuffer(z.COLOR_ATTACHMENT0+Bt),z.readPixels(Z,nt,tt,$,Yt.convert(ie),Yt.convert(Jt),0);const Ne=N!==null?Nt.get(N).__webglFramebuffer:null;Wt.bindFramebuffer(z.FRAMEBUFFER,Ne);const Qt=z.fenceSync(z.SYNC_GPU_COMMANDS_COMPLETE,0);return z.flush(),await p6(z,Qt,4),z.bindBuffer(z.PIXEL_PACK_BUFFER,be),z.getBufferSubData(z.PIXEL_PACK_BUFFER,0,vt),z.deleteBuffer(be),z.deleteSync(Qt),vt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(O,Z=null,nt=0){const tt=Math.pow(2,-nt),$=Math.floor(O.image.width*tt),vt=Math.floor(O.image.height*tt),Pt=Z!==null?Z.x:0,Bt=Z!==null?Z.y:0;ue.setTexture2D(O,0),z.copyTexSubImage2D(z.TEXTURE_2D,nt,0,0,Pt,Bt,$,vt),Wt.unbindTexture()};const Xu=z.createFramebuffer(),Zu=z.createFramebuffer();this.copyTextureToTexture=function(O,Z,nt=null,tt=null,$=0,vt=null){vt===null&&($!==0?(ma("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),vt=$,$=0):vt=0);let Pt,Bt,Ot,ne,ie,Jt,be,Ne,Qt;const oe=O.isCompressedTexture?O.mipmaps[vt]:O.image;if(nt!==null)Pt=nt.max.x-nt.min.x,Bt=nt.max.y-nt.min.y,Ot=nt.isBox3?nt.max.z-nt.min.z:1,ne=nt.min.x,ie=nt.min.y,Jt=nt.isBox3?nt.min.z:0;else{const Nn=Math.pow(2,-$);Pt=Math.floor(oe.width*Nn),Bt=Math.floor(oe.height*Nn),O.isDataArrayTexture?Ot=oe.depth:O.isData3DTexture?Ot=Math.floor(oe.depth*Nn):Ot=1,ne=0,ie=0,Jt=0}tt!==null?(be=tt.x,Ne=tt.y,Qt=tt.z):(be=0,Ne=0,Qt=0);const ze=Yt.convert(Z.format),Kt=Yt.convert(Z.type);let je;Z.isData3DTexture?(ue.setTexture3D(Z,0),je=z.TEXTURE_3D):Z.isDataArrayTexture||Z.isCompressedArrayTexture?(ue.setTexture2DArray(Z,0),je=z.TEXTURE_2D_ARRAY):(ue.setTexture2D(Z,0),je=z.TEXTURE_2D),z.pixelStorei(z.UNPACK_FLIP_Y_WEBGL,Z.flipY),z.pixelStorei(z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),z.pixelStorei(z.UNPACK_ALIGNMENT,Z.unpackAlignment);const Ae=z.getParameter(z.UNPACK_ROW_LENGTH),ee=z.getParameter(z.UNPACK_IMAGE_HEIGHT),$e=z.getParameter(z.UNPACK_SKIP_PIXELS),On=z.getParameter(z.UNPACK_SKIP_ROWS),Ji=z.getParameter(z.UNPACK_SKIP_IMAGES);z.pixelStorei(z.UNPACK_ROW_LENGTH,oe.width),z.pixelStorei(z.UNPACK_IMAGE_HEIGHT,oe.height),z.pixelStorei(z.UNPACK_SKIP_PIXELS,ne),z.pixelStorei(z.UNPACK_SKIP_ROWS,ie),z.pixelStorei(z.UNPACK_SKIP_IMAGES,Jt);const Pe=O.isDataArrayTexture||O.isData3DTexture,ri=Z.isDataArrayTexture||Z.isData3DTexture;if(O.isDepthTexture){const Nn=Nt.get(O),pn=Nt.get(Z),Ie=Nt.get(Nn.__renderTarget),ki=Nt.get(pn.__renderTarget);Wt.bindFramebuffer(z.READ_FRAMEBUFFER,Ie.__webglFramebuffer),Wt.bindFramebuffer(z.DRAW_FRAMEBUFFER,ki.__webglFramebuffer);for(let pi=0;pi<Ot;pi++)Pe&&(z.framebufferTextureLayer(z.READ_FRAMEBUFFER,z.COLOR_ATTACHMENT0,Nt.get(O).__webglTexture,$,Jt+pi),z.framebufferTextureLayer(z.DRAW_FRAMEBUFFER,z.COLOR_ATTACHMENT0,Nt.get(Z).__webglTexture,vt,Qt+pi)),z.blitFramebuffer(ne,ie,Pt,Bt,be,Ne,Pt,Bt,z.DEPTH_BUFFER_BIT,z.NEAREST);Wt.bindFramebuffer(z.READ_FRAMEBUFFER,null),Wt.bindFramebuffer(z.DRAW_FRAMEBUFFER,null)}else if($!==0||O.isRenderTargetTexture||Nt.has(O)){const Nn=Nt.get(O),pn=Nt.get(Z);Wt.bindFramebuffer(z.READ_FRAMEBUFFER,Xu),Wt.bindFramebuffer(z.DRAW_FRAMEBUFFER,Zu);for(let Ie=0;Ie<Ot;Ie++)Pe?z.framebufferTextureLayer(z.READ_FRAMEBUFFER,z.COLOR_ATTACHMENT0,Nn.__webglTexture,$,Jt+Ie):z.framebufferTexture2D(z.READ_FRAMEBUFFER,z.COLOR_ATTACHMENT0,z.TEXTURE_2D,Nn.__webglTexture,$),ri?z.framebufferTextureLayer(z.DRAW_FRAMEBUFFER,z.COLOR_ATTACHMENT0,pn.__webglTexture,vt,Qt+Ie):z.framebufferTexture2D(z.DRAW_FRAMEBUFFER,z.COLOR_ATTACHMENT0,z.TEXTURE_2D,pn.__webglTexture,vt),$!==0?z.blitFramebuffer(ne,ie,Pt,Bt,be,Ne,Pt,Bt,z.COLOR_BUFFER_BIT,z.NEAREST):ri?z.copyTexSubImage3D(je,vt,be,Ne,Qt+Ie,ne,ie,Pt,Bt):z.copyTexSubImage2D(je,vt,be,Ne,ne,ie,Pt,Bt);Wt.bindFramebuffer(z.READ_FRAMEBUFFER,null),Wt.bindFramebuffer(z.DRAW_FRAMEBUFFER,null)}else ri?O.isDataTexture||O.isData3DTexture?z.texSubImage3D(je,vt,be,Ne,Qt,Pt,Bt,Ot,ze,Kt,oe.data):Z.isCompressedArrayTexture?z.compressedTexSubImage3D(je,vt,be,Ne,Qt,Pt,Bt,Ot,ze,oe.data):z.texSubImage3D(je,vt,be,Ne,Qt,Pt,Bt,Ot,ze,Kt,oe):O.isDataTexture?z.texSubImage2D(z.TEXTURE_2D,vt,be,Ne,Pt,Bt,ze,Kt,oe.data):O.isCompressedTexture?z.compressedTexSubImage2D(z.TEXTURE_2D,vt,be,Ne,oe.width,oe.height,ze,oe.data):z.texSubImage2D(z.TEXTURE_2D,vt,be,Ne,Pt,Bt,ze,Kt,oe);z.pixelStorei(z.UNPACK_ROW_LENGTH,Ae),z.pixelStorei(z.UNPACK_IMAGE_HEIGHT,ee),z.pixelStorei(z.UNPACK_SKIP_PIXELS,$e),z.pixelStorei(z.UNPACK_SKIP_ROWS,On),z.pixelStorei(z.UNPACK_SKIP_IMAGES,Ji),vt===0&&Z.generateMipmaps&&z.generateMipmap(je),Wt.unbindTexture()},this.copyTextureToTexture3D=function(O,Z,nt=null,tt=null,$=0){return ma('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(O,Z,nt,tt,$)},this.initRenderTarget=function(O){Nt.get(O).__webglFramebuffer===void 0&&ue.setupRenderTarget(O)},this.initTexture=function(O){O.isCubeTexture?ue.setTextureCube(O,0):O.isData3DTexture?ue.setTexture3D(O,0):O.isDataArrayTexture||O.isCompressedArrayTexture?ue.setTexture2DArray(O,0):ue.setTexture2D(O,0),Wt.unbindTexture()},this.resetState=function(){A=0,P=0,N=null,Wt.reset(),wt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return cs}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorSpace=Fe._getDrawingBufferColorSpace(t),e.unpackColorSpace=Fe._getUnpackColorSpace()}}function w0(n,t){if(t===zC)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(t===zp||t===Mx){let e=n.getIndex();if(e===null){const o=[],l=n.getAttribute("position");if(l!==void 0){for(let c=0;c<l.count;c++)o.push(c);n.setIndex(o),e=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=e.count-2,s=[];if(t===zp)for(let o=1;o<=i;o++)s.push(e.getX(0)),s.push(e.getX(o)),s.push(e.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(s.push(e.getX(o)),s.push(e.getX(o+1)),s.push(e.getX(o+2))):(s.push(e.getX(o+2)),s.push(e.getX(o+1)),s.push(e.getX(o)));s.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=n.clone();return r.setIndex(s),r.clearGroups(),r}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),n}class mA extends Za{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new yA(e)}),this.register(function(e){return new bA(e)}),this.register(function(e){return new RA(e)}),this.register(function(e){return new LA(e)}),this.register(function(e){return new IA(e)}),this.register(function(e){return new SA(e)}),this.register(function(e){return new CA(e)}),this.register(function(e){return new wA(e)}),this.register(function(e){return new TA(e)}),this.register(function(e){return new xA(e)}),this.register(function(e){return new EA(e)}),this.register(function(e){return new MA(e)}),this.register(function(e){return new PA(e)}),this.register(function(e){return new AA(e)}),this.register(function(e){return new _A(e)}),this.register(function(e){return new DA(e)}),this.register(function(e){return new OA(e)})}load(t,e,i,s){const r=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const h=Hl.extractUrlBase(t);o=Hl.resolveURL(h,this.path)}else o=Hl.extractUrlBase(t);this.manager.itemStart(t);const l=function(h){s?s(h):console.error(h),r.manager.itemError(t),r.manager.itemEnd(t)},c=new zx(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(t,function(h){try{r.parse(h,o,function(f){e(f),r.manager.itemEnd(t)},l)}catch(f){l(f)}},i,l)}setDRACOLoader(t){return this.dracoLoader=t,this}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,i,s){let r;const o={},l={},c=new TextDecoder;if(typeof t=="string")r=JSON.parse(t);else if(t instanceof ArrayBuffer)if(c.decode(new Uint8Array(t,0,4))===Yx){try{o[we.KHR_BINARY_GLTF]=new NA(t)}catch(d){s&&s(d);return}r=JSON.parse(o[we.KHR_BINARY_GLTF].content)}else r=JSON.parse(c.decode(t));else r=t;if(r.asset===void 0||r.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const h=new YA(r,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){const d=this.pluginCallbacks[f](h);d.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),l[d.name]=d,o[d.name]=!0}if(r.extensionsUsed)for(let f=0;f<r.extensionsUsed.length;++f){const d=r.extensionsUsed[f],p=r.extensionsRequired||[];switch(d){case we.KHR_MATERIALS_UNLIT:o[d]=new vA;break;case we.KHR_DRACO_MESH_COMPRESSION:o[d]=new kA(r,this.dracoLoader);break;case we.KHR_TEXTURE_TRANSFORM:o[d]=new FA;break;case we.KHR_MESH_QUANTIZATION:o[d]=new UA;break;default:p.indexOf(d)>=0&&l[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}h.setExtensions(o),h.setPlugins(l),h.parse(i,s)}parseAsync(t,e){const i=this;return new Promise(function(s,r){i.parse(t,e,s,r)})}}function gA(){let n={};return{get:function(t){return n[t]},add:function(t,e){n[t]=e},remove:function(t){delete n[t]},removeAll:function(){n={}}}}const we={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class _A{constructor(t){this.parser=t,this.name=we.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let i=0,s=e.length;i<s;i++){const r=e[i];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(t){const e=this.parser,i="light:"+t;let s=e.cache.get(i);if(s)return s;const r=e.json,c=((r.extensions&&r.extensions[this.name]||{}).lights||[])[t];let h;const f=new pe(16777215);c.color!==void 0&&f.setRGB(c.color[0],c.color[1],c.color[2],si);const d=c.range!==void 0?c.range:0;switch(c.type){case"directional":h=new Hx(f),h.target.position.set(0,0,-1),h.add(h.target);break;case"point":h=new _9(f),h.distance=d;break;case"spot":h=new m9(f),h.distance=d,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,h.angle=c.spot.outerConeAngle,h.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,h.target.position.set(0,0,-1),h.add(h.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return h.position.set(0,0,0),Us(h,c),c.intensity!==void 0&&(h.intensity=c.intensity),h.name=e.createUniqueName(c.name||"light_"+t),s=Promise.resolve(h),e.cache.add(i,s),s}getDependency(t,e){if(t==="light")return this._loadLight(e)}createNodeAttachment(t){const e=this,i=this.parser,r=i.json.nodes[t],l=(r.extensions&&r.extensions[this.name]||{}).light;return l===void 0?null:this._loadLight(l).then(function(c){return i._getNodeRef(e.cache,l,c)})}}class vA{constructor(){this.name=we.KHR_MATERIALS_UNLIT}getMaterialType(){return xr}extendParams(t,e,i){const s=[];t.color=new pe(1,1,1),t.opacity=1;const r=e.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const o=r.baseColorFactor;t.color.setRGB(o[0],o[1],o[2],si),t.opacity=o[3]}r.baseColorTexture!==void 0&&s.push(i.assignTexture(t,"map",r.baseColorTexture,Fn))}return Promise.all(s)}}class xA{constructor(t){this.parser=t,this.name=we.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){const s=this.parser.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name].emissiveStrength;return r!==void 0&&(e.emissiveIntensity=r),Promise.resolve()}}class yA{constructor(t){this.parser=t,this.name=we.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:ys}extendMaterialParams(t,e){const i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];if(o.clearcoatFactor!==void 0&&(e.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&r.push(i.assignTexture(e,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(e.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&r.push(i.assignTexture(e,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(r.push(i.assignTexture(e,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const l=o.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new le(l,l)}return Promise.all(r)}}class bA{constructor(t){this.parser=t,this.name=we.KHR_MATERIALS_DISPERSION}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:ys}extendMaterialParams(t,e){const s=this.parser.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return e.dispersion=r.dispersion!==void 0?r.dispersion:0,Promise.resolve()}}class MA{constructor(t){this.parser=t,this.name=we.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:ys}extendMaterialParams(t,e){const i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.iridescenceFactor!==void 0&&(e.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&r.push(i.assignTexture(e,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(e.iridescenceIOR=o.iridescenceIor),e.iridescenceThicknessRange===void 0&&(e.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(e.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(e.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&r.push(i.assignTexture(e,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(r)}}class SA{constructor(t){this.parser=t,this.name=we.KHR_MATERIALS_SHEEN}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:ys}extendMaterialParams(t,e){const i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[];e.sheenColor=new pe(0,0,0),e.sheenRoughness=0,e.sheen=1;const o=s.extensions[this.name];if(o.sheenColorFactor!==void 0){const l=o.sheenColorFactor;e.sheenColor.setRGB(l[0],l[1],l[2],si)}return o.sheenRoughnessFactor!==void 0&&(e.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&r.push(i.assignTexture(e,"sheenColorMap",o.sheenColorTexture,Fn)),o.sheenRoughnessTexture!==void 0&&r.push(i.assignTexture(e,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}}class CA{constructor(t){this.parser=t,this.name=we.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:ys}extendMaterialParams(t,e){const i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.transmissionFactor!==void 0&&(e.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&r.push(i.assignTexture(e,"transmissionMap",o.transmissionTexture)),Promise.all(r)}}class wA{constructor(t){this.parser=t,this.name=we.KHR_MATERIALS_VOLUME}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:ys}extendMaterialParams(t,e){const i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];e.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&r.push(i.assignTexture(e,"thicknessMap",o.thicknessTexture)),e.attenuationDistance=o.attenuationDistance||1/0;const l=o.attenuationColor||[1,1,1];return e.attenuationColor=new pe().setRGB(l[0],l[1],l[2],si),Promise.all(r)}}class TA{constructor(t){this.parser=t,this.name=we.KHR_MATERIALS_IOR}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:ys}extendMaterialParams(t,e){const s=this.parser.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return e.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class EA{constructor(t){this.parser=t,this.name=we.KHR_MATERIALS_SPECULAR}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:ys}extendMaterialParams(t,e){const i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];e.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&r.push(i.assignTexture(e,"specularIntensityMap",o.specularTexture));const l=o.specularColorFactor||[1,1,1];return e.specularColor=new pe().setRGB(l[0],l[1],l[2],si),o.specularColorTexture!==void 0&&r.push(i.assignTexture(e,"specularColorMap",o.specularColorTexture,Fn)),Promise.all(r)}}class AA{constructor(t){this.parser=t,this.name=we.EXT_MATERIALS_BUMP}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:ys}extendMaterialParams(t,e){const i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return e.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&r.push(i.assignTexture(e,"bumpMap",o.bumpTexture)),Promise.all(r)}}class PA{constructor(t){this.parser=t,this.name=we.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:ys}extendMaterialParams(t,e){const i=this.parser,s=i.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.anisotropyStrength!==void 0&&(e.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(e.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&r.push(i.assignTexture(e,"anisotropyMap",o.anisotropyTexture)),Promise.all(r)}}class RA{constructor(t){this.parser=t,this.name=we.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,i=e.json,s=i.textures[t];if(!s.extensions||!s.extensions[this.name])return null;const r=s.extensions[this.name],o=e.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,r.source,o)}}class LA{constructor(t){this.parser=t,this.name=we.EXT_TEXTURE_WEBP}loadTexture(t){const e=this.name,i=this.parser,s=i.json,r=s.textures[t];if(!r.extensions||!r.extensions[e])return null;const o=r.extensions[e],l=s.images[o.source];let c=i.textureLoader;if(l.uri){const h=i.options.manager.getHandler(l.uri);h!==null&&(c=h)}return i.loadTextureImage(t,o.source,c)}}class IA{constructor(t){this.parser=t,this.name=we.EXT_TEXTURE_AVIF}loadTexture(t){const e=this.name,i=this.parser,s=i.json,r=s.textures[t];if(!r.extensions||!r.extensions[e])return null;const o=r.extensions[e],l=s.images[o.source];let c=i.textureLoader;if(l.uri){const h=i.options.manager.getHandler(l.uri);h!==null&&(c=h)}return i.loadTextureImage(t,o.source,c)}}class DA{constructor(t){this.name=we.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,i=e.bufferViews[t];if(i.extensions&&i.extensions[this.name]){const s=i.extensions[this.name],r=this.parser.getDependency("buffer",s.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(l){const c=s.byteOffset||0,h=s.byteLength||0,f=s.count,d=s.byteStride,p=new Uint8Array(l,c,h);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(f,d,p,s.mode,s.filter).then(function(g){return g.buffer}):o.ready.then(function(){const g=new ArrayBuffer(f*d);return o.decodeGltfBuffer(new Uint8Array(g),f,d,p,s.mode,s.filter),g})})}else return null}}class OA{constructor(t){this.name=we.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const e=this.parser.json,i=e.nodes[t];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const s=e.meshes[i.mesh];for(const h of s.primitives)if(h.mode!==Pi.TRIANGLES&&h.mode!==Pi.TRIANGLE_STRIP&&h.mode!==Pi.TRIANGLE_FAN&&h.mode!==void 0)return null;const o=i.extensions[this.name].attributes,l=[],c={};for(const h in o)l.push(this.parser.getDependency("accessor",o[h]).then(f=>(c[h]=f,c[h])));return l.length<1?null:(l.push(this.parser.createNodeMesh(t)),Promise.all(l).then(h=>{const f=h.pop(),d=f.isGroup?f.children:[f],p=h[0].count,g=[];for(const v of d){const y=new _e,x=new X,_=new gs,w=new X(1,1,1),C=new j6(v.geometry,v.material,p);for(let S=0;S<p;S++)c.TRANSLATION&&x.fromBufferAttribute(c.TRANSLATION,S),c.ROTATION&&_.fromBufferAttribute(c.ROTATION,S),c.SCALE&&w.fromBufferAttribute(c.SCALE,S),C.setMatrixAt(S,y.compose(x,_,w));for(const S in c)if(S==="_COLOR_0"){const T=c[S];C.instanceColor=new Vp(T.array,T.itemSize,T.normalized)}else S!=="TRANSLATION"&&S!=="ROTATION"&&S!=="SCALE"&&v.geometry.setAttribute(S,c[S]);_n.prototype.copy.call(C,v),this.parser.assignFinalMaterial(C),g.push(C)}return f.isGroup?(f.clear(),f.add(...g),f):g[0]}))}}const Yx="glTF",xl=12,T0={JSON:1313821514,BIN:5130562};class NA{constructor(t){this.name=we.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,xl),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==Yx)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const s=this.header.length-xl,r=new DataView(t,xl);let o=0;for(;o<s;){const l=r.getUint32(o,!0);o+=4;const c=r.getUint32(o,!0);if(o+=4,c===T0.JSON){const h=new Uint8Array(t,xl+o,l);this.content=i.decode(h)}else if(c===T0.BIN){const h=xl+o;this.body=t.slice(h,h+l)}o+=l}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class kA{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=we.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const i=this.json,s=this.dracoLoader,r=t.extensions[this.name].bufferView,o=t.extensions[this.name].attributes,l={},c={},h={};for(const f in o){const d=Xp[f]||f.toLowerCase();l[d]=o[f]}for(const f in t.attributes){const d=Xp[f]||f.toLowerCase();if(o[f]!==void 0){const p=i.accessors[t.attributes[f]],g=_a[p.componentType];h[d]=g.name,c[d]=p.normalized===!0}}return e.getDependency("bufferView",r).then(function(f){return new Promise(function(d,p){s.decodeDracoFile(f,function(g){for(const v in g.attributes){const y=g.attributes[v],x=c[v];x!==void 0&&(y.normalized=x)}d(g)},l,h,si,p)})})}}class FA{constructor(){this.name=we.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return(e.texCoord===void 0||e.texCoord===t.channel)&&e.offset===void 0&&e.rotation===void 0&&e.scale===void 0||(t=t.clone(),e.texCoord!==void 0&&(t.channel=e.texCoord),e.offset!==void 0&&t.offset.fromArray(e.offset),e.rotation!==void 0&&(t.rotation=e.rotation),e.scale!==void 0&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}}class UA{constructor(){this.name=we.KHR_MESH_QUANTIZATION}}class qx extends yc{constructor(t,e,i,s){super(t,e,i,s)}copySampleValue_(t){const e=this.resultBuffer,i=this.sampleValues,s=this.valueSize,r=t*s*3+s;for(let o=0;o!==s;o++)e[o]=i[r+o];return e}interpolate_(t,e,i,s){const r=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=l*2,h=l*3,f=s-e,d=(i-e)/f,p=d*d,g=p*d,v=t*h,y=v-h,x=-2*g+3*p,_=g-p,w=1-x,C=_-p+d;for(let S=0;S!==l;S++){const T=o[y+S+l],A=o[y+S+c]*f,P=o[v+S+l],N=o[v+S]*f;r[S]=w*T+C*A+x*P+_*N}return r}}const BA=new gs;class zA extends qx{interpolate_(t,e,i,s){const r=super.interpolate_(t,e,i,s);return BA.fromArray(r).normalize().toArray(r),r}}const Pi={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},_a={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},E0={9728:ni,9729:yi,9984:px,9985:Uh,9986:Pl,9987:Vs},A0={33071:vr,33648:nu,10497:Pa},dd={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Xp={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},fr={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},HA={CUBICSPLINE:void 0,LINEAR:nc,STEP:ec},pd={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function VA(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Nu({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ks})),n.DefaultMaterial}function $r(n,t,e){for(const i in e.extensions)n[i]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=e.extensions[i])}function Us(n,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(n.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function WA(n,t,e){let i=!1,s=!1,r=!1;for(let h=0,f=t.length;h<f;h++){const d=t[h];if(d.POSITION!==void 0&&(i=!0),d.NORMAL!==void 0&&(s=!0),d.COLOR_0!==void 0&&(r=!0),i&&s&&r)break}if(!i&&!s&&!r)return Promise.resolve(n);const o=[],l=[],c=[];for(let h=0,f=t.length;h<f;h++){const d=t[h];if(i){const p=d.POSITION!==void 0?e.getDependency("accessor",d.POSITION):n.attributes.position;o.push(p)}if(s){const p=d.NORMAL!==void 0?e.getDependency("accessor",d.NORMAL):n.attributes.normal;l.push(p)}if(r){const p=d.COLOR_0!==void 0?e.getDependency("accessor",d.COLOR_0):n.attributes.color;c.push(p)}}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(c)]).then(function(h){const f=h[0],d=h[1],p=h[2];return i&&(n.morphAttributes.position=f),s&&(n.morphAttributes.normal=d),r&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function GA(n,t){if(n.updateMorphTargets(),t.weights!==void 0)for(let e=0,i=t.weights.length;e<i;e++)n.morphTargetInfluences[e]=t.weights[e];if(t.extras&&Array.isArray(t.extras.targetNames)){const e=t.extras.targetNames;if(n.morphTargetInfluences.length===e.length){n.morphTargetDictionary={};for(let i=0,s=e.length;i<s;i++)n.morphTargetDictionary[e[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function jA(n){let t;const e=n.extensions&&n.extensions[we.KHR_DRACO_MESH_COMPRESSION];if(e?t="draco:"+e.bufferView+":"+e.indices+":"+md(e.attributes):t=n.indices+":"+md(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,s=n.targets.length;i<s;i++)t+=":"+md(n.targets[i]);return t}function md(n){let t="";const e=Object.keys(n).sort();for(let i=0,s=e.length;i<s;i++)t+=e[i]+":"+n[e[i]]+";";return t}function Zp(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function XA(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":n.search(/\.ktx2($|\?)/i)>0||n.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const ZA=new _e;class YA{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new gA,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,s=-1,r=!1,o=-1;if(typeof navigator<"u"){const l=navigator.userAgent;i=/^((?!chrome|android).)*safari/i.test(l)===!0;const c=l.match(/Version\/(\d+)/);s=i&&c?parseInt(c[1],10):-1,r=l.indexOf("Firefox")>-1,o=r?l.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||i&&s<17||r&&o<98?this.textureLoader=new d9(this.options.manager):this.textureLoader=new x9(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new zx(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const i=this,s=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const l={scene:o[0][s.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:s.asset,parser:i,userData:{}};return $r(r,l,s),Us(l,s),Promise.all(i._invokeAll(function(c){return c.afterRoot&&c.afterRoot(l)})).then(function(){for(const c of l.scenes)c.updateMatrixWorld();t(l)})}).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],i=this.json.meshes||[];for(let s=0,r=e.length;s<r;s++){const o=e[s].joints;for(let l=0,c=o.length;l<c;l++)t[o[l]].isBone=!0}for(let s=0,r=t.length;s<r;s++){const o=t[s];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(t,e){e!==void 0&&(t.refs[e]===void 0&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,i){if(t.refs[e]<=1)return i;const s=i.clone(),r=(o,l)=>{const c=this.associations.get(o);c!=null&&this.associations.set(l,c);for(const[h,f]of o.children.entries())r(f,l.children[h])};return r(i,s),s.name+="_instance_"+t.uses[e]++,s}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let i=0;i<e.length;i++){const s=t(e[i]);if(s)return s}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const i=[];for(let s=0;s<e.length;s++){const r=t(e[s]);r&&i.push(r)}return i}getDependency(t,e){const i=t+":"+e;let s=this.cache.get(i);if(!s){switch(t){case"scene":s=this.loadScene(e);break;case"node":s=this._invokeOne(function(r){return r.loadNode&&r.loadNode(e)});break;case"mesh":s=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(e)});break;case"accessor":s=this.loadAccessor(e);break;case"bufferView":s=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(e)});break;case"buffer":s=this.loadBuffer(e);break;case"material":s=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(e)});break;case"texture":s=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(e)});break;case"skin":s=this.loadSkin(e);break;case"animation":s=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(e)});break;case"camera":s=this.loadCamera(e);break;default:if(s=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(t,e)}),!s)throw new Error("Unknown type: "+t);break}this.cache.add(i,s)}return s}getDependencies(t){let e=this.cache.get(t);if(!e){const i=this,s=this.json[t+(t==="mesh"?"es":"s")]||[];e=Promise.all(s.map(function(r,o){return i.getDependency(t,o)})),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],i=this.fileLoader;if(e.type&&e.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(e.uri===void 0&&t===0)return Promise.resolve(this.extensions[we.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(r,o){i.load(Hl.resolveURL(e.uri,s.path),r,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))})})}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then(function(i){const s=e.byteLength||0,r=e.byteOffset||0;return i.slice(r,r+s)})}loadAccessor(t){const e=this,i=this.json,s=this.json.accessors[t];if(s.bufferView===void 0&&s.sparse===void 0){const o=dd[s.type],l=_a[s.componentType],c=s.normalized===!0,h=new l(s.count*o);return Promise.resolve(new ii(h,o,c))}const r=[];return s.bufferView!==void 0?r.push(this.getDependency("bufferView",s.bufferView)):r.push(null),s.sparse!==void 0&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then(function(o){const l=o[0],c=dd[s.type],h=_a[s.componentType],f=h.BYTES_PER_ELEMENT,d=f*c,p=s.byteOffset||0,g=s.bufferView!==void 0?i.bufferViews[s.bufferView].byteStride:void 0,v=s.normalized===!0;let y,x;if(g&&g!==d){const _=Math.floor(p/g),w="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+_+":"+s.count;let C=e.cache.get(w);C||(y=new h(l,_*g,s.count*g/f),C=new z6(y,g/f),e.cache.add(w,C)),x=new Vm(C,c,p%g/f,v)}else l===null?y=new h(s.count*c):y=new h(l,p,s.count*c),x=new ii(y,c,v);if(s.sparse!==void 0){const _=dd.SCALAR,w=_a[s.sparse.indices.componentType],C=s.sparse.indices.byteOffset||0,S=s.sparse.values.byteOffset||0,T=new w(o[1],C,s.sparse.count*_),A=new h(o[2],S,s.sparse.count*c);l!==null&&(x=new ii(x.array.slice(),x.itemSize,x.normalized)),x.normalized=!1;for(let P=0,N=T.length;P<N;P++){const E=T[P];if(x.setX(E,A[P*c]),c>=2&&x.setY(E,A[P*c+1]),c>=3&&x.setZ(E,A[P*c+2]),c>=4&&x.setW(E,A[P*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}x.normalized=v}return x})}loadTexture(t){const e=this.json,i=this.options,r=e.textures[t].source,o=e.images[r];let l=this.textureLoader;if(o.uri){const c=i.manager.getHandler(o.uri);c!==null&&(l=c)}return this.loadTextureImage(t,r,l)}loadTextureImage(t,e,i){const s=this,r=this.json,o=r.textures[t],l=r.images[e],c=(l.uri||l.bufferView)+":"+o.sampler;if(this.textureCache[c])return this.textureCache[c];const h=this.loadImageSource(e,i).then(function(f){f.flipY=!1,f.name=o.name||l.name||"",f.name===""&&typeof l.uri=="string"&&l.uri.startsWith("data:image/")===!1&&(f.name=l.uri);const p=(r.samplers||{})[o.sampler]||{};return f.magFilter=E0[p.magFilter]||yi,f.minFilter=E0[p.minFilter]||Vs,f.wrapS=A0[p.wrapS]||Pa,f.wrapT=A0[p.wrapT]||Pa,f.generateMipmaps=!f.isCompressedTexture&&f.minFilter!==ni&&f.minFilter!==yi,s.associations.set(f,{textures:t}),f}).catch(function(){return null});return this.textureCache[c]=h,h}loadImageSource(t,e){const i=this,s=this.json,r=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(d=>d.clone());const o=s.images[t],l=self.URL||self.webkitURL;let c=o.uri||"",h=!1;if(o.bufferView!==void 0)c=i.getDependency("bufferView",o.bufferView).then(function(d){h=!0;const p=new Blob([d],{type:o.mimeType});return c=l.createObjectURL(p),c});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const f=Promise.resolve(c).then(function(d){return new Promise(function(p,g){let v=p;e.isImageBitmapLoader===!0&&(v=function(y){const x=new Dn(y);x.needsUpdate=!0,p(x)}),e.load(Hl.resolveURL(d,r.path),v,void 0,g)})}).then(function(d){return h===!0&&l.revokeObjectURL(c),Us(d,o),d.userData.mimeType=o.mimeType||XA(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),d});return this.sourceCache[t]=f,f}assignTexture(t,e,i,s){const r=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),r.extensions[we.KHR_TEXTURE_TRANSFORM]){const l=i.extensions!==void 0?i.extensions[we.KHR_TEXTURE_TRANSFORM]:void 0;if(l){const c=r.associations.get(o);o=r.extensions[we.KHR_TEXTURE_TRANSFORM].extendTexture(o,l),r.associations.set(o,c)}}return s!==void 0&&(o.colorSpace=s),t[e]=o,o})}assignFinalMaterial(t){const e=t.geometry;let i=t.material;const s=e.attributes.tangent===void 0,r=e.attributes.color!==void 0,o=e.attributes.normal===void 0;if(t.isPoints){const l="PointsMaterial:"+i.uuid;let c=this.cache.get(l);c||(c=new kx,us.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,c.sizeAttenuation=!1,this.cache.add(l,c)),i=c}else if(t.isLine){const l="LineBasicMaterial:"+i.uuid;let c=this.cache.get(l);c||(c=new jm,us.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,this.cache.add(l,c)),i=c}if(s||r||o){let l="ClonedMaterial:"+i.uuid+":";s&&(l+="derivative-tangents:"),r&&(l+="vertex-colors:"),o&&(l+="flat-shading:");let c=this.cache.get(l);c||(c=i.clone(),r&&(c.vertexColors=!0),o&&(c.flatShading=!0),s&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(l,c),this.associations.set(c,this.associations.get(i))),i=c}t.material=i}getMaterialType(){return Nu}loadMaterial(t){const e=this,i=this.json,s=this.extensions,r=i.materials[t];let o;const l={},c=r.extensions||{},h=[];if(c[we.KHR_MATERIALS_UNLIT]){const d=s[we.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),h.push(d.extendParams(l,r,e))}else{const d=r.pbrMetallicRoughness||{};if(l.color=new pe(1,1,1),l.opacity=1,Array.isArray(d.baseColorFactor)){const p=d.baseColorFactor;l.color.setRGB(p[0],p[1],p[2],si),l.opacity=p[3]}d.baseColorTexture!==void 0&&h.push(e.assignTexture(l,"map",d.baseColorTexture,Fn)),l.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,l.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(h.push(e.assignTexture(l,"metalnessMap",d.metallicRoughnessTexture)),h.push(e.assignTexture(l,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(t)}),h.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(t,l)})))}r.doubleSided===!0&&(l.side=as);const f=r.alphaMode||pd.OPAQUE;if(f===pd.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,f===pd.MASK&&(l.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&o!==xr&&(h.push(e.assignTexture(l,"normalMap",r.normalTexture)),l.normalScale=new le(1,1),r.normalTexture.scale!==void 0)){const d=r.normalTexture.scale;l.normalScale.set(d,d)}if(r.occlusionTexture!==void 0&&o!==xr&&(h.push(e.assignTexture(l,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(l.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&o!==xr){const d=r.emissiveFactor;l.emissive=new pe().setRGB(d[0],d[1],d[2],si)}return r.emissiveTexture!==void 0&&o!==xr&&h.push(e.assignTexture(l,"emissiveMap",r.emissiveTexture,Fn)),Promise.all(h).then(function(){const d=new o(l);return r.name&&(d.name=r.name),Us(d,r),e.associations.set(d,{materials:t}),r.extensions&&$r(s,d,r),d})}createUniqueName(t){const e=Ze.sanitizeNodeName(t||"");return e in this.nodeNamesUsed?e+"_"+ ++this.nodeNamesUsed[e]:(this.nodeNamesUsed[e]=0,e)}loadGeometries(t){const e=this,i=this.extensions,s=this.primitiveCache;function r(l){return i[we.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,e).then(function(c){return P0(c,l,e)})}const o=[];for(let l=0,c=t.length;l<c;l++){const h=t[l],f=jA(h),d=s[f];if(d)o.push(d.promise);else{let p;h.extensions&&h.extensions[we.KHR_DRACO_MESH_COMPRESSION]?p=r(h):p=P0(new Ni,h,e),s[f]={primitive:h,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(t){const e=this,i=this.json,s=this.extensions,r=i.meshes[t],o=r.primitives,l=[];for(let c=0,h=o.length;c<h;c++){const f=o[c].material===void 0?VA(this.cache):this.getDependency("material",o[c].material);l.push(f)}return l.push(e.loadGeometries(o)),Promise.all(l).then(function(c){const h=c.slice(0,c.length-1),f=c[c.length-1],d=[];for(let g=0,v=f.length;g<v;g++){const y=f[g],x=o[g];let _;const w=h[g];if(x.mode===Pi.TRIANGLES||x.mode===Pi.TRIANGLE_STRIP||x.mode===Pi.TRIANGLE_FAN||x.mode===void 0)_=r.isSkinnedMesh===!0?new V6(y,w):new ti(y,w),_.isSkinnedMesh===!0&&_.normalizeSkinWeights(),x.mode===Pi.TRIANGLE_STRIP?_.geometry=w0(_.geometry,Mx):x.mode===Pi.TRIANGLE_FAN&&(_.geometry=w0(_.geometry,zp));else if(x.mode===Pi.LINES)_=new q6(y,w);else if(x.mode===Pi.LINE_STRIP)_=new Du(y,w);else if(x.mode===Pi.LINE_LOOP)_=new $6(y,w);else if(x.mode===Pi.POINTS)_=new K6(y,w);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+x.mode);Object.keys(_.geometry.morphAttributes).length>0&&GA(_,r),_.name=e.createUniqueName(r.name||"mesh_"+t),Us(_,r),x.extensions&&$r(s,_,x),e.assignFinalMaterial(_),d.push(_)}for(let g=0,v=d.length;g<v;g++)e.associations.set(d[g],{meshes:t,primitives:g});if(d.length===1)return r.extensions&&$r(s,d[0],r),d[0];const p=new ho;r.extensions&&$r(s,p,r),e.associations.set(p,{meshes:t});for(let g=0,v=d.length;g<v;g++)p.add(d[g]);return p})}loadCamera(t){let e;const i=this.json.cameras[t],s=i[i.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?e=new Jn(wx.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):i.type==="orthographic"&&(e=new qm(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),i.name&&(e.name=this.createUniqueName(i.name)),Us(e,i),Promise.resolve(e)}loadSkin(t){const e=this.json.skins[t],i=[];for(let s=0,r=e.joints.length;s<r;s++)i.push(this._loadNodeShallow(e.joints[s]));return e.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",e.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(s){const r=s.pop(),o=s,l=[],c=[];for(let h=0,f=o.length;h<f;h++){const d=o[h];if(d){l.push(d);const p=new _e;r!==null&&p.fromArray(r.array,h*16),c.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[h])}return new Wm(l,c)})}loadAnimation(t){const e=this.json,i=this,s=e.animations[t],r=s.name?s.name:"animation_"+t,o=[],l=[],c=[],h=[],f=[];for(let d=0,p=s.channels.length;d<p;d++){const g=s.channels[d],v=s.samplers[g.sampler],y=g.target,x=y.node,_=s.parameters!==void 0?s.parameters[v.input]:v.input,w=s.parameters!==void 0?s.parameters[v.output]:v.output;y.node!==void 0&&(o.push(this.getDependency("node",x)),l.push(this.getDependency("accessor",_)),c.push(this.getDependency("accessor",w)),h.push(v),f.push(y))}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(c),Promise.all(h),Promise.all(f)]).then(function(d){const p=d[0],g=d[1],v=d[2],y=d[3],x=d[4],_=[];for(let w=0,C=p.length;w<C;w++){const S=p[w],T=g[w],A=v[w],P=y[w],N=x[w];if(S===void 0)continue;S.updateMatrix&&S.updateMatrix();const E=i._createAnimationTracks(S,T,A,P,N);if(E)for(let R=0;R<E.length;R++)_.push(E[R])}return new o9(r,void 0,_)})}createNodeMesh(t){const e=this.json,i=this,s=e.nodes[t];return s.mesh===void 0?null:i.getDependency("mesh",s.mesh).then(function(r){const o=i._getNodeRef(i.meshCache,s.mesh,r);return s.weights!==void 0&&o.traverse(function(l){if(l.isMesh)for(let c=0,h=s.weights.length;c<h;c++)l.morphTargetInfluences[c]=s.weights[c]}),o})}loadNode(t){const e=this.json,i=this,s=e.nodes[t],r=i._loadNodeShallow(t),o=[],l=s.children||[];for(let h=0,f=l.length;h<f;h++)o.push(i.getDependency("node",l[h]));const c=s.skin===void 0?Promise.resolve(null):i.getDependency("skin",s.skin);return Promise.all([r,Promise.all(o),c]).then(function(h){const f=h[0],d=h[1],p=h[2];p!==null&&f.traverse(function(g){g.isSkinnedMesh&&g.bind(p,ZA)});for(let g=0,v=d.length;g<v;g++)f.add(d[g]);return f})}_loadNodeShallow(t){const e=this.json,i=this.extensions,s=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];const r=e.nodes[t],o=r.name?s.createUniqueName(r.name):"",l=[],c=s._invokeOne(function(h){return h.createNodeMesh&&h.createNodeMesh(t)});return c&&l.push(c),r.camera!==void 0&&l.push(s.getDependency("camera",r.camera).then(function(h){return s._getNodeRef(s.cameraCache,r.camera,h)})),s._invokeAll(function(h){return h.createNodeAttachment&&h.createNodeAttachment(t)}).forEach(function(h){l.push(h)}),this.nodeCache[t]=Promise.all(l).then(function(h){let f;if(r.isBone===!0?f=new Ox:h.length>1?f=new ho:h.length===1?f=h[0]:f=new _n,f!==h[0])for(let d=0,p=h.length;d<p;d++)f.add(h[d]);if(r.name&&(f.userData.name=r.name,f.name=o),Us(f,r),r.extensions&&$r(i,f,r),r.matrix!==void 0){const d=new _e;d.fromArray(r.matrix),f.applyMatrix4(d)}else r.translation!==void 0&&f.position.fromArray(r.translation),r.rotation!==void 0&&f.quaternion.fromArray(r.rotation),r.scale!==void 0&&f.scale.fromArray(r.scale);if(!s.associations.has(f))s.associations.set(f,{});else if(r.mesh!==void 0&&s.meshCache.refs[r.mesh]>1){const d=s.associations.get(f);s.associations.set(f,{...d})}return s.associations.get(f).nodes=t,f}),this.nodeCache[t]}loadScene(t){const e=this.extensions,i=this.json.scenes[t],s=this,r=new ho;i.name&&(r.name=s.createUniqueName(i.name)),Us(r,i),i.extensions&&$r(e,r,i);const o=i.nodes||[],l=[];for(let c=0,h=o.length;c<h;c++)l.push(s.getDependency("node",o[c]));return Promise.all(l).then(function(c){for(let f=0,d=c.length;f<d;f++)r.add(c[f]);const h=f=>{const d=new Map;for(const[p,g]of s.associations)(p instanceof us||p instanceof Dn)&&d.set(p,g);return f.traverse(p=>{const g=s.associations.get(p);g!=null&&d.set(p,g)}),d};return s.associations=h(r),r})}_createAnimationTracks(t,e,i,s,r){const o=[],l=t.name?t.name:t.uuid,c=[];fr[r.path]===fr.weights?t.traverse(function(p){p.morphTargetInfluences&&c.push(p.name?p.name:p.uuid)}):c.push(l);let h;switch(fr[r.path]){case fr.weights:h=Ia;break;case fr.rotation:h=Da;break;case fr.translation:case fr.scale:h=Oa;break;default:switch(i.itemSize){case 1:h=Ia;break;case 2:case 3:default:h=Oa;break}break}const f=s.interpolation!==void 0?HA[s.interpolation]:nc,d=this._getArrayFromAccessor(i);for(let p=0,g=c.length;p<g;p++){const v=new h(c[p]+"."+fr[r.path],e.array,d,f);s.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(v),o.push(v)}return o}_getArrayFromAccessor(t){let e=t.array;if(t.normalized){const i=Zp(e.constructor),s=new Float32Array(e.length);for(let r=0,o=e.length;r<o;r++)s[r]=e[r]*i;e=s}return e}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(i){const s=this instanceof Da?zA:qx;return new s(this.times,this.values,this.getValueSize()/3,i)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function qA(n,t,e){const i=t.attributes,s=new er;if(i.POSITION!==void 0){const l=e.json.accessors[i.POSITION],c=l.min,h=l.max;if(c!==void 0&&h!==void 0){if(s.set(new X(c[0],c[1],c[2]),new X(h[0],h[1],h[2])),l.normalized){const f=Zp(_a[l.componentType]);s.min.multiplyScalar(f),s.max.multiplyScalar(f)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=t.targets;if(r!==void 0){const l=new X,c=new X;for(let h=0,f=r.length;h<f;h++){const d=r[h];if(d.POSITION!==void 0){const p=e.json.accessors[d.POSITION],g=p.min,v=p.max;if(g!==void 0&&v!==void 0){if(c.setX(Math.max(Math.abs(g[0]),Math.abs(v[0]))),c.setY(Math.max(Math.abs(g[1]),Math.abs(v[1]))),c.setZ(Math.max(Math.abs(g[2]),Math.abs(v[2]))),p.normalized){const y=Zp(_a[p.componentType]);c.multiplyScalar(y)}l.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(l)}n.boundingBox=s;const o=new xs;s.getCenter(o.center),o.radius=s.min.distanceTo(s.max)/2,n.boundingSphere=o}function P0(n,t,e){const i=t.attributes,s=[];function r(o,l){return e.getDependency("accessor",o).then(function(c){n.setAttribute(l,c)})}for(const o in i){const l=Xp[o]||o.toLowerCase();l in n.attributes||s.push(r(i[o],l))}if(t.indices!==void 0&&!n.index){const o=e.getDependency("accessor",t.indices).then(function(l){n.setIndex(l)});s.push(o)}return Fe.workingColorSpace!==si&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Fe.workingColorSpace}" not supported.`),Us(n,t),qA(n,t,e),Promise.all(s).then(function(){return t.targets!==void 0?WA(n,t.targets,e):n})}const R0={type:"change"},Qm={type:"start"},$x={type:"end"},_h=new Wa,L0=new dr,$A=Math.cos(70*wx.DEG2RAD),Cn=new X,ai=2*Math.PI,Je={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},gd=1e-6;class KA extends L9{constructor(t,e=null){super(t,e),this.state=Je.NONE,this.target=new X,this.cursor=new X,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:da.ROTATE,MIDDLE:da.DOLLY,RIGHT:da.PAN},this.touches={ONE:aa.ROTATE,TWO:aa.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new X,this._lastQuaternion=new gs,this._lastTargetPosition=new X,this._quat=new gs().setFromUnitVectors(t.up,new X(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new Q_,this._sphericalDelta=new Q_,this._scale=1,this._panOffset=new X,this._rotateStart=new le,this._rotateEnd=new le,this._rotateDelta=new le,this._panStart=new le,this._panEnd=new le,this._panDelta=new le,this._dollyStart=new le,this._dollyEnd=new le,this._dollyDelta=new le,this._dollyDirection=new X,this._mouse=new le,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=QA.bind(this),this._onPointerDown=JA.bind(this),this._onPointerUp=tP.bind(this),this._onContextMenu=aP.bind(this),this._onMouseWheel=iP.bind(this),this._onKeyDown=sP.bind(this),this._onTouchStart=rP.bind(this),this._onTouchMove=oP.bind(this),this._onMouseDown=eP.bind(this),this._onMouseMove=nP.bind(this),this._interceptControlDown=lP.bind(this),this._interceptControlUp=cP.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(t){super.connect(t),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(t){t.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=t}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(R0),this.update(),this.state=Je.NONE}update(t=null){const e=this.object.position;Cn.copy(e).sub(this.target),Cn.applyQuaternion(this._quat),this._spherical.setFromVector3(Cn),this.autoRotate&&this.state===Je.NONE&&this._rotateLeft(this._getAutoRotationAngle(t)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,s=this.maxAzimuthAngle;isFinite(i)&&isFinite(s)&&(i<-Math.PI?i+=ai:i>Math.PI&&(i-=ai),s<-Math.PI?s+=ai:s>Math.PI&&(s-=ai),i<=s?this._spherical.theta=Math.max(i,Math.min(s,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(i+s)/2?Math.max(i,this._spherical.theta):Math.min(s,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let r=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const o=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),r=o!=this._spherical.radius}if(Cn.setFromSpherical(this._spherical),Cn.applyQuaternion(this._quatInverse),e.copy(this.target).add(Cn),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let o=null;if(this.object.isPerspectiveCamera){const l=Cn.length();o=this._clampDistance(l*this._scale);const c=l-o;this.object.position.addScaledVector(this._dollyDirection,c),this.object.updateMatrixWorld(),r=!!c}else if(this.object.isOrthographicCamera){const l=new X(this._mouse.x,this._mouse.y,0);l.unproject(this.object);const c=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),r=c!==this.object.zoom;const h=new X(this._mouse.x,this._mouse.y,0);h.unproject(this.object),this.object.position.sub(h).add(l),this.object.updateMatrixWorld(),o=Cn.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;o!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(o).add(this.object.position):(_h.origin.copy(this.object.position),_h.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(_h.direction))<$A?this.object.lookAt(this.target):(L0.setFromNormalAndCoplanarPoint(this.object.up,this.target),_h.intersectPlane(L0,this.target))))}else if(this.object.isOrthographicCamera){const o=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),o!==this.object.zoom&&(this.object.updateProjectionMatrix(),r=!0)}return this._scale=1,this._performCursorZoom=!1,r||this._lastPosition.distanceToSquared(this.object.position)>gd||8*(1-this._lastQuaternion.dot(this.object.quaternion))>gd||this._lastTargetPosition.distanceToSquared(this.target)>gd?(this.dispatchEvent(R0),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(t){return t!==null?ai/60*this.autoRotateSpeed*t:ai/60/60*this.autoRotateSpeed}_getZoomScale(t){const e=Math.abs(t*.01);return Math.pow(.95,this.zoomSpeed*e)}_rotateLeft(t){this._sphericalDelta.theta-=t}_rotateUp(t){this._sphericalDelta.phi-=t}_panLeft(t,e){Cn.setFromMatrixColumn(e,0),Cn.multiplyScalar(-t),this._panOffset.add(Cn)}_panUp(t,e){this.screenSpacePanning===!0?Cn.setFromMatrixColumn(e,1):(Cn.setFromMatrixColumn(e,0),Cn.crossVectors(this.object.up,Cn)),Cn.multiplyScalar(t),this._panOffset.add(Cn)}_pan(t,e){const i=this.domElement;if(this.object.isPerspectiveCamera){const s=this.object.position;Cn.copy(s).sub(this.target);let r=Cn.length();r*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*t*r/i.clientHeight,this.object.matrix),this._panUp(2*e*r/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(t*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(e*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(t,e){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const i=this.domElement.getBoundingClientRect(),s=t-i.left,r=e-i.top,o=i.width,l=i.height;this._mouse.x=s/o*2-1,this._mouse.y=-(r/l)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(t){return Math.max(this.minDistance,Math.min(this.maxDistance,t))}_handleMouseDownRotate(t){this._rotateStart.set(t.clientX,t.clientY)}_handleMouseDownDolly(t){this._updateZoomParameters(t.clientX,t.clientX),this._dollyStart.set(t.clientX,t.clientY)}_handleMouseDownPan(t){this._panStart.set(t.clientX,t.clientY)}_handleMouseMoveRotate(t){this._rotateEnd.set(t.clientX,t.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const e=this.domElement;this._rotateLeft(ai*this._rotateDelta.x/e.clientHeight),this._rotateUp(ai*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(t){this._dollyEnd.set(t.clientX,t.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(t){this._panEnd.set(t.clientX,t.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(t){this._updateZoomParameters(t.clientX,t.clientY),t.deltaY<0?this._dollyIn(this._getZoomScale(t.deltaY)):t.deltaY>0&&this._dollyOut(this._getZoomScale(t.deltaY)),this.update()}_handleKeyDown(t){let e=!1;switch(t.code){case this.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(ai*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),e=!0;break;case this.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(-ai*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),e=!0;break;case this.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(ai*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),e=!0;break;case this.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(-ai*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),e=!0;break}e&&(t.preventDefault(),this.update())}_handleTouchStartRotate(t){if(this._pointers.length===1)this._rotateStart.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),s=.5*(t.pageY+e.y);this._rotateStart.set(i,s)}}_handleTouchStartPan(t){if(this._pointers.length===1)this._panStart.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),s=.5*(t.pageY+e.y);this._panStart.set(i,s)}}_handleTouchStartDolly(t){const e=this._getSecondPointerPosition(t),i=t.pageX-e.x,s=t.pageY-e.y,r=Math.sqrt(i*i+s*s);this._dollyStart.set(0,r)}_handleTouchStartDollyPan(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enablePan&&this._handleTouchStartPan(t)}_handleTouchStartDollyRotate(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enableRotate&&this._handleTouchStartRotate(t)}_handleTouchMoveRotate(t){if(this._pointers.length==1)this._rotateEnd.set(t.pageX,t.pageY);else{const i=this._getSecondPointerPosition(t),s=.5*(t.pageX+i.x),r=.5*(t.pageY+i.y);this._rotateEnd.set(s,r)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const e=this.domElement;this._rotateLeft(ai*this._rotateDelta.x/e.clientHeight),this._rotateUp(ai*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(t){if(this._pointers.length===1)this._panEnd.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),s=.5*(t.pageY+e.y);this._panEnd.set(i,s)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(t){const e=this._getSecondPointerPosition(t),i=t.pageX-e.x,s=t.pageY-e.y,r=Math.sqrt(i*i+s*s);this._dollyEnd.set(0,r),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const o=(t.pageX+e.x)*.5,l=(t.pageY+e.y)*.5;this._updateZoomParameters(o,l)}_handleTouchMoveDollyPan(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enablePan&&this._handleTouchMovePan(t)}_handleTouchMoveDollyRotate(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enableRotate&&this._handleTouchMoveRotate(t)}_addPointer(t){this._pointers.push(t.pointerId)}_removePointer(t){delete this._pointerPositions[t.pointerId];for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId){this._pointers.splice(e,1);return}}_isTrackingPointer(t){for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId)return!0;return!1}_trackPointer(t){let e=this._pointerPositions[t.pointerId];e===void 0&&(e=new le,this._pointerPositions[t.pointerId]=e),e.set(t.pageX,t.pageY)}_getSecondPointerPosition(t){const e=t.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[e]}_customWheelEvent(t){const e=t.deltaMode,i={clientX:t.clientX,clientY:t.clientY,deltaY:t.deltaY};switch(e){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100;break}return t.ctrlKey&&!this._controlActive&&(i.deltaY*=10),i}}function JA(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(n)&&(this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n)))}function QA(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function tP(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent($x),this.state=Je.NONE;break;case 1:const t=this._pointers[0],e=this._pointerPositions[t];this._onTouchStart({pointerId:t,pageX:e.x,pageY:e.y});break}}function eP(n){let t;switch(n.button){case 0:t=this.mouseButtons.LEFT;break;case 1:t=this.mouseButtons.MIDDLE;break;case 2:t=this.mouseButtons.RIGHT;break;default:t=-1}switch(t){case da.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(n),this.state=Je.DOLLY;break;case da.ROTATE:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=Je.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=Je.ROTATE}break;case da.PAN:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=Je.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=Je.PAN}break;default:this.state=Je.NONE}this.state!==Je.NONE&&this.dispatchEvent(Qm)}function nP(n){switch(this.state){case Je.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(n);break;case Je.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(n);break;case Je.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(n);break}}function iP(n){this.enabled===!1||this.enableZoom===!1||this.state!==Je.NONE||(n.preventDefault(),this.dispatchEvent(Qm),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent($x))}function sP(n){this.enabled!==!1&&this._handleKeyDown(n)}function rP(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case aa.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(n),this.state=Je.TOUCH_ROTATE;break;case aa.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(n),this.state=Je.TOUCH_PAN;break;default:this.state=Je.NONE}break;case 2:switch(this.touches.TWO){case aa.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(n),this.state=Je.TOUCH_DOLLY_PAN;break;case aa.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(n),this.state=Je.TOUCH_DOLLY_ROTATE;break;default:this.state=Je.NONE}break;default:this.state=Je.NONE}this.state!==Je.NONE&&this.dispatchEvent(Qm)}function oP(n){switch(this._trackPointer(n),this.state){case Je.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(n),this.update();break;case Je.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(n),this.update();break;case Je.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(n),this.update();break;case Je.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=Je.NONE}}function aP(n){this.enabled!==!1&&n.preventDefault()}function lP(n){n.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function cP(n){n.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}var hP=ce('<canvas width="800" height="600"></canvas>');function uP(n,t){tn(t,!1);let e=xe(null);zn(()=>{const s=new B6,r=new Jn(75,U(e).clientWidth/U(e).clientHeight,.1,1e3);r.position.set(0,1,3);const o=new pA({canvas:U(e),antialias:!0});o.setSize(U(e).clientWidth,U(e).clientHeight);const l=new Hx(16777215,1);l.position.set(5,10,7.5),s.add(l),new mA().load("/models/scene.glb",v=>{s.add(v.scene);const y=new Nu({color:16711680}),x=new ti(new Ga(1,1,1),y);x.position.set(2,.5,0),s.add(x)});const h=new KA(r,o.domElement),f=new R9,d=new le;function p(v){d.x=v.clientX/U(e).clientWidth*2-1,d.y=-(v.clientY/U(e).clientHeight)*2+1,f.setFromCamera(d,r);const y=f.intersectObjects(s.children,!0);if(y.length>0){const x=y[0].point,_=new ti(new Xm(.05,16,16),new xr({color:16711680}));_.position.copy(x),s.add(_);const C=[f.ray.origin.clone(),x.clone()],S=new Ni().setFromPoints(C),T=new jm({color:65280}),A=new Du(S,T);s.add(A),setTimeout(()=>s.remove(A),2e3)}}U(e).addEventListener("click",p);function g(){requestAnimationFrame(g),h.update(),o.render(s,r)}g()}),vn();var i=hP();Po(i,s=>Ft(e,s),()=>U(e)),Rt(n,i),en()}function I0(n,t){t&&t!=="lg"&&t!=="sm"&&t!=="xs"?n.style.fontSize=t.replace("x","em"):n.style.fontSize=""}function fP(n,t,e,i,s,r=1,o="",l=""){let c=1,h=1;s&&(s=="horizontal"?c=-1:s=="vertical"?h=-1:c=h=-1),typeof n=="string"&&(n=parseFloat(n)),typeof t=="string"&&(t=parseFloat(t)),typeof e=="string"&&(e=parseFloat(e));const f=`${t*r}${o}`,d=`${e*r}${o}`;let p=`translate(${f},${d}) scale(${c*n},${h*n})`;return i&&(p+=` rotate(${i}${l})`),p}var dP=kr('<title class="svelte-bvo74f"> </title>'),pP=kr('<path class="svelte-bvo74f"></path>'),mP=kr('<path class="svelte-bvo74f"></path><path class="svelte-bvo74f"></path>',1),gP=kr('<svg role="img" xmlns="http://www.w3.org/2000/svg"><!><g class="svelte-bvo74f"><g class="svelte-bvo74f"><!></g></g></svg>');function _P(n,t){tn(t,!1);const e=xe(),i=xe();let s=mt(t,"class",24,()=>{}),r=mt(t,"id",24,()=>{}),o=mt(t,"style",24,()=>{}),l=mt(t,"icon",8),c=mt(t,"title",24,()=>{}),h=mt(t,"size",24,()=>{}),f=mt(t,"color",24,()=>{}),d=mt(t,"fw",8,!1),p=mt(t,"pull",24,()=>{}),g=mt(t,"scale",8,1),v=mt(t,"translateX",8,0),y=mt(t,"translateY",8,0),x=mt(t,"rotate",24,()=>{}),_=mt(t,"flip",24,()=>{}),w=mt(t,"spin",8,!1),C=mt(t,"pulse",8,!1),S=mt(t,"primaryColor",8,""),T=mt(t,"secondaryColor",8,""),A=mt(t,"primaryOpacity",8,1),P=mt(t,"secondaryOpacity",8,.4),N=mt(t,"swapOpacity",8,!1),E=xe();wr(()=>(U(E),zt(h()),I0),()=>{U(E)&&h()&&I0(U(E),h())}),wr(()=>zt(l()),()=>{Ft(e,l()&&l().icon||[0,0,"",[],""])}),wr(()=>(zt(g()),zt(v()),zt(y()),zt(x()),zt(_())),()=>{Ft(i,fP(g(),v(),y(),x(),_(),512))}),dc(),vn();var R=Bn(),k=xn(R);{var H=q=>{var G=gP();let Y;var j=ut(G);{var et=Dt=>{var At=dP(),K=ut(At);an(()=>We(K,c())),Rt(Dt,At)};gn(j,Dt=>{c()&&Dt(et)})}var V=St(j),ct=ut(V),rt=ut(ct);{var gt=Dt=>{var At=pP();an(()=>{Ce(At,"d",(U(e),ft(()=>U(e)[4]))),Ce(At,"fill",f()||S()||"currentColor"),Ce(At,"transform",`translate(${U(e),ft(()=>U(e)[0]/-2)??""} ${U(e),ft(()=>U(e)[1]/-2)??""})`)}),Rt(Dt,At)},It=Dt=>{var At=mP(),K=xn(At),st=St(K);an(()=>{Ce(K,"d",(U(e),ft(()=>U(e)[4][0]))),Ce(K,"fill",T()||f()||"currentColor"),Ce(K,"fill-opacity",N()!=!1?A():P()),Ce(K,"transform",`translate(${U(e),ft(()=>U(e)[0]/-2)??""} ${U(e),ft(()=>U(e)[1]/-2)??""})`),Ce(st,"d",(U(e),ft(()=>U(e)[4][1]))),Ce(st,"fill",S()||f()||"currentColor"),Ce(st,"fill-opacity",N()!=!1?P():A()),Ce(st,"transform",`translate(${U(e),ft(()=>U(e)[0]/-2)??""} ${U(e),ft(()=>U(e)[1]/-2)??""})`)}),Rt(Dt,At)};gn(rt,Dt=>{U(e),ft(()=>typeof U(e)[4]=="string")?Dt(gt):Dt(It,!1)})}Po(G,Dt=>Ft(E,Dt),()=>U(E)),an(Dt=>{Ce(G,"id",r()),Y=Kh(G,0,`svelte-fa svelte-fa-base ${s()??""}`,"svelte-bvo74f",Y,Dt),Yi(G,o()),Ce(G,"viewBox",`0 0 ${U(e),ft(()=>U(e)[0])??""} ${U(e),ft(()=>U(e)[1])??""}`),Ce(G,"aria-hidden",c()===void 0),Ce(V,"transform",`translate(${U(e),ft(()=>U(e)[0]/2)??""} ${U(e),ft(()=>U(e)[1]/2)??""})`),Ce(V,"transform-origin",`${U(e),ft(()=>U(e)[0]/4)??""} 0`),Ce(ct,"transform",U(i))},[()=>({pulse:C(),"svelte-fa-size-lg":h()==="lg","svelte-fa-size-sm":h()==="sm","svelte-fa-size-xs":h()==="xs","svelte-fa-fw":d(),"svelte-fa-pull-left":p()==="left","svelte-fa-pull-right":p()==="right",spin:w()})]),Rt(q,G)};gn(k,q=>{U(e),ft(()=>U(e)[4])&&q(H)})}Rt(n,R),en()}var vP=ce('<main class="px-8 py-16 max-w-7xl mx-auto text-onbg"><h1 class="text-onbg text-4xl md:text-5xl font-extrabold text-center mb-16 flex items-center justify-center gap-4"><!> Statistics Hub</h1> <nav class="grid grid-cols-1 md:grid-cols-4 gap-8"></nav></main>');function xP(n,t){tn(t,!1);const e=[{title:"Rent",href:"#/statistics/rent",icon:mo,description:"About that money"},{title:"Released",href:"#/statistics/released",icon:go,description:"How many released"},{title:"Interested",href:"#/statistics/interested",icon:W8,description:"How many interested"},{title:"Features",href:"#/statistics/feature",icon:V8,description:"Feature they have"}];vn();var i=vP(),s=ut(i),r=ut(s);_P(r,{get icon(){return Bs},get class(){return`${Bs.prefix??""}-icon w-12 h-12 text-privari animate-bounce`}});var o=St(s,2);Qn(o,5,()=>e,hi,(l,c)=>{cx(l,{get href(){return U(c).href},get icon(){return U(c).icon},get title(){return U(c).title},get description(){return U(c).description}})}),Rt(n,i),en()}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function bc(n){return n+.5|0}const yr=(n,t,e)=>Math.max(Math.min(n,e),t);function Ll(n){return yr(bc(n*2.55),0,255)}function Ar(n){return yr(bc(n*255),0,255)}function zs(n){return yr(bc(n/2.55)/100,0,1)}function D0(n){return yr(bc(n*100),0,100)}const Ei={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Yp=[..."0123456789ABCDEF"],yP=n=>Yp[n&15],bP=n=>Yp[(n&240)>>4]+Yp[n&15],vh=n=>(n&240)>>4===(n&15),MP=n=>vh(n.r)&&vh(n.g)&&vh(n.b)&&vh(n.a);function SP(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&Ei[n[1]]*17,g:255&Ei[n[2]]*17,b:255&Ei[n[3]]*17,a:t===5?Ei[n[4]]*17:255}:(t===7||t===9)&&(e={r:Ei[n[1]]<<4|Ei[n[2]],g:Ei[n[3]]<<4|Ei[n[4]],b:Ei[n[5]]<<4|Ei[n[6]],a:t===9?Ei[n[7]]<<4|Ei[n[8]]:255})),e}const CP=(n,t)=>n<255?t(n):"";function wP(n){var t=MP(n)?yP:bP;return n?"#"+t(n.r)+t(n.g)+t(n.b)+CP(n.a,t):void 0}const TP=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Kx(n,t,e){const i=t*Math.min(e,1-e),s=(r,o=(r+n/30)%12)=>e-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function EP(n,t,e){const i=(s,r=(s+n/60)%6)=>e-e*t*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function AP(n,t,e){const i=Kx(n,1,.5);let s;for(t+e>1&&(s=1/(t+e),t*=s,e*=s),s=0;s<3;s++)i[s]*=1-t-e,i[s]+=t;return i}function PP(n,t,e,i,s){return n===s?(t-e)/i+(t<e?6:0):t===s?(e-n)/i+2:(n-t)/i+4}function tg(n){const e=n.r/255,i=n.g/255,s=n.b/255,r=Math.max(e,i,s),o=Math.min(e,i,s),l=(r+o)/2;let c,h,f;return r!==o&&(f=r-o,h=l>.5?f/(2-r-o):f/(r+o),c=PP(e,i,s,f,r),c=c*60+.5),[c|0,h||0,l]}function eg(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(Ar)}function ng(n,t,e){return eg(Kx,n,t,e)}function RP(n,t,e){return eg(AP,n,t,e)}function LP(n,t,e){return eg(EP,n,t,e)}function Jx(n){return(n%360+360)%360}function IP(n){const t=TP.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?Ll(+t[5]):Ar(+t[5]));const s=Jx(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?i=RP(s,r,o):t[1]==="hsv"?i=LP(s,r,o):i=ng(s,r,o),{r:i[0],g:i[1],b:i[2],a:e}}function DP(n,t){var e=tg(n);e[0]=Jx(e[0]+t),e=ng(e),n.r=e[0],n.g=e[1],n.b=e[2]}function OP(n){if(!n)return;const t=tg(n),e=t[0],i=D0(t[1]),s=D0(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${s}%, ${zs(n.a)})`:`hsl(${e}, ${i}%, ${s}%)`}const O0={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},N0={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function NP(){const n={},t=Object.keys(N0),e=Object.keys(O0);let i,s,r,o,l;for(i=0;i<t.length;i++){for(o=l=t[i],s=0;s<e.length;s++)r=e[s],l=l.replace(r,O0[r]);r=parseInt(N0[o],16),n[l]=[r>>16&255,r>>8&255,r&255]}return n}let xh;function kP(n){xh||(xh=NP(),xh.transparent=[0,0,0,0]);const t=xh[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const FP=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function UP(n){const t=FP.exec(n);let e=255,i,s,r;if(t){if(t[7]!==i){const o=+t[7];e=t[8]?Ll(o):yr(o*255,0,255)}return i=+t[1],s=+t[3],r=+t[5],i=255&(t[2]?Ll(i):yr(i,0,255)),s=255&(t[4]?Ll(s):yr(s,0,255)),r=255&(t[6]?Ll(r):yr(r,0,255)),{r:i,g:s,b:r,a:e}}}function BP(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${zs(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const _d=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,sa=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function zP(n,t,e){const i=sa(zs(n.r)),s=sa(zs(n.g)),r=sa(zs(n.b));return{r:Ar(_d(i+e*(sa(zs(t.r))-i))),g:Ar(_d(s+e*(sa(zs(t.g))-s))),b:Ar(_d(r+e*(sa(zs(t.b))-r))),a:n.a+e*(t.a-n.a)}}function yh(n,t,e){if(n){let i=tg(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=ng(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function Qx(n,t){return n&&Object.assign(t||{},n)}function k0(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=Ar(n[3]))):(t=Qx(n,{r:0,g:0,b:0,a:1}),t.a=Ar(t.a)),t}function HP(n){return n.charAt(0)==="r"?UP(n):IP(n)}class sc{constructor(t){if(t instanceof sc)return t;const e=typeof t;let i;e==="object"?i=k0(t):e==="string"&&(i=SP(t)||kP(t)||HP(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=Qx(this._rgb);return t&&(t.a=zs(t.a)),t}set rgb(t){this._rgb=k0(t)}rgbString(){return this._valid?BP(this._rgb):void 0}hexString(){return this._valid?wP(this._rgb):void 0}hslString(){return this._valid?OP(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,s=t.rgb;let r;const o=e===r?.5:e,l=2*o-1,c=i.a-s.a,h=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;r=1-h,i.r=255&h*i.r+r*s.r+.5,i.g=255&h*i.g+r*s.g+.5,i.b=255&h*i.b+r*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=zP(this._rgb,t._rgb,e)),this}clone(){return new sc(this.rgb)}alpha(t){return this._rgb.a=Ar(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=bc(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return yh(this._rgb,2,t),this}darken(t){return yh(this._rgb,2,-t),this}saturate(t){return yh(this._rgb,1,t),this}desaturate(t){return yh(this._rgb,1,-t),this}rotate(t){return DP(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ds(){}const VP=(()=>{let n=0;return()=>n++})();function Te(n){return n==null}function fn(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Re(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function yn(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function vi(n,t){return yn(n)?n:t}function fe(n,t){return typeof n>"u"?t:n}const WP=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,ty=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function rn(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function Ye(n,t,e,i){let s,r,o;if(fn(n))for(r=n.length,s=0;s<r;s++)t.call(e,n[s],s);else if(Re(n))for(o=Object.keys(n),r=o.length,s=0;s<r;s++)t.call(e,n[o[s]],o[s])}function au(n,t){let e,i,s,r;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(s=n[e],r=t[e],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function lu(n){if(fn(n))return n.map(lu);if(Re(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let s=0;for(;s<i;++s)t[e[s]]=lu(n[e[s]]);return t}return n}function ey(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function GP(n,t,e,i){if(!ey(n))return;const s=t[n],r=e[n];Re(s)&&Re(r)?rc(s,r,i):t[n]=lu(r)}function rc(n,t,e){const i=fn(t)?t:[t],s=i.length;if(!Re(n))return n;e=e||{};const r=e.merger||GP;let o;for(let l=0;l<s;++l){if(o=i[l],!Re(o))continue;const c=Object.keys(o);for(let h=0,f=c.length;h<f;++h)r(c[h],n,o,e)}return n}function Vl(n,t){return rc(n,t,{merger:jP})}function jP(n,t,e){if(!ey(n))return;const i=t[n],s=e[n];Re(i)&&Re(s)?Vl(i,s):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=lu(s))}const F0={"":n=>n,x:n=>n.x,y:n=>n.y};function XP(n){const t=n.split("."),e=[];let i="";for(const s of t)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function ZP(n){const t=XP(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function Or(n,t){return(F0[t]||(F0[t]=ZP(t)))(n)}function ig(n){return n.charAt(0).toUpperCase()+n.slice(1)}const oc=n=>typeof n<"u",Nr=n=>typeof n=="function",U0=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function YP(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const He=Math.PI,cn=2*He,qP=cn+He,cu=Number.POSITIVE_INFINITY,$P=He/180,bn=He/2,Kr=He/4,B0=He*2/3,br=Math.log10,fs=Math.sign;function Wl(n,t,e){return Math.abs(n-t)<e}function z0(n){const t=Math.round(n);n=Wl(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(br(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function KP(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((s,r)=>s-r).pop(),t}function JP(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Na(n){return!JP(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function QP(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function ny(n,t,e){let i,s,r;for(i=0,s=n.length;i<s;i++)r=n[i][e],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function Xi(n){return n*(He/180)}function sg(n){return n*(180/He)}function H0(n){if(!yn(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function iy(n,t){const e=t.x-n.x,i=t.y-n.y,s=Math.sqrt(e*e+i*i);let r=Math.atan2(i,e);return r<-.5*He&&(r+=cn),{angle:r,distance:s}}function qp(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function tR(n,t){return(n-t+qP)%cn-He}function Gn(n){return(n%cn+cn)%cn}function ac(n,t,e,i){const s=Gn(n),r=Gn(t),o=Gn(e),l=Gn(r-s),c=Gn(o-s),h=Gn(s-r),f=Gn(s-o);return s===r||s===o||i&&r===o||l>c&&h<f}function In(n,t,e){return Math.max(t,Math.min(e,n))}function eR(n){return In(n,-32768,32767)}function Gs(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function rg(n,t,e){e=e||(o=>n[o]<t);let i=n.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,e(r)?s=r:i=r;return{lo:s,hi:i}}const js=(n,t,e,i)=>rg(n,e,i?s=>{const r=n[s][t];return r<e||r===e&&n[s+1][t]===e}:s=>n[s][t]<e),nR=(n,t,e)=>rg(n,e,i=>n[i][t]>=e);function iR(n,t,e){let i=0,s=n.length;for(;i<s&&n[i]<t;)i++;for(;s>i&&n[s-1]>e;)s--;return i>0||s<n.length?n.slice(i,s):n}const sy=["push","pop","shift","splice","unshift"];function sR(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),sy.forEach(e=>{const i="_onData"+ig(e),s=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return n._chartjs.listeners.forEach(l=>{typeof l[i]=="function"&&l[i](...r)}),o}})})}function V0(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,s=i.indexOf(t);s!==-1&&i.splice(s,1),!(i.length>0)&&(sy.forEach(r=>{delete n[r]}),delete n._chartjs)}function ry(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const oy=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function ay(n,t){let e=[],i=!1;return function(...s){e=s,i||(i=!0,oy.call(window,()=>{i=!1,n.apply(t,e)}))}}function rR(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const og=n=>n==="start"?"left":n==="end"?"right":"center",Wn=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,oR=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t;function ly(n,t,e){const i=t.length;let s=0,r=i;if(n._sorted){const{iScale:o,vScale:l,_parsed:c}=n,h=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,f=o.axis,{min:d,max:p,minDefined:g,maxDefined:v}=o.getUserBounds();if(g){if(s=Math.min(js(c,f,d).lo,e?i:js(t,f,o.getPixelForValue(d)).lo),h){const y=c.slice(0,s+1).reverse().findIndex(x=>!Te(x[l.axis]));s-=Math.max(0,y)}s=In(s,0,i-1)}if(v){let y=Math.max(js(c,o.axis,p,!0).hi+1,e?0:js(t,f,o.getPixelForValue(p),!0).hi+1);if(h){const x=c.slice(y-1).findIndex(_=>!Te(_[l.axis]));y+=Math.max(0,x)}r=In(y,s,i)-s}else r=i-s}return{start:s,count:r}}function cy(n){const{xScale:t,yScale:e,_scaleRanges:i}=n,s={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=s,!0;const r=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,s),r}const bh=n=>n===0||n===1,W0=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*cn/e)),G0=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*cn/e)+1,Gl={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*bn)+1,easeOutSine:n=>Math.sin(n*bn),easeInOutSine:n=>-.5*(Math.cos(He*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>bh(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>bh(n)?n:W0(n,.075,.3),easeOutElastic:n=>bh(n)?n:G0(n,.075,.3),easeInOutElastic(n){return bh(n)?n:n<.5?.5*W0(n*2,.1125,.45):.5+.5*G0(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-Gl.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Gl.easeInBounce(n*2)*.5:Gl.easeOutBounce(n*2-1)*.5+.5};function ag(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function j0(n){return ag(n)?n:new sc(n)}function vd(n){return ag(n)?n:new sc(n).saturate(.5).darken(.1).hexString()}const aR=["x","y","borderWidth","radius","tension"],lR=["color","borderColor","backgroundColor"];function cR(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:lR},numbers:{type:"number",properties:aR}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function hR(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const X0=new Map;function uR(n,t){t=t||{};const e=n+JSON.stringify(t);let i=X0.get(e);return i||(i=new Intl.NumberFormat(n,t),X0.set(e,i)),i}function Mc(n,t,e){return uR(t,e).format(n)}const hy={values(n){return fn(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let s,r=n;if(e.length>1){const h=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(h<1e-4||h>1e15)&&(s="scientific"),r=fR(n,e)}const o=br(Math.abs(r)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:s,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),Mc(n,i,c)},logarithmic(n,t,e){if(n===0)return"0";const i=e[t].significand||n/Math.pow(10,Math.floor(br(n)));return[1,2,3,5,10,15].includes(i)||t>.8*e.length?hy.numeric.call(this,n,t,e):""}};function fR(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var Fu={formatters:hy};function dR(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Fu.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Co=Object.create(null),$p=Object.create(null);function jl(n,t){if(!t)return n;const e=t.split(".");for(let i=0,s=e.length;i<s;++i){const r=e[i];n=n[r]||(n[r]=Object.create(null))}return n}function xd(n,t,e){return typeof t=="string"?rc(jl(n,t),e):rc(jl(n,""),t)}class pR{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>vd(s.backgroundColor),this.hoverBorderColor=(i,s)=>vd(s.borderColor),this.hoverColor=(i,s)=>vd(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return xd(this,t,e)}get(t){return jl(this,t)}describe(t,e){return xd($p,t,e)}override(t,e){return xd(Co,t,e)}route(t,e,i,s){const r=jl(this,t),o=jl(this,i),l="_"+e;Object.defineProperties(r,{[l]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const c=this[l],h=o[s];return Re(c)?Object.assign({},h,c):fe(c,h)},set(c){this[l]=c}}})}apply(t){t.forEach(e=>e(this))}}var dn=new pR({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[cR,hR,dR]);function mR(n){return!n||Te(n.size)||Te(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function hu(n,t,e,i,s){let r=t[s];return r||(r=t[s]=n.measureText(s).width,e.push(s)),r>i&&(i=r),i}function gR(n,t,e,i){i=i||{};let s=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(s=i.data={},r=i.garbageCollect=[],i.font=t),n.save(),n.font=t;let o=0;const l=e.length;let c,h,f,d,p;for(c=0;c<l;c++)if(d=e[c],d!=null&&!fn(d))o=hu(n,s,r,o,d);else if(fn(d))for(h=0,f=d.length;h<f;h++)p=d[h],p!=null&&!fn(p)&&(o=hu(n,s,r,o,p));n.restore();const g=r.length/2;if(g>e.length){for(c=0;c<g;c++)delete s[r[c]];r.splice(0,g)}return o}function Jr(n,t,e){const i=n.currentDevicePixelRatio,s=e!==0?Math.max(e/2,.5):0;return Math.round((t-s)*i)/i+s}function Z0(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function Kp(n,t,e,i){uy(n,t,e,i,null)}function uy(n,t,e,i,s){let r,o,l,c,h,f,d,p;const g=t.pointStyle,v=t.rotation,y=t.radius;let x=(v||0)*$P;if(g&&typeof g=="object"&&(r=g.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(x),n.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),n.restore();return}if(!(isNaN(y)||y<=0)){switch(n.beginPath(),g){default:s?n.ellipse(e,i,s/2,y,0,0,cn):n.arc(e,i,y,0,cn),n.closePath();break;case"triangle":f=s?s/2:y,n.moveTo(e+Math.sin(x)*f,i-Math.cos(x)*y),x+=B0,n.lineTo(e+Math.sin(x)*f,i-Math.cos(x)*y),x+=B0,n.lineTo(e+Math.sin(x)*f,i-Math.cos(x)*y),n.closePath();break;case"rectRounded":h=y*.516,c=y-h,o=Math.cos(x+Kr)*c,d=Math.cos(x+Kr)*(s?s/2-h:c),l=Math.sin(x+Kr)*c,p=Math.sin(x+Kr)*(s?s/2-h:c),n.arc(e-d,i-l,h,x-He,x-bn),n.arc(e+p,i-o,h,x-bn,x),n.arc(e+d,i+l,h,x,x+bn),n.arc(e-p,i+o,h,x+bn,x+He),n.closePath();break;case"rect":if(!v){c=Math.SQRT1_2*y,f=s?s/2:c,n.rect(e-f,i-c,2*f,2*c);break}x+=Kr;case"rectRot":d=Math.cos(x)*(s?s/2:y),o=Math.cos(x)*y,l=Math.sin(x)*y,p=Math.sin(x)*(s?s/2:y),n.moveTo(e-d,i-l),n.lineTo(e+p,i-o),n.lineTo(e+d,i+l),n.lineTo(e-p,i+o),n.closePath();break;case"crossRot":x+=Kr;case"cross":d=Math.cos(x)*(s?s/2:y),o=Math.cos(x)*y,l=Math.sin(x)*y,p=Math.sin(x)*(s?s/2:y),n.moveTo(e-d,i-l),n.lineTo(e+d,i+l),n.moveTo(e+p,i-o),n.lineTo(e-p,i+o);break;case"star":d=Math.cos(x)*(s?s/2:y),o=Math.cos(x)*y,l=Math.sin(x)*y,p=Math.sin(x)*(s?s/2:y),n.moveTo(e-d,i-l),n.lineTo(e+d,i+l),n.moveTo(e+p,i-o),n.lineTo(e-p,i+o),x+=Kr,d=Math.cos(x)*(s?s/2:y),o=Math.cos(x)*y,l=Math.sin(x)*y,p=Math.sin(x)*(s?s/2:y),n.moveTo(e-d,i-l),n.lineTo(e+d,i+l),n.moveTo(e+p,i-o),n.lineTo(e-p,i+o);break;case"line":o=s?s/2:Math.cos(x)*y,l=Math.sin(x)*y,n.moveTo(e-o,i-l),n.lineTo(e+o,i+l);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(x)*(s?s/2:y),i+Math.sin(x)*y);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function Xs(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function Uu(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function Bu(n){n.restore()}function _R(n,t,e,i,s){if(!t)return n.lineTo(e.x,e.y);if(s==="middle"){const r=(t.x+e.x)/2;n.lineTo(r,t.y),n.lineTo(r,e.y)}else s==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function vR(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function xR(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),Te(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function yR(n,t,e,i,s){if(s.strikethrough||s.underline){const r=n.measureText(i),o=t-r.actualBoundingBoxLeft,l=t+r.actualBoundingBoxRight,c=e-r.actualBoundingBoxAscent,h=e+r.actualBoundingBoxDescent,f=s.strikethrough?(c+h)/2:h;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(o,f),n.lineTo(l,f),n.stroke()}}function bR(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function wo(n,t,e,i,s,r={}){const o=fn(t)?t:[t],l=r.strokeWidth>0&&r.strokeColor!=="";let c,h;for(n.save(),n.font=s.string,xR(n,r),c=0;c<o.length;++c)h=o[c],r.backdrop&&bR(n,r.backdrop),l&&(r.strokeColor&&(n.strokeStyle=r.strokeColor),Te(r.strokeWidth)||(n.lineWidth=r.strokeWidth),n.strokeText(h,e,i,r.maxWidth)),n.fillText(h,e,i,r.maxWidth),yR(n,e,i,h,r),i+=Number(s.lineHeight);n.restore()}function lc(n,t){const{x:e,y:i,w:s,h:r,radius:o}=t;n.arc(e+o.topLeft,i+o.topLeft,o.topLeft,1.5*He,He,!0),n.lineTo(e,i+r-o.bottomLeft),n.arc(e+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,He,bn,!0),n.lineTo(e+s-o.bottomRight,i+r),n.arc(e+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,bn,0,!0),n.lineTo(e+s,i+o.topRight),n.arc(e+s-o.topRight,i+o.topRight,o.topRight,0,-bn,!0),n.lineTo(e+o.topLeft,i)}const MR=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,SR=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function CR(n,t){const e=(""+n).match(MR);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const wR=n=>+n||0;function lg(n,t){const e={},i=Re(t),s=i?Object.keys(t):t,r=Re(n)?i?o=>fe(n[o],n[t[o]]):o=>n[o]:()=>n;for(const o of s)e[o]=wR(r(o));return e}function fy(n){return lg(n,{top:"y",right:"x",bottom:"y",left:"x"})}function _o(n){return lg(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Zn(n){const t=fy(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Tn(n,t){n=n||{},t=t||dn.font;let e=fe(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=fe(n.style,t.style);i&&!(""+i).match(SR)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:fe(n.family,t.family),lineHeight:CR(fe(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:fe(n.weight,t.weight),string:""};return s.string=mR(s),s}function Il(n,t,e,i){let s,r,o;for(s=0,r=n.length;s<r;++s)if(o=n[s],o!==void 0&&o!==void 0)return o}function TR(n,t,e){const{min:i,max:s}=n,r=ty(t,(s-i)/2),o=(l,c)=>e&&l===0?0:l+c;return{min:o(i,-Math.abs(r)),max:o(s,r)}}function Fr(n,t){return Object.assign(Object.create(n),t)}function cg(n,t=[""],e,i,s=()=>n[0]){const r=e||n;typeof i>"u"&&(i=gy("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:r,_fallback:i,_getTarget:s,override:l=>cg([l,...n],t,r,i)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete n[0][c],!0},get(l,c){return py(l,c,()=>OR(c,t,n,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(l,c){return q0(l).includes(c)},ownKeys(l){return q0(l)},set(l,c,h){const f=l._storage||(l._storage=s());return l[c]=f[c]=h,delete l._keys,!0}})}function ka(n,t,e,i){const s={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:dy(n,i),setContext:r=>ka(n,r,e,i),override:r=>ka(n.override(r),t,e,i)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete n[o],!0},get(r,o,l){return py(r,o,()=>AR(r,o,l))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(r,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(r,o,l){return n[o]=l,delete r[o],!0}})}function dy(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:s=t.allKeys}=n;return{allKeys:s,scriptable:e,indexable:i,isScriptable:Nr(e)?e:()=>e,isIndexable:Nr(i)?i:()=>i}}const ER=(n,t)=>n?n+ig(t):t,hg=(n,t)=>Re(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function py(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function AR(n,t,e){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=n;let l=i[t];return Nr(l)&&o.isScriptable(t)&&(l=PR(t,l,n,e)),fn(l)&&l.length&&(l=RR(t,l,n,o.isIndexable)),hg(t,l)&&(l=ka(l,s,r&&r[t],o)),l}function PR(n,t,e,i){const{_proxy:s,_context:r,_subProxy:o,_stack:l}=e;if(l.has(n))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+n);l.add(n);let c=t(r,o||i);return l.delete(n),hg(n,c)&&(c=ug(s._scopes,s,n,c)),c}function RR(n,t,e,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:l}=e;if(typeof r.index<"u"&&i(n))return t[r.index%t.length];if(Re(t[0])){const c=t,h=s._scopes.filter(f=>f!==c);t=[];for(const f of c){const d=ug(h,s,n,f);t.push(ka(d,r,o&&o[n],l))}}return t}function my(n,t,e){return Nr(n)?n(t,e):n}const LR=(n,t)=>n===!0?t:typeof n=="string"?Or(t,n):void 0;function IR(n,t,e,i,s){for(const r of t){const o=LR(e,r);if(o){n.add(o);const l=my(o._fallback,e,s);if(typeof l<"u"&&l!==e&&l!==i)return l}else if(o===!1&&typeof i<"u"&&e!==i)return null}return!1}function ug(n,t,e,i){const s=t._rootScopes,r=my(t._fallback,e,i),o=[...n,...s],l=new Set;l.add(i);let c=Y0(l,o,e,r||e,i);return c===null||typeof r<"u"&&r!==e&&(c=Y0(l,o,r,c,i),c===null)?!1:cg(Array.from(l),[""],s,r,()=>DR(t,e,i))}function Y0(n,t,e,i,s){for(;e;)e=IR(n,t,e,i,s);return e}function DR(n,t,e){const i=n._getTarget();t in i||(i[t]={});const s=i[t];return fn(s)&&Re(e)?e:s||{}}function OR(n,t,e,i){let s;for(const r of t)if(s=gy(ER(r,n),e),typeof s<"u")return hg(n,s)?ug(e,i,n,s):s}function gy(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function q0(n){let t=n._keys;return t||(t=n._keys=NR(n._scopes)),t}function NR(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(s=>!s.startsWith("_")))t.add(i);return Array.from(t)}function _y(n,t,e,i){const{iScale:s}=n,{key:r="r"}=this._parsing,o=new Array(i);let l,c,h,f;for(l=0,c=i;l<c;++l)h=l+e,f=t[h],o[l]={r:s.parse(Or(f,r),h)};return o}const kR=Number.EPSILON||1e-14,Fa=(n,t)=>t<n.length&&!n[t].skip&&n[t],vy=n=>n==="x"?"y":"x";function FR(n,t,e,i){const s=n.skip?t:n,r=t,o=e.skip?t:e,l=qp(r,s),c=qp(o,r);let h=l/(l+c),f=c/(l+c);h=isNaN(h)?0:h,f=isNaN(f)?0:f;const d=i*h,p=i*f;return{previous:{x:r.x-d*(o.x-s.x),y:r.y-d*(o.y-s.y)},next:{x:r.x+p*(o.x-s.x),y:r.y+p*(o.y-s.y)}}}function UR(n,t,e){const i=n.length;let s,r,o,l,c,h=Fa(n,0);for(let f=0;f<i-1;++f)if(c=h,h=Fa(n,f+1),!(!c||!h)){if(Wl(t[f],0,kR)){e[f]=e[f+1]=0;continue}s=e[f]/t[f],r=e[f+1]/t[f],l=Math.pow(s,2)+Math.pow(r,2),!(l<=9)&&(o=3/Math.sqrt(l),e[f]=s*o*t[f],e[f+1]=r*o*t[f])}}function BR(n,t,e="x"){const i=vy(e),s=n.length;let r,o,l,c=Fa(n,0);for(let h=0;h<s;++h){if(o=l,l=c,c=Fa(n,h+1),!l)continue;const f=l[e],d=l[i];o&&(r=(f-o[e])/3,l[`cp1${e}`]=f-r,l[`cp1${i}`]=d-r*t[h]),c&&(r=(c[e]-f)/3,l[`cp2${e}`]=f+r,l[`cp2${i}`]=d+r*t[h])}}function zR(n,t="x"){const e=vy(t),i=n.length,s=Array(i).fill(0),r=Array(i);let o,l,c,h=Fa(n,0);for(o=0;o<i;++o)if(l=c,c=h,h=Fa(n,o+1),!!c){if(h){const f=h[t]-c[t];s[o]=f!==0?(h[e]-c[e])/f:0}r[o]=l?h?fs(s[o-1])!==fs(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}UR(n,s,r),BR(n,r,t)}function Mh(n,t,e){return Math.max(Math.min(n,e),t)}function HR(n,t){let e,i,s,r,o,l=Xs(n[0],t);for(e=0,i=n.length;e<i;++e)o=r,r=l,l=e<i-1&&Xs(n[e+1],t),r&&(s=n[e],o&&(s.cp1x=Mh(s.cp1x,t.left,t.right),s.cp1y=Mh(s.cp1y,t.top,t.bottom)),l&&(s.cp2x=Mh(s.cp2x,t.left,t.right),s.cp2y=Mh(s.cp2y,t.top,t.bottom)))}function VR(n,t,e,i,s){let r,o,l,c;if(t.spanGaps&&(n=n.filter(h=>!h.skip)),t.cubicInterpolationMode==="monotone")zR(n,s);else{let h=i?n[n.length-1]:n[0];for(r=0,o=n.length;r<o;++r)l=n[r],c=FR(h,l,n[Math.min(r+1,o-(i?0:1))%o],t.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,h=l}t.capBezierPoints&&HR(n,e)}function fg(){return typeof window<"u"&&typeof document<"u"}function dg(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function uu(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const zu=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function WR(n,t){return zu(n).getPropertyValue(t)}const GR=["top","right","bottom","left"];function vo(n,t,e){const i={};e=e?"-"+e:"";for(let s=0;s<4;s++){const r=GR[s];i[r]=parseFloat(n[t+"-"+r+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const jR=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function XR(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:s,offsetY:r}=i;let o=!1,l,c;if(jR(s,r,n.target))l=s,c=r;else{const h=t.getBoundingClientRect();l=i.clientX-h.left,c=i.clientY-h.top,o=!0}return{x:l,y:c,box:o}}function so(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,s=zu(e),r=s.boxSizing==="border-box",o=vo(s,"padding"),l=vo(s,"border","width"),{x:c,y:h,box:f}=XR(n,e),d=o.left+(f&&l.left),p=o.top+(f&&l.top);let{width:g,height:v}=t;return r&&(g-=o.width+l.width,v-=o.height+l.height),{x:Math.round((c-d)/g*e.width/i),y:Math.round((h-p)/v*e.height/i)}}function ZR(n,t,e){let i,s;if(t===void 0||e===void 0){const r=n&&dg(n);if(!r)t=n.clientWidth,e=n.clientHeight;else{const o=r.getBoundingClientRect(),l=zu(r),c=vo(l,"border","width"),h=vo(l,"padding");t=o.width-h.width-c.width,e=o.height-h.height-c.height,i=uu(l.maxWidth,r,"clientWidth"),s=uu(l.maxHeight,r,"clientHeight")}}return{width:t,height:e,maxWidth:i||cu,maxHeight:s||cu}}const Sh=n=>Math.round(n*10)/10;function YR(n,t,e,i){const s=zu(n),r=vo(s,"margin"),o=uu(s.maxWidth,n,"clientWidth")||cu,l=uu(s.maxHeight,n,"clientHeight")||cu,c=ZR(n,t,e);let{width:h,height:f}=c;if(s.boxSizing==="content-box"){const p=vo(s,"border","width"),g=vo(s,"padding");h-=g.width+p.width,f-=g.height+p.height}return h=Math.max(0,h-r.width),f=Math.max(0,i?h/i:f-r.height),h=Sh(Math.min(h,o,c.maxWidth)),f=Sh(Math.min(f,l,c.maxHeight)),h&&!f&&(f=Sh(h/2)),(t!==void 0||e!==void 0)&&i&&c.height&&f>c.height&&(f=c.height,h=Sh(Math.floor(f*i))),{width:h,height:f}}function $0(n,t,e){const i=t||1,s=Math.floor(n.height*i),r=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==s||o.width!==r?(n.currentDevicePixelRatio=i,o.height=s,o.width=r,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const qR=(function(){let n=!1;try{const t={get passive(){return n=!0,!1}};fg()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n})();function K0(n,t){const e=WR(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function ro(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function $R(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function KR(n,t,e,i){const s={x:n.cp2x,y:n.cp2y},r={x:t.cp1x,y:t.cp1y},o=ro(n,s,e),l=ro(s,r,e),c=ro(r,t,e),h=ro(o,l,e),f=ro(l,c,e);return ro(h,f,e)}const JR=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},QR=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function va(n,t,e){return n?JR(t,e):QR()}function xy(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function yy(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function by(n){return n==="angle"?{between:ac,compare:tR,normalize:Gn}:{between:Gs,compare:(t,e)=>t-e,normalize:t=>t}}function J0({start:n,end:t,count:e,loop:i,style:s}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:s}}function tL(n,t,e){const{property:i,start:s,end:r}=e,{between:o,normalize:l}=by(i),c=t.length;let{start:h,end:f,loop:d}=n,p,g;if(d){for(h+=c,f+=c,p=0,g=c;p<g&&o(l(t[h%c][i]),s,r);++p)h--,f--;h%=c,f%=c}return f<h&&(f+=c),{start:h,end:f,loop:d,style:n.style}}function My(n,t,e){if(!e)return[n];const{property:i,start:s,end:r}=e,o=t.length,{compare:l,between:c,normalize:h}=by(i),{start:f,end:d,loop:p,style:g}=tL(n,t,e),v=[];let y=!1,x=null,_,w,C;const S=()=>c(s,C,_)&&l(s,C)!==0,T=()=>l(r,_)===0||c(r,C,_),A=()=>y||S(),P=()=>!y||T();for(let N=f,E=f;N<=d;++N)w=t[N%o],!w.skip&&(_=h(w[i]),_!==C&&(y=c(_,s,r),x===null&&A()&&(x=l(_,s)===0?N:E),x!==null&&P()&&(v.push(J0({start:x,end:N,loop:p,count:o,style:g})),x=null),E=N,C=_));return x!==null&&v.push(J0({start:x,end:d,loop:p,count:o,style:g})),v}function Sy(n,t){const e=[],i=n.segments;for(let s=0;s<i.length;s++){const r=My(i[s],n.points,t);r.length&&e.push(...r)}return e}function eL(n,t,e,i){let s=0,r=t-1;if(e&&!i)for(;s<t&&!n[s].skip;)s++;for(;s<t&&n[s].skip;)s++;for(s%=t,e&&(r+=s);r>s&&n[r%t].skip;)r--;return r%=t,{start:s,end:r}}function nL(n,t,e,i){const s=n.length,r=[];let o=t,l=n[t],c;for(c=t+1;c<=e;++c){const h=n[c%s];h.skip||h.stop?l.skip||(i=!1,r.push({start:t%s,end:(c-1)%s,loop:i}),t=o=h.stop?c:null):(o=c,l.skip&&(t=c)),l=h}return o!==null&&r.push({start:t%s,end:o%s,loop:i}),r}function iL(n,t){const e=n.points,i=n.options.spanGaps,s=e.length;if(!s)return[];const r=!!n._loop,{start:o,end:l}=eL(e,s,r,i);if(i===!0)return Q0(n,[{start:o,end:l,loop:r}],e,t);const c=l<o?l+s:l,h=!!n._fullLoop&&o===0&&l===s-1;return Q0(n,nL(e,o,c,h),e,t)}function Q0(n,t,e,i){return!i||!i.setContext||!e?t:sL(n,t,e,i)}function sL(n,t,e,i){const s=n._chart.getContext(),r=t2(n.options),{_datasetIndex:o,options:{spanGaps:l}}=n,c=e.length,h=[];let f=r,d=t[0].start,p=d;function g(v,y,x,_){const w=l?-1:1;if(v!==y){for(v+=c;e[v%c].skip;)v-=w;for(;e[y%c].skip;)y+=w;v%c!==y%c&&(h.push({start:v%c,end:y%c,loop:x,style:_}),f=_,d=y%c)}}for(const v of t){d=l?d:v.start;let y=e[d%c],x;for(p=d+1;p<=v.end;p++){const _=e[p%c];x=t2(i.setContext(Fr(s,{type:"segment",p0:y,p1:_,p0DataIndex:(p-1)%c,p1DataIndex:p%c,datasetIndex:o}))),rL(x,f)&&g(d,p-1,v.loop,f),y=_,f=x}d<p-1&&g(d,p-1,v.loop,f)}return h}function t2(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function rL(n,t){if(!t)return!1;const e=[],i=function(s,r){return ag(r)?(e.includes(r)||e.push(r),e.indexOf(r)):r};return JSON.stringify(n,i)!==JSON.stringify(t,i)}function Ch(n,t,e){return n.options.clip?n[e]:t[e]}function oL(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:Ch(e,t,"left"),right:Ch(e,t,"right"),top:Ch(i,t,"top"),bottom:Ch(i,t,"bottom")}:t}function Cy(n,t){const e=t._clip;if(e.disabled)return!1;const i=oL(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class aL{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,s){const r=e.listeners[s],o=e.duration;r.forEach(l=>l({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(i-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=oy.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,l=!1,c;for(;o>=0;--o)c=r[o],c._active?(c._total>i.duration&&(i.duration=c._total),c.tick(t),l=!0):(r[o]=r[r.length-1],r.pop());l&&(s.draw(),this._notify(s,i,t,"progress")),r.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),e+=r.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var ks=new aL;const e2="transparent",lL={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=j0(n||e2),s=i.valid&&j0(t||e2);return s&&s.valid?s.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class cL{constructor(t,e,i,s){const r=e[i];s=Il([t.to,s,r,t.from]);const o=Il([t.from,r,s]);this._active=!0,this._fn=t.fn||lL[t.type||typeof o],this._easing=Gl[t.easing]||Gl.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Il([t.to,e,s,t.from]),this._from=Il([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,l=this._to;let c;if(this._active=r!==l&&(o||e<i),!this._active){this._target[s]=l,this._notify(!0);return}if(e<0){this._target[s]=r;return}c=e/i%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[s]=this._fn(r,l,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][e]()}}class wy{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Re(t))return;const e=Object.keys(dn.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const r=t[s];if(!Re(r))return;const o={};for(const l of e)o[l]=r[l];(fn(r.properties)&&r.properties||[s]).forEach(l=>{(l===s||!i.has(l))&&i.set(l,o)})})}_animateOptions(t,e){const i=e.options,s=uL(t,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&hL(t.options.$animations,i).then(()=>{t.options=i},()=>{}),r}_createAnimations(t,e){const i=this._properties,s=[],r=t.$animations||(t.$animations={}),o=Object.keys(e),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const h=o[c];if(h.charAt(0)==="$")continue;if(h==="options"){s.push(...this._animateOptions(t,e));continue}const f=e[h];let d=r[h];const p=i.get(h);if(d)if(p&&d.active()){d.update(p,f,l);continue}else d.cancel();if(!p||!p.duration){t[h]=f;continue}r[h]=d=new cL(p,t,h,f),s.push(d)}return s}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return ks.add(this._chart,i),!0}}function hL(n,t){const e=[],i=Object.keys(t);for(let s=0;s<i.length;s++){const r=n[i[s]];r&&r.active()&&e.push(r.wait())}return Promise.all(e)}function uL(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function n2(n,t){const e=n&&n.options||{},i=e.reverse,s=e.min===void 0?t:0,r=e.max===void 0?t:0;return{start:i?r:s,end:i?s:r}}function fL(n,t,e){if(e===!1)return!1;const i=n2(n,e),s=n2(t,e);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function dL(n){let t,e,i,s;return Re(n)?(t=n.top,e=n.right,i=n.bottom,s=n.left):t=e=i=s=n,{top:t,right:e,bottom:i,left:s,disabled:n===!1}}function Ty(n,t){const e=[],i=n._getSortedDatasetMetas(t);let s,r;for(s=0,r=i.length;s<r;++s)e.push(i[s].index);return e}function i2(n,t,e,i={}){const s=n.keys,r=i.mode==="single";let o,l,c,h;if(t===null)return;let f=!1;for(o=0,l=s.length;o<l;++o){if(c=+s[o],c===e){if(f=!0,i.all)continue;break}h=n.values[c],yn(h)&&(r||t===0||fs(t)===fs(h))&&(t+=h)}return!f&&!i.all?0:t}function pL(n,t){const{iScale:e,vScale:i}=t,s=e.axis==="x"?"x":"y",r=i.axis==="x"?"x":"y",o=Object.keys(n),l=new Array(o.length);let c,h,f;for(c=0,h=o.length;c<h;++c)f=o[c],l[c]={[s]:f,[r]:n[f]};return l}function yd(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function mL(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function gL(n){const{min:t,max:e,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:s?e:Number.POSITIVE_INFINITY}}function _L(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function s2(n,t,e,i){for(const s of t.getMatchingVisibleMetas(i).reverse()){const r=n[s.index];if(e&&r>0||!e&&r<0)return s.index}return null}function r2(n,t){const{chart:e,_cachedMeta:i}=n,s=e._stacks||(e._stacks={}),{iScale:r,vScale:o,index:l}=i,c=r.axis,h=o.axis,f=mL(r,o,i),d=t.length;let p;for(let g=0;g<d;++g){const v=t[g],{[c]:y,[h]:x}=v,_=v._stacks||(v._stacks={});p=_[h]=_L(s,f,y),p[l]=x,p._top=s2(p,o,!0,i.type),p._bottom=s2(p,o,!1,i.type);const w=p._visualValues||(p._visualValues={});w[l]=x}}function bd(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function vL(n,t){return Fr(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function xL(n,t,e){return Fr(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function yl(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const s of t){const r=s._stacks;if(!r||r[i]===void 0||r[i][e]===void 0)return;delete r[i][e],r[i]._visualValues!==void 0&&r[i]._visualValues[e]!==void 0&&delete r[i]._visualValues[e]}}}const Md=n=>n==="reset"||n==="none",o2=(n,t)=>t?n:Object.assign({},n),yL=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:Ty(e,!0),values:null};class Ur{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=yd(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&yl(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),s=(d,p,g,v)=>d==="x"?p:d==="r"?v:g,r=e.xAxisID=fe(i.xAxisID,bd(t,"x")),o=e.yAxisID=fe(i.yAxisID,bd(t,"y")),l=e.rAxisID=fe(i.rAxisID,bd(t,"r")),c=e.indexAxis,h=e.iAxisID=s(c,r,o,l),f=e.vAxisID=s(c,o,r,l);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(l),e.iScale=this.getScaleForId(h),e.vScale=this.getScaleForId(f)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&V0(this._data,this),t._stacked&&yl(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(Re(e)){const s=this._cachedMeta;this._data=pL(e,s)}else if(i!==e){if(i){V0(i,this);const s=this._cachedMeta;yl(s),s._parsed=[]}e&&Object.isExtensible(e)&&sR(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=e._stacked;e._stacked=yd(e.vScale,e),e.stack!==i.stack&&(s=!0,yl(e),e.stack=i.stack),this._resyncElements(t),(s||r!==e._stacked)&&(r2(this,e._parsed),e._stacked=yd(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:o}=i,l=r.axis;let c=t===0&&e===s.length?!0:i._sorted,h=t>0&&i._parsed[t-1],f,d,p;if(this._parsing===!1)i._parsed=s,i._sorted=!0,p=s;else{fn(s[t])?p=this.parseArrayData(i,s,t,e):Re(s[t])?p=this.parseObjectData(i,s,t,e):p=this.parsePrimitiveData(i,s,t,e);const g=()=>d[l]===null||h&&d[l]<h[l];for(f=0;f<e;++f)i._parsed[f+t]=d=p[f],c&&(g()&&(c=!1),h=d);i._sorted=c}o&&r2(this,p)}parsePrimitiveData(t,e,i,s){const{iScale:r,vScale:o}=t,l=r.axis,c=o.axis,h=r.getLabels(),f=r===o,d=new Array(s);let p,g,v;for(p=0,g=s;p<g;++p)v=p+i,d[p]={[l]:f||r.parse(h[v],v),[c]:o.parse(e[v],v)};return d}parseArrayData(t,e,i,s){const{xScale:r,yScale:o}=t,l=new Array(s);let c,h,f,d;for(c=0,h=s;c<h;++c)f=c+i,d=e[f],l[c]={x:r.parse(d[0],f),y:o.parse(d[1],f)};return l}parseObjectData(t,e,i,s){const{xScale:r,yScale:o}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,h=new Array(s);let f,d,p,g;for(f=0,d=s;f<d;++f)p=f+i,g=e[p],h[f]={x:r.parse(Or(g,l),p),y:o.parse(Or(g,c),p)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const s=this.chart,r=this._cachedMeta,o=e[t.axis],l={keys:Ty(s,!0),values:e._stacks[t.axis]._visualValues};return i2(l,o,r.index,{mode:i})}updateRangeFromParsed(t,e,i,s){const r=i[e.axis];let o=r===null?NaN:r;const l=s&&i._stacks[e.axis];s&&l&&(s.values=l,o=i2(s,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&t===i.iScale,o=s.length,l=this._getOtherScale(t),c=yL(e,i,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:f,max:d}=gL(l);let p,g;function v(){g=s[p];const y=g[l.axis];return!yn(g[t.axis])||f>y||d<y}for(p=0;p<o&&!(!v()&&(this.updateRangeFromParsed(h,t,g,c),r));++p);if(r){for(p=o-1;p>=0;--p)if(!v()){this.updateRangeFromParsed(h,t,g,c);break}}return h}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let s,r,o;for(s=0,r=e.length;s<r;++s)o=e[s][t.axis],yn(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,s=e.vScale,r=this.getParsed(t);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=dL(fe(this.options.clip,fL(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,s=i.data||[],r=e.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||s.length-l,h=this.options.drawActiveElementsOnTop;let f;for(i.dataset&&i.dataset.draw(t,r,l,c),f=l;f<l+c;++f){const d=s[f];d.hidden||(d.active&&h?o.push(d):d.draw(t,r))}for(f=0;f<o.length;++f)o[f].draw(t,r)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const s=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=xL(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=s.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=vL(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=i,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const s=e==="active",r=this._cachedDataOpts,o=t+"-"+e,l=r[o],c=this.enableOptionSharing&&oc(i);if(l)return o2(l,c);const h=this.chart.config,f=h.datasetElementScopeKeys(this._type,t),d=s?[`${t}Hover`,"hover",t,""]:[t,""],p=h.getOptionScopes(this.getDataset(),f),g=Object.keys(dn.elements[t]),v=()=>this.getContext(i,s,e),y=h.resolveNamedOptions(p,g,v,d);return y.$shared&&(y.$shared=c,r[o]=Object.freeze(o2(y,c))),y}_resolveAnimations(t,e,i){const s=this.chart,r=this._cachedDataOpts,o=`animation-${e}`,l=r[o];if(l)return l;let c;if(s.options.animation!==!1){const f=this.chart.config,d=f.datasetAnimationScopeKeys(this._type,e),p=f.getOptionScopes(this.getDataset(),d);c=f.createResolver(p,this.getContext(t,i,e))}const h=new wy(s,c&&c.animations);return c&&c._cacheable&&(r[o]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Md(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),s=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(e,r)||r!==s;return this.updateSharedOptions(r,e,i),{sharedOptions:r,includeOptions:o}}updateElement(t,e,i,s){Md(s)?Object.assign(t,i):this._resolveAnimations(e,s).update(t,i)}updateSharedOptions(t,e,i){t&&!Md(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,s){t.active=s;const r=this.getStyle(e,s);this._resolveAnimations(e,i,s).update(t,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[l,c,h]of this._syncList)this[l](c,h);this._syncList=[];const s=i.length,r=e.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,t):r<s&&this._removeElements(r,s-r)}_insertElements(t,e,i=!0){const s=this._cachedMeta,r=s.data,o=t+e;let l;const c=h=>{for(h.length+=e,l=h.length-1;l>=o;l--)h[l]=h[l-e]};for(c(r),l=t;l<o;++l)r[l]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(t,e),i&&this.updateElements(r,t,e,"reset")}updateElements(t,e,i,s){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,e);i._stacked&&yl(i,s)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,s]=t;this[e](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function bL(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let i=[];for(let s=0,r=e.length;s<r;s++)i=i.concat(e[s].controller.getAllParsedValues(n));n._cache.$bar=ry(i.sort((s,r)=>s-r))}return n._cache.$bar}function ML(n){const t=n.iScale,e=bL(t,n.type);let i=t._length,s,r,o,l;const c=()=>{o===32767||o===-32768||(oc(l)&&(i=Math.min(i,Math.abs(o-l)||i)),l=o)};for(s=0,r=e.length;s<r;++s)o=t.getPixelForValue(e[s]),c();for(l=void 0,s=0,r=t.ticks.length;s<r;++s)o=t.getPixelForTick(s),c();return i}function SL(n,t,e,i){const s=e.barThickness;let r,o;return Te(s)?(r=t.min*e.categoryPercentage,o=e.barPercentage):(r=s*i,o=1),{chunk:r/i,ratio:o,start:t.pixels[n]-r/2}}function CL(n,t,e,i){const s=t.pixels,r=s[n];let o=n>0?s[n-1]:null,l=n<s.length-1?s[n+1]:null;const c=e.categoryPercentage;o===null&&(o=r-(l===null?t.end-t.start:l-r)),l===null&&(l=r+r-o);const h=r-(r-Math.min(o,l))/2*c;return{chunk:Math.abs(l-o)/2*c/i,ratio:e.barPercentage,start:h}}function wL(n,t,e,i){const s=e.parse(n[0],i),r=e.parse(n[1],i),o=Math.min(s,r),l=Math.max(s,r);let c=o,h=l;Math.abs(o)>Math.abs(l)&&(c=l,h=o),t[e.axis]=h,t._custom={barStart:c,barEnd:h,start:s,end:r,min:o,max:l}}function Ey(n,t,e,i){return fn(n)?wL(n,t,e,i):t[e.axis]=e.parse(n,i),t}function a2(n,t,e,i){const s=n.iScale,r=n.vScale,o=s.getLabels(),l=s===r,c=[];let h,f,d,p;for(h=e,f=e+i;h<f;++h)p=t[h],d={},d[s.axis]=l||s.parse(o[h],h),c.push(Ey(p,d,r,h));return c}function Sd(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function TL(n,t,e){return n!==0?fs(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function EL(n){let t,e,i,s,r;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(s="end",r="start"):(s="start",r="end"),{start:e,end:i,reverse:t,top:s,bottom:r}}function AL(n,t,e,i){let s=t.borderSkipped;const r={};if(!s){n.borderSkipped=r;return}if(s===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:c,top:h,bottom:f}=EL(n);s==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?s=h:(e._bottom||0)===i?s=f:(r[l2(f,o,l,c)]=!0,s=h)),r[l2(s,o,l,c)]=!0,n.borderSkipped=r}function l2(n,t,e,i){return i?(n=PL(n,t,e),n=c2(n,e,t)):n=c2(n,t,e),n}function PL(n,t,e){return n===t?e:n===e?t:n}function c2(n,t,e){return n==="start"?t:n==="end"?e:n}function RL(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}class LL extends Ur{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,i,s){return a2(t,e,i,s)}parseArrayData(t,e,i,s){return a2(t,e,i,s)}parseObjectData(t,e,i,s){const{iScale:r,vScale:o}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,h=r.axis==="x"?l:c,f=o.axis==="x"?l:c,d=[];let p,g,v,y;for(p=i,g=i+s;p<g;++p)y=e[p],v={},v[r.axis]=r.parse(Or(y,h),p),d.push(Ey(Or(y,f),v,o,p));return d}updateRangeFromParsed(t,e,i,s){super.updateRangeFromParsed(t,e,i,s);const r=i._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:s}=e,r=this.getParsed(t),o=r._custom,l=Sd(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,s){const r=s==="reset",{index:o,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),h=l.isHorizontal(),f=this._getRuler(),{sharedOptions:d,includeOptions:p}=this._getSharedOptions(e,s);for(let g=e;g<e+i;g++){const v=this.getParsed(g),y=r||Te(v[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(g),x=this._calculateBarIndexPixels(g,f),_=(v._stacks||{})[l.axis],w={horizontal:h,base:y.base,enableBorderRadius:!_||Sd(v._custom)||o===_._top||o===_._bottom,x:h?y.head:x.center,y:h?x.center:y.head,height:h?x.size:Math.abs(y.size),width:h?Math.abs(y.size):x.size};p&&(w.options=d||this.resolveDataElementOptions(g,t[g].active?"active":s));const C=w.options||t[g].options;AL(w,C,_,o),RL(w,C,f.ratio),this.updateElement(t[g],g,w,s)}}_getStacks(t,e){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(f=>f.controller.options.grouped),r=i.options.stacked,o=[],l=this._cachedMeta.controller.getParsed(e),c=l&&l[i.axis],h=f=>{const d=f._parsed.find(g=>g[i.axis]===c),p=d&&d[f.vScale.axis];if(Te(p)||isNaN(p))return!0};for(const f of s)if(!(e!==void 0&&h(f))&&((r===!1||o.indexOf(f.stack)===-1||r===void 0&&f.stack===void 0)&&o.push(f.stack),f.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)t[fe(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,i){const s=this._getStacks(t,i),r=e!==void 0?s.indexOf(e):-1;return r===-1?s.length-1:r}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,s=[];let r,o;for(r=0,o=e.data.length;r<o;++r)s.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));const l=t.barThickness;return{min:l||ML(e),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:l?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i,index:s},options:{base:r,minBarLength:o}}=this,l=r||0,c=this.getParsed(t),h=c._custom,f=Sd(h);let d=c[e.axis],p=0,g=i?this.applyStack(e,c,i):d,v,y;g!==d&&(p=g-d,g=d),f&&(d=h.barStart,g=h.barEnd-h.barStart,d!==0&&fs(d)!==fs(h.barEnd)&&(p=0),p+=d);const x=!Te(r)&&!f?r:p;let _=e.getPixelForValue(x);if(this.chart.getDataVisibility(t)?v=e.getPixelForValue(p+g):v=_,y=v-_,Math.abs(y)<o){y=TL(y,e,l)*o,d===l&&(_-=y/2);const w=e.getPixelForDecimal(0),C=e.getPixelForDecimal(1),S=Math.min(w,C),T=Math.max(w,C);_=Math.max(Math.min(_,T),S),v=_+y,i&&!f&&(c._stacks[e.axis]._visualValues[s]=e.getValueForPixel(v)-e.getValueForPixel(_))}if(_===e.getPixelForValue(l)){const w=fs(y)*e.getLineWidthForValue(l)/2;_+=w,y-=w}return{size:y,base:_,head:v,center:v+y/2}}_calculateBarIndexPixels(t,e){const i=e.scale,s=this.options,r=s.skipNull,o=fe(s.maxBarThickness,1/0);let l,c;const h=this._getAxisCount();if(e.grouped){const f=r?this._getStackCount(t):e.stackCount,d=s.barThickness==="flex"?CL(t,e,s,f*h):SL(t,e,s,f*h),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,g=this._getAxis().indexOf(fe(p,this.getFirstScaleIdForIndexAxis())),v=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0)+g;l=d.start+d.chunk*v+d.chunk/2,c=Math.min(o,d.chunk*d.ratio)}else l=i.getPixelForValue(this.getParsed(t)[i.axis],t),c=Math.min(o,e.min*e.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,s=i.length;let r=0;for(;r<s;++r)this.getParsed(r)[e.axis]!==null&&!i[r].hidden&&i[r].draw(this._ctx)}}class IL extends Ur{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,i,s){const r=super.parsePrimitiveData(t,e,i,s);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+i).radius;return r}parseArrayData(t,e,i,s){const r=super.parseArrayData(t,e,i,s);for(let o=0;o<r.length;o++){const l=e[i+o];r[o]._custom=fe(l[2],this.resolveDataElementOptions(o+i).radius)}return r}parseObjectData(t,e,i,s){const r=super.parseObjectData(t,e,i,s);for(let o=0;o<r.length;o++){const l=e[i+o];r[o]._custom=fe(l&&l.r&&+l.r,this.resolveDataElementOptions(o+i).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=e,o=this.getParsed(t),l=s.getLabelForValue(o.x),c=r.getLabelForValue(o.y),h=o._custom;return{label:i[t]||"",value:"("+l+", "+c+(h?", "+h:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,i,s){const r=s==="reset",{iScale:o,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:h}=this._getSharedOptions(e,s),f=o.axis,d=l.axis;for(let p=e;p<e+i;p++){const g=t[p],v=!r&&this.getParsed(p),y={},x=y[f]=r?o.getPixelForDecimal(.5):o.getPixelForValue(v[f]),_=y[d]=r?l.getBasePixel():l.getPixelForValue(v[d]);y.skip=isNaN(x)||isNaN(_),h&&(y.options=c||this.resolveDataElementOptions(p,g.active?"active":s),r&&(y.options.radius=0)),this.updateElement(g,p,y,s)}}resolveDataElementOptions(t,e){const i=this.getParsed(t);let s=super.resolveDataElementOptions(t,e);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const r=s.radius;return e!=="active"&&(s.radius=0),s.radius+=fe(i&&i._custom,r),s}}function DL(n,t,e){let i=1,s=1,r=0,o=0;if(t<cn){const l=n,c=l+t,h=Math.cos(l),f=Math.sin(l),d=Math.cos(c),p=Math.sin(c),g=(C,S,T)=>ac(C,l,c,!0)?1:Math.max(S,S*e,T,T*e),v=(C,S,T)=>ac(C,l,c,!0)?-1:Math.min(S,S*e,T,T*e),y=g(0,h,d),x=g(bn,f,p),_=v(He,h,d),w=v(He+bn,f,p);i=(y-_)/2,s=(x-w)/2,r=-(y+_)/2,o=-(x+w)/2}return{ratioX:i,ratioY:s,offsetX:r,offsetY:o}}class pg extends Ur{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return e.labels.map((r,o)=>{const c=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let r=c=>+i[c];if(Re(i[t])){const{key:c="value"}=this._parsing;r=h=>+Or(i[h],c)}let o,l;for(o=t,l=t+e;o<l;++o)s._parsed[o]=r(o)}}_getRotation(){return Xi(this.options.rotation-90)}_getCircumference(){return Xi(this.options.circumference)}_getRotationExtents(){let t=cn,e=-cn;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,r=s._getRotation(),o=s._getCircumference();t=Math.min(t,r),e=Math.max(e,r+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,s=this._cachedMeta,r=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,l=Math.max((Math.min(i.width,i.height)-o)/2,0),c=Math.min(WP(this.options.cutout,l),1),h=this._getRingWeight(this.index),{circumference:f,rotation:d}=this._getRotationExtents(),{ratioX:p,ratioY:g,offsetX:v,offsetY:y}=DL(d,f,c),x=(i.width-o)/p,_=(i.height-o)/g,w=Math.max(Math.min(x,_)/2,0),C=ty(this.options.radius,w),S=Math.max(C*c,0),T=(C-S)/this._getVisibleDatasetWeightTotal();this.offsetX=v*C,this.offsetY=y*C,s.total=this.calculateTotal(),this.outerRadius=C-T*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-T*h,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){const i=this.options,s=this._cachedMeta,r=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*r/cn)}updateElements(t,e,i,s){const r=s==="reset",o=this.chart,l=o.chartArea,h=o.options.animation,f=(l.left+l.right)/2,d=(l.top+l.bottom)/2,p=r&&h.animateScale,g=p?0:this.innerRadius,v=p?0:this.outerRadius,{sharedOptions:y,includeOptions:x}=this._getSharedOptions(e,s);let _=this._getRotation(),w;for(w=0;w<e;++w)_+=this._circumference(w,r);for(w=e;w<e+i;++w){const C=this._circumference(w,r),S=t[w],T={x:f+this.offsetX,y:d+this.offsetY,startAngle:_,endAngle:_+C,circumference:C,outerRadius:v,innerRadius:g};x&&(T.options=y||this.resolveDataElementOptions(w,S.active?"active":s)),_+=C,this.updateElement(S,w,T,s)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let i=0,s;for(s=0;s<e.length;s++){const r=t._parsed[s];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(s)&&!e[s].hidden&&(i+=Math.abs(r))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?cn*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=Mc(e._parsed[t],i.options.locale);return{label:s[t]||"",value:r}}getMaxBorderWidth(t){let e=0;const i=this.chart;let s,r,o,l,c;if(!t){for(s=0,r=i.data.datasets.length;s<r;++s)if(i.isDatasetVisible(s)){o=i.getDatasetMeta(s),t=o.data,l=o.controller;break}}if(!t)return 0;for(s=0,r=t.length;s<r;++s)c=l.resolveDataElementOptions(s),c.borderAlign!=="inner"&&(e=Math.max(e,c.borderWidth||0,c.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,s=t.length;i<s;++i){const r=this.resolveDataElementOptions(i);e=Math.max(e,r.offset||0,r.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(fe(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class OL extends Ur{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:s=[],_dataset:r}=e,o=this.chart._animationsDisabled;let{start:l,count:c}=ly(e,s,o);this._drawStart=l,this._drawCount=c,cy(e)&&(l=0,c=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=s;const h=this.resolveDatasetElementOptions(t);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:h},t),this.updateElements(s,l,c,t)}updateElements(t,e,i,s){const r=s==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:h}=this._cachedMeta,{sharedOptions:f,includeOptions:d}=this._getSharedOptions(e,s),p=o.axis,g=l.axis,{spanGaps:v,segment:y}=this.options,x=Na(v)?v:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||r||s==="none",w=e+i,C=t.length;let S=e>0&&this.getParsed(e-1);for(let T=0;T<C;++T){const A=t[T],P=_?A:{};if(T<e||T>=w){P.skip=!0;continue}const N=this.getParsed(T),E=Te(N[g]),R=P[p]=o.getPixelForValue(N[p],T),k=P[g]=r||E?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,N,c):N[g],T);P.skip=isNaN(R)||isNaN(k)||E,P.stop=T>0&&Math.abs(N[p]-S[p])>x,y&&(P.parsed=N,P.raw=h.data[T]),d&&(P.options=f||this.resolveDataElementOptions(T,A.active?"active":s)),_||this.updateElement(A,T,P,s),S=N}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,s=t.data||[];if(!s.length)return i;const r=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}class Ay extends Ur{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return e.labels.map((r,o)=>{const c=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=Mc(e._parsed[t].r,i.options.locale);return{label:s[t]||"",value:r}}parseObjectData(t,e,i,s){return _y.bind(this)(t,e,i,s)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,s)=>{const r=this.getParsed(s).r;!isNaN(r)&&this.chart.getDataVisibility(s)&&(r<e.min&&(e.min=r),r>e.max&&(e.max=r))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,i=t.options,s=Math.min(e.right-e.left,e.bottom-e.top),r=Math.max(s/2,0),o=Math.max(i.cutoutPercentage?r/100*i.cutoutPercentage:1,0),l=(r-o)/t.getVisibleDatasetCount();this.outerRadius=r-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(t,e,i,s){const r=s==="reset",o=this.chart,c=o.options.animation,h=this._cachedMeta.rScale,f=h.xCenter,d=h.yCenter,p=h.getIndexAngle(0)-.5*He;let g=p,v;const y=360/this.countVisibleElements();for(v=0;v<e;++v)g+=this._computeAngle(v,s,y);for(v=e;v<e+i;v++){const x=t[v];let _=g,w=g+this._computeAngle(v,s,y),C=o.getDataVisibility(v)?h.getDistanceFromCenterForValue(this.getParsed(v).r):0;g=w,r&&(c.animateScale&&(C=0),c.animateRotate&&(_=w=p));const S={x:f,y:d,innerRadius:0,outerRadius:C,startAngle:_,endAngle:w,options:this.resolveDataElementOptions(v,x.active?"active":s)};this.updateElement(x,v,S,s)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((i,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&e++}),e}_computeAngle(t,e,i){return this.chart.getDataVisibility(t)?Xi(this.resolveDataElementOptions(t,e).angle||i):0}}class NL extends pg{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class kL extends Ur{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){const e=this._cachedMeta.vScale,i=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}parseObjectData(t,e,i,s){return _y.bind(this)(t,e,i,s)}update(t){const e=this._cachedMeta,i=e.dataset,s=e.data||[],r=e.iScale.getLabels();if(i.points=s,t!=="resize"){const o=this.resolveDatasetElementOptions(t);this.options.showLine||(o.borderWidth=0);const l={_loop:!0,_fullLoop:r.length===s.length,options:o};this.updateElement(i,void 0,l,t)}this.updateElements(s,0,s.length,t)}updateElements(t,e,i,s){const r=this._cachedMeta.rScale,o=s==="reset";for(let l=e;l<e+i;l++){const c=t[l],h=this.resolveDataElementOptions(l,c.active?"active":s),f=r.getPointPositionForValue(l,this.getParsed(l).r),d=o?r.xCenter:f.x,p=o?r.yCenter:f.y,g={x:d,y:p,angle:f.angle,skip:isNaN(d)||isNaN(p),options:h};this.updateElement(c,l,g,s)}}}class FL extends Ur{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=e,o=this.getParsed(t),l=s.getLabelForValue(o.x),c=r.getLabelForValue(o.y);return{label:i[t]||"",value:"("+l+", "+c+")"}}update(t){const e=this._cachedMeta,{data:i=[]}=e,s=this.chart._animationsDisabled;let{start:r,count:o}=ly(e,i,s);if(this._drawStart=r,this._drawCount=o,cy(e)&&(r=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:l,_dataset:c}=e;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=i;const h=this.resolveDatasetElementOptions(t);h.segment=this.options.segment,this.updateElement(l,void 0,{animated:!s,options:h},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(i,r,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,i,s){const r=s==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:h}=this._cachedMeta,f=this.resolveDataElementOptions(e,s),d=this.getSharedOptions(f),p=this.includeOptions(s,d),g=o.axis,v=l.axis,{spanGaps:y,segment:x}=this.options,_=Na(y)?y:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||r||s==="none";let C=e>0&&this.getParsed(e-1);for(let S=e;S<e+i;++S){const T=t[S],A=this.getParsed(S),P=w?T:{},N=Te(A[v]),E=P[g]=o.getPixelForValue(A[g],S),R=P[v]=r||N?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,A,c):A[v],S);P.skip=isNaN(E)||isNaN(R)||N,P.stop=S>0&&Math.abs(A[g]-C[g])>_,x&&(P.parsed=A,P.raw=h.data[S]),p&&(P.options=d||this.resolveDataElementOptions(S,T.active?"active":s)),w||this.updateElement(T,S,P,s),C=A}this.updateSharedOptions(d,s,f)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let l=0;for(let c=e.length-1;c>=0;--c)l=Math.max(l,e[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}const i=t.dataset,s=i.options&&i.options.borderWidth||0;if(!e.length)return s;const r=e[0].size(this.resolveDataElementOptions(0)),o=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(s,r,o)/2}}var UL=Object.freeze({__proto__:null,BarController:LL,BubbleController:IL,DoughnutController:pg,LineController:OL,PieController:NL,PolarAreaController:Ay,RadarController:kL,ScatterController:FL});function Qr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class mg{static override(t){Object.assign(mg.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Qr()}parse(){return Qr()}format(){return Qr()}add(){return Qr()}diff(){return Qr()}startOf(){return Qr()}endOf(){return Qr()}}var BL={_date:mg};function zL(n,t,e,i){const{controller:s,data:r,_sorted:o}=n,l=s._cachedMeta.iScale,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(l&&t===l.axis&&t!=="r"&&o&&r.length){const h=l._reversePixels?nR:js;if(i){if(s._sharedOptions){const f=r[0],d=typeof f.getRange=="function"&&f.getRange(t);if(d){const p=h(r,t,e-d),g=h(r,t,e+d);return{lo:p.lo,hi:g.hi}}}}else{const f=h(r,t,e);if(c){const{vScale:d}=s._cachedMeta,{_parsed:p}=n,g=p.slice(0,f.lo+1).reverse().findIndex(y=>!Te(y[d.axis]));f.lo-=Math.max(0,g);const v=p.slice(f.hi).findIndex(y=>!Te(y[d.axis]));f.hi+=Math.max(0,v)}return f}}return{lo:0,hi:r.length-1}}function Hu(n,t,e,i,s){const r=n.getSortedVisibleDatasetMetas(),o=e[t];for(let l=0,c=r.length;l<c;++l){const{index:h,data:f}=r[l],{lo:d,hi:p}=zL(r[l],t,o,s);for(let g=d;g<=p;++g){const v=f[g];v.skip||i(v,h,g)}}}function HL(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,s){const r=t?Math.abs(i.x-s.x):0,o=e?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Cd(n,t,e,i,s){const r=[];return!s&&!n.isPointInArea(t)||Hu(n,e,t,function(l,c,h){!s&&!Xs(l,n.chartArea,0)||l.inRange(t.x,t.y,i)&&r.push({element:l,datasetIndex:c,index:h})},!0),r}function VL(n,t,e,i){let s=[];function r(o,l,c){const{startAngle:h,endAngle:f}=o.getProps(["startAngle","endAngle"],i),{angle:d}=iy(o,{x:t.x,y:t.y});ac(d,h,f)&&s.push({element:o,datasetIndex:l,index:c})}return Hu(n,e,t,r),s}function WL(n,t,e,i,s,r){let o=[];const l=HL(e);let c=Number.POSITIVE_INFINITY;function h(f,d,p){const g=f.inRange(t.x,t.y,s);if(i&&!g)return;const v=f.getCenterPoint(s);if(!(!!r||n.isPointInArea(v))&&!g)return;const x=l(t,v);x<c?(o=[{element:f,datasetIndex:d,index:p}],c=x):x===c&&o.push({element:f,datasetIndex:d,index:p})}return Hu(n,e,t,h),o}function wd(n,t,e,i,s,r){return!r&&!n.isPointInArea(t)?[]:e==="r"&&!i?VL(n,t,e,s):WL(n,t,e,i,s,r)}function h2(n,t,e,i,s){const r=[],o=e==="x"?"inXRange":"inYRange";let l=!1;return Hu(n,e,t,(c,h,f)=>{c[o]&&c[o](t[e],s)&&(r.push({element:c,datasetIndex:h,index:f}),l=l||c.inRange(t.x,t.y,s))}),i&&!l?[]:r}var GL={modes:{index(n,t,e,i){const s=so(t,n),r=e.axis||"x",o=e.includeInvisible||!1,l=e.intersect?Cd(n,s,r,i,o):wd(n,s,r,!1,i,o),c=[];return l.length?(n.getSortedVisibleDatasetMetas().forEach(h=>{const f=l[0].index,d=h.data[f];d&&!d.skip&&c.push({element:d,datasetIndex:h.index,index:f})}),c):[]},dataset(n,t,e,i){const s=so(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;let l=e.intersect?Cd(n,s,r,i,o):wd(n,s,r,!1,i,o);if(l.length>0){const c=l[0].datasetIndex,h=n.getDatasetMeta(c).data;l=[];for(let f=0;f<h.length;++f)l.push({element:h[f],datasetIndex:c,index:f})}return l},point(n,t,e,i){const s=so(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;return Cd(n,s,r,i,o)},nearest(n,t,e,i){const s=so(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;return wd(n,s,r,e.intersect,i,o)},x(n,t,e,i){const s=so(t,n);return h2(n,s,"x",e.intersect,i)},y(n,t,e,i){const s=so(t,n);return h2(n,s,"y",e.intersect,i)}}};const Py=["left","top","right","bottom"];function bl(n,t){return n.filter(e=>e.pos===t)}function u2(n,t){return n.filter(e=>Py.indexOf(e.pos)===-1&&e.box.axis===t)}function Ml(n,t){return n.sort((e,i)=>{const s=t?i:e,r=t?e:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function jL(n){const t=[];let e,i,s,r,o,l;for(e=0,i=(n||[]).length;e<i;++e)s=n[e],{position:r,options:{stack:o,stackWeight:l=1}}=s,t.push({index:e,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:l});return t}function XL(n){const t={};for(const e of n){const{stack:i,pos:s,stackWeight:r}=e;if(!i||!Py.includes(s))continue;const o=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function ZL(n,t){const e=XL(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=t;let r,o,l;for(r=0,o=n.length;r<o;++r){l=n[r];const{fullSize:c}=l.box,h=e[l.stack],f=h&&l.stackWeight/h.weight;l.horizontal?(l.width=f?f*i:c&&t.availableWidth,l.height=s):(l.width=i,l.height=f?f*s:c&&t.availableHeight)}return e}function YL(n){const t=jL(n),e=Ml(t.filter(h=>h.box.fullSize),!0),i=Ml(bl(t,"left"),!0),s=Ml(bl(t,"right")),r=Ml(bl(t,"top"),!0),o=Ml(bl(t,"bottom")),l=u2(t,"x"),c=u2(t,"y");return{fullSize:e,leftAndTop:i.concat(r),rightAndBottom:s.concat(c).concat(o).concat(l),chartArea:bl(t,"chartArea"),vertical:i.concat(s).concat(c),horizontal:r.concat(o).concat(l)}}function f2(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function Ry(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function qL(n,t,e,i){const{pos:s,box:r}=e,o=n.maxPadding;if(!Re(s)){e.size&&(n[s]-=e.size);const d=i[e.stack]||{size:0,count:1};d.size=Math.max(d.size,e.horizontal?r.height:r.width),e.size=d.size/d.count,n[s]+=e.size}r.getPadding&&Ry(o,r.getPadding());const l=Math.max(0,t.outerWidth-f2(o,n,"left","right")),c=Math.max(0,t.outerHeight-f2(o,n,"top","bottom")),h=l!==n.w,f=c!==n.h;return n.w=l,n.h=c,e.horizontal?{same:h,other:f}:{same:f,other:h}}function $L(n){const t=n.maxPadding;function e(i){const s=Math.max(t[i]-n[i],0);return n[i]+=s,s}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function KL(n,t){const e=t.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(t[o],e[o])}),r}return i(n?["left","right"]:["top","bottom"])}function Dl(n,t,e,i){const s=[];let r,o,l,c,h,f;for(r=0,o=n.length,h=0;r<o;++r){l=n[r],c=l.box,c.update(l.width||t.w,l.height||t.h,KL(l.horizontal,t));const{same:d,other:p}=qL(t,e,l,i);h|=d&&s.length,f=f||p,c.fullSize||s.push(l)}return h&&Dl(s,t,e,i)||f}function wh(n,t,e,i,s){n.top=e,n.left=t,n.right=t+i,n.bottom=e+s,n.width=i,n.height=s}function d2(n,t,e,i){const s=e.padding;let{x:r,y:o}=t;for(const l of n){const c=l.box,h=i[l.stack]||{placed:0,weight:1},f=l.stackWeight/h.weight||1;if(l.horizontal){const d=t.w*f,p=h.size||c.height;oc(h.start)&&(o=h.start),c.fullSize?wh(c,s.left,o,e.outerWidth-s.right-s.left,p):wh(c,t.left+h.placed,o,d,p),h.start=o,h.placed+=d,o=c.bottom}else{const d=t.h*f,p=h.size||c.width;oc(h.start)&&(r=h.start),c.fullSize?wh(c,r,s.top,p,e.outerHeight-s.bottom-s.top):wh(c,r,t.top+h.placed,p,d),h.start=r,h.placed+=d,r=c.right}}t.x=r,t.y=o}var jn={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const s=Zn(n.options.layout.padding),r=Math.max(t-s.width,0),o=Math.max(e-s.height,0),l=YL(n.boxes),c=l.vertical,h=l.horizontal;Ye(n.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const f=c.reduce((y,x)=>x.box.options&&x.box.options.display===!1?y:y+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:e,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/f,hBoxMaxHeight:o/2}),p=Object.assign({},s);Ry(p,Zn(i));const g=Object.assign({maxPadding:p,w:r,h:o,x:s.left,y:s.top},s),v=ZL(c.concat(h),d);Dl(l.fullSize,g,d,v),Dl(c,g,d,v),Dl(h,g,d,v)&&Dl(c,g,d,v),$L(g),d2(l.leftAndTop,g,d,v),g.x+=g.w,g.y+=g.h,d2(l.rightAndBottom,g,d,v),n.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},Ye(l.chartArea,y=>{const x=y.box;Object.assign(x,n.chartArea),x.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class Ly{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,s){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):i)}}isAttached(t){return!0}updateConfig(t){}}class JL extends Ly{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const jh="$chartjs",QL={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},p2=n=>n===null||n==="";function tI(n,t){const e=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[jh]={initial:{height:i,width:s,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",p2(s)){const r=K0(n,"width");r!==void 0&&(n.width=r)}if(p2(i))if(n.style.height==="")n.height=n.width/(t||2);else{const r=K0(n,"height");r!==void 0&&(n.height=r)}return n}const Iy=qR?{passive:!0}:!1;function eI(n,t,e){n&&n.addEventListener(t,e,Iy)}function nI(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,Iy)}function iI(n,t){const e=QL[n.type]||n.type,{x:i,y:s}=so(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function fu(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function sI(n,t,e){const i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(const l of r)o=o||fu(l.addedNodes,i),o=o&&!fu(l.removedNodes,i);o&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}function rI(n,t,e){const i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(const l of r)o=o||fu(l.removedNodes,i),o=o&&!fu(l.addedNodes,i);o&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}const cc=new Map;let m2=0;function Dy(){const n=window.devicePixelRatio;n!==m2&&(m2=n,cc.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function oI(n,t){cc.size||window.addEventListener("resize",Dy),cc.set(n,t)}function aI(n){cc.delete(n),cc.size||window.removeEventListener("resize",Dy)}function lI(n,t,e){const i=n.canvas,s=i&&dg(i);if(!s)return;const r=ay((l,c)=>{const h=s.clientWidth;e(l,c),h<s.clientWidth&&e()},window),o=new ResizeObserver(l=>{const c=l[0],h=c.contentRect.width,f=c.contentRect.height;h===0&&f===0||r(h,f)});return o.observe(s),oI(n,r),o}function Td(n,t,e){e&&e.disconnect(),t==="resize"&&aI(n)}function cI(n,t,e){const i=n.canvas,s=ay(r=>{n.ctx!==null&&e(iI(r,n))},n);return eI(i,t,s),s}class hI extends Ly{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(tI(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[jh])return!1;const i=e[jh].initial;["height","width"].forEach(r=>{const o=i[r];Te(o)?e.removeAttribute(r):e.setAttribute(r,o)});const s=i.style||{};return Object.keys(s).forEach(r=>{e.style[r]=s[r]}),e.width=e.width,delete e[jh],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const s=t.$proxies||(t.$proxies={}),o={attach:sI,detach:rI,resize:lI}[e]||cI;s[e]=o(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),s=i[e];if(!s)return;({attach:Td,detach:Td,resize:Td}[e]||nI)(t,e,s),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,s){return YR(t,e,i,s)}isAttached(t){const e=t&&dg(t);return!!(e&&e.isConnected)}}function uI(n){return!fg()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?JL:hI}let nr=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Na(this.x)&&Na(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const s={};return t.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}};function fI(n,t){const e=n.options.ticks,i=dI(n),s=Math.min(e.maxTicksLimit||i,i),r=e.major.enabled?mI(t):[],o=r.length,l=r[0],c=r[o-1],h=[];if(o>s)return gI(t,h,r,o/s),h;const f=pI(r,t,s);if(o>0){let d,p;const g=o>1?Math.round((c-l)/(o-1)):null;for(Th(t,h,f,Te(g)?0:l-g,l),d=0,p=o-1;d<p;d++)Th(t,h,f,r[d],r[d+1]);return Th(t,h,f,c,Te(g)?t.length:c+g),h}return Th(t,h,f),h}function dI(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),s=n._maxLength/e;return Math.floor(Math.min(i,s))}function pI(n,t,e){const i=_I(n),s=t.length/e;if(!i)return Math.max(s,1);const r=KP(i);for(let o=0,l=r.length-1;o<l;o++){const c=r[o];if(c>s)return c}return Math.max(s,1)}function mI(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function gI(n,t,e,i){let s=0,r=e[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===r&&(t.push(n[o]),s++,r=e[s*i])}function Th(n,t,e,i,s){const r=fe(i,0),o=Math.min(fe(s,n.length),n.length);let l=0,c,h,f;for(e=Math.ceil(e),s&&(c=s-i,e=c/Math.floor(c/e)),f=r;f<0;)l++,f=Math.round(r+l*e);for(h=Math.max(r,0);h<o;h++)h===f&&(t.push(n[h]),l++,f=Math.round(r+l*e))}function _I(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const vI=n=>n==="left"?"right":n==="right"?"left":n,g2=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,_2=(n,t)=>Math.min(t||n,n);function v2(n,t){const e=[],i=n.length/t,s=n.length;let r=0;for(;r<s;r+=i)e.push(n[Math.floor(r)]);return e}function xI(n,t,e){const i=n.ticks.length,s=Math.min(t,i-1),r=n._startPixel,o=n._endPixel,l=1e-6;let c=n.getPixelForTick(s),h;if(!(e&&(i===1?h=Math.max(c-r,o-c):t===0?h=(n.getPixelForTick(1)-c)/2:h=(c-n.getPixelForTick(s-1))/2,c+=s<t?h:-h,c<r-l||c>o+l)))return c}function yI(n,t){Ye(n,e=>{const i=e.gc,s=i.length/2;let r;if(s>t){for(r=0;r<s;++r)delete e.data[i[r]];i.splice(0,s)}})}function Sl(n){return n.drawTicks?n.tickLength:0}function x2(n,t){if(!n.display)return 0;const e=Tn(n.font,t),i=Zn(n.padding);return(fn(n.text)?n.text.length:1)*e.lineHeight+i.height}function bI(n,t){return Fr(n,{scale:t,type:"scale"})}function MI(n,t,e){return Fr(n,{tick:e,index:t,type:"tick"})}function SI(n,t,e){let i=og(n);return(e&&t!=="right"||!e&&t==="right")&&(i=vI(i)),i}function CI(n,t,e,i){const{top:s,left:r,bottom:o,right:l,chart:c}=n,{chartArea:h,scales:f}=c;let d=0,p,g,v;const y=o-s,x=l-r;if(n.isHorizontal()){if(g=Wn(i,r,l),Re(e)){const _=Object.keys(e)[0],w=e[_];v=f[_].getPixelForValue(w)+y-t}else e==="center"?v=(h.bottom+h.top)/2+y-t:v=g2(n,e,t);p=l-r}else{if(Re(e)){const _=Object.keys(e)[0],w=e[_];g=f[_].getPixelForValue(w)-x+t}else e==="center"?g=(h.left+h.right)/2-x+t:g=g2(n,e,t);v=Wn(i,o,s),d=e==="left"?-bn:bn}return{titleX:g,titleY:v,maxWidth:p,rotation:d}}class Lo extends nr{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:s}=this;return t=vi(t,Number.POSITIVE_INFINITY),e=vi(e,Number.NEGATIVE_INFINITY),i=vi(i,Number.POSITIVE_INFINITY),s=vi(s,Number.NEGATIVE_INFINITY),{min:vi(t,i),max:vi(e,s),minDefined:yn(t),maxDefined:yn(e)}}getMinMax(t){let{min:e,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:e,max:i};const l=this.getMatchingVisibleMetas();for(let c=0,h=l.length;c<h;++c)o=l[c].controller.getMinMax(this,t),s||(e=Math.min(e,o.min)),r||(i=Math.max(i,o.max));return e=r&&e>i?i:e,i=s&&e>i?e:i,{min:vi(e,vi(i,e)),max:vi(i,vi(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){rn(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:s,grace:r,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=TR(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?v2(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=fI(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){rn(this.options.afterUpdate,[this])}beforeSetDimensions(){rn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){rn(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),rn(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){rn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,s,r;for(i=0,s=t.length;i<s;i++)r=t[i],r.label=rn(e.callback,[r.value,i,t],this)}afterTickToLabelConversion(){rn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){rn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=_2(this.ticks.length,t.ticks.maxTicksLimit),s=e.minRotation||0,r=e.maxRotation;let o=s,l,c,h;if(!this._isVisible()||!e.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const f=this._getLabelSizes(),d=f.widest.width,p=f.highest.height,g=In(this.chart.width-d,0,this.maxWidth);l=t.offset?this.maxWidth/i:g/(i-1),d+6>l&&(l=g/(i-(t.offset?.5:1)),c=this.maxHeight-Sl(t.grid)-e.padding-x2(t.title,this.chart.options.font),h=Math.sqrt(d*d+p*p),o=sg(Math.min(Math.asin(In((f.highest.height+6)/l,-1,1)),Math.asin(In(c/h,-1,1))-Math.asin(In(p/h,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){rn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){rn(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=x2(s,e.options.font);if(l?(t.width=this.maxWidth,t.height=Sl(r)+c):(t.height=this.maxHeight,t.width=Sl(r)+c),i.display&&this.ticks.length){const{first:h,last:f,widest:d,highest:p}=this._getLabelSizes(),g=i.padding*2,v=Xi(this.labelRotation),y=Math.cos(v),x=Math.sin(v);if(l){const _=i.mirror?0:x*d.width+y*p.height;t.height=Math.min(this.maxHeight,t.height+_+g)}else{const _=i.mirror?0:y*d.width+x*p.height;t.width=Math.min(this.maxWidth,t.width+_+g)}this._calculatePadding(h,f,x,y)}}this._handleMargins(),l?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,s){const{ticks:{align:r,padding:o},position:l}=this.options,c=this.labelRotation!==0,h=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const f=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,g=0;c?h?(p=s*t.width,g=i*e.height):(p=i*t.height,g=s*e.width):r==="start"?g=e.width:r==="end"?p=t.width:r!=="inner"&&(p=t.width/2,g=e.width/2),this.paddingLeft=Math.max((p-f+o)*this.width/(this.width-f),0),this.paddingRight=Math.max((g-d+o)*this.width/(this.width-d),0)}else{let f=e.height/2,d=t.height/2;r==="start"?(f=0,d=t.height):r==="end"&&(f=e.height,d=0),this.paddingTop=f+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){rn(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)Te(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=v2(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:s,_longestTextCache:r}=this,o=[],l=[],c=Math.floor(e/_2(e,i));let h=0,f=0,d,p,g,v,y,x,_,w,C,S,T;for(d=0;d<e;d+=c){if(v=t[d].label,y=this._resolveTickFontOptions(d),s.font=x=y.string,_=r[x]=r[x]||{data:{},gc:[]},w=y.lineHeight,C=S=0,!Te(v)&&!fn(v))C=hu(s,_.data,_.gc,C,v),S=w;else if(fn(v))for(p=0,g=v.length;p<g;++p)T=v[p],!Te(T)&&!fn(T)&&(C=hu(s,_.data,_.gc,C,T),S+=w);o.push(C),l.push(S),h=Math.max(C,h),f=Math.max(S,f)}yI(r,e);const A=o.indexOf(h),P=l.indexOf(f),N=E=>({width:o[E]||0,height:l[E]||0});return{first:N(0),last:N(e-1),widest:N(A),highest:N(P),widths:o,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return eR(this._alignToPixels?Jr(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=MI(this.getContext(),t,i))}return this.$context||(this.$context=bI(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Xi(this.labelRotation),i=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,l=r?r.widest.width+o:0,c=r?r.highest.height+o:0;return this.isHorizontal()?c*i>l*s?l/i:c/s:c*s<l*i?c/i:l/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,s=this.options,{grid:r,position:o,border:l}=s,c=r.offset,h=this.isHorizontal(),d=this.ticks.length+(c?1:0),p=Sl(r),g=[],v=l.setContext(this.getContext()),y=v.display?v.width:0,x=y/2,_=function(j){return Jr(i,j,y)};let w,C,S,T,A,P,N,E,R,k,H,q;if(o==="top")w=_(this.bottom),P=this.bottom-p,E=w-x,k=_(t.top)+x,q=t.bottom;else if(o==="bottom")w=_(this.top),k=t.top,q=_(t.bottom)-x,P=w+x,E=this.top+p;else if(o==="left")w=_(this.right),A=this.right-p,N=w-x,R=_(t.left)+x,H=t.right;else if(o==="right")w=_(this.left),R=t.left,H=_(t.right)-x,A=w+x,N=this.left+p;else if(e==="x"){if(o==="center")w=_((t.top+t.bottom)/2+.5);else if(Re(o)){const j=Object.keys(o)[0],et=o[j];w=_(this.chart.scales[j].getPixelForValue(et))}k=t.top,q=t.bottom,P=w+x,E=P+p}else if(e==="y"){if(o==="center")w=_((t.left+t.right)/2);else if(Re(o)){const j=Object.keys(o)[0],et=o[j];w=_(this.chart.scales[j].getPixelForValue(et))}A=w-x,N=A-p,R=t.left,H=t.right}const G=fe(s.ticks.maxTicksLimit,d),Y=Math.max(1,Math.ceil(d/G));for(C=0;C<d;C+=Y){const j=this.getContext(C),et=r.setContext(j),V=l.setContext(j),ct=et.lineWidth,rt=et.color,gt=V.dash||[],It=V.dashOffset,Dt=et.tickWidth,At=et.tickColor,K=et.tickBorderDash||[],st=et.tickBorderDashOffset;S=xI(this,C,c),S!==void 0&&(T=Jr(i,S,ct),h?A=N=R=H=T:P=E=k=q=T,g.push({tx1:A,ty1:P,tx2:N,ty2:E,x1:R,y1:k,x2:H,y2:q,width:ct,color:rt,borderDash:gt,borderDashOffset:It,tickWidth:Dt,tickColor:At,tickBorderDash:K,tickBorderDashOffset:st}))}return this._ticksLength=d,this._borderValue=w,g}_computeLabelItems(t){const e=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:h,padding:f,mirror:d}=r,p=Sl(i.grid),g=p+f,v=d?-f:g,y=-Xi(this.labelRotation),x=[];let _,w,C,S,T,A,P,N,E,R,k,H,q="middle";if(s==="top")A=this.bottom-v,P=this._getXAxisLabelAlignment();else if(s==="bottom")A=this.top+v,P=this._getXAxisLabelAlignment();else if(s==="left"){const Y=this._getYAxisLabelAlignment(p);P=Y.textAlign,T=Y.x}else if(s==="right"){const Y=this._getYAxisLabelAlignment(p);P=Y.textAlign,T=Y.x}else if(e==="x"){if(s==="center")A=(t.top+t.bottom)/2+g;else if(Re(s)){const Y=Object.keys(s)[0],j=s[Y];A=this.chart.scales[Y].getPixelForValue(j)+g}P=this._getXAxisLabelAlignment()}else if(e==="y"){if(s==="center")T=(t.left+t.right)/2-g;else if(Re(s)){const Y=Object.keys(s)[0],j=s[Y];T=this.chart.scales[Y].getPixelForValue(j)}P=this._getYAxisLabelAlignment(p).textAlign}e==="y"&&(c==="start"?q="top":c==="end"&&(q="bottom"));const G=this._getLabelSizes();for(_=0,w=l.length;_<w;++_){C=l[_],S=C.label;const Y=r.setContext(this.getContext(_));N=this.getPixelForTick(_)+r.labelOffset,E=this._resolveTickFontOptions(_),R=E.lineHeight,k=fn(S)?S.length:1;const j=k/2,et=Y.color,V=Y.textStrokeColor,ct=Y.textStrokeWidth;let rt=P;o?(T=N,P==="inner"&&(_===w-1?rt=this.options.reverse?"left":"right":_===0?rt=this.options.reverse?"right":"left":rt="center"),s==="top"?h==="near"||y!==0?H=-k*R+R/2:h==="center"?H=-G.highest.height/2-j*R+R:H=-G.highest.height+R/2:h==="near"||y!==0?H=R/2:h==="center"?H=G.highest.height/2-j*R:H=G.highest.height-k*R,d&&(H*=-1),y!==0&&!Y.showLabelBackdrop&&(T+=R/2*Math.sin(y))):(A=N,H=(1-k)*R/2);let gt;if(Y.showLabelBackdrop){const It=Zn(Y.backdropPadding),Dt=G.heights[_],At=G.widths[_];let K=H-It.top,st=0-It.left;switch(q){case"middle":K-=Dt/2;break;case"bottom":K-=Dt;break}switch(P){case"center":st-=At/2;break;case"right":st-=At;break;case"inner":_===w-1?st-=At:_>0&&(st-=At/2);break}gt={left:st,top:K,width:At+It.width,height:Dt+It.height,color:Y.backdropColor}}x.push({label:S,font:E,textOffset:H,options:{rotation:y,color:et,strokeColor:V,strokeWidth:ct,textAlign:rt,textBaseline:q,translation:[T,A],backdrop:gt}})}return x}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Xi(this.labelRotation))return t==="top"?"left":"right";let s="center";return e.align==="start"?s="left":e.align==="end"?s="right":e.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),l=t+r,c=o.widest.width;let h,f;return e==="left"?s?(f=this.right+r,i==="near"?h="left":i==="center"?(h="center",f+=c/2):(h="right",f+=c)):(f=this.right-l,i==="near"?h="right":i==="center"?(h="center",f-=c/2):(h="left",f=this.left)):e==="right"?s?(f=this.left+r,i==="near"?h="right":i==="center"?(h="center",f-=c/2):(h="left",f-=c)):(f=this.left+l,i==="near"?h="left":i==="center"?(h="center",f+=c/2):(h="right",f=this.right)):h="right",{textAlign:h,x:f}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:s,width:r,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,s,r,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const s=this.ticks.findIndex(r=>r.value===t);return s>=0?e.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const l=(c,h,f)=>{!f.width||!f.color||(i.save(),i.lineWidth=f.width,i.strokeStyle=f.color,i.setLineDash(f.borderDash||[]),i.lineDashOffset=f.borderDashOffset,i.beginPath(),i.moveTo(c.x,c.y),i.lineTo(h.x,h.y),i.stroke(),i.restore())};if(e.display)for(r=0,o=s.length;r<o;++r){const c=s[r];e.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),e.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const l=s.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let h,f,d,p;this.isHorizontal()?(h=Jr(t,this.left,o)-o/2,f=Jr(t,this.right,l)+l/2,d=p=c):(d=Jr(t,this.top,o)-o/2,p=Jr(t,this.bottom,l)+l/2,h=f=c),e.save(),e.lineWidth=r.width,e.strokeStyle=r.color,e.beginPath(),e.moveTo(h,d),e.lineTo(f,p),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&Uu(i,s);const r=this.getLabelItems(t);for(const o of r){const l=o.options,c=o.font,h=o.label,f=o.textOffset;wo(i,h,0,f,c,l)}s&&Bu(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:s}}=this;if(!i.display)return;const r=Tn(i.font),o=Zn(i.padding),l=i.align;let c=r.lineHeight/2;e==="bottom"||e==="center"||Re(e)?(c+=o.bottom,fn(i.text)&&(c+=r.lineHeight*(i.text.length-1))):c+=o.top;const{titleX:h,titleY:f,maxWidth:d,rotation:p}=CI(this,c,e,l);wo(t,i.text,0,0,r,{color:i.color,maxWidth:d,rotation:p,textAlign:SI(l,e,s),textBaseline:"middle",translation:[h,f]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=fe(t.grid&&t.grid.z,-1),s=fe(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Lo.prototype.draw?[{z:e,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:e,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,o;for(r=0,o=e.length;r<o;++r){const l=e[r];l[i]===this.id&&(!t||l.type===t)&&s.push(l)}return s}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Tn(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Eh{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;EI(e)&&(i=this.register(e));const s=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in s||(s[r]=t,wI(t,o,i),this.override&&dn.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,s=this.scope;i in e&&delete e[i],s&&i in dn[s]&&(delete dn[s][i],this.override&&delete Co[i])}}function wI(n,t,e){const i=rc(Object.create(null),[e?dn.get(e):{},dn.get(t),n.defaults]);dn.set(t,i),n.defaultRoutes&&TI(t,n.defaultRoutes),n.descriptors&&dn.describe(t,n.descriptors)}function TI(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),s=i.pop(),r=[n].concat(i).join("."),o=t[e].split("."),l=o.pop(),c=o.join(".");dn.route(r,s,c,l)})}function EI(n){return"id"in n&&"defaults"in n}class AI{constructor(){this.controllers=new Eh(Ur,"datasets",!0),this.elements=new Eh(nr,"elements"),this.plugins=new Eh(Object,"plugins"),this.scales=new Eh(Lo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(t,r,s):Ye(s,o=>{const l=i||this._getRegistryForType(o);this._exec(t,l,o)})})}_exec(t,e,i){const s=ig(t);rn(i["before"+s],[],i),e[t](i),rn(i["after"+s],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const s=e.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return s}}var ss=new AI;class PI{constructor(){this._init=[]}notify(t,e,i,s){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=s?this._descriptors(t).filter(s):this._descriptors(t),o=this._notify(r,t,e,i);return e==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,i,s){s=s||{};for(const r of t){const o=r.plugin,l=o[i],c=[e,s,r.options];if(rn(l,c,o)===!1&&s.cancelable)return!1}return!0}invalidate(){Te(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,s=fe(i.options&&i.options.plugins,{}),r=RI(i);return s===!1&&!e?[]:II(t,r,s,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(s(e,i),t,"stop"),this._notify(s(i,e),t,"start")}}function RI(n){const t={},e=[],i=Object.keys(ss.plugins.items);for(let r=0;r<i.length;r++)e.push(ss.getPlugin(i[r]));const s=n.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function LI(n,t){return!t&&n===!1?null:n===!0?{}:n}function II(n,{plugins:t,localIds:e},i,s){const r=[],o=n.getContext();for(const l of t){const c=l.id,h=LI(i[c],s);h!==null&&r.push({plugin:l,options:DI(n.config,{plugin:l,local:e[c]},h,o)})}return r}function DI(n,{plugin:t,local:e},i,s){const r=n.pluginScopeKeys(t),o=n.getOptionScopes(i,r);return e&&t.defaults&&o.push(t.defaults),n.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Jp(n,t){const e=dn.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function OI(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function NI(n,t){return n===t?"_index_":"_value_"}function y2(n){if(n==="x"||n==="y"||n==="r")return n}function kI(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Qp(n,...t){if(y2(n))return n;for(const e of t){const i=e.axis||kI(e.position)||n.length>1&&y2(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function b2(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function FI(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return b2(n,"x",e[0])||b2(n,"y",e[0])}return{}}function UI(n,t){const e=Co[n.type]||{scales:{}},i=t.scales||{},s=Jp(n.type,t),r=Object.create(null);return Object.keys(i).forEach(o=>{const l=i[o];if(!Re(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=Qp(o,l,FI(o,n),dn.scales[l.type]),h=NI(c,s),f=e.scales||{};r[o]=Vl(Object.create(null),[{axis:c},l,f[c],f[h]])}),n.data.datasets.forEach(o=>{const l=o.type||n.type,c=o.indexAxis||Jp(l,t),f=(Co[l]||{}).scales||{};Object.keys(f).forEach(d=>{const p=OI(d,c),g=o[p+"AxisID"]||p;r[g]=r[g]||Object.create(null),Vl(r[g],[{axis:p},i[g],f[d]])})}),Object.keys(r).forEach(o=>{const l=r[o];Vl(l,[dn.scales[l.type],dn.scale])}),r}function Oy(n){const t=n.options||(n.options={});t.plugins=fe(t.plugins,{}),t.scales=UI(n,t)}function Ny(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function BI(n){return n=n||{},n.data=Ny(n.data),Oy(n),n}const M2=new Map,ky=new Set;function Ah(n,t){let e=M2.get(n);return e||(e=t(),M2.set(n,e),ky.add(e)),e}const Cl=(n,t,e)=>{const i=Or(t,e);i!==void 0&&n.add(i)};class zI{constructor(t){this._config=BI(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Ny(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Oy(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Ah(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Ah(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Ah(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return Ah(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let s=i.get(t);return(!s||e)&&(s=new Map,i.set(t,s)),s}getOptionScopes(t,e,i){const{options:s,type:r}=this,o=this._cachedScopes(t,i),l=o.get(e);if(l)return l;const c=new Set;e.forEach(f=>{t&&(c.add(t),f.forEach(d=>Cl(c,t,d))),f.forEach(d=>Cl(c,s,d)),f.forEach(d=>Cl(c,Co[r]||{},d)),f.forEach(d=>Cl(c,dn,d)),f.forEach(d=>Cl(c,$p,d))});const h=Array.from(c);return h.length===0&&h.push(Object.create(null)),ky.has(e)&&o.set(e,h),h}chartOptionScopes(){const{options:t,type:e}=this;return[t,Co[e]||{},dn.datasets[e]||{},{type:e},dn,$p]}resolveNamedOptions(t,e,i,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:l}=S2(this._resolverCache,t,s);let c=o;if(VI(o,e)){r.$shared=!1,i=Nr(i)?i():i;const h=this.createResolver(t,i,l);c=ka(o,i,h)}for(const h of e)r[h]=c[h];return r}createResolver(t,e,i=[""],s){const{resolver:r}=S2(this._resolverCache,t,i);return Re(e)?ka(r,e,void 0,s):r}}function S2(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const s=e.join();let r=i.get(s);return r||(r={resolver:cg(t,e),subPrefixes:e.filter(l=>!l.toLowerCase().includes("hover"))},i.set(s,r)),r}const HI=n=>Re(n)&&Object.getOwnPropertyNames(n).some(t=>Nr(n[t]));function VI(n,t){const{isScriptable:e,isIndexable:i}=dy(n);for(const s of t){const r=e(s),o=i(s),l=(o||r)&&n[s];if(r&&(Nr(l)||HI(l))||o&&fn(l))return!0}return!1}var WI="4.5.0";const GI=["top","bottom","left","right","chartArea"];function C2(n,t){return n==="top"||n==="bottom"||GI.indexOf(n)===-1&&t==="x"}function w2(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function T2(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),rn(e&&e.onComplete,[n],t)}function jI(n){const t=n.chart,e=t.options.animation;rn(e&&e.onProgress,[n],t)}function Fy(n){return fg()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Xh={},E2=n=>{const t=Fy(n);return Object.values(Xh).filter(e=>e.canvas===t).pop()};function XI(n,t,e){const i=Object.keys(n);for(const s of i){const r=+s;if(r>=t){const o=n[s];delete n[s],(e>0||r>t)&&(n[r+e]=o)}}}function ZI(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}class on{static defaults=dn;static instances=Xh;static overrides=Co;static registry=ss;static version=WI;static getChart=E2;static register(...t){ss.add(...t),A2()}static unregister(...t){ss.remove(...t),A2()}constructor(t,e){const i=this.config=new zI(e),s=Fy(t),r=E2(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||uI(s)),this.platform.updateConfig(i);const l=this.platform.acquireContext(s,o.aspectRatio),c=l&&l.canvas,h=c&&c.height,f=c&&c.width;if(this.id=VP(),this.ctx=l,this.canvas=c,this.width=f,this.height=h,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new PI,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=rR(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Xh[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}ks.listen(this,"complete",T2),ks.listen(this,"progress",jI),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:s,_aspectRatio:r}=this;return Te(t)?e&&r?r:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return ss}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():$0(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Z0(this.canvas,this.ctx),this}stop(){return ks.stop(this),this}resize(t,e){ks.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,t,e,r),l=i.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,$0(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),rn(i.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};Ye(e,(i,s)=>{i.id=s})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,s=Object.keys(i).reduce((o,l)=>(o[l]=!1,o),{});let r=[];e&&(r=r.concat(Object.keys(e).map(o=>{const l=e[o],c=Qp(o,l),h=c==="r",f=c==="x";return{options:l,dposition:h?"chartArea":f?"bottom":"left",dtype:h?"radialLinear":f?"category":"linear"}}))),Ye(r,o=>{const l=o.options,c=l.id,h=Qp(c,l),f=fe(l.type,o.dtype);(l.position===void 0||C2(l.position,h)!==C2(o.dposition))&&(l.position=o.dposition),s[c]=!0;let d=null;if(c in i&&i[c].type===f)d=i[c];else{const p=ss.getScale(f);d=new p({id:c,type:f,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(l,t)}),Ye(s,(o,l)=>{o||delete i[l]}),Ye(i,o=>{jn.configure(this,o,o.options),jn.addBox(this,o)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((s,r)=>s.index-r.index),i>e){for(let s=e;s<i;++s)this._destroyDatasetMeta(s);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(w2("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,s)=>{e.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=e.length;i<s;i++){const r=e[i];let o=this.getDatasetMeta(i);const l=r.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=l,o.indexAxis=r.indexAxis||Jp(l,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const c=ss.getController(l),{datasetElementType:h,dataElementType:f}=dn.datasets[l];Object.assign(c,{dataElementType:ss.getElement(f),datasetElementType:h&&ss.getElement(h)}),o.controller=new c(this,i),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Ye(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let h=0,f=this.data.datasets.length;h<f;h++){const{controller:d}=this.getDatasetMeta(h),p=!s&&r.indexOf(d)===-1;d.buildOrUpdateElements(p),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||Ye(r,h=>{h.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(w2("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Ye(this.scales,t=>{jn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!U0(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of e){const o=i==="_removeElements"?-r:r;XI(t,s,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=r=>new Set(t.filter(o=>o[0]===r).map((o,l)=>l+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<e;r++)if(!U0(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;jn.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],Ye(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,Nr(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ks.has(this)?this.attached&&!ks.running(this)&&ks.start(this):(this.draw(),T2({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let s,r;for(s=0,r=e.length;s<r;++s){const o=e[s];(!t||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i={meta:t,index:t.index,cancelable:!0},s=Cy(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(s&&Uu(e,s),t.controller.draw(),s&&Bu(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return Xs(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,s){const r=GL.modes[e];return typeof r=="function"?r(this,t,i,s):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let s=i.filter(r=>r&&r._dataset===e).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Fr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const s=i?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,s);oc(e)?(r.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),o.update(r,{visible:i}),this.update(l=>l.datasetIndex===t?s:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),ks.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Z0(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Xh[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(r,o)=>{e.addEventListener(this,r,o),t[r]=o},s=(r,o,l)=>{r.offsetX=o,r.offsetY=l,this._eventHandler(r)};Ye(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(c,h)=>{e.addEventListener(this,c,h),t[c]=h},s=(c,h)=>{t[c]&&(e.removeEventListener(this,c,h),delete t[c])},r=(c,h)=>{this.canvas&&this.resize(c,h)};let o;const l=()=>{s("attach",l),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",l)},e.isAttached(this.canvas)?l():o()}unbindEvents(){Ye(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Ye(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const s=i?"set":"remove";let r,o,l,c;for(e==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){o=t[l];const h=o&&this.getDatasetMeta(o.datasetIndex).controller;h&&h[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:r,index:o})=>{const l=this.getDatasetMeta(r);if(!l)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:l.data[o],index:o}});!au(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const s=this.options.hover,r=(c,h)=>c.filter(f=>!h.some(d=>f.datasetIndex===d.datasetIndex&&f.index===d.index)),o=r(e,t),l=i?t:r(t,e);o.length&&this.updateHoverStyle(o,s.mode,!1),l.length&&s.mode&&this.updateHoverStyle(l,s.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:s=[],options:r}=this,o=e,l=this._getActiveElements(t,s,i,o),c=YP(t),h=ZI(t,this._lastEvent,i,c);i&&(this._lastEvent=null,rn(r.onHover,[t,l,this],this),c&&rn(r.onClick,[t,l,this],this));const f=!au(l,s);return(f||e)&&(this._active=l,this._updateHoverStyles(l,s,e)),this._lastEvent=h,f}_getActiveElements(t,e,i,s){if(t.type==="mouseout")return[];if(!i)return e;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,s)}}function A2(){return Ye(on.instances,n=>n._plugins.invalidate())}function YI(n,t,e){const{startAngle:i,x:s,y:r,outerRadius:o,innerRadius:l,options:c}=t,{borderWidth:h,borderJoinStyle:f}=c,d=Math.min(h/o,Gn(i-e));if(n.beginPath(),n.arc(s,r,o-h/2,i+d/2,e-d/2),l>0){const p=Math.min(h/l,Gn(i-e));n.arc(s,r,l+h/2,e-p/2,i+p/2,!0)}else{const p=Math.min(h/2,o*Gn(i-e));if(f==="round")n.arc(s,r,p,e-He/2,i+He/2,!0);else if(f==="bevel"){const g=2*p*p,v=-g*Math.cos(e+He/2)+s,y=-g*Math.sin(e+He/2)+r,x=g*Math.cos(i+He/2)+s,_=g*Math.sin(i+He/2)+r;n.lineTo(v,y),n.lineTo(x,_)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function qI(n,t,e){const{startAngle:i,pixelMargin:s,x:r,y:o,outerRadius:l,innerRadius:c}=t;let h=s/l;n.beginPath(),n.arc(r,o,l,i-h,e+h),c>s?(h=s/c,n.arc(r,o,c,e+h,i-h,!0)):n.arc(r,o,s,e+bn,i-bn),n.closePath(),n.clip()}function $I(n){return lg(n,["outerStart","outerEnd","innerStart","innerEnd"])}function KI(n,t,e,i){const s=$I(n.options.borderRadius),r=(e-t)/2,o=Math.min(r,i*t/2),l=c=>{const h=(e-Math.min(r,c))*i/2;return In(c,0,Math.min(r,h))};return{outerStart:l(s.outerStart),outerEnd:l(s.outerEnd),innerStart:In(s.innerStart,0,o),innerEnd:In(s.innerEnd,0,o)}}function ra(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function du(n,t,e,i,s,r){const{x:o,y:l,startAngle:c,pixelMargin:h,innerRadius:f}=t,d=Math.max(t.outerRadius+i+e-h,0),p=f>0?f+i+e+h:0;let g=0;const v=s-c;if(i){const Y=f>0?f-i:0,j=d>0?d-i:0,et=(Y+j)/2,V=et!==0?v*et/(et+i):v;g=(v-V)/2}const y=Math.max(.001,v*d-e/He)/d,x=(v-y)/2,_=c+x+g,w=s-x-g,{outerStart:C,outerEnd:S,innerStart:T,innerEnd:A}=KI(t,p,d,w-_),P=d-C,N=d-S,E=_+C/P,R=w-S/N,k=p+T,H=p+A,q=_+T/k,G=w-A/H;if(n.beginPath(),r){const Y=(E+R)/2;if(n.arc(o,l,d,E,Y),n.arc(o,l,d,Y,R),S>0){const ct=ra(N,R,o,l);n.arc(ct.x,ct.y,S,R,w+bn)}const j=ra(H,w,o,l);if(n.lineTo(j.x,j.y),A>0){const ct=ra(H,G,o,l);n.arc(ct.x,ct.y,A,w+bn,G+Math.PI)}const et=(w-A/p+(_+T/p))/2;if(n.arc(o,l,p,w-A/p,et,!0),n.arc(o,l,p,et,_+T/p,!0),T>0){const ct=ra(k,q,o,l);n.arc(ct.x,ct.y,T,q+Math.PI,_-bn)}const V=ra(P,_,o,l);if(n.lineTo(V.x,V.y),C>0){const ct=ra(P,E,o,l);n.arc(ct.x,ct.y,C,_-bn,E)}}else{n.moveTo(o,l);const Y=Math.cos(E)*d+o,j=Math.sin(E)*d+l;n.lineTo(Y,j);const et=Math.cos(R)*d+o,V=Math.sin(R)*d+l;n.lineTo(et,V)}n.closePath()}function JI(n,t,e,i,s){const{fullCircles:r,startAngle:o,circumference:l}=t;let c=t.endAngle;if(r){du(n,t,e,i,c,s);for(let h=0;h<r;++h)n.fill();isNaN(l)||(c=o+(l%cn||cn))}return du(n,t,e,i,c,s),n.fill(),c}function QI(n,t,e,i,s){const{fullCircles:r,startAngle:o,circumference:l,options:c}=t,{borderWidth:h,borderJoinStyle:f,borderDash:d,borderDashOffset:p,borderRadius:g}=c,v=c.borderAlign==="inner";if(!h)return;n.setLineDash(d||[]),n.lineDashOffset=p,v?(n.lineWidth=h*2,n.lineJoin=f||"round"):(n.lineWidth=h,n.lineJoin=f||"bevel");let y=t.endAngle;if(r){du(n,t,e,i,y,s);for(let x=0;x<r;++x)n.stroke();isNaN(l)||(y=o+(l%cn||cn))}v&&qI(n,t,y),c.selfJoin&&y-o>=He&&g===0&&f!=="miter"&&YI(n,t,y),r||(du(n,t,e,i,y,s),n.stroke())}class tD extends nr{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){const s=this.getProps(["x","y"],i),{angle:r,distance:o}=iy(s,{x:t,y:e}),{startAngle:l,endAngle:c,innerRadius:h,outerRadius:f,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),p=(this.options.spacing+this.options.borderWidth)/2,g=fe(d,c-l),v=ac(r,l,c)&&l!==c,y=g>=cn||v,x=Gs(o,h+p,f+p);return y&&x}getCenterPoint(t){const{x:e,y:i,startAngle:s,endAngle:r,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:c,spacing:h}=this.options,f=(s+r)/2,d=(o+l+h+c)/2;return{x:e+Math.cos(f)*d,y:i+Math.sin(f)*d}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:i}=this,s=(e.offset||0)/4,r=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=i>cn?Math.floor(i/cn):0,i===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const l=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(He,i||0)),h=s*c;t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,JI(t,this,h,r,o),QI(t,this,h,r,o),t.restore()}}function Uy(n,t,e=t){n.lineCap=fe(e.borderCapStyle,t.borderCapStyle),n.setLineDash(fe(e.borderDash,t.borderDash)),n.lineDashOffset=fe(e.borderDashOffset,t.borderDashOffset),n.lineJoin=fe(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=fe(e.borderWidth,t.borderWidth),n.strokeStyle=fe(e.borderColor,t.borderColor)}function eD(n,t,e){n.lineTo(e.x,e.y)}function nD(n){return n.stepped?_R:n.tension||n.cubicInterpolationMode==="monotone"?vR:eD}function By(n,t,e={}){const i=n.length,{start:s=0,end:r=i-1}=e,{start:o,end:l}=t,c=Math.max(s,o),h=Math.min(r,l),f=s<o&&r<o||s>l&&r>l;return{count:i,start:c,loop:t.loop,ilen:h<c&&!f?i+h-c:h-c}}function iD(n,t,e,i){const{points:s,options:r}=t,{count:o,start:l,loop:c,ilen:h}=By(s,e,i),f=nD(r);let{move:d=!0,reverse:p}=i||{},g,v,y;for(g=0;g<=h;++g)v=s[(l+(p?h-g:g))%o],!v.skip&&(d?(n.moveTo(v.x,v.y),d=!1):f(n,y,v,p,r.stepped),y=v);return c&&(v=s[(l+(p?h:0))%o],f(n,y,v,p,r.stepped)),!!c}function sD(n,t,e,i){const s=t.points,{count:r,start:o,ilen:l}=By(s,e,i),{move:c=!0,reverse:h}=i||{};let f=0,d=0,p,g,v,y,x,_;const w=S=>(o+(h?l-S:S))%r,C=()=>{y!==x&&(n.lineTo(f,x),n.lineTo(f,y),n.lineTo(f,_))};for(c&&(g=s[w(0)],n.moveTo(g.x,g.y)),p=0;p<=l;++p){if(g=s[w(p)],g.skip)continue;const S=g.x,T=g.y,A=S|0;A===v?(T<y?y=T:T>x&&(x=T),f=(d*f+S)/++d):(C(),n.lineTo(S,T),v=A,d=0,y=x=T),_=T}C()}function tm(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?sD:iD}function rD(n){return n.stepped?$R:n.tension||n.cubicInterpolationMode==="monotone"?KR:ro}function oD(n,t,e,i){let s=t._path;s||(s=t._path=new Path2D,t.path(s,e,i)&&s.closePath()),Uy(n,t.options),n.stroke(s)}function aD(n,t,e,i){const{segments:s,options:r}=t,o=tm(t);for(const l of s)Uy(n,r,l.style),n.beginPath(),o(n,t,l,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}const lD=typeof Path2D=="function";function cD(n,t,e,i){lD&&!t.options.segment?oD(n,t,e,i):aD(n,t,e,i)}class Vu extends nr{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;VR(this._points,i,t,s,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=iL(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,s=t[e],r=this.points,o=Sy(this,{property:e,start:s,end:s});if(!o.length)return;const l=[],c=rD(i);let h,f;for(h=0,f=o.length;h<f;++h){const{start:d,end:p}=o[h],g=r[d],v=r[p];if(g===v){l.push(g);continue}const y=Math.abs((s-g[e])/(v[e]-g[e])),x=c(g,v,y,i.stepped);x[e]=t[e],l.push(x)}return l.length===1?l[0]:l}pathSegment(t,e,i){return tm(this)(t,this,e,i)}path(t,e,i){const s=this.segments,r=tm(this);let o=this._loop;e=e||0,i=i||this.points.length-e;for(const l of s)o&=r(t,this,l,{start:e,end:e+i-1});return!!o}draw(t,e,i,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),cD(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function P2(n,t,e,i){const s=n.options,{[e]:r}=n.getProps([e],i);return Math.abs(t-r)<s.radius+s.hitRadius}class hD extends nr{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,i){const s=this.options,{x:r,y:o}=this.getProps(["x","y"],i);return Math.pow(t-r,2)+Math.pow(e-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,e){return P2(this,t,"x",e)}inYRange(t,e){return P2(this,t,"y",e)}getCenterPoint(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}size(t){t=t||this.options||{};let e=t.radius||0;e=Math.max(e,e&&t.hoverRadius||0);const i=e&&t.borderWidth||0;return(e+i)*2}draw(t,e){const i=this.options;this.skip||i.radius<.1||!Xs(this,e,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,Kp(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function zy(n,t){const{x:e,y:i,base:s,width:r,height:o}=n.getProps(["x","y","base","width","height"],t);let l,c,h,f,d;return n.horizontal?(d=o/2,l=Math.min(e,s),c=Math.max(e,s),h=i-d,f=i+d):(d=r/2,l=e-d,c=e+d,h=Math.min(i,s),f=Math.max(i,s)),{left:l,top:h,right:c,bottom:f}}function Mr(n,t,e,i){return n?0:In(t,e,i)}function uD(n,t,e){const i=n.options.borderWidth,s=n.borderSkipped,r=fy(i);return{t:Mr(s.top,r.top,0,e),r:Mr(s.right,r.right,0,t),b:Mr(s.bottom,r.bottom,0,e),l:Mr(s.left,r.left,0,t)}}function fD(n,t,e){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),s=n.options.borderRadius,r=_o(s),o=Math.min(t,e),l=n.borderSkipped,c=i||Re(s);return{topLeft:Mr(!c||l.top||l.left,r.topLeft,0,o),topRight:Mr(!c||l.top||l.right,r.topRight,0,o),bottomLeft:Mr(!c||l.bottom||l.left,r.bottomLeft,0,o),bottomRight:Mr(!c||l.bottom||l.right,r.bottomRight,0,o)}}function dD(n){const t=zy(n),e=t.right-t.left,i=t.bottom-t.top,s=uD(n,e/2,i/2),r=fD(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:r},inner:{x:t.left+s.l,y:t.top+s.t,w:e-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function Ed(n,t,e,i){const s=t===null,r=e===null,l=n&&!(s&&r)&&zy(n,i);return l&&(s||Gs(t,l.left,l.right))&&(r||Gs(e,l.top,l.bottom))}function pD(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function mD(n,t){n.rect(t.x,t.y,t.w,t.h)}function Ad(n,t,e={}){const i=n.x!==e.x?-t:0,s=n.y!==e.y?-t:0,r=(n.x+n.w!==e.x+e.w?t:0)-i,o=(n.y+n.h!==e.y+e.h?t:0)-s;return{x:n.x+i,y:n.y+s,w:n.w+r,h:n.h+o,radius:n.radius}}class gD extends nr{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:s}}=this,{inner:r,outer:o}=dD(this),l=pD(o.radius)?lc:mD;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),l(t,Ad(o,e,r)),t.clip(),l(t,Ad(r,-e,o)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),l(t,Ad(r,e)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,e,i){return Ed(this,t,e,i)}inXRange(t,e){return Ed(this,t,null,e)}inYRange(t,e){return Ed(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+s)/2:e,y:r?i:(i+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}var _D=Object.freeze({__proto__:null,ArcElement:tD,BarElement:gD,LineElement:Vu,PointElement:hD});const em=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],R2=em.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function Hy(n){return em[n%em.length]}function Vy(n){return R2[n%R2.length]}function vD(n,t){return n.borderColor=Hy(t),n.backgroundColor=Vy(t),++t}function xD(n,t){return n.backgroundColor=n.data.map(()=>Hy(t++)),t}function yD(n,t){return n.backgroundColor=n.data.map(()=>Vy(t++)),t}function bD(n){let t=0;return(e,i)=>{const s=n.getDatasetMeta(i).controller;s instanceof pg?t=xD(e,t):s instanceof Ay?t=yD(e,t):s&&(t=vD(e,t))}}function L2(n){let t;for(t in n)if(n[t].borderColor||n[t].backgroundColor)return!0;return!1}function MD(n){return n&&(n.borderColor||n.backgroundColor)}function SD(){return dn.borderColor!=="rgba(0,0,0,0.1)"||dn.backgroundColor!=="rgba(0,0,0,0.1)"}var CD={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,t,e){if(!e.enabled)return;const{data:{datasets:i},options:s}=n.config,{elements:r}=s,o=L2(i)||MD(s)||r&&L2(r)||SD();if(!e.forceOverride&&o)return;const l=bD(n);i.forEach(l)}};function wD(n,t,e,i,s){const r=s.samples||i;if(r>=e)return n.slice(t,t+e);const o=[],l=(e-2)/(r-2);let c=0;const h=t+e-1;let f=t,d,p,g,v,y;for(o[c++]=n[f],d=0;d<r-2;d++){let x=0,_=0,w;const C=Math.floor((d+1)*l)+1+t,S=Math.min(Math.floor((d+2)*l)+1,e)+t,T=S-C;for(w=C;w<S;w++)x+=n[w].x,_+=n[w].y;x/=T,_/=T;const A=Math.floor(d*l)+1+t,P=Math.min(Math.floor((d+1)*l)+1,e)+t,{x:N,y:E}=n[f];for(g=v=-1,w=A;w<P;w++)v=.5*Math.abs((N-x)*(n[w].y-E)-(N-n[w].x)*(_-E)),v>g&&(g=v,p=n[w],y=w);o[c++]=p,f=y}return o[c++]=n[h],o}function TD(n,t,e,i){let s=0,r=0,o,l,c,h,f,d,p,g,v,y;const x=[],_=t+e-1,w=n[t].x,S=n[_].x-w;for(o=t;o<t+e;++o){l=n[o],c=(l.x-w)/S*i,h=l.y;const T=c|0;if(T===f)h<v?(v=h,d=o):h>y&&(y=h,p=o),s=(r*s+l.x)/++r;else{const A=o-1;if(!Te(d)&&!Te(p)){const P=Math.min(d,p),N=Math.max(d,p);P!==g&&P!==A&&x.push({...n[P],x:s}),N!==g&&N!==A&&x.push({...n[N],x:s})}o>0&&A!==g&&x.push(n[A]),x.push(l),f=T,r=0,v=y=h,d=p=g=o}}return x}function Wy(n){if(n._decimated){const t=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function I2(n){n.data.datasets.forEach(t=>{Wy(t)})}function ED(n,t){const e=t.length;let i=0,s;const{iScale:r}=n,{min:o,max:l,minDefined:c,maxDefined:h}=r.getUserBounds();return c&&(i=In(js(t,r.axis,o).lo,0,e-1)),h?s=In(js(t,r.axis,l).hi+1,i,e)-i:s=e-i,{start:i,count:s}}var AD={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,t,e)=>{if(!e.enabled){I2(n);return}const i=n.width;n.data.datasets.forEach((s,r)=>{const{_data:o,indexAxis:l}=s,c=n.getDatasetMeta(r),h=o||s.data;if(Il([l,n.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;const f=n.scales[c.xAxisID];if(f.type!=="linear"&&f.type!=="time"||n.options.parsing)return;let{start:d,count:p}=ED(c,h);const g=e.threshold||4*i;if(p<=g){Wy(s);return}Te(o)&&(s._data=h,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(y){this._data=y}}));let v;switch(e.algorithm){case"lttb":v=wD(h,d,p,i,e);break;case"min-max":v=TD(h,d,p,i);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}s._decimated=v})},destroy(n){I2(n)}};function PD(n,t,e){const i=n.segments,s=n.points,r=t.points,o=[];for(const l of i){let{start:c,end:h}=l;h=Wu(c,h,s);const f=nm(e,s[c],s[h],l.loop);if(!t.segments){o.push({source:l,target:f,start:s[c],end:s[h]});continue}const d=Sy(t,f);for(const p of d){const g=nm(e,r[p.start],r[p.end],p.loop),v=My(l,s,g);for(const y of v)o.push({source:y,target:p,start:{[e]:D2(f,g,"start",Math.max)},end:{[e]:D2(f,g,"end",Math.min)}})}}return o}function nm(n,t,e,i){if(i)return;let s=t[n],r=e[n];return n==="angle"&&(s=Gn(s),r=Gn(r)),{property:n,start:s,end:r}}function RD(n,t){const{x:e=null,y:i=null}=n||{},s=t.points,r=[];return t.segments.forEach(({start:o,end:l})=>{l=Wu(o,l,s);const c=s[o],h=s[l];i!==null?(r.push({x:c.x,y:i}),r.push({x:h.x,y:i})):e!==null&&(r.push({x:e,y:c.y}),r.push({x:e,y:h.y}))}),r}function Wu(n,t,e){for(;t>n;t--){const i=e[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function D2(n,t,e,i){return n&&t?i(n[e],t[e]):n?n[e]:t?t[e]:0}function Gy(n,t){let e=[],i=!1;return fn(n)?(i=!0,e=n):e=RD(n,t),e.length?new Vu({points:e,options:{tension:0},_loop:i,_fullLoop:i}):null}function O2(n){return n&&n.fill!==!1}function LD(n,t,e){let s=n[t].fill;const r=[t];let o;if(!e)return s;for(;s!==!1&&r.indexOf(s)===-1;){if(!yn(s))return s;if(o=n[s],!o)return!1;if(o.visible)return s;r.push(s),s=o.fill}return!1}function ID(n,t,e){const i=kD(n);if(Re(i))return isNaN(i.value)?!1:i;let s=parseFloat(i);return yn(s)&&Math.floor(s)===s?DD(i[0],t,s,e):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function DD(n,t,e,i){return(n==="-"||n==="+")&&(e=t+e),e===t||e<0||e>=i?!1:e}function OD(n,t){let e=null;return n==="start"?e=t.bottom:n==="end"?e=t.top:Re(n)?e=t.getPixelForValue(n.value):t.getBasePixel&&(e=t.getBasePixel()),e}function ND(n,t,e){let i;return n==="start"?i=e:n==="end"?i=t.options.reverse?t.min:t.max:Re(n)?i=n.value:i=t.getBaseValue(),i}function kD(n){const t=n.options,e=t.fill;let i=fe(e&&e.target,e);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function FD(n){const{scale:t,index:e,line:i}=n,s=[],r=i.segments,o=i.points,l=UD(t,e);l.push(Gy({x:null,y:t.bottom},i));for(let c=0;c<r.length;c++){const h=r[c];for(let f=h.start;f<=h.end;f++)BD(s,o[f],l)}return new Vu({points:s,options:{}})}function UD(n,t){const e=[],i=n.getMatchingVisibleMetas("line");for(let s=0;s<i.length;s++){const r=i[s];if(r.index===t)break;r.hidden||e.unshift(r.dataset)}return e}function BD(n,t,e){const i=[];for(let s=0;s<e.length;s++){const r=e[s],{first:o,last:l,point:c}=zD(r,t,"x");if(!(!c||o&&l)){if(o)i.unshift(c);else if(n.push(c),!l)break}}n.push(...i)}function zD(n,t,e){const i=n.interpolate(t,e);if(!i)return{};const s=i[e],r=n.segments,o=n.points;let l=!1,c=!1;for(let h=0;h<r.length;h++){const f=r[h],d=o[f.start][e],p=o[f.end][e];if(Gs(s,d,p)){l=s===d,c=s===p;break}}return{first:l,last:c,point:i}}class jy{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:s,y:r,radius:o}=this;return e=e||{start:0,end:cn},t.arc(s,r,o,e.end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:s}=this,r=t.angle;return{x:e+Math.cos(r)*s,y:i+Math.sin(r)*s,angle:r}}}function HD(n){const{chart:t,fill:e,line:i}=n;if(yn(e))return VD(t,e);if(e==="stack")return FD(n);if(e==="shape")return!0;const s=WD(n);return s instanceof jy?s:Gy(s,i)}function VD(n,t){const e=n.getDatasetMeta(t);return e&&n.isDatasetVisible(t)?e.dataset:null}function WD(n){return(n.scale||{}).getPointPositionForValue?jD(n):GD(n)}function GD(n){const{scale:t={},fill:e}=n,i=OD(e,t);if(yn(i)){const s=t.isHorizontal();return{x:s?i:null,y:s?null:i}}return null}function jD(n){const{scale:t,fill:e}=n,i=t.options,s=t.getLabels().length,r=i.reverse?t.max:t.min,o=ND(e,t,r),l=[];if(i.grid.circular){const c=t.getPointPositionForValue(0,r);return new jy({x:c.x,y:c.y,radius:t.getDistanceFromCenterForValue(o)})}for(let c=0;c<s;++c)l.push(t.getPointPositionForValue(c,o));return l}function Pd(n,t,e){const i=HD(t),{chart:s,index:r,line:o,scale:l,axis:c}=t,h=o.options,f=h.fill,d=h.backgroundColor,{above:p=d,below:g=d}=f||{},v=s.getDatasetMeta(r),y=Cy(s,v);i&&o.points.length&&(Uu(n,e),XD(n,{line:o,target:i,above:p,below:g,area:e,scale:l,axis:c,clip:y}),Bu(n))}function XD(n,t){const{line:e,target:i,above:s,below:r,area:o,scale:l,clip:c}=t,h=e._loop?"angle":t.axis;n.save();let f=r;r!==s&&(h==="x"?(N2(n,i,o.top),Rd(n,{line:e,target:i,color:s,scale:l,property:h,clip:c}),n.restore(),n.save(),N2(n,i,o.bottom)):h==="y"&&(k2(n,i,o.left),Rd(n,{line:e,target:i,color:r,scale:l,property:h,clip:c}),n.restore(),n.save(),k2(n,i,o.right),f=s)),Rd(n,{line:e,target:i,color:f,scale:l,property:h,clip:c}),n.restore()}function N2(n,t,e){const{segments:i,points:s}=t;let r=!0,o=!1;n.beginPath();for(const l of i){const{start:c,end:h}=l,f=s[c],d=s[Wu(c,h,s)];r?(n.moveTo(f.x,f.y),r=!1):(n.lineTo(f.x,e),n.lineTo(f.x,f.y)),o=!!t.pathSegment(n,l,{move:o}),o?n.closePath():n.lineTo(d.x,e)}n.lineTo(t.first().x,e),n.closePath(),n.clip()}function k2(n,t,e){const{segments:i,points:s}=t;let r=!0,o=!1;n.beginPath();for(const l of i){const{start:c,end:h}=l,f=s[c],d=s[Wu(c,h,s)];r?(n.moveTo(f.x,f.y),r=!1):(n.lineTo(e,f.y),n.lineTo(f.x,f.y)),o=!!t.pathSegment(n,l,{move:o}),o?n.closePath():n.lineTo(e,d.y)}n.lineTo(e,t.first().y),n.closePath(),n.clip()}function Rd(n,t){const{line:e,target:i,property:s,color:r,scale:o,clip:l}=t,c=PD(e,i,s);for(const{source:h,target:f,start:d,end:p}of c){const{style:{backgroundColor:g=r}={}}=h,v=i!==!0;n.save(),n.fillStyle=g,ZD(n,o,l,v&&nm(s,d,p)),n.beginPath();const y=!!e.pathSegment(n,h);let x;if(v){y?n.closePath():F2(n,i,p,s);const _=!!i.pathSegment(n,f,{move:y,reverse:!0});x=y&&_,x||F2(n,i,d,s)}n.closePath(),n.fill(x?"evenodd":"nonzero"),n.restore()}}function ZD(n,t,e,i){const s=t.chart.chartArea,{property:r,start:o,end:l}=i||{};if(r==="x"||r==="y"){let c,h,f,d;r==="x"?(c=o,h=s.top,f=l,d=s.bottom):(c=s.left,h=o,f=s.right,d=l),n.beginPath(),e&&(c=Math.max(c,e.left),f=Math.min(f,e.right),h=Math.max(h,e.top),d=Math.min(d,e.bottom)),n.rect(c,h,f-c,d-h),n.clip()}}function F2(n,t,e,i){const s=t.interpolate(e,i);s&&n.lineTo(s.x,s.y)}var YD={id:"filler",afterDatasetsUpdate(n,t,e){const i=(n.data.datasets||[]).length,s=[];let r,o,l,c;for(o=0;o<i;++o)r=n.getDatasetMeta(o),l=r.dataset,c=null,l&&l.options&&l instanceof Vu&&(c={visible:n.isDatasetVisible(o),index:o,fill:ID(l,o,i),chart:n,axis:r.controller.options.indexAxis,scale:r.vScale,line:l}),r.$filler=c,s.push(c);for(o=0;o<i;++o)c=s[o],!(!c||c.fill===!1)&&(c.fill=LD(s,o,e.propagate))},beforeDraw(n,t,e){const i=e.drawTime==="beforeDraw",s=n.getSortedVisibleDatasetMetas(),r=n.chartArea;for(let o=s.length-1;o>=0;--o){const l=s[o].$filler;l&&(l.line.updateControlPoints(r,l.axis),i&&l.fill&&Pd(n.ctx,l,r))}},beforeDatasetsDraw(n,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let s=i.length-1;s>=0;--s){const r=i[s].$filler;O2(r)&&Pd(n.ctx,r,n.chartArea)}},beforeDatasetDraw(n,t,e){const i=t.meta.$filler;!O2(i)||e.drawTime!=="beforeDatasetDraw"||Pd(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const U2=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},qD=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class B2 extends nr{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=rn(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,s)=>t.sort(i,s,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,s=Tn(i.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=U2(i,r);let h,f;e.font=s.string,this.isHorizontal()?(h=this.maxWidth,f=this._fitRows(o,r,l,c)+10):(f=this.maxHeight,h=this._fitCols(o,s,l,c)+10),this.width=Math.min(h,t.maxWidth||this.maxWidth),this.height=Math.min(f,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,s){const{ctx:r,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],h=this.lineWidths=[0],f=s+l;let d=t;r.textAlign="left",r.textBaseline="middle";let p=-1,g=-f;return this.legendItems.forEach((v,y)=>{const x=i+e/2+r.measureText(v.text).width;(y===0||h[h.length-1]+x+2*l>o)&&(d+=f,h[h.length-(y>0?0:1)]=0,g+=f,p++),c[y]={left:0,top:g,row:p,width:x,height:s},h[h.length-1]+=x+l}),d}_fitCols(t,e,i,s){const{ctx:r,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],h=this.columnSizes=[],f=o-t;let d=l,p=0,g=0,v=0,y=0;return this.legendItems.forEach((x,_)=>{const{itemWidth:w,itemHeight:C}=$D(i,e,r,x,s);_>0&&g+C+2*l>f&&(d+=p+l,h.push({width:p,height:g}),v+=p+l,y++,p=g=0),c[_]={left:v,top:g,col:y,width:w,height:C},p=Math.max(p,w),g+=C+l}),d+=p,h.push({width:p,height:g}),d}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:s},rtl:r}}=this,o=va(r,this.left,this.width);if(this.isHorizontal()){let l=0,c=Wn(i,this.left+s,this.right-this.lineWidths[l]);for(const h of e)l!==h.row&&(l=h.row,c=Wn(i,this.left+s,this.right-this.lineWidths[l])),h.top+=this.top+t+s,h.left=o.leftForLtr(o.x(c),h.width),c+=h.width+s}else{let l=0,c=Wn(i,this.top+t+s,this.bottom-this.columnSizes[l].height);for(const h of e)h.col!==l&&(l=h.col,c=Wn(i,this.top+t+s,this.bottom-this.columnSizes[l].height)),h.top=c,h.left+=this.left+s,h.left=o.leftForLtr(o.x(h.left),h.width),c+=h.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Uu(t,this),this._draw(),Bu(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:s}=this,{align:r,labels:o}=t,l=dn.color,c=va(t.rtl,this.left,this.width),h=Tn(o.font),{padding:f}=o,d=h.size,p=d/2;let g;this.drawTitle(),s.textAlign=c.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=h.string;const{boxWidth:v,boxHeight:y,itemHeight:x}=U2(o,d),_=function(A,P,N){if(isNaN(v)||v<=0||isNaN(y)||y<0)return;s.save();const E=fe(N.lineWidth,1);if(s.fillStyle=fe(N.fillStyle,l),s.lineCap=fe(N.lineCap,"butt"),s.lineDashOffset=fe(N.lineDashOffset,0),s.lineJoin=fe(N.lineJoin,"miter"),s.lineWidth=E,s.strokeStyle=fe(N.strokeStyle,l),s.setLineDash(fe(N.lineDash,[])),o.usePointStyle){const R={radius:y*Math.SQRT2/2,pointStyle:N.pointStyle,rotation:N.rotation,borderWidth:E},k=c.xPlus(A,v/2),H=P+p;uy(s,R,k,H,o.pointStyleWidth&&v)}else{const R=P+Math.max((d-y)/2,0),k=c.leftForLtr(A,v),H=_o(N.borderRadius);s.beginPath(),Object.values(H).some(q=>q!==0)?lc(s,{x:k,y:R,w:v,h:y,radius:H}):s.rect(k,R,v,y),s.fill(),E!==0&&s.stroke()}s.restore()},w=function(A,P,N){wo(s,N.text,A,P+x/2,h,{strikethrough:N.hidden,textAlign:c.textAlign(N.textAlign)})},C=this.isHorizontal(),S=this._computeTitleHeight();C?g={x:Wn(r,this.left+f,this.right-i[0]),y:this.top+f+S,line:0}:g={x:this.left+f,y:Wn(r,this.top+S+f,this.bottom-e[0].height),line:0},xy(this.ctx,t.textDirection);const T=x+f;this.legendItems.forEach((A,P)=>{s.strokeStyle=A.fontColor,s.fillStyle=A.fontColor;const N=s.measureText(A.text).width,E=c.textAlign(A.textAlign||(A.textAlign=o.textAlign)),R=v+p+N;let k=g.x,H=g.y;c.setWidth(this.width),C?P>0&&k+R+f>this.right&&(H=g.y+=T,g.line++,k=g.x=Wn(r,this.left+f,this.right-i[g.line])):P>0&&H+T>this.bottom&&(k=g.x=k+e[g.line].width+f,g.line++,H=g.y=Wn(r,this.top+S+f,this.bottom-e[g.line].height));const q=c.x(k);if(_(q,H,A),k=oR(E,k+v+p,C?k+R:this.right,t.rtl),w(c.x(k),H,A),C)g.x+=R+f;else if(typeof A.text!="string"){const G=h.lineHeight;g.y+=Xy(A,G)+f}else g.y+=T}),yy(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=Tn(e.font),s=Zn(e.padding);if(!e.display)return;const r=va(t.rtl,this.left,this.width),o=this.ctx,l=e.position,c=i.size/2,h=s.top+c;let f,d=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),f=this.top+h,d=Wn(t.align,d,this.right-p);else{const v=this.columnSizes.reduce((y,x)=>Math.max(y,x.height),0);f=h+Wn(t.align,this.top,this.bottom-v-t.labels.padding-this._computeTitleHeight())}const g=Wn(l,d,d+p);o.textAlign=r.textAlign(og(l)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=i.string,wo(o,e.text,g,f,i)}_computeTitleHeight(){const t=this.options.title,e=Tn(t.font),i=Zn(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,s,r;if(Gs(t,this.left,this.right)&&Gs(e,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],Gs(t,s.left,s.left+s.width)&&Gs(e,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!QD(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,r=qD(s,i);s&&!r&&rn(e.onLeave,[t,s,this],this),this._hoveredItem=i,i&&!r&&rn(e.onHover,[t,i,this],this)}else i&&rn(e.onClick,[t,i,this],this)}}function $D(n,t,e,i,s){const r=KD(i,n,t,e),o=JD(s,i,t.lineHeight);return{itemWidth:r,itemHeight:o}}function KD(n,t,e,i){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),t+e.size/2+i.measureText(s).width}function JD(n,t,e){let i=n;return typeof t.text!="string"&&(i=Xy(t,e)),i}function Xy(n,t){const e=n.text?n.text.length:0;return t*e}function QD(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var tO={id:"legend",_element:B2,start(n,t,e){const i=n.legend=new B2({ctx:n.ctx,options:e,chart:n});jn.configure(n,i,e),jn.addBox(n,i)},stop(n){jn.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;jn.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,s=e.chart;s.isDatasetVisible(i)?(s.hide(i),t.hidden=!0):(s.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:s,color:r,useBorderRadius:o,borderRadius:l}}=n.legend.options;return n._getSortedDatasetMetas().map(c=>{const h=c.controller.getStyle(e?0:void 0),f=Zn(h.borderWidth);return{text:t[c.index].label,fillStyle:h.backgroundColor,fontColor:r,hidden:!c.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(f.width+f.height)/4,strokeStyle:h.borderColor,pointStyle:i||h.pointStyle,rotation:h.rotation,textAlign:s||h.textAlign,borderRadius:o&&(l||h.borderRadius),datasetIndex:c.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class gg extends nr{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const s=fn(i.text)?i.text.length:1;this._padding=Zn(i.padding);const r=s*Tn(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:i,bottom:s,right:r,options:o}=this,l=o.align;let c=0,h,f,d;return this.isHorizontal()?(f=Wn(l,i,r),d=e+t,h=r-i):(o.position==="left"?(f=i+t,d=Wn(l,s,e),c=He*-.5):(f=r-t,d=Wn(l,e,s),c=He*.5),h=s-e),{titleX:f,titleY:d,maxWidth:h,rotation:c}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=Tn(e.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:h}=this._drawArgs(r);wo(t,e.text,0,0,i,{color:e.color,maxWidth:c,rotation:h,textAlign:og(e.align),textBaseline:"middle",translation:[o,l]})}}function eO(n,t){const e=new gg({ctx:n.ctx,options:t,chart:n});jn.configure(n,e,t),jn.addBox(n,e),n.titleBlock=e}var nO={id:"title",_element:gg,start(n,t,e){eO(n,e)},stop(n){const t=n.titleBlock;jn.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;jn.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ph=new WeakMap;var iO={id:"subtitle",start(n,t,e){const i=new gg({ctx:n.ctx,options:e,chart:n});jn.configure(n,i,e),jn.addBox(n,i),Ph.set(n,i)},stop(n){jn.removeBox(n,Ph.get(n)),Ph.delete(n)},beforeUpdate(n,t,e){const i=Ph.get(n);jn.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ol={average(n){if(!n.length)return!1;let t,e,i=new Set,s=0,r=0;for(t=0,e=n.length;t<e;++t){const l=n[t].element;if(l&&l.hasValue()){const c=l.tooltipPosition();i.add(c.x),s+=c.y,++r}}return r===0||i.size===0?!1:{x:[...i].reduce((l,c)=>l+c)/i.size,y:s/r}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,s=Number.POSITIVE_INFINITY,r,o,l;for(r=0,o=n.length;r<o;++r){const c=n[r].element;if(c&&c.hasValue()){const h=c.getCenterPoint(),f=qp(t,h);f<s&&(s=f,l=c)}}if(l){const c=l.tooltipPosition();e=c.x,i=c.y}return{x:e,y:i}}};function ns(n,t){return t&&(fn(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function Fs(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function sO(n,t){const{element:e,datasetIndex:i,index:s}=t,r=n.getDatasetMeta(i).controller,{label:o,value:l}=r.getLabelAndValue(s);return{chart:n,label:o,parsed:r.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:l,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:e}}function z2(n,t){const e=n.chart.ctx,{body:i,footer:s,title:r}=n,{boxWidth:o,boxHeight:l}=t,c=Tn(t.bodyFont),h=Tn(t.titleFont),f=Tn(t.footerFont),d=r.length,p=s.length,g=i.length,v=Zn(t.padding);let y=v.height,x=0,_=i.reduce((S,T)=>S+T.before.length+T.lines.length+T.after.length,0);if(_+=n.beforeBody.length+n.afterBody.length,d&&(y+=d*h.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),_){const S=t.displayColors?Math.max(l,c.lineHeight):c.lineHeight;y+=g*S+(_-g)*c.lineHeight+(_-1)*t.bodySpacing}p&&(y+=t.footerMarginTop+p*f.lineHeight+(p-1)*t.footerSpacing);let w=0;const C=function(S){x=Math.max(x,e.measureText(S).width+w)};return e.save(),e.font=h.string,Ye(n.title,C),e.font=c.string,Ye(n.beforeBody.concat(n.afterBody),C),w=t.displayColors?o+2+t.boxPadding:0,Ye(i,S=>{Ye(S.before,C),Ye(S.lines,C),Ye(S.after,C)}),w=0,e.font=f.string,Ye(n.footer,C),e.restore(),x+=v.width,{width:x,height:y}}function rO(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function oO(n,t,e,i){const{x:s,width:r}=i,o=e.caretSize+e.caretPadding;if(n==="left"&&s+r+o>t.width||n==="right"&&s-r-o<0)return!0}function aO(n,t,e,i){const{x:s,width:r}=e,{width:o,chartArea:{left:l,right:c}}=n;let h="center";return i==="center"?h=s<=(l+c)/2?"left":"right":s<=r/2?h="left":s>=o-r/2&&(h="right"),oO(h,n,t,e)&&(h="center"),h}function H2(n,t,e){const i=e.yAlign||t.yAlign||rO(n,e);return{xAlign:e.xAlign||t.xAlign||aO(n,t,e,i),yAlign:i}}function lO(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function cO(n,t,e){let{y:i,height:s}=n;return t==="top"?i+=e:t==="bottom"?i-=s+e:i-=s/2,i}function V2(n,t,e,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=n,{xAlign:l,yAlign:c}=e,h=s+r,{topLeft:f,topRight:d,bottomLeft:p,bottomRight:g}=_o(o);let v=lO(t,l);const y=cO(t,c,h);return c==="center"?l==="left"?v+=h:l==="right"&&(v-=h):l==="left"?v-=Math.max(f,p)+s:l==="right"&&(v+=Math.max(d,g)+s),{x:In(v,0,i.width-t.width),y:In(y,0,i.height-t.height)}}function Rh(n,t,e){const i=Zn(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function W2(n){return ns([],Fs(n))}function hO(n,t,e){return Fr(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function G2(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const Zy={beforeTitle:Ds,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:Ds,beforeBody:Ds,beforeLabel:Ds,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return Te(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Ds,afterBody:Ds,beforeFooter:Ds,footer:Ds,afterFooter:Ds};function li(n,t,e,i){const s=n[t].call(e,i);return typeof s>"u"?Zy[t].call(e,i):s}class j2 extends nr{static positioners=Ol;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&e.options.animation&&i.animations,r=new wy(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=hO(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,s=li(i,"beforeTitle",this,t),r=li(i,"title",this,t),o=li(i,"afterTitle",this,t);let l=[];return l=ns(l,Fs(s)),l=ns(l,Fs(r)),l=ns(l,Fs(o)),l}getBeforeBody(t,e){return W2(li(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,s=[];return Ye(t,r=>{const o={before:[],lines:[],after:[]},l=G2(i,r);ns(o.before,Fs(li(l,"beforeLabel",this,r))),ns(o.lines,li(l,"label",this,r)),ns(o.after,Fs(li(l,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(t,e){return W2(li(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,s=li(i,"beforeFooter",this,t),r=li(i,"footer",this,t),o=li(i,"afterFooter",this,t);let l=[];return l=ns(l,Fs(s)),l=ns(l,Fs(r)),l=ns(l,Fs(o)),l}_createItems(t){const e=this._active,i=this.chart.data,s=[],r=[],o=[];let l=[],c,h;for(c=0,h=e.length;c<h;++c)l.push(sO(this.chart,e[c]));return t.filter&&(l=l.filter((f,d,p)=>t.filter(f,d,p,i))),t.itemSort&&(l=l.sort((f,d)=>t.itemSort(f,d,i))),Ye(l,f=>{const d=G2(t.callbacks,f);s.push(li(d,"labelColor",this,f)),r.push(li(d,"labelPointStyle",this,f)),o.push(li(d,"labelTextColor",this,f))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=l,l}update(t,e){const i=this.options.setContext(this.getContext()),s=this._active;let r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const l=Ol[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const c=this._size=z2(this,i),h=Object.assign({},l,c),f=H2(this.chart,i,h),d=V2(i,h,f,this.chart);this.xAlign=f.xAlign,this.yAlign=f.yAlign,r={opacity:1,x:d.x,y:d.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,s){const r=this.getCaretPosition(t,i,s);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,i){const{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:l}=i,{topLeft:c,topRight:h,bottomLeft:f,bottomRight:d}=_o(l),{x:p,y:g}=t,{width:v,height:y}=e;let x,_,w,C,S,T;return r==="center"?(S=g+y/2,s==="left"?(x=p,_=x-o,C=S+o,T=S-o):(x=p+v,_=x+o,C=S-o,T=S+o),w=x):(s==="left"?_=p+Math.max(c,f)+o:s==="right"?_=p+v-Math.max(h,d)-o:_=this.caretX,r==="top"?(C=g,S=C-o,x=_-o,w=_+o):(C=g+y,S=C+o,x=_+o,w=_-o),T=C),{x1:x,x2:_,x3:w,y1:C,y2:S,y3:T}}drawTitle(t,e,i){const s=this.title,r=s.length;let o,l,c;if(r){const h=va(i.rtl,this.x,this.width);for(t.x=Rh(this,i.titleAlign,i),e.textAlign=h.textAlign(i.titleAlign),e.textBaseline="middle",o=Tn(i.titleFont),l=i.titleSpacing,e.fillStyle=i.titleColor,e.font=o.string,c=0;c<r;++c)e.fillText(s[c],h.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+l,c+1===r&&(t.y+=i.titleMarginBottom-l)}}_drawColorBox(t,e,i,s,r){const o=this.labelColors[i],l=this.labelPointStyles[i],{boxHeight:c,boxWidth:h}=r,f=Tn(r.bodyFont),d=Rh(this,"left",r),p=s.x(d),g=c<f.lineHeight?(f.lineHeight-c)/2:0,v=e.y+g;if(r.usePointStyle){const y={radius:Math.min(h,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},x=s.leftForLtr(p,h)+h/2,_=v+c/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,Kp(t,y,x,_),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Kp(t,y,x,_)}else{t.lineWidth=Re(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const y=s.leftForLtr(p,h),x=s.leftForLtr(s.xPlus(p,1),h-2),_=_o(o.borderRadius);Object.values(_).some(w=>w!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,lc(t,{x:y,y:v,w:h,h:c,radius:_}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),lc(t,{x,y:v+1,w:h-2,h:c-2,radius:_}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(y,v,h,c),t.strokeRect(y,v,h,c),t.fillStyle=o.backgroundColor,t.fillRect(x,v+1,h-2,c-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:h,boxPadding:f}=i,d=Tn(i.bodyFont);let p=d.lineHeight,g=0;const v=va(i.rtl,this.x,this.width),y=function(N){e.fillText(N,v.x(t.x+g),t.y+p/2),t.y+=p+r},x=v.textAlign(o);let _,w,C,S,T,A,P;for(e.textAlign=o,e.textBaseline="middle",e.font=d.string,t.x=Rh(this,x,i),e.fillStyle=i.bodyColor,Ye(this.beforeBody,y),g=l&&x!=="right"?o==="center"?h/2+f:h+2+f:0,S=0,A=s.length;S<A;++S){for(_=s[S],w=this.labelTextColors[S],e.fillStyle=w,Ye(_.before,y),C=_.lines,l&&C.length&&(this._drawColorBox(e,t,S,v,i),p=Math.max(d.lineHeight,c)),T=0,P=C.length;T<P;++T)y(C[T]),p=d.lineHeight;Ye(_.after,y)}g=0,p=d.lineHeight,Ye(this.afterBody,y),t.y-=r}drawFooter(t,e,i){const s=this.footer,r=s.length;let o,l;if(r){const c=va(i.rtl,this.x,this.width);for(t.x=Rh(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=c.textAlign(i.footerAlign),e.textBaseline="middle",o=Tn(i.footerFont),e.fillStyle=i.footerColor,e.font=o.string,l=0;l<r;++l)e.fillText(s[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+i.footerSpacing}}drawBackground(t,e,i,s){const{xAlign:r,yAlign:o}=this,{x:l,y:c}=t,{width:h,height:f}=i,{topLeft:d,topRight:p,bottomLeft:g,bottomRight:v}=_o(s.cornerRadius);e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.beginPath(),e.moveTo(l+d,c),o==="top"&&this.drawCaret(t,e,i,s),e.lineTo(l+h-p,c),e.quadraticCurveTo(l+h,c,l+h,c+p),o==="center"&&r==="right"&&this.drawCaret(t,e,i,s),e.lineTo(l+h,c+f-v),e.quadraticCurveTo(l+h,c+f,l+h-v,c+f),o==="bottom"&&this.drawCaret(t,e,i,s),e.lineTo(l+g,c+f),e.quadraticCurveTo(l,c+f,l,c+f-g),o==="center"&&r==="left"&&this.drawCaret(t,e,i,s),e.lineTo(l,c+d),e.quadraticCurveTo(l,c,l+d,c),e.closePath(),e.fill(),s.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const o=Ol[t.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=z2(this,t),c=Object.assign({},o,this._size),h=H2(e,t,c),f=V2(t,c,h,e);(s._to!==f.x||r._to!==f.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,f))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=Zn(e.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&l&&(t.save(),t.globalAlpha=i,this.drawBackground(r,t,s,e),xy(t,e.textDirection),r.y+=o.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),yy(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,s=t.map(({datasetIndex:l,index:c})=>{const h=this.chart.getDatasetMeta(l);if(!h)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:h.data[c],index:c}}),r=!au(i,s),o=this._positionChanged(s,e);(r||o)&&(this._active=s,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],o=this._getActiveElements(t,r,e,i),l=this._positionChanged(o,t),c=e||!au(o,r)||l;return c&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),c}_getActiveElements(t,e,i,s){const r=this.options;if(t.type==="mouseout")return[];if(!s)return e.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:i,caretY:s,options:r}=this,o=Ol[r.position].call(this,t,e);return o!==!1&&(i!==o.x||s!==o.y)}}var uO={id:"tooltip",_element:j2,positioners:Ol,afterInit(n,t,e){e&&(n.tooltip=new j2({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Zy},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},fO=Object.freeze({__proto__:null,Colors:CD,Decimation:AD,Filler:YD,Legend:tO,SubTitle:iO,Title:nO,Tooltip:uO});const dO=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function pO(n,t,e,i){const s=n.indexOf(t);if(s===-1)return dO(n,t,e,i);const r=n.lastIndexOf(t);return s!==r?e:s}const mO=(n,t)=>n===null?null:In(Math.round(n),0,t);function X2(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class gO extends Lo{static id="category";static defaults={ticks:{callback:X2}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:s,label:r}of e)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Te(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:pO(i,t,fe(e,t),this._addedLabels),mO(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=t===0&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=t;o<=e;o++)s.push({value:o});return s}getLabelForValue(t){return X2.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function _O(n,t){const e=[],{bounds:s,step:r,min:o,max:l,precision:c,count:h,maxTicks:f,maxDigits:d,includeBounds:p}=n,g=r||1,v=f-1,{min:y,max:x}=t,_=!Te(o),w=!Te(l),C=!Te(h),S=(x-y)/(d+1);let T=z0((x-y)/v/g)*g,A,P,N,E;if(T<1e-14&&!_&&!w)return[{value:y},{value:x}];E=Math.ceil(x/T)-Math.floor(y/T),E>v&&(T=z0(E*T/v/g)*g),Te(c)||(A=Math.pow(10,c),T=Math.ceil(T*A)/A),s==="ticks"?(P=Math.floor(y/T)*T,N=Math.ceil(x/T)*T):(P=y,N=x),_&&w&&r&&QP((l-o)/r,T/1e3)?(E=Math.round(Math.min((l-o)/T,f)),T=(l-o)/E,P=o,N=l):C?(P=_?o:P,N=w?l:N,E=h-1,T=(N-P)/E):(E=(N-P)/T,Wl(E,Math.round(E),T/1e3)?E=Math.round(E):E=Math.ceil(E));const R=Math.max(H0(T),H0(P));A=Math.pow(10,Te(c)?R:c),P=Math.round(P*A)/A,N=Math.round(N*A)/A;let k=0;for(_&&(p&&P!==o?(e.push({value:o}),P<o&&k++,Wl(Math.round((P+k*T)*A)/A,o,Z2(o,S,n))&&k++):P<o&&k++);k<E;++k){const H=Math.round((P+k*T)*A)/A;if(w&&H>l)break;e.push({value:H})}return w&&p&&N!==l?e.length&&Wl(e[e.length-1].value,l,Z2(l,S,n))?e[e.length-1].value=l:e.push({value:l}):(!w||N===l)&&e.push({value:N}),e}function Z2(n,t,{horizontal:e,minRotation:i}){const s=Xi(i),r=(e?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+n).length;return Math.min(t/r,o)}class pu extends Lo{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Te(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const o=c=>s=e?s:c,l=c=>r=i?r:c;if(t){const c=fs(s),h=fs(r);c<0&&h<0?l(0):c>0&&h>0&&o(0)}if(s===r){let c=r===0?1:Math.abs(r*.05);l(r+c),t||o(s-c)}this.min=s,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),e=e||11),e&&(s=Math.min(e,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},r=this._range||this,o=_O(s,r);return t.bounds==="ticks"&&ny(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const s=(i-e)/Math.max(t.length-1,1)/2;e-=s,i+=s}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return Mc(t,this.chart.options.locale,this.options.ticks.format)}}class vO extends pu{static id="linear";static defaults={ticks:{callback:Fu.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=yn(t)?t:0,this.max=yn(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=Xi(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const hc=n=>Math.floor(br(n)),to=(n,t)=>Math.pow(10,hc(n)+t);function Y2(n){return n/Math.pow(10,hc(n))===1}function q2(n,t,e){const i=Math.pow(10,e),s=Math.floor(n/i);return Math.ceil(t/i)-s}function xO(n,t){const e=t-n;let i=hc(e);for(;q2(n,t,i)>10;)i++;for(;q2(n,t,i)<10;)i--;return Math.min(i,hc(n))}function yO(n,{min:t,max:e}){t=vi(n.min,t);const i=[],s=hc(t);let r=xO(t,e),o=r<0?Math.pow(10,Math.abs(r)):1;const l=Math.pow(10,r),c=s>r?Math.pow(10,s):0,h=Math.round((t-c)*o)/o,f=Math.floor((t-c)/l/10)*l*10;let d=Math.floor((h-f)/Math.pow(10,r)),p=vi(n.min,Math.round((c+f+d*Math.pow(10,r))*o)/o);for(;p<e;)i.push({value:p,major:Y2(p),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(r++,d=2,o=r>=0?1:o),p=Math.round((c+f+d*Math.pow(10,r))*o)/o;const g=vi(n.max,p);return i.push({value:g,major:Y2(g),significand:d}),i}class bO extends Lo{static id="logarithmic";static defaults={ticks:{callback:Fu.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=pu.prototype.parse.apply(this,[t,e]);if(i===0){this._zero=!0;return}return yn(i)&&i>0?i:null}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=yn(t)?Math.max(0,t):null,this.max=yn(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!yn(this._userMin)&&(this.min=t===to(this.min,0)?to(this.min,-1):to(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,s=this.max;const r=l=>i=t?i:l,o=l=>s=e?s:l;i===s&&(i<=0?(r(1),o(10)):(r(to(i,-1)),o(to(s,1)))),i<=0&&r(to(s,-1)),s<=0&&o(to(i,1)),this.min=i,this.max=s}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},i=yO(e,this);return t.bounds==="ticks"&&ny(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":Mc(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=br(t),this._valueRange=br(this.max)-br(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(br(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function im(n){const t=n.ticks;if(t.display&&n.display){const e=Zn(t.backdropPadding);return fe(t.font&&t.font.size,dn.font.size)+e.height}return 0}function MO(n,t,e){return e=fn(e)?e:[e],{w:gR(n,t.string,e),h:e.length*t.lineHeight}}function $2(n,t,e,i,s){return n===i||n===s?{start:t-e/2,end:t+e/2}:n<i||n>s?{start:t-e,end:t}:{start:t,end:t+e}}function SO(n){const t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),i=[],s=[],r=n._pointLabels.length,o=n.options.pointLabels,l=o.centerPointLabels?He/r:0;for(let c=0;c<r;c++){const h=o.setContext(n.getPointLabelContext(c));s[c]=h.padding;const f=n.getPointPosition(c,n.drawingArea+s[c],l),d=Tn(h.font),p=MO(n.ctx,d,n._pointLabels[c]);i[c]=p;const g=Gn(n.getIndexAngle(c)+l),v=Math.round(sg(g)),y=$2(v,f.x,p.w,0,180),x=$2(v,f.y,p.h,90,270);CO(e,t,g,y,x)}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=EO(n,i,s)}function CO(n,t,e,i,s){const r=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e));let l=0,c=0;i.start<t.l?(l=(t.l-i.start)/r,n.l=Math.min(n.l,t.l-l)):i.end>t.r&&(l=(i.end-t.r)/r,n.r=Math.max(n.r,t.r+l)),s.start<t.t?(c=(t.t-s.start)/o,n.t=Math.min(n.t,t.t-c)):s.end>t.b&&(c=(s.end-t.b)/o,n.b=Math.max(n.b,t.b+c))}function wO(n,t,e){const i=n.drawingArea,{extra:s,additionalAngle:r,padding:o,size:l}=e,c=n.getPointPosition(t,i+s+o,r),h=Math.round(sg(Gn(c.angle+bn))),f=RO(c.y,l.h,h),d=AO(h),p=PO(c.x,l.w,d);return{visible:!0,x:c.x,y:f,textAlign:d,left:p,top:f,right:p+l.w,bottom:f+l.h}}function TO(n,t){if(!t)return!0;const{left:e,top:i,right:s,bottom:r}=n;return!(Xs({x:e,y:i},t)||Xs({x:e,y:r},t)||Xs({x:s,y:i},t)||Xs({x:s,y:r},t))}function EO(n,t,e){const i=[],s=n._pointLabels.length,r=n.options,{centerPointLabels:o,display:l}=r.pointLabels,c={extra:im(r)/2,additionalAngle:o?He/s:0};let h;for(let f=0;f<s;f++){c.padding=e[f],c.size=t[f];const d=wO(n,f,c);i.push(d),l==="auto"&&(d.visible=TO(d,h),d.visible&&(h=d))}return i}function AO(n){return n===0||n===180?"center":n<180?"left":"right"}function PO(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function RO(n,t,e){return e===90||e===270?n-=t/2:(e>270||e<90)&&(n-=t),n}function LO(n,t,e){const{left:i,top:s,right:r,bottom:o}=e,{backdropColor:l}=t;if(!Te(l)){const c=_o(t.borderRadius),h=Zn(t.backdropPadding);n.fillStyle=l;const f=i-h.left,d=s-h.top,p=r-i+h.width,g=o-s+h.height;Object.values(c).some(v=>v!==0)?(n.beginPath(),lc(n,{x:f,y:d,w:p,h:g,radius:c}),n.fill()):n.fillRect(f,d,p,g)}}function IO(n,t){const{ctx:e,options:{pointLabels:i}}=n;for(let s=t-1;s>=0;s--){const r=n._pointLabelItems[s];if(!r.visible)continue;const o=i.setContext(n.getPointLabelContext(s));LO(e,o,r);const l=Tn(o.font),{x:c,y:h,textAlign:f}=r;wo(e,n._pointLabels[s],c,h+l.lineHeight/2,l,{color:o.color,textAlign:f,textBaseline:"middle"})}}function Yy(n,t,e,i){const{ctx:s}=n;if(e)s.arc(n.xCenter,n.yCenter,t,0,cn);else{let r=n.getPointPosition(0,t);s.moveTo(r.x,r.y);for(let o=1;o<i;o++)r=n.getPointPosition(o,t),s.lineTo(r.x,r.y)}}function DO(n,t,e,i,s){const r=n.ctx,o=t.circular,{color:l,lineWidth:c}=t;!o&&!i||!l||!c||e<0||(r.save(),r.strokeStyle=l,r.lineWidth=c,r.setLineDash(s.dash||[]),r.lineDashOffset=s.dashOffset,r.beginPath(),Yy(n,e,o,i),r.closePath(),r.stroke(),r.restore())}function OO(n,t,e){return Fr(n,{label:e,index:t,type:"pointLabel"})}class NO extends pu{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Fu.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Zn(im(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=yn(t)&&!isNaN(t)?t:0,this.max=yn(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/im(this.options))}generateTickLabels(t){pu.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{const s=rn(this.options.pointLabels.callback,[e,i],this);return s||s===0?s:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?SO(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,s){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,s))}getIndexAngle(t){const e=cn/(this._pointLabels.length||1),i=this.options.startAngle||0;return Gn(t*e+Xi(i))}getDistanceFromCenterForValue(t){if(Te(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Te(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return OO(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const s=this.getIndexAngle(t)-bn+i;return{x:Math.cos(s)*e+this.xCenter,y:Math.sin(s)*e+this.yCenter,angle:s}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:s,bottom:r}=this._pointLabelItems[t];return{left:e,top:i,right:s,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),Yy(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:s,border:r}=e,o=this._pointLabels.length;let l,c,h;if(e.pointLabels.display&&IO(this,o),s.display&&this.ticks.forEach((f,d)=>{if(d!==0||d===0&&this.min<0){c=this.getDistanceFromCenterForValue(f.value);const p=this.getContext(d),g=s.setContext(p),v=r.setContext(p);DO(this,g,c,o,v)}}),i.display){for(t.save(),l=o-1;l>=0;l--){const f=i.setContext(this.getPointLabelContext(l)),{color:d,lineWidth:p}=f;!p||!d||(t.lineWidth=p,t.strokeStyle=d,t.setLineDash(f.borderDash),t.lineDashOffset=f.borderDashOffset,c=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),h=this.getPointPosition(l,c),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(h.x,h.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(s),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((l,c)=>{if(c===0&&this.min>=0&&!e.reverse)return;const h=i.setContext(this.getContext(c)),f=Tn(h.font);if(r=this.getDistanceFromCenterForValue(this.ticks[c].value),h.showLabelBackdrop){t.font=f.string,o=t.measureText(l.label).width,t.fillStyle=h.backdropColor;const d=Zn(h.backdropPadding);t.fillRect(-o/2-d.left,-r-f.size/2-d.top,o+d.width,f.size+d.height)}wo(t,l.label,0,-r,f,{color:h.color,strokeColor:h.textStrokeColor,strokeWidth:h.textStrokeWidth})}),t.restore()}drawTitle(){}}const Gu={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ci=Object.keys(Gu);function K2(n,t){return n-t}function J2(n,t){if(Te(t))return null;const e=n._adapter,{parser:i,round:s,isoWeekday:r}=n._parseOpts;let o=t;return typeof i=="function"&&(o=i(o)),yn(o)||(o=typeof i=="string"?e.parse(o,i):e.parse(o)),o===null?null:(s&&(o=s==="week"&&(Na(r)||r===!0)?e.startOf(o,"isoWeek",r):e.startOf(o,s)),+o)}function Q2(n,t,e,i){const s=ci.length;for(let r=ci.indexOf(n);r<s-1;++r){const o=Gu[ci[r]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(l*o.size))<=i)return ci[r]}return ci[s-1]}function kO(n,t,e,i,s){for(let r=ci.length-1;r>=ci.indexOf(e);r--){const o=ci[r];if(Gu[o].common&&n._adapter.diff(s,i,o)>=t-1)return o}return ci[e?ci.indexOf(e):0]}function FO(n){for(let t=ci.indexOf(n)+1,e=ci.length;t<e;++t)if(Gu[ci[t]].common)return ci[t]}function tv(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:s}=rg(e,t),r=e[i]>=t?e[i]:e[s];n[r]=!0}}function UO(n,t,e,i){const s=n._adapter,r=+s.startOf(t[0].value,i),o=t[t.length-1].value;let l,c;for(l=r;l<=o;l=+s.add(l,1,i))c=e[l],c>=0&&(t[c].major=!0);return t}function ev(n,t,e){const i=[],s={},r=t.length;let o,l;for(o=0;o<r;++o)l=t[o],s[l]=o,i.push({value:l,major:!1});return r===0||!e?i:UO(n,i,s,e)}class sm extends Lo{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),s=this._adapter=new BL._date(t.adapters.date);s.init(e),Vl(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:J2(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:l}=this.getUserBounds();function c(h){!o&&!isNaN(h.min)&&(s=Math.min(s,h.min)),!l&&!isNaN(h.max)&&(r=Math.max(r,h.max))}(!o||!l)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),s=yn(s)&&!isNaN(s)?s:+e.startOf(Date.now(),i),r=yn(r)&&!isNaN(r)?r:+e.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,o=this.max,l=iR(s,r,o);return this._unit=e.unit||(i.autoSkip?Q2(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):kO(this,l.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:FO(this._unit),this.initOffsets(s),t.reverse&&l.reverse(),ev(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,s,r;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?e=1-s:e=(this.getDecimalForValue(t[1])-s)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?i=r:i=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;e=In(e,0,o),i=In(i,0,o),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,s=this.options,r=s.time,o=r.unit||Q2(r.minUnit,e,i,this._getLabelCapacity(e)),l=fe(s.ticks.stepSize,1),c=o==="week"?r.isoWeekday:!1,h=Na(c)||c===!0,f={};let d=e,p,g;if(h&&(d=+t.startOf(d,"isoWeek",c)),d=+t.startOf(d,h?"day":o),t.diff(i,e,o)>1e5*l)throw new Error(e+" and "+i+" are too far apart with stepSize of "+l+" "+o);const v=s.ticks.source==="data"&&this.getDataTimestamps();for(p=d,g=0;p<i;p=+t.add(p,l,o),g++)tv(f,p,v);return(p===i||s.bounds==="ticks"||g===1)&&tv(f,p,v),Object.keys(f).sort(K2).map(y=>+y)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const s=this.options.time.displayFormats,r=this._unit,o=e||s[r];return this._adapter.format(t,o)}_tickFormatFunction(t,e,i,s){const r=this.options,o=r.ticks.callback;if(o)return rn(o,[t,e,i],this);const l=r.time.displayFormats,c=this._unit,h=this._majorUnit,f=c&&l[c],d=h&&l[h],p=i[e],g=h&&d&&p&&p.major;return this._adapter.format(t,s||(g?d:f))}generateTickLabels(t){let e,i,s;for(e=0,i=t.length;e<i;++e)s=t[e],s.label=this._tickFormatFunction(s.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,s=Xi(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(s),o=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:i*r+l*o,h:i*o+l*r}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,s=i[e.unit]||i.millisecond,r=this._tickFormatFunction(t,0,ev(this,[t],this._majorUnit),s),o=this._getLabelSize(r),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(e=0,i=s.length;e<i;++e)t=t.concat(s[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const s=this.getLabels();for(e=0,i=s.length;e<i;++e)t.push(J2(this,s[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return ry(t.sort(K2))}}function Lh(n,t,e){let i=0,s=n.length-1,r,o,l,c;e?(t>=n[i].pos&&t<=n[s].pos&&({lo:i,hi:s}=js(n,"pos",t)),{pos:r,time:l}=n[i],{pos:o,time:c}=n[s]):(t>=n[i].time&&t<=n[s].time&&({lo:i,hi:s}=js(n,"time",t)),{time:r,pos:l}=n[i],{time:o,pos:c}=n[s]);const h=o-r;return h?l+(c-l)*(t-r)/h:l}class BO extends sm{static id="timeseries";static defaults=sm.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Lh(e,this.min),this._tableRange=Lh(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,s=[],r=[];let o,l,c,h,f;for(o=0,l=t.length;o<l;++o)h=t[o],h>=e&&h<=i&&s.push(h);if(s.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(o=0,l=s.length;o<l;++o)f=s[o+1],c=s[o-1],h=s[o],Math.round((f+c)/2)!==h&&r.push({time:h,pos:o/(l-1)});return r}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((s,r)=>s-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Lh(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return Lh(this._table,i*this._tableRange+this._minPos,!0)}}var zO=Object.freeze({__proto__:null,CategoryScale:gO,LinearScale:vO,LogarithmicScale:bO,RadialLinearScale:NO,TimeScale:sm,TimeSeriesScale:BO});const HO=[UL,_D,fO,zO];on.register(...HO);var VO=ce('<div class="max-w-4xl mx-auto bg-card rounded-xl shadow-md p-6"><canvas class="w-full h-80 md:h-96"></canvas></div>');function WO(n,t){tn(t,!1);let e=mt(t,"chart",8),i=xe(),s;zn(()=>{s=new on(U(i),e())}),s3(()=>{s?.destroy()}),vn();var r=VO(),o=ut(r);Po(o,l=>Ft(i,l),()=>U(i)),Rt(n,r),en()}var GO=ce('<div class="bg-onbg/25 rounded-t"></div>'),jO=ce('<div class="w-6 h-2 bg-onbg/25 rounded animate-bounce"></div>'),XO=ce('<div class="w-full max-w-lg bg-card rounded-lg shadow p-4 animate-pulse"><div class="h-6 bg-onbg/25 rounded mb-4"></div> <div class="flex justify-between items-end h-64 gap-2"></div> <div class="mt-4 flex justify-between text-xs text-onsec"></div></div>'),ZO=ce('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>'),YO=ce('<div class="w-full md:flex-1 md:min-w-[800px] max-w-lg"><!></div>'),qO=ce('<div class="flex flex-wrap gap-8 justify-center"></div>');function Sc(n,t){tn(t,!1);let e=mt(t,"apartments",24,()=>[]),i=mt(t,"getChartsFn",8,()=>[]);mt(t,"title",8,"Statistics");let s=xe([]);wr(()=>(zt(e()),zt(i())),()=>{Ft(s,e().length>0?i()(e()):[])}),dc(),vn();var r=Bn(),o=xn(r);{var l=h=>{var f=ZO();Qn(f,4,()=>Array(9),hi,(d,p)=>{var g=XO(),v=St(ut(g),2);Qn(v,4,()=>Array(8),hi,(x,_,w,C)=>{var S=GO();Yi(S,`width: calc(100%/8 - 0.25rem); height: ${ft(()=>Math.floor(Math.random()*120+40))??""}px;`),Rt(x,S)});var y=St(v,2);Qn(y,4,()=>Array(4),hi,(x,_,w,C)=>{var S=jO();Yi(S,`animation-delay: ${w*.1}s`),Rt(x,S)}),Rt(d,g)}),Rt(h,f)},c=h=>{var f=qO();Qn(f,5,()=>U(s),d=>d.options?.plugins?.title?.text,(d,p)=>{var g=YO(),v=ut(g);WO(v,{get chart(){return U(p)}}),Rt(d,g)}),Rt(h,f)};gn(o,h=>{zt(e()),ft(()=>e().length===0)?h(l):h(c,!1)})}Rt(n,r),en()}var xa=(n=>(n.Light="light",n.Dark="dark",n.Blue="blue",n))(xa||{});const Ih=(n,t=1)=>{n=n.replace("#",""),n.length===3&&(n=n.split("").map(r=>r+r).join(""));const e=parseInt(n.substring(0,2),16),i=parseInt(n.substring(2,4),16),s=parseInt(n.substring(4,6),16);return`rgba(${e}, ${i}, ${s}, ${t})`},wl=n=>getComputedStyle(document.documentElement).getPropertyValue(n).trim()||"#000",un={pri:(n=1)=>Ih(wl("--pri"),n),sec:(n=1)=>Ih(wl("--sec"),n),onbg:(n=1)=>Ih(wl("--onbg"),n),oncard:(n=1)=>Ih(wl("--oncard"),n),fontTitle:()=>wl("--font-title")};function $O(){Object.values(on.instances).forEach(n=>{n.update()})}function nv(n){on.defaults.font.family="Arial, sans-serif",on.defaults.font.size=14,on.defaults.color="onbg",on.defaults.plugins.legend.labels.color=un.onbg(),on.defaults.plugins.legend.labels.font={family:"Arial, sans-serif",size:14},on.defaults.plugins.title={...on.defaults.plugins.title,color:un.oncard(),align:"start",font:{...on.defaults.plugins.title?.font,size:18,weight:"bold",family:un.fontTitle()}},on.defaults.scales.category={...on.defaults.scales.category,title:{...on.defaults.scales.category.title,display:!0,color:un.oncard()},grid:{color:un.oncard(.25)},ticks:{...on.defaults.scales.category.ticks,color:un.oncard()}},on.defaults.scales.linear={...on.defaults.scales.linear,grid:{color:un.oncard(.25)},title:{...on.defaults.scales.linear.title,color:un.oncard()},ticks:{...on.defaults.scales.linear.ticks,color:un.oncard()}},on.defaults.elements.bar.backgroundColor="#ff0000",on.defaults.elements.bar.borderColor="rgba(0,0,0,0)",on.defaults.elements.bar.borderWidth=1,on.defaults.elements.bar.borderRadius=4,on.defaults.elements.bar.borderSkipped=!1}function KO(n){const t={type:"bar",data:{labels:n.map(i=>i.address),datasets:[{label:"Rent",data:n.map(i=>i.rent_krPerMonth),backgroundColor:un.pri()}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Rent per Listing"}},scales:{x:{type:"category",min:5},y:{beginAtZero:!0}}}},e={type:"scatter",data:{datasets:[{label:"Size vs Rent",data:n.map(i=>({x:i.size_sqrM,y:i.rent_krPerMonth})),backgroundColor:un.pri()}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Size vs Rent"}},scales:{x:{type:"linear",title:{display:!0,text:"Size (mÂ²)"}},y:{type:"linear",title:{display:!0,text:"Rent (kr/mÃ¥n)"}}}}};return[t,e]}var JO=ce('<div class="p-6 md:p-10 rounded-lg"><h1 class="text-3xl font-bold mb-8 text-oncard">Rent</h1> <!></div>');function QO(n,t){tn(t,!1);let e=xe([]);zn(async()=>{const r=await fetch("/ChaboStats/api/listings");Ft(e,await r.json())}),vn();var i=JO(),s=St(ut(i),2);Sc(s,{get apartments(){return U(e)},get getChartsFn(){return KO},title:"Rent Statistics"}),Rt(n,i),en()}function tN(n){const t={type:"bar",data:{labels:(()=>{const i=n.map(s=>Ld(s.published));return Array.from(new Set(i)).sort()})(),datasets:[{label:"Apartments Released per Week",data:(()=>{const i={};for(const r of n){const o=Ld(r.published);i[o]=(i[o]||0)+1}return Array.from(new Set(n.map(r=>Ld(r.published)))).sort().map(r=>i[r])})(),backgroundColor:un.pri()}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Apartments Released per Week"}},scales:{x:{type:"category",title:{display:!0,text:"Week"}},y:{beginAtZero:!0,title:{display:!0,text:"Count"}}}}},e={type:"bar",data:(()=>{const i=n.map(l=>{const c=new Date(l.published),h=new Date(l.move_in);return Math.round((h.getTime()-c.getTime())/864e5)}),s={};for(const l of i)s[l]=(s[l]||0)+1;const r=Object.keys(s).map(Number).sort((l,c)=>l-c),o=r.map(l=>s[l]);return{labels:r.map(l=>`${l} days`),datasets:[{label:"Number of Apartments",data:o,backgroundColor:un.pri()}]}})(),options:{responsive:!0,plugins:{title:{display:!0,text:"Published vs Move-in Lead Time"}},scales:{x:{title:{display:!0,text:"Lead Time (days)"}},y:{beginAtZero:!0,title:{display:!0,text:"Count"}}}}};return[t,e]}function Ld(n){const t=new Date(n),e=t.getUTCFullYear(),i=new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())),s=i.getUTCDay()||7;i.setUTCDate(i.getUTCDate()+4-s);const r=new Date(Date.UTC(i.getUTCFullYear(),0,1)),o=Math.ceil(((i.getTime()-r.getTime())/864e5+1)/7);return`${e}-W${o}`}var eN=ce('<div class="p-6 md:p-10 rounded-lg"><h1 class="text-3xl font-bold mb-8 text-oncard">Released</h1> <!></div>');function nN(n,t){tn(t,!1);let e=xe([]);zn(async()=>{const r=await fetch("/ChaboStats/api/listings");Ft(e,await r.json())}),vn();var i=eN(),s=St(ut(i),2);Sc(s,{get apartments(){return U(e)},get getChartsFn(){return tN},title:"Released Apartments Statistics"}),Rt(n,i),en()}function iN(n){const t=n.map(d=>d.address),e=n.map(d=>d.interested_count),i={};for(const d of n)i[d.location]||(i[d.location]={total:0,count:0}),i[d.location].total+=d.interested_count,i[d.location].count+=1;const s=Object.keys(i),r=s.map(d=>i[d].total),o=s.map(d=>i[d].total/i[d].count),l={type:"bar",data:{labels:t,datasets:[{label:"Interested Count",data:e,backgroundColor:un.pri()}]},options:{responsive:!0,scales:{y:{beginAtZero:!0}}},plugins:[]},c={type:"scatter",data:{datasets:[{label:"Interested vs Size",data:n.map(d=>({x:d.size_sqrM,y:d.interested_count})),backgroundColor:un.pri()}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Interested vs Size"}},scales:{x:{title:{display:!0,text:"Size (mÂ²)"}},y:{beginAtZero:!0,title:{display:!0,text:"Number of Interested People"}}}},plugins:[]},h={type:"scatter",data:{datasets:[{label:"Interested vs Rent",data:n.map(d=>({x:d.rent_krPerMonth,y:d.interested_count})),backgroundColor:un.pri()}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Interested vs Rent"}},scales:{x:{title:{display:!0,text:"Rent (kr/mÃ¥n)"}},y:{beginAtZero:!0,title:{display:!0,text:"Number of Interested People"}}}},plugins:[]},f={type:"bar",data:{labels:s,datasets:[{label:"Total Interested People",data:r,backgroundColor:un.pri()},{label:"Average Interested People",data:o,backgroundColor:un.sec()}]},options:{responsive:!0,scales:{x:{title:{display:!0,text:"Location"}},y:{beginAtZero:!0}},plugins:{title:{display:!0,text:"Interested per Location"}}},plugins:[]};return[l,c,h,f]}var sN=ce('<div class="p-6 md:p-10 rounded-lg"><h1 class="text-3xl font-bold mb-8 text-oncard">Interested</h1> <!></div>');function rN(n,t){tn(t,!1);let e=xe([]);zn(async()=>{const r=await fetch("/ChaboStats/api/listings");Ft(e,await r.json())}),vn();var i=sN(),s=St(ut(i),2);Sc(s,{get apartments(){return U(e)},get getChartsFn(){return iN},title:"Interest Statistics"}),Rt(n,i),en()}function oN(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Nl={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var aN=Nl.exports,iv;function lN(){return iv||(iv=1,(function(n,t){(function(e,i){i(t)})(aN,(function(e){var i="1.9.4";function s(a){var u,m,b,M;for(m=1,b=arguments.length;m<b;m++){M=arguments[m];for(u in M)a[u]=M[u]}return a}var r=Object.create||(function(){function a(){}return function(u){return a.prototype=u,new a}})();function o(a,u){var m=Array.prototype.slice;if(a.bind)return a.bind.apply(a,m.call(arguments,1));var b=m.call(arguments,2);return function(){return a.apply(u,b.length?b.concat(m.call(arguments)):arguments)}}var l=0;function c(a){return"_leaflet_id"in a||(a._leaflet_id=++l),a._leaflet_id}function h(a,u,m){var b,M,I,B;return B=function(){b=!1,M&&(I.apply(m,M),M=!1)},I=function(){b?M=arguments:(a.apply(m,arguments),setTimeout(B,u),b=!0)},I}function f(a,u,m){var b=u[1],M=u[0],I=b-M;return a===b&&m?a:((a-M)%I+I)%I+M}function d(){return!1}function p(a,u){if(u===!1)return a;var m=Math.pow(10,u===void 0?6:u);return Math.round(a*m)/m}function g(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function v(a){return g(a).split(/\s+/)}function y(a,u){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?r(a.options):{});for(var m in u)a.options[m]=u[m];return a.options}function x(a,u,m){var b=[];for(var M in a)b.push(encodeURIComponent(m?M.toUpperCase():M)+"="+encodeURIComponent(a[M]));return(!u||u.indexOf("?")===-1?"?":"&")+b.join("&")}var _=/\{ *([\w_ -]+) *\}/g;function w(a,u){return a.replace(_,function(m,b){var M=u[b];if(M===void 0)throw new Error("No value provided for variable "+m);return typeof M=="function"&&(M=M(u)),M})}var C=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function S(a,u){for(var m=0;m<a.length;m++)if(a[m]===u)return m;return-1}var T="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function A(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var P=0;function N(a){var u=+new Date,m=Math.max(0,16-(u-P));return P=u+m,window.setTimeout(a,m)}var E=window.requestAnimationFrame||A("RequestAnimationFrame")||N,R=window.cancelAnimationFrame||A("CancelAnimationFrame")||A("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function k(a,u,m){if(m&&E===N)a.call(u);else return E.call(window,o(a,u))}function H(a){a&&R.call(window,a)}var q={__proto__:null,extend:s,create:r,bind:o,get lastId(){return l},stamp:c,throttle:h,wrapNum:f,falseFn:d,formatNum:p,trim:g,splitWords:v,setOptions:y,getParamString:x,template:w,isArray:C,indexOf:S,emptyImageUrl:T,requestFn:E,cancelFn:R,requestAnimFrame:k,cancelAnimFrame:H};function G(){}G.extend=function(a){var u=function(){y(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},m=u.__super__=this.prototype,b=r(m);b.constructor=u,u.prototype=b;for(var M in this)Object.prototype.hasOwnProperty.call(this,M)&&M!=="prototype"&&M!=="__super__"&&(u[M]=this[M]);return a.statics&&s(u,a.statics),a.includes&&(Y(a.includes),s.apply(null,[b].concat(a.includes))),s(b,a),delete b.statics,delete b.includes,b.options&&(b.options=m.options?r(m.options):{},s(b.options,a.options)),b._initHooks=[],b.callInitHooks=function(){if(!this._initHooksCalled){m.callInitHooks&&m.callInitHooks.call(this),this._initHooksCalled=!0;for(var I=0,B=b._initHooks.length;I<B;I++)b._initHooks[I].call(this)}},u},G.include=function(a){var u=this.prototype.options;return s(this.prototype,a),a.options&&(this.prototype.options=u,this.mergeOptions(a.options)),this},G.mergeOptions=function(a){return s(this.prototype.options,a),this},G.addInitHook=function(a){var u=Array.prototype.slice.call(arguments,1),m=typeof a=="function"?a:function(){this[a].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(m),this};function Y(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=C(a)?a:[a];for(var u=0;u<a.length;u++)a[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var j={on:function(a,u,m){if(typeof a=="object")for(var b in a)this._on(b,a[b],u);else{a=v(a);for(var M=0,I=a.length;M<I;M++)this._on(a[M],u,m)}return this},off:function(a,u,m){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var b in a)this._off(b,a[b],u);else{a=v(a);for(var M=arguments.length===1,I=0,B=a.length;I<B;I++)M?this._off(a[I]):this._off(a[I],u,m)}return this},_on:function(a,u,m,b){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(a,u,m)===!1){m===this&&(m=void 0);var M={fn:u,ctx:m};b&&(M.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(M)}},_off:function(a,u,m){var b,M,I;if(this._events&&(b=this._events[a],!!b)){if(arguments.length===1){if(this._firingCount)for(M=0,I=b.length;M<I;M++)b[M].fn=d;delete this._events[a];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var B=this._listens(a,u,m);if(B!==!1){var J=b[B];this._firingCount&&(J.fn=d,this._events[a]=b=b.slice()),b.splice(B,1)}}},fire:function(a,u,m){if(!this.listens(a,m))return this;var b=s({},u,{type:a,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var M=this._events[a];if(M){this._firingCount=this._firingCount+1||1;for(var I=0,B=M.length;I<B;I++){var J=M[I],it=J.fn;J.once&&this.off(a,it,J.ctx),it.call(J.ctx||this,b)}this._firingCount--}}return m&&this._propagateEvent(b),this},listens:function(a,u,m,b){typeof a!="string"&&console.warn('"string" type argument expected');var M=u;typeof u!="function"&&(b=!!u,M=void 0,m=void 0);var I=this._events&&this._events[a];if(I&&I.length&&this._listens(a,M,m)!==!1)return!0;if(b){for(var B in this._eventParents)if(this._eventParents[B].listens(a,u,m,b))return!0}return!1},_listens:function(a,u,m){if(!this._events)return!1;var b=this._events[a]||[];if(!u)return!!b.length;m===this&&(m=void 0);for(var M=0,I=b.length;M<I;M++)if(b[M].fn===u&&b[M].ctx===m)return M;return!1},once:function(a,u,m){if(typeof a=="object")for(var b in a)this._on(b,a[b],u,!0);else{a=v(a);for(var M=0,I=a.length;M<I;M++)this._on(a[M],u,m,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[c(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[c(a)],this},_propagateEvent:function(a){for(var u in this._eventParents)this._eventParents[u].fire(a.type,s({layer:a.target,propagatedFrom:a.target},a),!0)}};j.addEventListener=j.on,j.removeEventListener=j.clearAllEventListeners=j.off,j.addOneTimeEventListener=j.once,j.fireEvent=j.fire,j.hasEventListeners=j.listens;var et=G.extend(j);function V(a,u,m){this.x=m?Math.round(a):a,this.y=m?Math.round(u):u}var ct=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};V.prototype={clone:function(){return new V(this.x,this.y)},add:function(a){return this.clone()._add(rt(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(rt(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new V(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new V(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ct(this.x),this.y=ct(this.y),this},distanceTo:function(a){a=rt(a);var u=a.x-this.x,m=a.y-this.y;return Math.sqrt(u*u+m*m)},equals:function(a){return a=rt(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=rt(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+p(this.x)+", "+p(this.y)+")"}};function rt(a,u,m){return a instanceof V?a:C(a)?new V(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new V(a.x,a.y):new V(a,u,m)}function gt(a,u){if(a)for(var m=u?[a,u]:a,b=0,M=m.length;b<M;b++)this.extend(m[b])}gt.prototype={extend:function(a){var u,m;if(!a)return this;if(a instanceof V||typeof a[0]=="number"||"x"in a)u=m=rt(a);else if(a=It(a),u=a.min,m=a.max,!u||!m)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=m.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(m.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(m.y,this.max.y)),this},getCenter:function(a){return rt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return rt(this.min.x,this.max.y)},getTopRight:function(){return rt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var u,m;return typeof a[0]=="number"||a instanceof V?a=rt(a):a=It(a),a instanceof gt?(u=a.min,m=a.max):u=m=a,u.x>=this.min.x&&m.x<=this.max.x&&u.y>=this.min.y&&m.y<=this.max.y},intersects:function(a){a=It(a);var u=this.min,m=this.max,b=a.min,M=a.max,I=M.x>=u.x&&b.x<=m.x,B=M.y>=u.y&&b.y<=m.y;return I&&B},overlaps:function(a){a=It(a);var u=this.min,m=this.max,b=a.min,M=a.max,I=M.x>u.x&&b.x<m.x,B=M.y>u.y&&b.y<m.y;return I&&B},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var u=this.min,m=this.max,b=Math.abs(u.x-m.x)*a,M=Math.abs(u.y-m.y)*a;return It(rt(u.x-b,u.y-M),rt(m.x+b,m.y+M))},equals:function(a){return a?(a=It(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function It(a,u){return!a||a instanceof gt?a:new gt(a,u)}function Dt(a,u){if(a)for(var m=u?[a,u]:a,b=0,M=m.length;b<M;b++)this.extend(m[b])}Dt.prototype={extend:function(a){var u=this._southWest,m=this._northEast,b,M;if(a instanceof K)b=a,M=a;else if(a instanceof Dt){if(b=a._southWest,M=a._northEast,!b||!M)return this}else return a?this.extend(st(a)||At(a)):this;return!u&&!m?(this._southWest=new K(b.lat,b.lng),this._northEast=new K(M.lat,M.lng)):(u.lat=Math.min(b.lat,u.lat),u.lng=Math.min(b.lng,u.lng),m.lat=Math.max(M.lat,m.lat),m.lng=Math.max(M.lng,m.lng)),this},pad:function(a){var u=this._southWest,m=this._northEast,b=Math.abs(u.lat-m.lat)*a,M=Math.abs(u.lng-m.lng)*a;return new Dt(new K(u.lat-b,u.lng-M),new K(m.lat+b,m.lng+M))},getCenter:function(){return new K((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new K(this.getNorth(),this.getWest())},getSouthEast:function(){return new K(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof K||"lat"in a?a=st(a):a=At(a);var u=this._southWest,m=this._northEast,b,M;return a instanceof Dt?(b=a.getSouthWest(),M=a.getNorthEast()):b=M=a,b.lat>=u.lat&&M.lat<=m.lat&&b.lng>=u.lng&&M.lng<=m.lng},intersects:function(a){a=At(a);var u=this._southWest,m=this._northEast,b=a.getSouthWest(),M=a.getNorthEast(),I=M.lat>=u.lat&&b.lat<=m.lat,B=M.lng>=u.lng&&b.lng<=m.lng;return I&&B},overlaps:function(a){a=At(a);var u=this._southWest,m=this._northEast,b=a.getSouthWest(),M=a.getNorthEast(),I=M.lat>u.lat&&b.lat<m.lat,B=M.lng>u.lng&&b.lng<m.lng;return I&&B},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,u){return a?(a=At(a),this._southWest.equals(a.getSouthWest(),u)&&this._northEast.equals(a.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function At(a,u){return a instanceof Dt?a:new Dt(a,u)}function K(a,u,m){if(isNaN(a)||isNaN(u))throw new Error("Invalid LatLng object: ("+a+", "+u+")");this.lat=+a,this.lng=+u,m!==void 0&&(this.alt=+m)}K.prototype={equals:function(a,u){if(!a)return!1;a=st(a);var m=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return m<=(u===void 0?1e-9:u)},toString:function(a){return"LatLng("+p(this.lat,a)+", "+p(this.lng,a)+")"},distanceTo:function(a){return Ut.distance(this,st(a))},wrap:function(){return Ut.wrapLatLng(this)},toBounds:function(a){var u=180*a/40075017,m=u/Math.cos(Math.PI/180*this.lat);return At([this.lat-u,this.lng-m],[this.lat+u,this.lng+m])},clone:function(){return new K(this.lat,this.lng,this.alt)}};function st(a,u,m){return a instanceof K?a:C(a)&&typeof a[0]!="object"?a.length===3?new K(a[0],a[1],a[2]):a.length===2?new K(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new K(a.lat,"lng"in a?a.lng:a.lon,a.alt):u===void 0?null:new K(a,u,m)}var dt={latLngToPoint:function(a,u){var m=this.projection.project(a),b=this.scale(u);return this.transformation._transform(m,b)},pointToLatLng:function(a,u){var m=this.scale(u),b=this.transformation.untransform(a,m);return this.projection.unproject(b)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var u=this.projection.bounds,m=this.scale(a),b=this.transformation.transform(u.min,m),M=this.transformation.transform(u.max,m);return new gt(b,M)},infinite:!1,wrapLatLng:function(a){var u=this.wrapLng?f(a.lng,this.wrapLng,!0):a.lng,m=this.wrapLat?f(a.lat,this.wrapLat,!0):a.lat,b=a.alt;return new K(m,u,b)},wrapLatLngBounds:function(a){var u=a.getCenter(),m=this.wrapLatLng(u),b=u.lat-m.lat,M=u.lng-m.lng;if(b===0&&M===0)return a;var I=a.getSouthWest(),B=a.getNorthEast(),J=new K(I.lat-b,I.lng-M),it=new K(B.lat-b,B.lng-M);return new Dt(J,it)}},Ut=s({},dt,{wrapLng:[-180,180],R:6371e3,distance:function(a,u){var m=Math.PI/180,b=a.lat*m,M=u.lat*m,I=Math.sin((u.lat-a.lat)*m/2),B=Math.sin((u.lng-a.lng)*m/2),J=I*I+Math.cos(b)*Math.cos(M)*B*B,it=2*Math.atan2(Math.sqrt(J),Math.sqrt(1-J));return this.R*it}}),Xt=6378137,Ht={R:Xt,MAX_LATITUDE:85.0511287798,project:function(a){var u=Math.PI/180,m=this.MAX_LATITUDE,b=Math.max(Math.min(m,a.lat),-m),M=Math.sin(b*u);return new V(this.R*a.lng*u,this.R*Math.log((1+M)/(1-M))/2)},unproject:function(a){var u=180/Math.PI;return new K((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*u,a.x*u/this.R)},bounds:(function(){var a=Xt*Math.PI;return new gt([-a,-a],[a,a])})()};function Le(a,u,m,b){if(C(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=u,this._c=m,this._d=b}Le.prototype={transform:function(a,u){return this._transform(a.clone(),u)},_transform:function(a,u){return u=u||1,a.x=u*(this._a*a.x+this._b),a.y=u*(this._c*a.y+this._d),a},untransform:function(a,u){return u=u||1,new V((a.x/u-this._b)/this._a,(a.y/u-this._d)/this._c)}};function se(a,u,m,b){return new Le(a,u,m,b)}var z=s({},Ut,{code:"EPSG:3857",projection:Ht,transformation:(function(){var a=.5/(Math.PI*Ht.R);return se(a,.5,-a,.5)})()}),Oe=s({},z,{code:"EPSG:900913"});function Vt(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function ye(a,u){var m="",b,M,I,B,J,it;for(b=0,I=a.length;b<I;b++){for(J=a[b],M=0,B=J.length;M<B;M++)it=J[M],m+=(M?"L":"M")+it.x+" "+it.y;m+=u?qt.svg?"z":"x":""}return m||"M0 0"}var Wt=document.documentElement.style,Ve="ActiveXObject"in window,Nt=Ve&&!document.addEventListener,ue="msLaunchUri"in navigator&&!("documentMode"in document),hn=di("webkit"),nn=di("android"),F=di("android 2")||di("android 3"),D=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Q=nn&&di("Google")&&D<537&&!("AudioNode"in window),at=!!window.opera,pt=!ue&&di("chrome"),ot=di("gecko")&&!hn&&!at&&!Ve,$t=!pt&&di("safari"),Mt=di("phantom"),jt="OTransition"in Wt,Zt=navigator.platform.indexOf("Win")===0,xt=Ve&&"transition"in Wt,Tt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!F,re="MozPerspective"in Wt,Yt=!window.L_DISABLE_3D&&(xt||Tt||re)&&!jt&&!Mt,wt=typeof orientation<"u"||di("mobile"),de=wt&&hn,W=wt&&Tt,yt=!window.PointerEvent&&window.MSPointerEvent,Ct=!!(window.PointerEvent||yt),kt="ontouchstart"in window||!!window.TouchEvent,_t=!window.L_NO_TOUCH&&(kt||Ct),lt=wt&&at,Gt=wt&&ot,he=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,qe=(function(){var a=!1;try{var u=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",d,u),window.removeEventListener("testPassiveEventSupport",d,u)}catch{}return a})(),Be=(function(){return!!document.createElement("canvas").getContext})(),fi=!!(document.createElementNS&&Vt("svg").createSVGRect),Si=!!fi&&(function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Cc=!fi&&(function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var u=a.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}})(),bs=navigator.platform.indexOf("Mac")===0,qa=navigator.platform.indexOf("Linux")===0;function di(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var qt={ie:Ve,ielt9:Nt,edge:ue,webkit:hn,android:nn,android23:F,androidStock:Q,opera:at,chrome:pt,gecko:ot,safari:$t,phantom:Mt,opera12:jt,win:Zt,ie3d:xt,webkit3d:Tt,gecko3d:re,any3d:Yt,mobile:wt,mobileWebkit:de,mobileWebkit3d:W,msPointer:yt,pointer:Ct,touch:_t,touchNative:kt,mobileOpera:lt,mobileGecko:Gt,retina:he,passiveEvents:qe,canvas:Be,svg:fi,vml:Cc,inlineSvg:Si,mac:bs,linux:qa},Br=qt.msPointer?"MSPointerDown":"pointerdown",$a=qt.msPointer?"MSPointerMove":"pointermove",zr=qt.msPointer?"MSPointerUp":"pointerup",Ka=qt.msPointer?"MSPointerCancel":"pointercancel",Io={touchstart:Br,touchmove:$a,touchend:zr,touchcancel:Ka},wc={touchstart:$,touchmove:tt,touchend:tt,touchcancel:tt},ir={},Tc=!1;function ju(a,u,m){return u==="touchstart"&&nt(),wc[u]?(m=wc[u].bind(this,m),a.addEventListener(Io[u],m,!1),m):(console.warn("wrong event specified:",u),d)}function Xu(a,u,m){if(!Io[u]){console.warn("wrong event specified:",u);return}a.removeEventListener(Io[u],m,!1)}function Zu(a){ir[a.pointerId]=a}function O(a){ir[a.pointerId]&&(ir[a.pointerId]=a)}function Z(a){delete ir[a.pointerId]}function nt(){Tc||(document.addEventListener(Br,Zu,!0),document.addEventListener($a,O,!0),document.addEventListener(zr,Z,!0),document.addEventListener(Ka,Z,!0),Tc=!0)}function tt(a,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var m in ir)u.touches.push(ir[m]);u.changedTouches=[u],a(u)}}function $(a,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&kn(u),tt(a,u)}function vt(a){var u={},m,b;for(b in a)m=a[b],u[b]=m&&m.bind?m.bind(a):m;return a=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var Pt=200;function Bt(a,u){a.addEventListener("dblclick",u);var m=0,b;function M(I){if(I.detail!==1){b=I.detail;return}if(!(I.pointerType==="mouse"||I.sourceCapabilities&&!I.sourceCapabilities.firesTouchEvents)){var B=xg(I);if(!(B.some(function(it){return it instanceof HTMLLabelElement&&it.attributes.for})&&!B.some(function(it){return it instanceof HTMLInputElement||it instanceof HTMLSelectElement}))){var J=Date.now();J-m<=Pt?(b++,b===2&&u(vt(I))):b=1,m=J}}}return a.addEventListener("click",M),{dblclick:u,simDblclick:M}}function Ot(a,u){a.removeEventListener("dblclick",u.dblclick),a.removeEventListener("click",u.simDblclick)}var ne=Nn(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ie=Nn(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Jt=ie==="webkitTransition"||ie==="OTransition"?ie+"End":"transitionend";function be(a){return typeof a=="string"?document.getElementById(a):a}function Ne(a,u){var m=a.style[u]||a.currentStyle&&a.currentStyle[u];if((!m||m==="auto")&&document.defaultView){var b=document.defaultView.getComputedStyle(a,null);m=b?b[u]:null}return m==="auto"?null:m}function Qt(a,u,m){var b=document.createElement(a);return b.className=u||"",m&&m.appendChild(b),b}function oe(a){var u=a.parentNode;u&&u.removeChild(a)}function ze(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function Kt(a){var u=a.parentNode;u&&u.lastChild!==a&&u.appendChild(a)}function je(a){var u=a.parentNode;u&&u.firstChild!==a&&u.insertBefore(a,u.firstChild)}function Ae(a,u){if(a.classList!==void 0)return a.classList.contains(u);var m=Ji(a);return m.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(m)}function ee(a,u){if(a.classList!==void 0)for(var m=v(u),b=0,M=m.length;b<M;b++)a.classList.add(m[b]);else if(!Ae(a,u)){var I=Ji(a);On(a,(I?I+" ":"")+u)}}function $e(a,u){a.classList!==void 0?a.classList.remove(u):On(a,g((" "+Ji(a)+" ").replace(" "+u+" "," ")))}function On(a,u){a.className.baseVal===void 0?a.className=u:a.className.baseVal=u}function Ji(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function Pe(a,u){"opacity"in a.style?a.style.opacity=u:"filter"in a.style&&ri(a,u)}function ri(a,u){var m=!1,b="DXImageTransform.Microsoft.Alpha";try{m=a.filters.item(b)}catch{if(u===1)return}u=Math.round(u*100),m?(m.Enabled=u!==100,m.Opacity=u):a.style.filter+=" progid:"+b+"(opacity="+u+")"}function Nn(a){for(var u=document.documentElement.style,m=0;m<a.length;m++)if(a[m]in u)return a[m];return!1}function pn(a,u,m){var b=u||new V(0,0);a.style[ne]=(qt.ie3d?"translate("+b.x+"px,"+b.y+"px)":"translate3d("+b.x+"px,"+b.y+"px,0)")+(m?" scale("+m+")":"")}function Ie(a,u){a._leaflet_pos=u,qt.any3d?pn(a,u):(a.style.left=u.x+"px",a.style.top=u.y+"px")}function ki(a){return a._leaflet_pos||new V(0,0)}var pi,Ja,Yu;if("onselectstart"in document)pi=function(){me(window,"selectstart",kn)},Ja=function(){sn(window,"selectstart",kn)};else{var Qa=Nn(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);pi=function(){if(Qa){var a=document.documentElement.style;Yu=a[Qa],a[Qa]="none"}},Ja=function(){Qa&&(document.documentElement.style[Qa]=Yu,Yu=void 0)}}function qu(){me(window,"dragstart",kn)}function $u(){sn(window,"dragstart",kn)}var Ec,Ku;function Ju(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(Ac(),Ec=a,Ku=a.style.outlineStyle,a.style.outlineStyle="none",me(window,"keydown",Ac))}function Ac(){Ec&&(Ec.style.outlineStyle=Ku,Ec=void 0,Ku=void 0,sn(window,"keydown",Ac))}function _g(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function Qu(a){var u=a.getBoundingClientRect();return{x:u.width/a.offsetWidth||1,y:u.height/a.offsetHeight||1,boundingClientRect:u}}var $y={__proto__:null,TRANSFORM:ne,TRANSITION:ie,TRANSITION_END:Jt,get:be,getStyle:Ne,create:Qt,remove:oe,empty:ze,toFront:Kt,toBack:je,hasClass:Ae,addClass:ee,removeClass:$e,setClass:On,getClass:Ji,setOpacity:Pe,testProp:Nn,setTransform:pn,setPosition:Ie,getPosition:ki,get disableTextSelection(){return pi},get enableTextSelection(){return Ja},disableImageDrag:qu,enableImageDrag:$u,preventOutline:Ju,restoreOutline:Ac,getSizedParentNode:_g,getScale:Qu};function me(a,u,m,b){if(u&&typeof u=="object")for(var M in u)ef(a,M,u[M],m);else{u=v(u);for(var I=0,B=u.length;I<B;I++)ef(a,u[I],m,b)}return this}var Qi="_leaflet_events";function sn(a,u,m,b){if(arguments.length===1)vg(a),delete a[Qi];else if(u&&typeof u=="object")for(var M in u)nf(a,M,u[M],m);else if(u=v(u),arguments.length===2)vg(a,function(J){return S(u,J)!==-1});else for(var I=0,B=u.length;I<B;I++)nf(a,u[I],m,b);return this}function vg(a,u){for(var m in a[Qi]){var b=m.split(/\d/)[0];(!u||u(b))&&nf(a,b,null,null,m)}}var tf={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ef(a,u,m,b){var M=u+c(m)+(b?"_"+c(b):"");if(a[Qi]&&a[Qi][M])return this;var I=function(J){return m.call(b||a,J||window.event)},B=I;!qt.touchNative&&qt.pointer&&u.indexOf("touch")===0?I=ju(a,u,I):qt.touch&&u==="dblclick"?I=Bt(a,I):"addEventListener"in a?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?a.addEventListener(tf[u]||u,I,qt.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(I=function(J){J=J||window.event,rf(a,J)&&B(J)},a.addEventListener(tf[u],I,!1)):a.addEventListener(u,B,!1):a.attachEvent("on"+u,I),a[Qi]=a[Qi]||{},a[Qi][M]=I}function nf(a,u,m,b,M){M=M||u+c(m)+(b?"_"+c(b):"");var I=a[Qi]&&a[Qi][M];if(!I)return this;!qt.touchNative&&qt.pointer&&u.indexOf("touch")===0?Xu(a,u,I):qt.touch&&u==="dblclick"?Ot(a,I):"removeEventListener"in a?a.removeEventListener(tf[u]||u,I,!1):a.detachEvent("on"+u,I),a[Qi][M]=null}function Hr(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function sf(a){return ef(a,"wheel",Hr),this}function tl(a){return me(a,"mousedown touchstart dblclick contextmenu",Hr),a._leaflet_disable_click=!0,this}function kn(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function Vr(a){return kn(a),Hr(a),this}function xg(a){if(a.composedPath)return a.composedPath();for(var u=[],m=a.target;m;)u.push(m),m=m.parentNode;return u}function yg(a,u){if(!u)return new V(a.clientX,a.clientY);var m=Qu(u),b=m.boundingClientRect;return new V((a.clientX-b.left)/m.x-u.clientLeft,(a.clientY-b.top)/m.y-u.clientTop)}var Ky=qt.linux&&qt.chrome?window.devicePixelRatio:qt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function bg(a){return qt.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/Ky:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function rf(a,u){var m=u.relatedTarget;if(!m)return!0;try{for(;m&&m!==a;)m=m.parentNode}catch{return!1}return m!==a}var Jy={__proto__:null,on:me,off:sn,stopPropagation:Hr,disableScrollPropagation:sf,disableClickPropagation:tl,preventDefault:kn,stop:Vr,getPropagationPath:xg,getMousePosition:yg,getWheelDelta:bg,isExternalTarget:rf,addListener:me,removeListener:sn},Mg=et.extend({run:function(a,u,m,b){this.stop(),this._el=a,this._inProgress=!0,this._duration=m||.25,this._easeOutPower=1/Math.max(b||.5,.2),this._startPos=ki(a),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=k(this._animate,this),this._step()},_step:function(a){var u=+new Date-this._startTime,m=this._duration*1e3;u<m?this._runFrame(this._easeOut(u/m),a):(this._runFrame(1),this._complete())},_runFrame:function(a,u){var m=this._startPos.add(this._offset.multiplyBy(a));u&&m._round(),Ie(this._el,m),this.fire("step")},_complete:function(){H(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),ke=et.extend({options:{crs:z,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,u){u=y(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(st(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ie&&qt.any3d&&!qt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),me(this._proxy,Jt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,u,m){if(u=u===void 0?this._zoom:this._limitZoom(u),a=this._limitCenter(st(a),u,this.options.maxBounds),m=m||{},this._stop(),this._loaded&&!m.reset&&m!==!0){m.animate!==void 0&&(m.zoom=s({animate:m.animate},m.zoom),m.pan=s({animate:m.animate,duration:m.duration},m.pan));var b=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,u,m.zoom):this._tryAnimatedPan(a,m.pan);if(b)return clearTimeout(this._sizeTimer),this}return this._resetView(a,u,m.pan&&m.pan.noMoveStart),this},setZoom:function(a,u){return this._loaded?this.setView(this.getCenter(),a,{zoom:u}):(this._zoom=a,this)},zoomIn:function(a,u){return a=a||(qt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,u)},zoomOut:function(a,u){return a=a||(qt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,u)},setZoomAround:function(a,u,m){var b=this.getZoomScale(u),M=this.getSize().divideBy(2),I=a instanceof V?a:this.latLngToContainerPoint(a),B=I.subtract(M).multiplyBy(1-1/b),J=this.containerPointToLatLng(M.add(B));return this.setView(J,u,{zoom:m})},_getBoundsCenterZoom:function(a,u){u=u||{},a=a.getBounds?a.getBounds():At(a);var m=rt(u.paddingTopLeft||u.padding||[0,0]),b=rt(u.paddingBottomRight||u.padding||[0,0]),M=this.getBoundsZoom(a,!1,m.add(b));if(M=typeof u.maxZoom=="number"?Math.min(u.maxZoom,M):M,M===1/0)return{center:a.getCenter(),zoom:M};var I=b.subtract(m).divideBy(2),B=this.project(a.getSouthWest(),M),J=this.project(a.getNorthEast(),M),it=this.unproject(B.add(J).divideBy(2).add(I),M);return{center:it,zoom:M}},fitBounds:function(a,u){if(a=At(a),!a.isValid())throw new Error("Bounds are not valid.");var m=this._getBoundsCenterZoom(a,u);return this.setView(m.center,m.zoom,u)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,u){return this.setView(a,this._zoom,{pan:u})},panBy:function(a,u){if(a=rt(a).round(),u=u||{},!a.x&&!a.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Mg,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){ee(this._mapPane,"leaflet-pan-anim");var m=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,m,u.duration||.25,u.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,u,m){if(m=m||{},m.animate===!1||!qt.any3d)return this.setView(a,u,m);this._stop();var b=this.project(this.getCenter()),M=this.project(a),I=this.getSize(),B=this._zoom;a=st(a),u=u===void 0?B:u;var J=Math.max(I.x,I.y),it=J*this.getZoomScale(B,u),ht=M.distanceTo(b)||1,Lt=1.42,ae=Lt*Lt;function Se(Mn){var zc=Mn?-1:1,zb=Mn?it:J,Hb=it*it-J*J+zc*ae*ae*ht*ht,Vb=2*zb*ae*ht,gf=Hb/Vb,n1=Math.sqrt(gf*gf+1)-gf,Wb=n1<1e-9?-18:Math.log(n1);return Wb}function Yn(Mn){return(Math.exp(Mn)-Math.exp(-Mn))/2}function Pn(Mn){return(Math.exp(Mn)+Math.exp(-Mn))/2}function wi(Mn){return Yn(Mn)/Pn(Mn)}var oi=Se(0);function Uo(Mn){return J*(Pn(oi)/Pn(oi+Lt*Mn))}function kb(Mn){return J*(Pn(oi)*wi(oi+Lt*Mn)-Yn(oi))/ae}function Fb(Mn){return 1-Math.pow(1-Mn,1.5)}var Ub=Date.now(),t1=(Se(1)-oi)/Lt,Bb=m.duration?1e3*m.duration:1e3*t1*.8;function e1(){var Mn=(Date.now()-Ub)/Bb,zc=Fb(Mn)*t1;Mn<=1?(this._flyToFrame=k(e1,this),this._move(this.unproject(b.add(M.subtract(b).multiplyBy(kb(zc)/ht)),B),this.getScaleZoom(J/Uo(zc),B),{flyTo:!0})):this._move(a,u)._moveEnd(!0)}return this._moveStart(!0,m.noMoveStart),e1.call(this),this},flyToBounds:function(a,u){var m=this._getBoundsCenterZoom(a,u);return this.flyTo(m.center,m.zoom,u)},setMaxBounds:function(a){return a=At(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var u=this.options.minZoom;return this.options.minZoom=a,this._loaded&&u!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var u=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&u!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,u){this._enforcingBounds=!0;var m=this.getCenter(),b=this._limitCenter(m,this._zoom,At(a));return m.equals(b)||this.panTo(b,u),this._enforcingBounds=!1,this},panInside:function(a,u){u=u||{};var m=rt(u.paddingTopLeft||u.padding||[0,0]),b=rt(u.paddingBottomRight||u.padding||[0,0]),M=this.project(this.getCenter()),I=this.project(a),B=this.getPixelBounds(),J=It([B.min.add(m),B.max.subtract(b)]),it=J.getSize();if(!J.contains(I)){this._enforcingBounds=!0;var ht=I.subtract(J.getCenter()),Lt=J.extend(I).getSize().subtract(it);M.x+=ht.x<0?-Lt.x:Lt.x,M.y+=ht.y<0?-Lt.y:Lt.y,this.panTo(this.unproject(M),u),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=s({animate:!1,pan:!0},a===!0?{animate:!0}:a);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var m=this.getSize(),b=u.divideBy(2).round(),M=m.divideBy(2).round(),I=b.subtract(M);return!I.x&&!I.y?this:(a.animate&&a.pan?this.panBy(I):(a.pan&&this._rawPanBy(I),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:m}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=s({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=o(this._handleGeolocationResponse,this),m=o(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,m,a):navigator.geolocation.getCurrentPosition(u,m,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var u=a.code,m=a.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+m+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var u=a.coords.latitude,m=a.coords.longitude,b=new K(u,m),M=b.toBounds(a.coords.accuracy*2),I=this._locateOptions;if(I.setView){var B=this.getBoundsZoom(M);this.setView(b,I.maxZoom?Math.min(B,I.maxZoom):B)}var J={latlng:b,bounds:M,timestamp:a.timestamp};for(var it in a.coords)typeof a.coords[it]=="number"&&(J[it]=a.coords[it]);this.fire("locationfound",J)}},addHandler:function(a,u){if(!u)return this;var m=this[a]=new u(this);return this._handlers.push(m),this.options[a]&&m.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),oe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(H(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)oe(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,u){var m="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),b=Qt("div",m,u||this._mapPane);return a&&(this._panes[a]=b),b},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),u=this.unproject(a.getBottomLeft()),m=this.unproject(a.getTopRight());return new Dt(u,m)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,u,m){a=At(a),m=rt(m||[0,0]);var b=this.getZoom()||0,M=this.getMinZoom(),I=this.getMaxZoom(),B=a.getNorthWest(),J=a.getSouthEast(),it=this.getSize().subtract(m),ht=It(this.project(J,b),this.project(B,b)).getSize(),Lt=qt.any3d?this.options.zoomSnap:1,ae=it.x/ht.x,Se=it.y/ht.y,Yn=u?Math.max(ae,Se):Math.min(ae,Se);return b=this.getScaleZoom(Yn,b),Lt&&(b=Math.round(b/(Lt/100))*(Lt/100),b=u?Math.ceil(b/Lt)*Lt:Math.floor(b/Lt)*Lt),Math.max(M,Math.min(I,b))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new V(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,u){var m=this._getTopLeftPoint(a,u);return new gt(m,m.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,u){var m=this.options.crs;return u=u===void 0?this._zoom:u,m.scale(a)/m.scale(u)},getScaleZoom:function(a,u){var m=this.options.crs;u=u===void 0?this._zoom:u;var b=m.zoom(a*m.scale(u));return isNaN(b)?1/0:b},project:function(a,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(st(a),u)},unproject:function(a,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(rt(a),u)},layerPointToLatLng:function(a){var u=rt(a).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(a){var u=this.project(st(a))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(st(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(At(a))},distance:function(a,u){return this.options.crs.distance(st(a),st(u))},containerPointToLayerPoint:function(a){return rt(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return rt(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var u=this.containerPointToLayerPoint(rt(a));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(st(a)))},mouseEventToContainerPoint:function(a){return yg(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var u=this._container=be(a);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");me(u,"scroll",this._onScroll,this),this._containerId=c(u)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&qt.any3d,ee(a,"leaflet-container"+(qt.touch?" leaflet-touch":"")+(qt.retina?" leaflet-retina":"")+(qt.ielt9?" leaflet-oldie":"")+(qt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=Ne(a,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ie(this._mapPane,new V(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ee(a.markerPane,"leaflet-zoom-hide"),ee(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,u,m){Ie(this._mapPane,new V(0,0));var b=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var M=this._zoom!==u;this._moveStart(M,m)._move(a,u)._moveEnd(M),this.fire("viewreset"),b&&this.fire("load")},_moveStart:function(a,u){return a&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(a,u,m,b){u===void 0&&(u=this._zoom);var M=this._zoom!==u;return this._zoom=u,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),b?m&&m.pinch&&this.fire("zoom",m):((M||m&&m.pinch)&&this.fire("zoom",m),this.fire("move",m)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return H(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){Ie(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[c(this._container)]=this;var u=a?sn:me;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),qt.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){H(this._resizeRequest),this._resizeRequest=k(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,u){for(var m=[],b,M=u==="mouseout"||u==="mouseover",I=a.target||a.srcElement,B=!1;I;){if(b=this._targets[c(I)],b&&(u==="click"||u==="preclick")&&this._draggableMoved(b)){B=!0;break}if(b&&b.listens(u,!0)&&(M&&!rf(I,a)||(m.push(b),M))||I===this._container)break;I=I.parentNode}return!m.length&&!B&&!M&&this.listens(u,!0)&&(m=[this]),m},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var u=a.target||a.srcElement;if(!(!this._loaded||u._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(u))){var m=a.type;m==="mousedown"&&Ju(u),this._fireDOMEvent(a,m)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,u,m){if(a.type==="click"){var b=s({},a);b.type="preclick",this._fireDOMEvent(b,b.type,m)}var M=this._findEventTargets(a,u);if(m){for(var I=[],B=0;B<m.length;B++)m[B].listens(u,!0)&&I.push(m[B]);M=I.concat(M)}if(M.length){u==="contextmenu"&&kn(a);var J=M[0],it={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var ht=J.getLatLng&&(!J._radius||J._radius<=10);it.containerPoint=ht?this.latLngToContainerPoint(J.getLatLng()):this.mouseEventToContainerPoint(a),it.layerPoint=this.containerPointToLayerPoint(it.containerPoint),it.latlng=ht?J.getLatLng():this.layerPointToLatLng(it.layerPoint)}for(B=0;B<M.length;B++)if(M[B].fire(u,it,!0),it.originalEvent._stopped||M[B].options.bubblingMouseEvents===!1&&S(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,u=this._handlers.length;a<u;a++)this._handlers[a].disable()},whenReady:function(a,u){return this._loaded?a.call(u||this,{target:this}):this.on("load",a,u),this},_getMapPanePos:function(){return ki(this._mapPane)||new V(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,u){var m=a&&u!==void 0?this._getNewPixelOrigin(a,u):this.getPixelOrigin();return m.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,u){var m=this.getSize()._divideBy(2);return this.project(a,u)._subtract(m)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,u,m){var b=this._getNewPixelOrigin(m,u);return this.project(a,u)._subtract(b)},_latLngBoundsToNewLayerBounds:function(a,u,m){var b=this._getNewPixelOrigin(m,u);return It([this.project(a.getSouthWest(),u)._subtract(b),this.project(a.getNorthWest(),u)._subtract(b),this.project(a.getSouthEast(),u)._subtract(b),this.project(a.getNorthEast(),u)._subtract(b)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,u,m){if(!m)return a;var b=this.project(a,u),M=this.getSize().divideBy(2),I=new gt(b.subtract(M),b.add(M)),B=this._getBoundsOffset(I,m,u);return Math.abs(B.x)<=1&&Math.abs(B.y)<=1?a:this.unproject(b.add(B),u)},_limitOffset:function(a,u){if(!u)return a;var m=this.getPixelBounds(),b=new gt(m.min.add(a),m.max.add(a));return a.add(this._getBoundsOffset(b,u))},_getBoundsOffset:function(a,u,m){var b=It(this.project(u.getNorthEast(),m),this.project(u.getSouthWest(),m)),M=b.min.subtract(a.min),I=b.max.subtract(a.max),B=this._rebound(M.x,-I.x),J=this._rebound(M.y,-I.y);return new V(B,J)},_rebound:function(a,u){return a+u>0?Math.round(a-u)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(u))},_limitZoom:function(a){var u=this.getMinZoom(),m=this.getMaxZoom(),b=qt.any3d?this.options.zoomSnap:1;return b&&(a=Math.round(a/b)*b),Math.max(u,Math.min(m,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){$e(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,u){var m=this._getCenterOffset(a)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(m)?!1:(this.panBy(m,u),!0)},_createAnimProxy:function(){var a=this._proxy=Qt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(u){var m=ne,b=this._proxy.style[m];pn(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),b===this._proxy.style[m]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){oe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),u=this.getZoom();pn(this._proxy,this.project(a,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,u,m){if(this._animatingZoom)return!0;if(m=m||{},!this._zoomAnimated||m.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var b=this.getZoomScale(u),M=this._getCenterOffset(a)._divideBy(1-1/b);return m.animate!==!0&&!this.getSize().contains(M)?!1:(k(function(){this._moveStart(!0,m.noMoveStart||!1)._animateZoom(a,u,!0)},this),!0)},_animateZoom:function(a,u,m,b){this._mapPane&&(m&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=u,ee(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:u,noUpdate:b}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&$e(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Qy(a,u){return new ke(a,u)}var Fi=G.extend({options:{position:"topright"},initialize:function(a){y(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var u=this._map;return u&&u.removeControl(this),this.options.position=a,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var u=this._container=this.onAdd(a),m=this.getPosition(),b=a._controlCorners[m];return ee(u,"leaflet-control"),m.indexOf("bottom")!==-1?b.insertBefore(u,b.firstChild):b.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(oe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),el=function(a){return new Fi(a)};ke.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},u="leaflet-",m=this._controlContainer=Qt("div",u+"control-container",this._container);function b(M,I){var B=u+M+" "+u+I;a[M+I]=Qt("div",B,m)}b("top","left"),b("top","right"),b("bottom","left"),b("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)oe(this._controlCorners[a]);oe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Sg=Fi.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,u,m,b){return m<b?-1:b<m?1:0}},initialize:function(a,u,m){y(this,m),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var b in a)this._addLayer(a[b],b);for(b in u)this._addLayer(u[b],b,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return Fi.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,u){return this._addLayer(a,u),this._map?this._update():this},addOverlay:function(a,u){return this._addLayer(a,u,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var u=this._getLayer(c(a));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){ee(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(ee(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):$e(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return $e(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",u=this._container=Qt("div",a),m=this.options.collapsed;u.setAttribute("aria-haspopup",!0),tl(u),sf(u);var b=this._section=Qt("section",a+"-list");m&&(this._map.on("click",this.collapse,this),me(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var M=this._layersLink=Qt("a",a+"-toggle",u);M.href="#",M.title="Layers",M.setAttribute("role","button"),me(M,{keydown:function(I){I.keyCode===13&&this._expandSafely()},click:function(I){kn(I),this._expandSafely()}},this),m||this.expand(),this._baseLayersList=Qt("div",a+"-base",b),this._separator=Qt("div",a+"-separator",b),this._overlaysList=Qt("div",a+"-overlays",b),u.appendChild(b)},_getLayer:function(a){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&c(this._layers[u].layer)===a)return this._layers[u]},_addLayer:function(a,u,m){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:u,overlay:m}),this.options.sortLayers&&this._layers.sort(o(function(b,M){return this.options.sortFunction(b.layer,M.layer,b.name,M.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ze(this._baseLayersList),ze(this._overlaysList),this._layerControlInputs=[];var a,u,m,b,M=0;for(m=0;m<this._layers.length;m++)b=this._layers[m],this._addItem(b),u=u||b.overlay,a=a||!b.overlay,M+=b.overlay?0:1;return this.options.hideSingleBase&&(a=a&&M>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=u&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var u=this._getLayer(c(a.target)),m=u.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;m&&this._map.fire(m,u)},_createRadioElement:function(a,u){var m='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(u?' checked="checked"':"")+"/>",b=document.createElement("div");return b.innerHTML=m,b.firstChild},_addItem:function(a){var u=document.createElement("label"),m=this._map.hasLayer(a.layer),b;a.overlay?(b=document.createElement("input"),b.type="checkbox",b.className="leaflet-control-layers-selector",b.defaultChecked=m):b=this._createRadioElement("leaflet-base-layers_"+c(this),m),this._layerControlInputs.push(b),b.layerId=c(a.layer),me(b,"click",this._onInputClick,this);var M=document.createElement("span");M.innerHTML=" "+a.name;var I=document.createElement("span");u.appendChild(I),I.appendChild(b),I.appendChild(M);var B=a.overlay?this._overlaysList:this._baseLayersList;return B.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,u,m,b=[],M=[];this._handlingClick=!0;for(var I=a.length-1;I>=0;I--)u=a[I],m=this._getLayer(u.layerId).layer,u.checked?b.push(m):u.checked||M.push(m);for(I=0;I<M.length;I++)this._map.hasLayer(M[I])&&this._map.removeLayer(M[I]);for(I=0;I<b.length;I++)this._map.hasLayer(b[I])||this._map.addLayer(b[I]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,u,m,b=this._map.getZoom(),M=a.length-1;M>=0;M--)u=a[M],m=this._getLayer(u.layerId).layer,u.disabled=m.options.minZoom!==void 0&&b<m.options.minZoom||m.options.maxZoom!==void 0&&b>m.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,me(a,"click",kn),this.expand();var u=this;setTimeout(function(){sn(a,"click",kn),u._preventClick=!1})}}),tb=function(a,u,m){return new Sg(a,u,m)},of=Fi.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var u="leaflet-control-zoom",m=Qt("div",u+" leaflet-bar"),b=this.options;return this._zoomInButton=this._createButton(b.zoomInText,b.zoomInTitle,u+"-in",m,this._zoomIn),this._zoomOutButton=this._createButton(b.zoomOutText,b.zoomOutTitle,u+"-out",m,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),m},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,u,m,b,M){var I=Qt("a",m,b);return I.innerHTML=a,I.href="#",I.title=u,I.setAttribute("role","button"),I.setAttribute("aria-label",u),tl(I),me(I,"click",Vr),me(I,"click",M,this),me(I,"click",this._refocusOnMap,this),I},_updateDisabled:function(){var a=this._map,u="leaflet-disabled";$e(this._zoomInButton,u),$e(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(ee(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(ee(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});ke.mergeOptions({zoomControl:!0}),ke.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new of,this.addControl(this.zoomControl))});var eb=function(a){return new of(a)},Cg=Fi.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var u="leaflet-control-scale",m=Qt("div",u),b=this.options;return this._addScales(b,u+"-line",m),a.on(b.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),m},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,u,m){a.metric&&(this._mScale=Qt("div",u,m)),a.imperial&&(this._iScale=Qt("div",u,m))},_update:function(){var a=this._map,u=a.getSize().y/2,m=a.distance(a.containerPointToLatLng([0,u]),a.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(m)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var u=this._getRoundNum(a),m=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,m,u/a)},_updateImperial:function(a){var u=a*3.2808399,m,b,M;u>5280?(m=u/5280,b=this._getRoundNum(m),this._updateScale(this._iScale,b+" mi",b/m)):(M=this._getRoundNum(u),this._updateScale(this._iScale,M+" ft",M/u))},_updateScale:function(a,u,m){a.style.width=Math.round(this.options.maxWidth*m)+"px",a.innerHTML=u},_getRoundNum:function(a){var u=Math.pow(10,(Math.floor(a)+"").length-1),m=a/u;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1,u*m}}),nb=function(a){return new Cg(a)},ib='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',af=Fi.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(qt.inlineSvg?ib+" ":"")+"Leaflet</a>"},initialize:function(a){y(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=Qt("div","leaflet-control-attribution"),tl(this._container);for(var u in a._layers)a._layers[u].getAttribution&&this.addAttribution(a._layers[u].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var u in this._attributions)this._attributions[u]&&a.push(u);var m=[];this.options.prefix&&m.push(this.options.prefix),a.length&&m.push(a.join(", ")),this._container.innerHTML=m.join(' <span aria-hidden="true">|</span> ')}}});ke.mergeOptions({attributionControl:!0}),ke.addInitHook(function(){this.options.attributionControl&&new af().addTo(this)});var sb=function(a){return new af(a)};Fi.Layers=Sg,Fi.Zoom=of,Fi.Scale=Cg,Fi.Attribution=af,el.layers=tb,el.zoom=eb,el.scale=nb,el.attribution=sb;var ts=G.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ts.addTo=function(a,u){return a.addHandler(u,this),this};var rb={Events:j},wg=qt.touch?"touchstart mousedown":"mousedown",sr=et.extend({options:{clickTolerance:3},initialize:function(a,u,m,b){y(this,b),this._element=a,this._dragStartTarget=u||a,this._preventOutline=m},enable:function(){this._enabled||(me(this._dragStartTarget,wg,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(sr._dragging===this&&this.finishDrag(!0),sn(this._dragStartTarget,wg,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!Ae(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){sr._dragging===this&&this.finishDrag();return}if(!(sr._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(sr._dragging=this,this._preventOutline&&Ju(this._element),qu(),pi(),!this._moving)){this.fire("down");var u=a.touches?a.touches[0]:a,m=_g(this._element);this._startPoint=new V(u.clientX,u.clientY),this._startPos=ki(this._element),this._parentScale=Qu(m);var b=a.type==="mousedown";me(document,b?"mousemove":"touchmove",this._onMove,this),me(document,b?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var u=a.touches&&a.touches.length===1?a.touches[0]:a,m=new V(u.clientX,u.clientY)._subtract(this._startPoint);!m.x&&!m.y||Math.abs(m.x)+Math.abs(m.y)<this.options.clickTolerance||(m.x/=this._parentScale.x,m.y/=this._parentScale.y,kn(a),this._moved||(this.fire("dragstart"),this._moved=!0,ee(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ee(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(m),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),Ie(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){$e(document.body,"leaflet-dragging"),this._lastTarget&&($e(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),sn(document,"mousemove touchmove",this._onMove,this),sn(document,"mouseup touchend touchcancel",this._onUp,this),$u(),Ja();var u=this._moved&&this._moving;this._moving=!1,sr._dragging=!1,u&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function Tg(a,u,m){var b,M=[1,4,2,8],I,B,J,it,ht,Lt,ae,Se;for(I=0,Lt=a.length;I<Lt;I++)a[I]._code=Wr(a[I],u);for(J=0;J<4;J++){for(ae=M[J],b=[],I=0,Lt=a.length,B=Lt-1;I<Lt;B=I++)it=a[I],ht=a[B],it._code&ae?ht._code&ae||(Se=Pc(ht,it,ae,u,m),Se._code=Wr(Se,u),b.push(Se)):(ht._code&ae&&(Se=Pc(ht,it,ae,u,m),Se._code=Wr(Se,u),b.push(Se)),b.push(it));a=b}return a}function Eg(a,u){var m,b,M,I,B,J,it,ht,Lt;if(!a||a.length===0)throw new Error("latlngs not passed");Ci(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var ae=st([0,0]),Se=At(a),Yn=Se.getNorthWest().distanceTo(Se.getSouthWest())*Se.getNorthEast().distanceTo(Se.getNorthWest());Yn<1700&&(ae=lf(a));var Pn=a.length,wi=[];for(m=0;m<Pn;m++){var oi=st(a[m]);wi.push(u.project(st([oi.lat-ae.lat,oi.lng-ae.lng])))}for(J=it=ht=0,m=0,b=Pn-1;m<Pn;b=m++)M=wi[m],I=wi[b],B=M.y*I.x-I.y*M.x,it+=(M.x+I.x)*B,ht+=(M.y+I.y)*B,J+=B*3;J===0?Lt=wi[0]:Lt=[it/J,ht/J];var Uo=u.unproject(rt(Lt));return st([Uo.lat+ae.lat,Uo.lng+ae.lng])}function lf(a){for(var u=0,m=0,b=0,M=0;M<a.length;M++){var I=st(a[M]);u+=I.lat,m+=I.lng,b++}return st([u/b,m/b])}var ob={__proto__:null,clipPolygon:Tg,polygonCenter:Eg,centroid:lf};function Ag(a,u){if(!u||!a.length)return a.slice();var m=u*u;return a=cb(a,m),a=lb(a,m),a}function Pg(a,u,m){return Math.sqrt(nl(a,u,m,!0))}function ab(a,u,m){return nl(a,u,m)}function lb(a,u){var m=a.length,b=typeof Uint8Array<"u"?Uint8Array:Array,M=new b(m);M[0]=M[m-1]=1,cf(a,M,u,0,m-1);var I,B=[];for(I=0;I<m;I++)M[I]&&B.push(a[I]);return B}function cf(a,u,m,b,M){var I=0,B,J,it;for(J=b+1;J<=M-1;J++)it=nl(a[J],a[b],a[M],!0),it>I&&(B=J,I=it);I>m&&(u[B]=1,cf(a,u,m,b,B),cf(a,u,m,B,M))}function cb(a,u){for(var m=[a[0]],b=1,M=0,I=a.length;b<I;b++)hb(a[b],a[M])>u&&(m.push(a[b]),M=b);return M<I-1&&m.push(a[I-1]),m}var Rg;function Lg(a,u,m,b,M){var I=b?Rg:Wr(a,m),B=Wr(u,m),J,it,ht;for(Rg=B;;){if(!(I|B))return[a,u];if(I&B)return!1;J=I||B,it=Pc(a,u,J,m,M),ht=Wr(it,m),J===I?(a=it,I=ht):(u=it,B=ht)}}function Pc(a,u,m,b,M){var I=u.x-a.x,B=u.y-a.y,J=b.min,it=b.max,ht,Lt;return m&8?(ht=a.x+I*(it.y-a.y)/B,Lt=it.y):m&4?(ht=a.x+I*(J.y-a.y)/B,Lt=J.y):m&2?(ht=it.x,Lt=a.y+B*(it.x-a.x)/I):m&1&&(ht=J.x,Lt=a.y+B*(J.x-a.x)/I),new V(ht,Lt,M)}function Wr(a,u){var m=0;return a.x<u.min.x?m|=1:a.x>u.max.x&&(m|=2),a.y<u.min.y?m|=4:a.y>u.max.y&&(m|=8),m}function hb(a,u){var m=u.x-a.x,b=u.y-a.y;return m*m+b*b}function nl(a,u,m,b){var M=u.x,I=u.y,B=m.x-M,J=m.y-I,it=B*B+J*J,ht;return it>0&&(ht=((a.x-M)*B+(a.y-I)*J)/it,ht>1?(M=m.x,I=m.y):ht>0&&(M+=B*ht,I+=J*ht)),B=a.x-M,J=a.y-I,b?B*B+J*J:new V(M,I)}function Ci(a){return!C(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function Ig(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ci(a)}function Dg(a,u){var m,b,M,I,B,J,it,ht;if(!a||a.length===0)throw new Error("latlngs not passed");Ci(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Lt=st([0,0]),ae=At(a),Se=ae.getNorthWest().distanceTo(ae.getSouthWest())*ae.getNorthEast().distanceTo(ae.getNorthWest());Se<1700&&(Lt=lf(a));var Yn=a.length,Pn=[];for(m=0;m<Yn;m++){var wi=st(a[m]);Pn.push(u.project(st([wi.lat-Lt.lat,wi.lng-Lt.lng])))}for(m=0,b=0;m<Yn-1;m++)b+=Pn[m].distanceTo(Pn[m+1])/2;if(b===0)ht=Pn[0];else for(m=0,I=0;m<Yn-1;m++)if(B=Pn[m],J=Pn[m+1],M=B.distanceTo(J),I+=M,I>b){it=(I-b)/M,ht=[J.x-it*(J.x-B.x),J.y-it*(J.y-B.y)];break}var oi=u.unproject(rt(ht));return st([oi.lat+Lt.lat,oi.lng+Lt.lng])}var ub={__proto__:null,simplify:Ag,pointToSegmentDistance:Pg,closestPointOnSegment:ab,clipSegment:Lg,_getEdgeIntersection:Pc,_getBitCode:Wr,_sqClosestPointOnSegment:nl,isFlat:Ci,_flat:Ig,polylineCenter:Dg},hf={project:function(a){return new V(a.lng,a.lat)},unproject:function(a){return new K(a.y,a.x)},bounds:new gt([-180,-90],[180,90])},uf={R:6378137,R_MINOR:6356752314245179e-9,bounds:new gt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var u=Math.PI/180,m=this.R,b=a.lat*u,M=this.R_MINOR/m,I=Math.sqrt(1-M*M),B=I*Math.sin(b),J=Math.tan(Math.PI/4-b/2)/Math.pow((1-B)/(1+B),I/2);return b=-m*Math.log(Math.max(J,1e-10)),new V(a.lng*u*m,b)},unproject:function(a){for(var u=180/Math.PI,m=this.R,b=this.R_MINOR/m,M=Math.sqrt(1-b*b),I=Math.exp(-a.y/m),B=Math.PI/2-2*Math.atan(I),J=0,it=.1,ht;J<15&&Math.abs(it)>1e-7;J++)ht=M*Math.sin(B),ht=Math.pow((1-ht)/(1+ht),M/2),it=Math.PI/2-2*Math.atan(I*ht)-B,B+=it;return new K(B*u,a.x*u/m)}},fb={__proto__:null,LonLat:hf,Mercator:uf,SphericalMercator:Ht},db=s({},Ut,{code:"EPSG:3395",projection:uf,transformation:(function(){var a=.5/(Math.PI*uf.R);return se(a,.5,-a,.5)})()}),Og=s({},Ut,{code:"EPSG:4326",projection:hf,transformation:se(1/180,1,-1/180,.5)}),pb=s({},dt,{projection:hf,transformation:se(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,u){var m=u.lng-a.lng,b=u.lat-a.lat;return Math.sqrt(m*m+b*b)},infinite:!0});dt.Earth=Ut,dt.EPSG3395=db,dt.EPSG3857=z,dt.EPSG900913=Oe,dt.EPSG4326=Og,dt.Simple=pb;var Ui=et.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[c(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[c(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var u=a.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var m=this.getEvents();u.on(m,this),this.once("remove",function(){u.off(m,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});ke.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var u=c(a);return this._layers[u]?this:(this._layers[u]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var u=c(a);return this._layers[u]?(this._loaded&&a.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return c(a)in this._layers},eachLayer:function(a,u){for(var m in this._layers)a.call(u,this._layers[m]);return this},_addLayers:function(a){a=a?C(a)?a:[a]:[];for(var u=0,m=a.length;u<m;u++)this.addLayer(a[u])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[c(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var u=c(a);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,u=-1/0,m=this._getZoomSpan();for(var b in this._zoomBoundLayers){var M=this._zoomBoundLayers[b].options;a=M.minZoom===void 0?a:Math.min(a,M.minZoom),u=M.maxZoom===void 0?u:Math.max(u,M.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=a===1/0?void 0:a,m!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Do=Ui.extend({initialize:function(a,u){y(this,u),this._layers={};var m,b;if(a)for(m=0,b=a.length;m<b;m++)this.addLayer(a[m])},addLayer:function(a){var u=this.getLayerId(a);return this._layers[u]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var u=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(a){var u=typeof a=="number"?a:this.getLayerId(a);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var u=Array.prototype.slice.call(arguments,1),m,b;for(m in this._layers)b=this._layers[m],b[a]&&b[a].apply(b,u);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,u){for(var m in this._layers)a.call(u,this._layers[m]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return c(a)}}),mb=function(a,u){return new Do(a,u)},Ms=Do.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),Do.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),Do.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new Dt;for(var u in this._layers){var m=this._layers[u];a.extend(m.getBounds?m.getBounds():m.getLatLng())}return a}}),gb=function(a,u){return new Ms(a,u)},Oo=G.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){y(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,u){var m=this._getIconUrl(a);if(!m){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var b=this._createImg(m,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(b,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(b.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),b},_setIconStyles:function(a,u){var m=this.options,b=m[u+"Size"];typeof b=="number"&&(b=[b,b]);var M=rt(b),I=rt(u==="shadow"&&m.shadowAnchor||m.iconAnchor||M&&M.divideBy(2,!0));a.className="leaflet-marker-"+u+" "+(m.className||""),I&&(a.style.marginLeft=-I.x+"px",a.style.marginTop=-I.y+"px"),M&&(a.style.width=M.x+"px",a.style.height=M.y+"px")},_createImg:function(a,u){return u=u||document.createElement("img"),u.src=a,u},_getIconUrl:function(a){return qt.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function _b(a){return new Oo(a)}var il=Oo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof il.imagePath!="string"&&(il.imagePath=this._detectIconPath()),(this.options.imagePath||il.imagePath)+Oo.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var u=function(m,b,M){var I=b.exec(m);return I&&I[M]};return a=u(a,/^url\((['"])?(.+)\1\)$/,2),a&&u(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=Qt("div","leaflet-default-icon-path",document.body),u=Ne(a,"background-image")||Ne(a,"backgroundImage");if(document.body.removeChild(a),u=this._stripUrl(u),u)return u;var m=document.querySelector('link[href$="leaflet.css"]');return m?m.href.substring(0,m.href.length-11-1):""}}),Ng=ts.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new sr(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ee(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&$e(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var u=this._marker,m=u._map,b=this._marker.options.autoPanSpeed,M=this._marker.options.autoPanPadding,I=ki(u._icon),B=m.getPixelBounds(),J=m.getPixelOrigin(),it=It(B.min._subtract(J).add(M),B.max._subtract(J).subtract(M));if(!it.contains(I)){var ht=rt((Math.max(it.max.x,I.x)-it.max.x)/(B.max.x-it.max.x)-(Math.min(it.min.x,I.x)-it.min.x)/(B.min.x-it.min.x),(Math.max(it.max.y,I.y)-it.max.y)/(B.max.y-it.max.y)-(Math.min(it.min.y,I.y)-it.min.y)/(B.min.y-it.min.y)).multiplyBy(b);m.panBy(ht,{animate:!1}),this._draggable._newPos._add(ht),this._draggable._startPos._add(ht),Ie(u._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=k(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(H(this._panRequest),this._panRequest=k(this._adjustPan.bind(this,a)))},_onDrag:function(a){var u=this._marker,m=u._shadow,b=ki(u._icon),M=u._map.layerPointToLatLng(b);m&&Ie(m,b),u._latlng=M,a.latlng=M,a.oldLatLng=this._oldLatLng,u.fire("move",a).fire("drag",a)},_onDragEnd:function(a){H(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),Rc=Ui.extend({options:{icon:new il,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,u){y(this,u),this._latlng=st(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var u=this._latlng;return this._latlng=st(a),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),m=a.icon.createIcon(this._icon),b=!1;m!==this._icon&&(this._icon&&this._removeIcon(),b=!0,a.title&&(m.title=a.title),m.tagName==="IMG"&&(m.alt=a.alt||"")),ee(m,u),a.keyboard&&(m.tabIndex="0",m.setAttribute("role","button")),this._icon=m,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&me(m,"focus",this._panOnFocus,this);var M=a.icon.createShadow(this._shadow),I=!1;M!==this._shadow&&(this._removeShadow(),I=!0),M&&(ee(M,u),M.alt=""),this._shadow=M,a.opacity<1&&this._updateOpacity(),b&&this.getPane().appendChild(this._icon),this._initInteraction(),M&&I&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&sn(this._icon,"focus",this._panOnFocus,this),oe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&oe(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&Ie(this._icon,a),this._shadow&&Ie(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(ee(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ng)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ng(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&Pe(this._icon,a),this._shadow&&Pe(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var u=this.options.icon.options,m=u.iconSize?rt(u.iconSize):rt(0,0),b=u.iconAnchor?rt(u.iconAnchor):rt(0,0);a.panInside(this._latlng,{paddingTopLeft:b,paddingBottomRight:m.subtract(b)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function vb(a,u){return new Rc(a,u)}var rr=Ui.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return y(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Lc=rr.extend({options:{fill:!0,radius:10},initialize:function(a,u){y(this,u),this._latlng=st(a),this._radius=this.options.radius},setLatLng:function(a){var u=this._latlng;return this._latlng=st(a),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var u=a&&a.radius||this._radius;return rr.prototype.setStyle.call(this,a),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,u=this._radiusY||a,m=this._clickTolerance(),b=[a+m,u+m];this._pxBounds=new gt(this._point.subtract(b),this._point.add(b))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function xb(a,u){return new Lc(a,u)}var ff=Lc.extend({initialize:function(a,u,m){if(typeof u=="number"&&(u=s({},m,{radius:u})),y(this,u),this._latlng=st(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new Dt(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:rr.prototype.setStyle,_project:function(){var a=this._latlng.lng,u=this._latlng.lat,m=this._map,b=m.options.crs;if(b.distance===Ut.distance){var M=Math.PI/180,I=this._mRadius/Ut.R/M,B=m.project([u+I,a]),J=m.project([u-I,a]),it=B.add(J).divideBy(2),ht=m.unproject(it).lat,Lt=Math.acos((Math.cos(I*M)-Math.sin(u*M)*Math.sin(ht*M))/(Math.cos(u*M)*Math.cos(ht*M)))/M;(isNaN(Lt)||Lt===0)&&(Lt=I/Math.cos(Math.PI/180*u)),this._point=it.subtract(m.getPixelOrigin()),this._radius=isNaN(Lt)?0:it.x-m.project([ht,a-Lt]).x,this._radiusY=it.y-B.y}else{var ae=b.unproject(b.project(this._latlng).subtract([this._mRadius,0]));this._point=m.latLngToLayerPoint(this._latlng),this._radius=this._point.x-m.latLngToLayerPoint(ae).x}this._updateBounds()}});function yb(a,u,m){return new ff(a,u,m)}var Ss=rr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,u){y(this,u),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var u=1/0,m=null,b=nl,M,I,B=0,J=this._parts.length;B<J;B++)for(var it=this._parts[B],ht=1,Lt=it.length;ht<Lt;ht++){M=it[ht-1],I=it[ht];var ae=b(a,M,I,!0);ae<u&&(u=ae,m=b(a,M,I))}return m&&(m.distance=Math.sqrt(u)),m},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Dg(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,u){return u=u||this._defaultShape(),a=st(a),u.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new Dt,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return Ci(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var u=[],m=Ci(a),b=0,M=a.length;b<M;b++)m?(u[b]=st(a[b]),this._bounds.extend(u[b])):u[b]=this._convertLatLngs(a[b]);return u},_project:function(){var a=new gt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),u=new V(a,a);this._rawPxBounds&&(this._pxBounds=new gt([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(a,u,m){var b=a[0]instanceof K,M=a.length,I,B;if(b){for(B=[],I=0;I<M;I++)B[I]=this._map.latLngToLayerPoint(a[I]),m.extend(B[I]);u.push(B)}else for(I=0;I<M;I++)this._projectLatlngs(a[I],u,m)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,m,b,M,I,B,J,it;for(m=0,M=0,I=this._rings.length;m<I;m++)for(it=this._rings[m],b=0,B=it.length;b<B-1;b++)J=Lg(it[b],it[b+1],a,b,!0),J&&(u[M]=u[M]||[],u[M].push(J[0]),(J[1]!==it[b+1]||b===B-2)&&(u[M].push(J[1]),M++))}},_simplifyPoints:function(){for(var a=this._parts,u=this.options.smoothFactor,m=0,b=a.length;m<b;m++)a[m]=Ag(a[m],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,u){var m,b,M,I,B,J,it=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(m=0,I=this._parts.length;m<I;m++)for(J=this._parts[m],b=0,B=J.length,M=B-1;b<B;M=b++)if(!(!u&&b===0)&&Pg(a,J[M],J[b])<=it)return!0;return!1}});function bb(a,u){return new Ss(a,u)}Ss._flat=Ig;var No=Ss.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Eg(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var u=Ss.prototype._convertLatLngs.call(this,a),m=u.length;return m>=2&&u[0]instanceof K&&u[0].equals(u[m-1])&&u.pop(),u},_setLatLngs:function(a){Ss.prototype._setLatLngs.call(this,a),Ci(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ci(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,u=this.options.weight,m=new V(u,u);if(a=new gt(a.min.subtract(m),a.max.add(m)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var b=0,M=this._rings.length,I;b<M;b++)I=Tg(this._rings[b],a,!0),I.length&&this._parts.push(I)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var u=!1,m,b,M,I,B,J,it,ht;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(I=0,it=this._parts.length;I<it;I++)for(m=this._parts[I],B=0,ht=m.length,J=ht-1;B<ht;J=B++)b=m[B],M=m[J],b.y>a.y!=M.y>a.y&&a.x<(M.x-b.x)*(a.y-b.y)/(M.y-b.y)+b.x&&(u=!u);return u||Ss.prototype._containsPoint.call(this,a,!0)}});function Mb(a,u){return new No(a,u)}var Cs=Ms.extend({initialize:function(a,u){y(this,u),this._layers={},a&&this.addData(a)},addData:function(a){var u=C(a)?a:a.features,m,b,M;if(u){for(m=0,b=u.length;m<b;m++)M=u[m],(M.geometries||M.geometry||M.features||M.coordinates)&&this.addData(M);return this}var I=this.options;if(I.filter&&!I.filter(a))return this;var B=Ic(a,I);return B?(B.feature=Nc(a),B.defaultOptions=B.options,this.resetStyle(B),I.onEachFeature&&I.onEachFeature(a,B),this.addLayer(B)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=s({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(u){this._setLayerStyle(u,a)},this)},_setLayerStyle:function(a,u){a.setStyle&&(typeof u=="function"&&(u=u(a.feature)),a.setStyle(u))}});function Ic(a,u){var m=a.type==="Feature"?a.geometry:a,b=m?m.coordinates:null,M=[],I=u&&u.pointToLayer,B=u&&u.coordsToLatLng||df,J,it,ht,Lt;if(!b&&!m)return null;switch(m.type){case"Point":return J=B(b),kg(I,a,J,u);case"MultiPoint":for(ht=0,Lt=b.length;ht<Lt;ht++)J=B(b[ht]),M.push(kg(I,a,J,u));return new Ms(M);case"LineString":case"MultiLineString":return it=Dc(b,m.type==="LineString"?0:1,B),new Ss(it,u);case"Polygon":case"MultiPolygon":return it=Dc(b,m.type==="Polygon"?1:2,B),new No(it,u);case"GeometryCollection":for(ht=0,Lt=m.geometries.length;ht<Lt;ht++){var ae=Ic({geometry:m.geometries[ht],type:"Feature",properties:a.properties},u);ae&&M.push(ae)}return new Ms(M);case"FeatureCollection":for(ht=0,Lt=m.features.length;ht<Lt;ht++){var Se=Ic(m.features[ht],u);Se&&M.push(Se)}return new Ms(M);default:throw new Error("Invalid GeoJSON object.")}}function kg(a,u,m,b){return a?a(u,m):new Rc(m,b&&b.markersInheritOptions&&b)}function df(a){return new K(a[1],a[0],a[2])}function Dc(a,u,m){for(var b=[],M=0,I=a.length,B;M<I;M++)B=u?Dc(a[M],u-1,m):(m||df)(a[M]),b.push(B);return b}function pf(a,u){return a=st(a),a.alt!==void 0?[p(a.lng,u),p(a.lat,u),p(a.alt,u)]:[p(a.lng,u),p(a.lat,u)]}function Oc(a,u,m,b){for(var M=[],I=0,B=a.length;I<B;I++)M.push(u?Oc(a[I],Ci(a[I])?0:u-1,m,b):pf(a[I],b));return!u&&m&&M.length>0&&M.push(M[0].slice()),M}function ko(a,u){return a.feature?s({},a.feature,{geometry:u}):Nc(u)}function Nc(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var mf={toGeoJSON:function(a){return ko(this,{type:"Point",coordinates:pf(this.getLatLng(),a)})}};Rc.include(mf),ff.include(mf),Lc.include(mf),Ss.include({toGeoJSON:function(a){var u=!Ci(this._latlngs),m=Oc(this._latlngs,u?1:0,!1,a);return ko(this,{type:(u?"Multi":"")+"LineString",coordinates:m})}}),No.include({toGeoJSON:function(a){var u=!Ci(this._latlngs),m=u&&!Ci(this._latlngs[0]),b=Oc(this._latlngs,m?2:u?1:0,!0,a);return u||(b=[b]),ko(this,{type:(m?"Multi":"")+"Polygon",coordinates:b})}}),Do.include({toMultiPoint:function(a){var u=[];return this.eachLayer(function(m){u.push(m.toGeoJSON(a).geometry.coordinates)}),ko(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(a){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(a);var m=u==="GeometryCollection",b=[];return this.eachLayer(function(M){if(M.toGeoJSON){var I=M.toGeoJSON(a);if(m)b.push(I.geometry);else{var B=Nc(I);B.type==="FeatureCollection"?b.push.apply(b,B.features):b.push(B)}}}),m?ko(this,{geometries:b,type:"GeometryCollection"}):{type:"FeatureCollection",features:b}}});function Fg(a,u){return new Cs(a,u)}var Sb=Fg,kc=Ui.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,u,m){this._url=a,this._bounds=At(u),y(this,m)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ee(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){oe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&Kt(this._image),this},bringToBack:function(){return this._map&&je(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=At(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",u=this._image=a?this._url:Qt("img");if(ee(u,"leaflet-image-layer"),this._zoomAnimated&&ee(u,"leaflet-zoom-animated"),this.options.className&&ee(u,this.options.className),u.onselectstart=d,u.onmousemove=d,u.onload=o(this.fire,this,"load"),u.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(a){var u=this._map.getZoomScale(a.zoom),m=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;pn(this._image,m,u)},_reset:function(){var a=this._image,u=new gt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),m=u.getSize();Ie(a,u.min),a.style.width=m.x+"px",a.style.height=m.y+"px"},_updateOpacity:function(){Pe(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),Cb=function(a,u,m){return new kc(a,u,m)},Ug=kc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",u=this._image=a?this._url:Qt("video");if(ee(u,"leaflet-image-layer"),this._zoomAnimated&&ee(u,"leaflet-zoom-animated"),this.options.className&&ee(u,this.options.className),u.onselectstart=d,u.onmousemove=d,u.onloadeddata=o(this.fire,this,"load"),a){for(var m=u.getElementsByTagName("source"),b=[],M=0;M<m.length;M++)b.push(m[M].src);this._url=m.length>0?b:[u.src];return}C(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var I=0;I<this._url.length;I++){var B=Qt("source");B.src=this._url[I],u.appendChild(B)}}});function wb(a,u,m){return new Ug(a,u,m)}var Bg=kc.extend({_initImage:function(){var a=this._image=this._url;ee(a,"leaflet-image-layer"),this._zoomAnimated&&ee(a,"leaflet-zoom-animated"),this.options.className&&ee(a,this.options.className),a.onselectstart=d,a.onmousemove=d}});function Tb(a,u,m){return new Bg(a,u,m)}var es=Ui.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,u){a&&(a instanceof K||C(a))?(this._latlng=st(a),y(this,u)):(y(this,a),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&Pe(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&Pe(this._container,1),this.bringToFront(),this.options.interactive&&(ee(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(Pe(this._container,0),this._removeTimeout=setTimeout(o(oe,void 0,this._container),200)):oe(this._container),this.options.interactive&&($e(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=st(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Kt(this._container),this},bringToBack:function(){return this._map&&je(this._container),this},_prepareOpen:function(a){var u=this._source;if(!u._map)return!1;if(u instanceof Ms){u=null;var m=this._source._layers;for(var b in m)if(m[b]._map){u=m[b];break}if(!u)return!1;this._source=u}if(!a)if(u.getCenter)a=u.getCenter();else if(u.getLatLng)a=u.getLatLng();else if(u.getBounds)a=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")a.innerHTML=u;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),u=rt(this.options.offset),m=this._getAnchor();this._zoomAnimated?Ie(this._container,a.add(m)):u=u.add(a).add(m);var b=this._containerBottom=-u.y,M=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=b+"px",this._container.style.left=M+"px"}},_getAnchor:function(){return[0,0]}});ke.include({_initOverlay:function(a,u,m,b){var M=u;return M instanceof a||(M=new a(b).setContent(u)),m&&M.setLatLng(m),M}}),Ui.include({_initOverlay:function(a,u,m,b){var M=m;return M instanceof a?(y(M,b),M._source=this):(M=u&&!b?u:new a(b,this),M.setContent(m)),M}});var Fc=es.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,es.prototype.openOn.call(this,a)},onAdd:function(a){es.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof rr||this._source.on("preclick",Hr))},onRemove:function(a){es.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof rr||this._source.off("preclick",Hr))},getEvents:function(){var a=es.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",u=this._container=Qt("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),m=this._wrapper=Qt("div",a+"-content-wrapper",u);if(this._contentNode=Qt("div",a+"-content",m),tl(u),sf(this._contentNode),me(u,"contextmenu",Hr),this._tipContainer=Qt("div",a+"-tip-container",u),this._tip=Qt("div",a+"-tip",this._tipContainer),this.options.closeButton){var b=this._closeButton=Qt("a",a+"-close-button",u);b.setAttribute("role","button"),b.setAttribute("aria-label","Close popup"),b.href="#close",b.innerHTML='<span aria-hidden="true">&#215;</span>',me(b,"click",function(M){kn(M),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,u=a.style;u.width="",u.whiteSpace="nowrap";var m=a.offsetWidth;m=Math.min(m,this.options.maxWidth),m=Math.max(m,this.options.minWidth),u.width=m+1+"px",u.whiteSpace="",u.height="";var b=a.offsetHeight,M=this.options.maxHeight,I="leaflet-popup-scrolled";M&&b>M?(u.height=M+"px",ee(a,I)):$e(a,I),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),m=this._getAnchor();Ie(this._container,u.add(m))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,u=parseInt(Ne(this._container,"marginBottom"),10)||0,m=this._container.offsetHeight+u,b=this._containerWidth,M=new V(this._containerLeft,-m-this._containerBottom);M._add(ki(this._container));var I=a.layerPointToContainerPoint(M),B=rt(this.options.autoPanPadding),J=rt(this.options.autoPanPaddingTopLeft||B),it=rt(this.options.autoPanPaddingBottomRight||B),ht=a.getSize(),Lt=0,ae=0;I.x+b+it.x>ht.x&&(Lt=I.x+b-ht.x+it.x),I.x-Lt-J.x<0&&(Lt=I.x-J.x),I.y+m+it.y>ht.y&&(ae=I.y+m-ht.y+it.y),I.y-ae-J.y<0&&(ae=I.y-J.y),(Lt||ae)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([Lt,ae]))}},_getAnchor:function(){return rt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Eb=function(a,u){return new Fc(a,u)};ke.mergeOptions({closePopupOnClick:!0}),ke.include({openPopup:function(a,u,m){return this._initOverlay(Fc,a,u,m).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),Ui.include({bindPopup:function(a,u){return this._popup=this._initOverlay(Fc,this._popup,a,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof Ms||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){Vr(a);var u=a.layer||a.target;if(this._popup._source===u&&!(u instanceof rr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=u,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var Uc=es.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){es.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){es.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=es.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",u=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Qt("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var u,m,b=this._map,M=this._container,I=b.latLngToContainerPoint(b.getCenter()),B=b.layerPointToContainerPoint(a),J=this.options.direction,it=M.offsetWidth,ht=M.offsetHeight,Lt=rt(this.options.offset),ae=this._getAnchor();J==="top"?(u=it/2,m=ht):J==="bottom"?(u=it/2,m=0):J==="center"?(u=it/2,m=ht/2):J==="right"?(u=0,m=ht/2):J==="left"?(u=it,m=ht/2):B.x<I.x?(J="right",u=0,m=ht/2):(J="left",u=it+(Lt.x+ae.x)*2,m=ht/2),a=a.subtract(rt(u,m,!0)).add(Lt).add(ae),$e(M,"leaflet-tooltip-right"),$e(M,"leaflet-tooltip-left"),$e(M,"leaflet-tooltip-top"),$e(M,"leaflet-tooltip-bottom"),ee(M,"leaflet-tooltip-"+J),Ie(M,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&Pe(this._container,a)},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(u)},_getAnchor:function(){return rt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ab=function(a,u){return new Uc(a,u)};ke.include({openTooltip:function(a,u,m){return this._initOverlay(Uc,a,u,m).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),Ui.include({bindTooltip:function(a,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Uc,this._tooltip,a,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var u=a?"off":"on",m={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?m.add=this._openTooltip:(m.mouseover=this._openTooltip,m.mouseout=this.closeTooltip,m.click=this._openTooltip,this._map?this._addFocusListeners():m.add=this._addFocusListeners),this._tooltip.options.sticky&&(m.mousemove=this._moveTooltip),this[u](m),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof Ms||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var u=typeof a.getElement=="function"&&a.getElement();u&&(me(u,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),me(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var u=typeof a.getElement=="function"&&a.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var u=a.latlng,m,b;this._tooltip.options.sticky&&a.originalEvent&&(m=this._map.mouseEventToContainerPoint(a.originalEvent),b=this._map.containerPointToLayerPoint(m),u=this._map.layerPointToLatLng(b)),this._tooltip.setLatLng(u)}});var zg=Oo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var u=a&&a.tagName==="DIV"?a:document.createElement("div"),m=this.options;if(m.html instanceof Element?(ze(u),u.appendChild(m.html)):u.innerHTML=m.html!==!1?m.html:"",m.bgPos){var b=rt(m.bgPos);u.style.backgroundPosition=-b.x+"px "+-b.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function Pb(a){return new zg(a)}Oo.Default=il;var sl=Ui.extend({options:{tileSize:256,opacity:1,updateWhenIdle:qt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){y(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),oe(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Kt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(je(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=h(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof V?a:new V(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var u=this.getPane().children,m=-a(-1/0,1/0),b=0,M=u.length,I;b<M;b++)I=u[b].style.zIndex,u[b]!==this._container&&I&&(m=a(m,+I));isFinite(m)&&(this.options.zIndex=m+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!qt.ielt9){Pe(this._container,this.options.opacity);var a=+new Date,u=!1,m=!1;for(var b in this._tiles){var M=this._tiles[b];if(!(!M.current||!M.loaded)){var I=Math.min(1,(a-M.loaded)/200);Pe(M.el,I),I<1?u=!0:(M.active?m=!0:this._onOpaqueTile(M),M.active=!0)}}m&&!this._noPrune&&this._pruneTiles(),u&&(H(this._fadeFrame),this._fadeFrame=k(this._updateOpacity,this))}},_onOpaqueTile:d,_initContainer:function(){this._container||(this._container=Qt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,u=this.options.maxZoom;if(a!==void 0){for(var m in this._levels)m=Number(m),this._levels[m].el.children.length||m===a?(this._levels[m].el.style.zIndex=u-Math.abs(a-m),this._onUpdateLevel(m)):(oe(this._levels[m].el),this._removeTilesAtZoom(m),this._onRemoveLevel(m),delete this._levels[m]);var b=this._levels[a],M=this._map;return b||(b=this._levels[a]={},b.el=Qt("div","leaflet-tile-container leaflet-zoom-animated",this._container),b.el.style.zIndex=u,b.origin=M.project(M.unproject(M.getPixelOrigin()),a).round(),b.zoom=a,this._setZoomTransform(b,M.getCenter(),M.getZoom()),d(b.el.offsetWidth),this._onCreateLevel(b)),this._level=b,b}},_onUpdateLevel:d,_onRemoveLevel:d,_onCreateLevel:d,_pruneTiles:function(){if(this._map){var a,u,m=this._map.getZoom();if(m>this.options.maxZoom||m<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)u=this._tiles[a],u.retain=u.current;for(a in this._tiles)if(u=this._tiles[a],u.current&&!u.active){var b=u.coords;this._retainParent(b.x,b.y,b.z,b.z-5)||this._retainChildren(b.x,b.y,b.z,b.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var u in this._tiles)this._tiles[u].coords.z===a&&this._removeTile(u)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)oe(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,u,m,b){var M=Math.floor(a/2),I=Math.floor(u/2),B=m-1,J=new V(+M,+I);J.z=+B;var it=this._tileCoordsToKey(J),ht=this._tiles[it];return ht&&ht.active?(ht.retain=!0,!0):(ht&&ht.loaded&&(ht.retain=!0),B>b?this._retainParent(M,I,B,b):!1)},_retainChildren:function(a,u,m,b){for(var M=2*a;M<2*a+2;M++)for(var I=2*u;I<2*u+2;I++){var B=new V(M,I);B.z=m+1;var J=this._tileCoordsToKey(B),it=this._tiles[J];if(it&&it.active){it.retain=!0;continue}else it&&it.loaded&&(it.retain=!0);m+1<b&&this._retainChildren(M,I,m+1,b)}},_resetView:function(a){var u=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var u=this.options;return u.minNativeZoom!==void 0&&a<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<a?u.maxNativeZoom:a},_setView:function(a,u,m,b){var M=Math.round(u);this.options.maxZoom!==void 0&&M>this.options.maxZoom||this.options.minZoom!==void 0&&M<this.options.minZoom?M=void 0:M=this._clampZoom(M);var I=this.options.updateWhenZooming&&M!==this._tileZoom;(!b||I)&&(this._tileZoom=M,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),M!==void 0&&this._update(a),m||this._pruneTiles(),this._noPrune=!!m),this._setZoomTransforms(a,u)},_setZoomTransforms:function(a,u){for(var m in this._levels)this._setZoomTransform(this._levels[m],a,u)},_setZoomTransform:function(a,u,m){var b=this._map.getZoomScale(m,a.zoom),M=a.origin.multiplyBy(b).subtract(this._map._getNewPixelOrigin(u,m)).round();qt.any3d?pn(a.el,M,b):Ie(a.el,M)},_resetGrid:function(){var a=this._map,u=a.options.crs,m=this._tileSize=this.getTileSize(),b=this._tileZoom,M=this._map.getPixelWorldBounds(this._tileZoom);M&&(this._globalTileRange=this._pxBoundsToTileRange(M)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,u.wrapLng[0]],b).x/m.x),Math.ceil(a.project([0,u.wrapLng[1]],b).x/m.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([u.wrapLat[0],0],b).y/m.x),Math.ceil(a.project([u.wrapLat[1],0],b).y/m.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var u=this._map,m=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),b=u.getZoomScale(m,this._tileZoom),M=u.project(a,this._tileZoom).floor(),I=u.getSize().divideBy(b*2);return new gt(M.subtract(I),M.add(I))},_update:function(a){var u=this._map;if(u){var m=this._clampZoom(u.getZoom());if(a===void 0&&(a=u.getCenter()),this._tileZoom!==void 0){var b=this._getTiledPixelBounds(a),M=this._pxBoundsToTileRange(b),I=M.getCenter(),B=[],J=this.options.keepBuffer,it=new gt(M.getBottomLeft().subtract([J,-J]),M.getTopRight().add([J,-J]));if(!(isFinite(M.min.x)&&isFinite(M.min.y)&&isFinite(M.max.x)&&isFinite(M.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ht in this._tiles){var Lt=this._tiles[ht].coords;(Lt.z!==this._tileZoom||!it.contains(new V(Lt.x,Lt.y)))&&(this._tiles[ht].current=!1)}if(Math.abs(m-this._tileZoom)>1){this._setView(a,m);return}for(var ae=M.min.y;ae<=M.max.y;ae++)for(var Se=M.min.x;Se<=M.max.x;Se++){var Yn=new V(Se,ae);if(Yn.z=this._tileZoom,!!this._isValidTile(Yn)){var Pn=this._tiles[this._tileCoordsToKey(Yn)];Pn?Pn.current=!0:B.push(Yn)}}if(B.sort(function(oi,Uo){return oi.distanceTo(I)-Uo.distanceTo(I)}),B.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var wi=document.createDocumentFragment();for(Se=0;Se<B.length;Se++)this._addTile(B[Se],wi);this._level.el.appendChild(wi)}}}},_isValidTile:function(a){var u=this._map.options.crs;if(!u.infinite){var m=this._globalTileRange;if(!u.wrapLng&&(a.x<m.min.x||a.x>m.max.x)||!u.wrapLat&&(a.y<m.min.y||a.y>m.max.y))return!1}if(!this.options.bounds)return!0;var b=this._tileCoordsToBounds(a);return At(this.options.bounds).overlaps(b)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var u=this._map,m=this.getTileSize(),b=a.scaleBy(m),M=b.add(m),I=u.unproject(b,a.z),B=u.unproject(M,a.z);return[I,B]},_tileCoordsToBounds:function(a){var u=this._tileCoordsToNwSe(a),m=new Dt(u[0],u[1]);return this.options.noWrap||(m=this._map.wrapLatLngBounds(m)),m},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var u=a.split(":"),m=new V(+u[0],+u[1]);return m.z=+u[2],m},_removeTile:function(a){var u=this._tiles[a];u&&(oe(u.el),delete this._tiles[a],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){ee(a,"leaflet-tile");var u=this.getTileSize();a.style.width=u.x+"px",a.style.height=u.y+"px",a.onselectstart=d,a.onmousemove=d,qt.ielt9&&this.options.opacity<1&&Pe(a,this.options.opacity)},_addTile:function(a,u){var m=this._getTilePos(a),b=this._tileCoordsToKey(a),M=this.createTile(this._wrapCoords(a),o(this._tileReady,this,a));this._initTile(M),this.createTile.length<2&&k(o(this._tileReady,this,a,null,M)),Ie(M,m),this._tiles[b]={el:M,coords:a,current:!0},u.appendChild(M),this.fire("tileloadstart",{tile:M,coords:a})},_tileReady:function(a,u,m){u&&this.fire("tileerror",{error:u,tile:m,coords:a});var b=this._tileCoordsToKey(a);m=this._tiles[b],m&&(m.loaded=+new Date,this._map._fadeAnimated?(Pe(m.el,0),H(this._fadeFrame),this._fadeFrame=k(this._updateOpacity,this)):(m.active=!0,this._pruneTiles()),u||(ee(m.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:m.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),qt.ielt9||!this._map._fadeAnimated?k(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var u=new V(this._wrapX?f(a.x,this._wrapX):a.x,this._wrapY?f(a.y,this._wrapY):a.y);return u.z=a.z,u},_pxBoundsToTileRange:function(a){var u=this.getTileSize();return new gt(a.min.unscaleBy(u).floor(),a.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function Rb(a){return new sl(a)}var Fo=sl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,u){this._url=a,u=y(this,u),u.detectRetina&&qt.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,u){return this._url===a&&u===void 0&&(u=!0),this._url=a,u||this.redraw(),this},createTile:function(a,u){var m=document.createElement("img");return me(m,"load",o(this._tileOnLoad,this,u,m)),me(m,"error",o(this._tileOnError,this,u,m)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(m.referrerPolicy=this.options.referrerPolicy),m.alt="",m.src=this.getTileUrl(a),m},getTileUrl:function(a){var u={r:qt.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var m=this._globalTileRange.max.y-a.y;this.options.tms&&(u.y=m),u["-y"]=m}return w(this._url,s(u,this.options))},_tileOnLoad:function(a,u){qt.ielt9?setTimeout(o(a,this,null,u),0):a(null,u)},_tileOnError:function(a,u,m){var b=this.options.errorTileUrl;b&&u.getAttribute("src")!==b&&(u.src=b),a(m,u)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,u=this.options.maxZoom,m=this.options.zoomReverse,b=this.options.zoomOffset;return m&&(a=u-a),a+b},_getSubdomain:function(a){var u=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var a,u;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(u=this._tiles[a].el,u.onload=d,u.onerror=d,!u.complete)){u.src=T;var m=this._tiles[a].coords;oe(u),delete this._tiles[a],this.fire("tileabort",{tile:u,coords:m})}},_removeTile:function(a){var u=this._tiles[a];if(u)return u.el.setAttribute("src",T),sl.prototype._removeTile.call(this,a)},_tileReady:function(a,u,m){if(!(!this._map||m&&m.getAttribute("src")===T))return sl.prototype._tileReady.call(this,a,u,m)}});function Hg(a,u){return new Fo(a,u)}var Vg=Fo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,u){this._url=a;var m=s({},this.defaultWmsParams);for(var b in u)b in this.options||(m[b]=u[b]);u=y(this,u);var M=u.detectRetina&&qt.retina?2:1,I=this.getTileSize();m.width=I.x*M,m.height=I.y*M,this.wmsParams=m},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,Fo.prototype.onAdd.call(this,a)},getTileUrl:function(a){var u=this._tileCoordsToNwSe(a),m=this._crs,b=It(m.project(u[0]),m.project(u[1])),M=b.min,I=b.max,B=(this._wmsVersion>=1.3&&this._crs===Og?[M.y,M.x,I.y,I.x]:[M.x,M.y,I.x,I.y]).join(","),J=Fo.prototype.getTileUrl.call(this,a);return J+x(this.wmsParams,J,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+B},setParams:function(a,u){return s(this.wmsParams,a),u||this.redraw(),this}});function Lb(a,u){return new Vg(a,u)}Fo.WMS=Vg,Hg.wms=Lb;var ws=Ui.extend({options:{padding:.1},initialize:function(a){y(this,a),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ee(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,u){var m=this._map.getZoomScale(u,this._zoom),b=this._map.getSize().multiplyBy(.5+this.options.padding),M=this._map.project(this._center,u),I=b.multiplyBy(-m).add(M).subtract(this._map._getNewPixelOrigin(a,u));qt.any3d?pn(this._container,I,m):Ie(this._container,I)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,u=this._map.getSize(),m=this._map.containerPointToLayerPoint(u.multiplyBy(-a)).round();this._bounds=new gt(m,m.add(u.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Wg=ws.extend({options:{tolerance:0},getEvents:function(){var a=ws.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ws.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");me(a,"mousemove",this._onMouseMove,this),me(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),me(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){H(this._redrawRequest),delete this._ctx,oe(this._container),sn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var u in this._layers)a=this._layers[u],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ws.prototype._update.call(this);var a=this._bounds,u=this._container,m=a.getSize(),b=qt.retina?2:1;Ie(u,a.min),u.width=b*m.x,u.height=b*m.y,u.style.width=m.x+"px",u.style.height=m.y+"px",qt.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){ws.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[c(a)]=a;var u=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var u=a._order,m=u.next,b=u.prev;m?m.prev=b:this._drawLast=b,b?b.next=m:this._drawFirst=m,delete a._order,delete this._layers[c(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var u=a.options.dashArray.split(/[, ]+/),m=[],b,M;for(M=0;M<u.length;M++){if(b=Number(u[M]),isNaN(b))return;m.push(b)}a.options._dashArray=m}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||k(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var u=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new gt,this._redrawBounds.extend(a._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(a._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var u=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,u=this._redrawBounds;if(this._ctx.save(),u){var m=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,m.x,m.y),this._ctx.clip()}this._drawing=!0;for(var b=this._drawFirst;b;b=b.next)a=b.layer,(!u||a._pxBounds&&a._pxBounds.intersects(u))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,u){if(this._drawing){var m,b,M,I,B=a._parts,J=B.length,it=this._ctx;if(J){for(it.beginPath(),m=0;m<J;m++){for(b=0,M=B[m].length;b<M;b++)I=B[m][b],it[b?"lineTo":"moveTo"](I.x,I.y);u&&it.closePath()}this._fillStroke(it,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var u=a._point,m=this._ctx,b=Math.max(Math.round(a._radius),1),M=(Math.max(Math.round(a._radiusY),1)||b)/b;M!==1&&(m.save(),m.scale(1,M)),m.beginPath(),m.arc(u.x,u.y/M,b,0,Math.PI*2,!1),M!==1&&m.restore(),this._fillStroke(m,a)}},_fillStroke:function(a,u){var m=u.options;m.fill&&(a.globalAlpha=m.fillOpacity,a.fillStyle=m.fillColor||m.color,a.fill(m.fillRule||"evenodd")),m.stroke&&m.weight!==0&&(a.setLineDash&&a.setLineDash(u.options&&u.options._dashArray||[]),a.globalAlpha=m.opacity,a.lineWidth=m.weight,a.strokeStyle=m.color,a.lineCap=m.lineCap,a.lineJoin=m.lineJoin,a.stroke())},_onClick:function(a){for(var u=this._map.mouseEventToLayerPoint(a),m,b,M=this._drawFirst;M;M=M.next)m=M.layer,m.options.interactive&&m._containsPoint(u)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(m))&&(b=m);this._fireEvent(b?[b]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,u)}},_handleMouseOut:function(a){var u=this._hoveredLayer;u&&($e(this._container,"leaflet-interactive"),this._fireEvent([u],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,u){if(!this._mouseHoverThrottled){for(var m,b,M=this._drawFirst;M;M=M.next)m=M.layer,m.options.interactive&&m._containsPoint(u)&&(b=m);b!==this._hoveredLayer&&(this._handleMouseOut(a),b&&(ee(this._container,"leaflet-interactive"),this._fireEvent([b],a,"mouseover"),this._hoveredLayer=b)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,u,m){this._map._fireDOMEvent(u,m||u.type,a)},_bringToFront:function(a){var u=a._order;if(u){var m=u.next,b=u.prev;if(m)m.prev=b;else return;b?b.next=m:m&&(this._drawFirst=m),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(a)}},_bringToBack:function(a){var u=a._order;if(u){var m=u.next,b=u.prev;if(b)b.next=m;else return;m?m.prev=b:b&&(this._drawLast=b),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(a)}}});function Gg(a){return qt.canvas?new Wg(a):null}var rl=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Ib={_initContainer:function(){this._container=Qt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ws.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var u=a._container=rl("shape");ee(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",a._path=rl("path"),u.appendChild(a._path),this._updateStyle(a),this._layers[c(a)]=a},_addPath:function(a){var u=a._container;this._container.appendChild(u),a.options.interactive&&a.addInteractiveTarget(u)},_removePath:function(a){var u=a._container;oe(u),a.removeInteractiveTarget(u),delete this._layers[c(a)]},_updateStyle:function(a){var u=a._stroke,m=a._fill,b=a.options,M=a._container;M.stroked=!!b.stroke,M.filled=!!b.fill,b.stroke?(u||(u=a._stroke=rl("stroke")),M.appendChild(u),u.weight=b.weight+"px",u.color=b.color,u.opacity=b.opacity,b.dashArray?u.dashStyle=C(b.dashArray)?b.dashArray.join(" "):b.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=b.lineCap.replace("butt","flat"),u.joinstyle=b.lineJoin):u&&(M.removeChild(u),a._stroke=null),b.fill?(m||(m=a._fill=rl("fill")),M.appendChild(m),m.color=b.fillColor||b.color,m.opacity=b.fillOpacity):m&&(M.removeChild(m),a._fill=null)},_updateCircle:function(a){var u=a._point.round(),m=Math.round(a._radius),b=Math.round(a._radiusY||m);this._setPath(a,a._empty()?"M0 0":"AL "+u.x+","+u.y+" "+m+","+b+" 0,"+65535*360)},_setPath:function(a,u){a._path.v=u},_bringToFront:function(a){Kt(a._container)},_bringToBack:function(a){je(a._container)}},Bc=qt.vml?rl:Vt,ol=ws.extend({_initContainer:function(){this._container=Bc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Bc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){oe(this._container),sn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ws.prototype._update.call(this);var a=this._bounds,u=a.getSize(),m=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,m.setAttribute("width",u.x),m.setAttribute("height",u.y)),Ie(m,a.min),m.setAttribute("viewBox",[a.min.x,a.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(a){var u=a._path=Bc("path");a.options.className&&ee(u,a.options.className),a.options.interactive&&ee(u,"leaflet-interactive"),this._updateStyle(a),this._layers[c(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){oe(a._path),a.removeInteractiveTarget(a._path),delete this._layers[c(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var u=a._path,m=a.options;u&&(m.stroke?(u.setAttribute("stroke",m.color),u.setAttribute("stroke-opacity",m.opacity),u.setAttribute("stroke-width",m.weight),u.setAttribute("stroke-linecap",m.lineCap),u.setAttribute("stroke-linejoin",m.lineJoin),m.dashArray?u.setAttribute("stroke-dasharray",m.dashArray):u.removeAttribute("stroke-dasharray"),m.dashOffset?u.setAttribute("stroke-dashoffset",m.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),m.fill?(u.setAttribute("fill",m.fillColor||m.color),u.setAttribute("fill-opacity",m.fillOpacity),u.setAttribute("fill-rule",m.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(a,u){this._setPath(a,ye(a._parts,u))},_updateCircle:function(a){var u=a._point,m=Math.max(Math.round(a._radius),1),b=Math.max(Math.round(a._radiusY),1)||m,M="a"+m+","+b+" 0 1,0 ",I=a._empty()?"M0 0":"M"+(u.x-m)+","+u.y+M+m*2+",0 "+M+-m*2+",0 ";this._setPath(a,I)},_setPath:function(a,u){a._path.setAttribute("d",u)},_bringToFront:function(a){Kt(a._path)},_bringToBack:function(a){je(a._path)}});qt.vml&&ol.include(Ib);function jg(a){return qt.svg||qt.vml?new ol(a):null}ke.include({getRenderer:function(a){var u=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var u=this._paneRenderers[a];return u===void 0&&(u=this._createRenderer({pane:a}),this._paneRenderers[a]=u),u},_createRenderer:function(a){return this.options.preferCanvas&&Gg(a)||jg(a)}});var Xg=No.extend({initialize:function(a,u){No.prototype.initialize.call(this,this._boundsToLatLngs(a),u)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=At(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function Db(a,u){return new Xg(a,u)}ol.create=Bc,ol.pointsToPath=ye,Cs.geometryToLayer=Ic,Cs.coordsToLatLng=df,Cs.coordsToLatLngs=Dc,Cs.latLngToCoords=pf,Cs.latLngsToCoords=Oc,Cs.getFeature=ko,Cs.asFeature=Nc,ke.mergeOptions({boxZoom:!0});var Zg=ts.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){me(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){sn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){oe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),pi(),qu(),this._startPoint=this._map.mouseEventToContainerPoint(a),me(document,{contextmenu:Vr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=Qt("div","leaflet-zoom-box",this._container),ee(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var u=new gt(this._point,this._startPoint),m=u.getSize();Ie(this._box,u.min),this._box.style.width=m.x+"px",this._box.style.height=m.y+"px"},_finish:function(){this._moved&&(oe(this._box),$e(this._container,"leaflet-crosshair")),Ja(),$u(),sn(document,{contextmenu:Vr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var u=new Dt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ke.addInitHook("addHandler","boxZoom",Zg),ke.mergeOptions({doubleClickZoom:!0});var Yg=ts.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var u=this._map,m=u.getZoom(),b=u.options.zoomDelta,M=a.originalEvent.shiftKey?m-b:m+b;u.options.doubleClickZoom==="center"?u.setZoom(M):u.setZoomAround(a.containerPoint,M)}});ke.addInitHook("addHandler","doubleClickZoom",Yg),ke.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var qg=ts.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new sr(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}ee(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){$e(this._map._container,"leaflet-grab"),$e(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=At(this._map.options.maxBounds);this._offsetLimit=It(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var u=this._lastTime=+new Date,m=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(m),this._times.push(u),this._prunePositions(u)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,u){return a-(a-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;a.x<u.min.x&&(a.x=this._viscousLimit(a.x,u.min.x)),a.y<u.min.y&&(a.y=this._viscousLimit(a.y,u.min.y)),a.x>u.max.x&&(a.x=this._viscousLimit(a.x,u.max.x)),a.y>u.max.y&&(a.y=this._viscousLimit(a.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,u=Math.round(a/2),m=this._initialWorldOffset,b=this._draggable._newPos.x,M=(b-u+m)%a+u-m,I=(b+u+m)%a-u-m,B=Math.abs(M+m)<Math.abs(I+m)?M:I;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=B},_onDragEnd:function(a){var u=this._map,m=u.options,b=!m.inertia||a.noInertia||this._times.length<2;if(u.fire("dragend",a),b)u.fire("moveend");else{this._prunePositions(+new Date);var M=this._lastPos.subtract(this._positions[0]),I=(this._lastTime-this._times[0])/1e3,B=m.easeLinearity,J=M.multiplyBy(B/I),it=J.distanceTo([0,0]),ht=Math.min(m.inertiaMaxSpeed,it),Lt=J.multiplyBy(ht/it),ae=ht/(m.inertiaDeceleration*B),Se=Lt.multiplyBy(-ae/2).round();!Se.x&&!Se.y?u.fire("moveend"):(Se=u._limitOffset(Se,u.options.maxBounds),k(function(){u.panBy(Se,{duration:ae,easeLinearity:B,noMoveStart:!0,animate:!0})}))}}});ke.addInitHook("addHandler","dragging",qg),ke.mergeOptions({keyboard:!0,keyboardPanDelta:80});var $g=ts.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),me(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),sn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,u=document.documentElement,m=a.scrollTop||u.scrollTop,b=a.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(b,m)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var u=this._panKeys={},m=this.keyCodes,b,M;for(b=0,M=m.left.length;b<M;b++)u[m.left[b]]=[-1*a,0];for(b=0,M=m.right.length;b<M;b++)u[m.right[b]]=[a,0];for(b=0,M=m.down.length;b<M;b++)u[m.down[b]]=[0,a];for(b=0,M=m.up.length;b<M;b++)u[m.up[b]]=[0,-1*a]},_setZoomDelta:function(a){var u=this._zoomKeys={},m=this.keyCodes,b,M;for(b=0,M=m.zoomIn.length;b<M;b++)u[m.zoomIn[b]]=a;for(b=0,M=m.zoomOut.length;b<M;b++)u[m.zoomOut[b]]=-a},_addHooks:function(){me(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){sn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var u=a.keyCode,m=this._map,b;if(u in this._panKeys){if(!m._panAnim||!m._panAnim._inProgress)if(b=this._panKeys[u],a.shiftKey&&(b=rt(b).multiplyBy(3)),m.options.maxBounds&&(b=m._limitOffset(rt(b),m.options.maxBounds)),m.options.worldCopyJump){var M=m.wrapLatLng(m.unproject(m.project(m.getCenter()).add(b)));m.panTo(M)}else m.panBy(b)}else if(u in this._zoomKeys)m.setZoom(m.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&m._popup&&m._popup.options.closeOnEscapeKey)m.closePopup();else return;Vr(a)}}});ke.addInitHook("addHandler","keyboard",$g),ke.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Kg=ts.extend({addHooks:function(){me(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){sn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var u=bg(a),m=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var b=Math.max(m-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),b),Vr(a)},_performZoom:function(){var a=this._map,u=a.getZoom(),m=this._map.options.zoomSnap||0;a._stop();var b=this._delta/(this._map.options.wheelPxPerZoomLevel*4),M=4*Math.log(2/(1+Math.exp(-Math.abs(b))))/Math.LN2,I=m?Math.ceil(M/m)*m:M,B=a._limitZoom(u+(this._delta>0?I:-I))-u;this._delta=0,this._startTime=null,B&&(a.options.scrollWheelZoom==="center"?a.setZoom(u+B):a.setZoomAround(this._lastMousePos,u+B))}});ke.addInitHook("addHandler","scrollWheelZoom",Kg);var Ob=600;ke.mergeOptions({tapHold:qt.touchNative&&qt.safari&&qt.mobile,tapTolerance:15});var Jg=ts.extend({addHooks:function(){me(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){sn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var u=a.touches[0];this._startPos=this._newPos=new V(u.clientX,u.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(me(document,"touchend",kn),me(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),Ob),me(document,"touchend touchcancel contextmenu",this._cancel,this),me(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){sn(document,"touchend",kn),sn(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),sn(document,"touchend touchcancel contextmenu",this._cancel,this),sn(document,"touchmove",this._onMove,this)},_onMove:function(a){var u=a.touches[0];this._newPos=new V(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,u){var m=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});m._simulated=!0,u.target.dispatchEvent(m)}});ke.addInitHook("addHandler","tapHold",Jg),ke.mergeOptions({touchZoom:qt.touch,bounceAtZoomLimits:!0});var Qg=ts.extend({addHooks:function(){ee(this._map._container,"leaflet-touch-zoom"),me(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){$e(this._map._container,"leaflet-touch-zoom"),sn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var u=this._map;if(!(!a.touches||a.touches.length!==2||u._animatingZoom||this._zooming)){var m=u.mouseEventToContainerPoint(a.touches[0]),b=u.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(m.add(b)._divideBy(2))),this._startDist=m.distanceTo(b),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),me(document,"touchmove",this._onTouchMove,this),me(document,"touchend touchcancel",this._onTouchEnd,this),kn(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var u=this._map,m=u.mouseEventToContainerPoint(a.touches[0]),b=u.mouseEventToContainerPoint(a.touches[1]),M=m.distanceTo(b)/this._startDist;if(this._zoom=u.getScaleZoom(M,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&M<1||this._zoom>u.getMaxZoom()&&M>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,M===1)return}else{var I=m._add(b)._divideBy(2)._subtract(this._centerPoint);if(M===1&&I.x===0&&I.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(I),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),H(this._animRequest);var B=o(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=k(B,this,!0),kn(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,H(this._animRequest),sn(document,"touchmove",this._onTouchMove,this),sn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ke.addInitHook("addHandler","touchZoom",Qg),ke.BoxZoom=Zg,ke.DoubleClickZoom=Yg,ke.Drag=qg,ke.Keyboard=$g,ke.ScrollWheelZoom=Kg,ke.TapHold=Jg,ke.TouchZoom=Qg,e.Bounds=gt,e.Browser=qt,e.CRS=dt,e.Canvas=Wg,e.Circle=ff,e.CircleMarker=Lc,e.Class=G,e.Control=Fi,e.DivIcon=zg,e.DivOverlay=es,e.DomEvent=Jy,e.DomUtil=$y,e.Draggable=sr,e.Evented=et,e.FeatureGroup=Ms,e.GeoJSON=Cs,e.GridLayer=sl,e.Handler=ts,e.Icon=Oo,e.ImageOverlay=kc,e.LatLng=K,e.LatLngBounds=Dt,e.Layer=Ui,e.LayerGroup=Do,e.LineUtil=ub,e.Map=ke,e.Marker=Rc,e.Mixin=rb,e.Path=rr,e.Point=V,e.PolyUtil=ob,e.Polygon=No,e.Polyline=Ss,e.Popup=Fc,e.PosAnimation=Mg,e.Projection=fb,e.Rectangle=Xg,e.Renderer=ws,e.SVG=ol,e.SVGOverlay=Bg,e.TileLayer=Fo,e.Tooltip=Uc,e.Transformation=Le,e.Util=q,e.VideoOverlay=Ug,e.bind=o,e.bounds=It,e.canvas=Gg,e.circle=yb,e.circleMarker=xb,e.control=el,e.divIcon=Pb,e.extend=s,e.featureGroup=gb,e.geoJSON=Fg,e.geoJson=Sb,e.gridLayer=Rb,e.icon=_b,e.imageOverlay=Cb,e.latLng=st,e.latLngBounds=At,e.layerGroup=mb,e.map=Qy,e.marker=vb,e.point=rt,e.polygon=Mb,e.polyline=bb,e.popup=Eb,e.rectangle=Db,e.setOptions=y,e.stamp=c,e.svg=jg,e.svgOverlay=Tb,e.tileLayer=Hg,e.tooltip=Ab,e.transformation=se,e.version=i,e.videoOverlay=wb;var Nb=window.L;e.noConflict=function(){return window.L=Nb,this},window.L=e}))})(Nl,Nl.exports)),Nl.exports}var cN=lN();const Id=oN(cN),hN=n=>getComputedStyle(document.documentElement).getPropertyValue(n).trim()||"#000";var uN=ce('<div class="flex h-full items-center justify-center"><div class="bg-card w-full max-w-[1200px] p-10 rounded-lg"><div id="map" class="w-full h-[600px] bg-bg rounded-lg shadow-md"></div></div></div>');function fN(n,t){tn(t,!1);let e;const i=[57.689249,11.976888],s=[[i[0]-.1,i[1]-.1],[i[0]+.1,i[1]+.1]],r="/ChaboStats/maps/manifest.json";zn(async()=>{e=Id.map("map",{center:i,zoom:14,minZoom:12,maxZoom:18,maxBounds:s,maxBoundsViscosity:1}),Id.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"Â© OpenStreetMap contributors"}).addTo(e);try{const l=await fetch(r);if(!l.ok)throw new Error("Failed to fetch manifest");let c=await l.json();c=c.filter(h=>h.toLowerCase()!=="manifest.json");for(const h of c)try{const f=await fetch("/ChaboStats/maps/"+h);if(!f.ok)throw new Error(`Failed to fetch ${h}`);const d=await f.json();console.log(d),d.forEach(p=>{const g=p.map(v=>[v.lat,v.lng]);e&&Id.polygon(g,{color:hN("--sec"),fillOpacity:.4}).addTo(e).bindPopup(`<a href="#/location/${h.replace(/.json$/i,"")}">Go to Location</a>`)})}catch(f){console.error("Failed to load file:",h,f)}}catch(l){console.error("Failed to load manifest:",l)}}),vn();var o=uN();Rt(n,o),en()}function sv(n){const t=/\r?\n/,e=n.replace(/\r\n?/g,`
`).split(/\n{2,}/).map(s=>s.trim()).filter(Boolean),i=[];for(const s of e){if(/^\*\*[\s\S]+\*\*$/.test(s)&&s.includes(`
`)){const h=s.slice(2,-2).trim(),[f,d]=h.split(/\n+/).map(p=>p.trim());if(f&&d){i.push(Dd(`<strong>${mr(f)}</strong>`,`<strong>${mr(d)}</strong>`));continue}}if(s.startsWith("**")&&s.endsWith("**")){const h=s.slice(2,-2).trim();i.push(`<p><strong>${mr(h)}</strong></p>`);continue}const r=s.split(/\s*\*\*\*\s*/).map(h=>h.trim()).filter(Boolean),o=dN(s);if(r.length>=2){for(let h=0;h+1<r.length;h+=2){const f=Tl(r[h]),d=Tl(r[h+1]);i.push(Dd(f,d))}r.length%2===1&&i.push(`<p>${mr(Tl(r.at(-1)))}</p>`);continue}if(o){const[h,f]=o;i.push(Dd(Tl(h),Tl(f)));continue}const c=s.split(t).map(h=>h.trim()).filter(Boolean).map(h=>mr(qy(h))).join("<br>");i.push(`<p>${c}</p>`)}return`<div class="bilingual rich-text">${i.join(`
`)}</div>`}function qy(n){const t=n.trim();if(t.startsWith("**")&&t.endsWith("**")){const e=t.slice(2,-2).trim();return`<strong>${mr(e)}</strong>`}return t.replace(/\*\*(.+?)\*\*/g,(e,i)=>`<strong>${mr(i)}</strong>`)}function mr(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/'/g,"&#39;")}function Tl(n){const t=qy(n),e="__STRONG_OPEN__",i="__STRONG_CLOSE__",s=t.replace(/<strong>/g,e).replace(/<\/strong>/g,i);return mr(s).replace(new RegExp(e,"g"),"<strong>").replace(new RegExp(i,"g"),"</strong>")}function dN(n){const t=n.match(/^(.+?)\s*\/\s*(.+)$/s);if(!t)return null;const e=t[1].trim(),i=t[2].trim();return!e||!i?null:[e,i]}function Dd(n,t){return`<section class="bilingual-block"><p class="sv" lang="sv">${n}</p><p class="en" lang="en">${t}</p></section>`}var pN=ce('<div class="max-w-4xl mx-auto p-6 space-y-4"><div class="h-8 rounded w-3/4 animate-pulse bg-secvari"></div> <div class="h-6 rounded w-1/2 animate-pulse bg-secvari"></div> <div class="h-4 rounded w-full animate-pulse bg-secvari"></div> <div class="h-4 rounded w-full animate-pulse bg-secvari"></div> <div class="h-4 rounded w-2/3 animate-pulse bg-secvari"></div></div>'),mN=ce('<p class="max-w-4xl mx-auto p-6 font-semibold text-err"> </p>'),gN=ce('<p class="text-sm mt-2"><span class="font-semibold">Features:</span> </p>'),_N=ce('<div class="descriptions"></div>'),vN=ce('<div class="max-w-4xl mx-auto p-6 rounded-xl shadow-lg space-y-4 bg-card text-oncard"><h1 class="text-3xl font-bold mb-2 text-pri"> </h1> <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"><div class="flex items-center gap-2 font-semibold px-3 py-1 rounded-md inline-block bg-pri text-onpri" title="Published"><!> </div> <div class="flex items-center gap-2 font-semibold px-3 py-1 rounded-md inline-block bg-pri text-onpri" title="Location"><!> </div> <div class="flex items-center gap-2 font-semibold px-3 py-1 rounded-md inline-block bg-pri text-onpri" title="Floor"><!> </div> <div class="flex items-center gap-2 font-semibold px-3 py-1 rounded-md inline-block bg-pri text-onpri" title="Size"><!> </div> <div class="flex items-center gap-2 font-semibold px-3 py-1 rounded-md inline-block bg-pri text-onpri" title="Rent"><!> </div> <div class="flex items-center gap-2 font-semibold px-3 py-1 rounded-md inline-block bg-pri text-onpri" title="Interested"><!> </div></div> <!> <!> <a target="_blank" class="mt-4 inline-flex items-center gap-2 font-medium text-pri border-2 border-pri rounded-md px-3 py-2 hover:bg-privari hover:text-onpri transition-colors duration-200"><!> Blueprint</a></div>'),xN=ce('<main class="min-h-screen p-8 bg-bg"><!></main>');function yN(n,t){tn(t,!1);let e=mt(t,"params",8),i=xe(null),s=xe(!0),r=xe("");zn(async()=>{try{const f=await fetch(`/ChaboStats/api/listings/${e().published}/${e().objectId}`);if(console.log(f),!f.ok)throw new Error("Apartment not found");Ft(i,await f.json())}catch(f){Ft(r,f.message)}finally{Ft(s,!1)}}),vn();var o=xN(),l=ut(o);{var c=f=>{var d=pN();Rt(f,d)},h=f=>{var d=Bn(),p=xn(d);{var g=y=>{var x=mN(),_=ut(x);an(()=>We(_,U(r))),Rt(y,x)},v=y=>{var x=Bn(),_=xn(x);{var w=C=>{var S=vN(),T=ut(S),A=ut(T),P=St(T,2),N=ut(P),E=ut(N);mn(E,{get icon(){return go},get class(){return`${zt(go),ft(()=>go.prefix)??""}-icon`}});var R=St(E),k=St(N,2),H=ut(k);mn(H,{get icon(){return Rf},get class(){return`${zt(Rf),ft(()=>Rf.prefix)??""}-icon`}});var q=St(H),G=St(k,2),Y=ut(G);mn(Y,{get icon(){return Pf},get class(){return`${zt(Pf),ft(()=>Pf.prefix)??""}-icon`}});var j=St(Y),et=St(G,2),V=ut(et);mn(V,{get icon(){return fa},get class(){return`${zt(fa),ft(()=>fa.prefix)??""}-icon`}});var ct=St(V),rt=St(et,2),gt=ut(rt);mn(gt,{get icon(){return mo},get class(){return`${zt(mo),ft(()=>mo.prefix)??""}-icon`}});var It=St(gt),Dt=St(rt,2),At=ut(Dt);mn(At,{get icon(){return Lf},get class(){return`${zt(Lf),ft(()=>Lf.prefix)??""}-icon`}});var K=St(At),st=St(P,2);{var dt=se=>{var z=gN(),Oe=St(ut(z));an(Vt=>We(Oe,` ${Vt??""}`),[()=>(U(i),ft(()=>U(i).features.features.join(", ")))]),Rt(se,z)};gn(st,se=>{U(i),ft(()=>U(i).features.features.length)&&se(dt)})}var Ut=St(st,2);{var Xt=se=>{var z=_N();Qn(z,5,()=>(U(i),ft(()=>U(i).descriptions)),hi,(Oe,Vt)=>{var ye=Bn(),Wt=xn(ye);Yv(Wt,()=>(zt(sv),U(Vt),ft(()=>sv(U(Vt))))),Rt(Oe,ye)}),Rt(se,z)};gn(Ut,se=>{U(i),ft(()=>U(i).descriptions.length)&&se(Xt)})}var Ht=St(Ut,2),Le=ut(Ht);mn(Le,{get icon(){return Fh},get class(){return`${zt(Fh),ft(()=>Fh.prefix)??""}-icon`}}),an(()=>{We(A,`${U(i),ft(()=>U(i).type)??""} @ ${U(i),ft(()=>U(i).address)??""}`),We(R,` ${U(i),ft(()=>U(i).published)??""}`),We(q,` ${U(i),ft(()=>U(i).location)??""}`),We(j,` ${U(i),ft(()=>U(i).floor.floor)??""} / ${U(i),ft(()=>U(i).floor.total_floors)??""}`),We(ct,` ${U(i),ft(()=>U(i).size_sqrM)??""} mÂ²`),We(It,` ${U(i),ft(()=>U(i).rent_krPerMonth)??""} kr/mÃ¥n`),We(K,` ${U(i),ft(()=>U(i).interested_count)??""}`),Ce(Ht,"href",(U(i),ft(()=>`/ChaboStats/${U(i).image_file}`)))}),Rt(C,S)};gn(_,C=>{U(i)!=null&&C(w)},!0)}Rt(y,x)};gn(p,y=>{U(r)?y(g):y(v,!1)},!0)}Rt(f,d)};gn(l,f=>{U(s)?f(c):f(h,!1)})}Rt(n,o),en()}function bN(n){const t=["corner","balcony","power_individual_measurement","hot_water_individual_measurement","cycling_room"],e=t.map(h=>n.filter(f=>f.features.searchable_features[h]===!0).length),i=t.map(h=>n.filter(f=>f.features.searchable_features[h]===!1).length),s=t.map(h=>n.filter(f=>f.features.searchable_features[h]===null).length),r={type:"bar",data:{labels:t.map(h=>h.replace(/_/g," ")),datasets:[{label:"Yes",data:e,backgroundColor:un.pri()},{label:"No",data:i,backgroundColor:un.sec()},{label:"Unknown",data:s,backgroundColor:"gray"}]},options:{responsive:!0,indexAxis:"y",scales:{x:{beginAtZero:!0,title:{display:!0,text:"Number of Apartments"}},y:{title:{display:!0,text:"Feature"}}}}},o=t.map(h=>{const f=n.filter(d=>d.features.searchable_features[h]===!0);return f.length===0?0:f.reduce((d,p)=>d+p.interested_count,0)/f.length}),l=t.map(h=>{const f=n.filter(d=>d.features.searchable_features[h]===!1);return f.length===0?0:f.reduce((d,p)=>d+p.interested_count,0)/f.length}),c={type:"bar",data:{labels:t.map(h=>h.replace(/_/g," ")),datasets:[{label:"Has Feature",data:o,backgroundColor:un.pri()},{label:"No Feature",data:l,backgroundColor:un.sec()}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Average Interest by Feature"}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Average Interested Count"}}}}};return[r,c]}var MN=ce('<div class="p-6 md:p-10 rounded-lg"><h1 class="text-3xl font-bold mb-8 text-oncard">Features</h1> <!></div>');function SN(n,t){tn(t,!1);let e=xe([]);zn(async()=>{const r=await fetch("/ChaboStats/api/listings");Ft(e,await r.json())}),vn();var i=MN(),s=St(ut(i),2);Sc(s,{get apartments(){return U(e)},get getChartsFn(){return bN},title:"Interest Statistics"}),Rt(n,i),en()}function CN(n){const t={type:"bar",data:{labels:n.map(i=>i.address),datasets:[{label:"Rent",data:n.map(i=>i.rent_krPerMonth),backgroundColor:un.pri()}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Rent per Listing"}},scales:{x:{type:"category",min:5},y:{beginAtZero:!0}}}},e={type:"scatter",data:{datasets:[{label:"Size vs Rent",data:n.map(i=>({x:i.size_sqrM,y:i.rent_krPerMonth})),backgroundColor:un.pri()}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Size vs Rent"}},scales:{x:{type:"linear",title:{display:!0,text:"Size (mÂ²)"}},y:{type:"linear",title:{display:!0,text:"Rent (kr/mÃ¥n)"}}}}};return[t,e]}var wN=ce("<p>Loading Apartments...</p>"),TN=ce('<p class="text-red-500"> </p>'),EN=ce("<p>No apartments found for this building</p>"),AN=ce('<a class="inline-block px-4 py-2 bg-pri text-onpri font-semibold rounded hover:bg-privari transition-colors duration-200">View listings</a> <div class="flex flex-col md:flex-row justify-center gap-4 w-full"><div class="bg-card p-4 rounded-lg shadow-md flex-1"><h3 class="text-lg font-semibold mb-2 text-oncard">Size & Rent</h3> <div class="flex flex-col gap-1 text-oncard"><div> </div> <div> </div></div></div> <div class="bg-card p-4 rounded-lg shadow-md flex-1"><h3 class="text-lg font-semibold mb-2 text-oncard">Corner & Balcony</h3> <div class="flex flex-col gap-1 text-oncard"><div> </div> <div> </div></div></div> <div class="flex flex-col bg-card p-4 rounded-lg shadow-md flex-1"><h3 class="text-lg font-semibold mb-2 text-oncard">Utilities & Amenities</h3> <div class="gap-1 text-oncard"><div> </div> <div> </div> <div> </div></div></div></div>',1),PN=ce("<p>Loading statistics...</p>"),RN=ce('<!> <div class="w-full"><h1 class="text-3xl font-bold mb-8 text-oncard w-fit">Statistics</h1> <!></div>',1),LN=ce('<div class="p-6 md:p-8 bg-bg rounded-lg flex flex-col items-start gap-4"><h1 class="text-3xl font-bold text-onbg"> </h1> <!></div>');function IN(n,t){tn(t,!1);const e=xe();let i=mt(t,"params",8),s=xe([]),r=i().area,o=xe(!0),l=xe(null);zn(async()=>{Ft(o,!0),Ft(l,null);try{const v=await fetch(`/ChaboStats/api/location/${r}`);if(!v.ok)throw new Error("Failed to fetch apartments");Ft(s,await v.json())}catch(v){console.error(v),Ft(l,v instanceof Error?v.message:"Unknown error"),Ft(s,[])}finally{Ft(o,!1)}}),wr(()=>U(s),()=>{Ft(e,U(s).length>0?(()=>{const v=U(s).map(H=>H.size_sqrM),y=v.reduce((H,q)=>H+q,0)/U(s).length,x=Math.min(...v),_=Math.max(...v),w=U(s).map(H=>H.rent_krPerMonth),C=w.reduce((H,q)=>H+q,0)/U(s).length,S=Math.min(...w),T=Math.max(...w),A=H=>U(s).filter(q=>q.features.searchable_features[H]).length,P=A("corner")/U(s).length*100,N=A("balcony")/U(s).length*100,E=A("hot_water_individual_measurement")/U(s).length*100,R=A("power_individual_measurement")/U(s).length*100,k=A("cycling_room")/U(s).length*100;return{avgSize:y,minSize:x,maxSize:_,avgRent:C,minRent:S,maxRent:T,percentCorner:P,percentBalcony:N,percentHotWater:E,percentPower:R,percentCycling:k}})():null)}),dc(),vn();var c=LN(),h=ut(c),f=ut(h),d=St(h,2);{var p=v=>{var y=wN();Rt(v,y)},g=v=>{var y=Bn(),x=xn(y);{var _=C=>{var S=TN(),T=ut(S);an(()=>We(T,`Error: ${U(l)??""}`)),Rt(C,S)},w=C=>{var S=Bn(),T=xn(S);{var A=N=>{var E=EN();Rt(N,E)},P=N=>{var E=RN(),R=xn(E);{var k=Y=>{var j=AN(),et=xn(j),V=St(et,2),ct=ut(V),rt=St(ut(ct),2),gt=ut(rt),It=ut(gt),Dt=St(gt,2),At=ut(Dt),K=St(ct,2),st=St(ut(K),2),dt=ut(st),Ut=ut(dt),Xt=St(dt,2),Ht=ut(Xt),Le=St(K,2),se=St(ut(Le),2),z=ut(se),Oe=ut(z),Vt=St(z,2),ye=ut(Vt),Wt=St(Vt,2),Ve=ut(Wt);an((Nt,ue,hn,nn,F,D,Q)=>{Ce(et,"href",`#/listings?locationCode=${r}`),We(It,`Size: ${Nt??""} mÂ² (min: ${U(e),ft(()=>U(e).minSize)??""}, max: ${U(e),ft(()=>U(e).maxSize)??""})`),We(At,`Rent: ${ue??""} kr (min: ${U(e),ft(()=>U(e).minRent)??""}, max: ${U(e),ft(()=>U(e).maxRent)??""})`),We(Ut,`Corner Apartments: ${hn??""}%`),We(Ht,`Balcony: ${nn??""}%`),We(Oe,`Hot Water Individual Measurement: ${F??""}%`),We(ye,`Power Individual Measurement: ${D??""}%`),We(Ve,`Cycling Room: ${Q??""}%`)},[()=>(U(e),ft(()=>U(e).avgSize.toFixed(1))),()=>(U(e),ft(()=>U(e).avgRent.toFixed(0))),()=>(U(e),ft(()=>U(e).percentCorner.toFixed(1))),()=>(U(e),ft(()=>U(e).percentBalcony.toFixed(1))),()=>(U(e),ft(()=>U(e).percentHotWater.toFixed(1))),()=>(U(e),ft(()=>U(e).percentPower.toFixed(1))),()=>(U(e),ft(()=>U(e).percentCycling.toFixed(1)))]),Rt(Y,j)},H=Y=>{var j=PN();Rt(Y,j)};gn(R,Y=>{U(e)?Y(k):Y(H,!1)})}var q=St(R,2),G=St(ut(q),2);Sc(G,{get apartments(){return U(s)},get getChartsFn(){return CN}}),Rt(N,E)};gn(T,N=>{U(s),ft(()=>U(s).length===0)?N(A):N(P,!1)},!0)}Rt(C,S)};gn(x,C=>{U(l)?C(_):C(w,!1)},!0)}Rt(v,y)};gn(d,v=>{U(o)?v(p):v(g,!1)})}an(()=>We(f,r)),Rt(n,c),en()}var DN=kr("<clipPath><path></path></clipPath>"),ON=kr('<rect></rect><path fill="none" stroke="var(--oncard)" stroke-width="2"></path>',1),NN=kr('<svg><defs><pattern width="8" height="8" patternUnits="userSpaceOnUse" patternTransform="rotate(45)"><line x1="0" y1="0" x2="0" y2="8" stroke="var(--oncard)" stroke-width="1"></line></pattern><!></defs><!></svg>'),kN=ce(`<a class="bg-card text-oncard p-4 flex flex-col items-center justify-start
         shadow-lg hover:shadow-xl hover:scale-105 transition-transform transition-shadow
         border-3 border-oncard cursor-pointer"><h2 class="text-xl font-semibold mb-2 text-center"> </h2> <!></a>`);function FN(n,t){tn(t,!1);let e=mt(t,"building",8),i=mt(t,"buildingPolygons",24,()=>({})),s=mt(t,"width",8,150),r=mt(t,"height",8,150),o=xe(),l=xe("");const c=5;function h(_){return Math.abs(Math.floor(Math.sin(_)*1e4))%241+15}function f(_,w=0){return Math.abs(Math.floor(Math.sin(_+w)*1e4))%2===0}zn(()=>{if(U(o)){const _=U(o).getBoundingClientRect(),w=h(_.x),C=h(_.y),S=f(_.x,1)?w:15,T=S===15?w:15,A=f(_.y,2)?C:15,P=A===15?C:15,N=f(_.x,3)?w:15,E=N===15?w:15,R=f(_.y,4)?C:15;Ft(l,`
        border-top-left-radius: ${S}px ${T}px;
        border-top-right-radius: ${A}px ${P}px;
        border-bottom-right-radius: ${N}px ${E}px;
        border-bottom-left-radius: ${R}px ${R===15?C:15}px;
      `)}});function d(_,w,C,S=c){if(!_?.length)return[];const T=_.flat().map(q=>q.lat),A=_.flat().map(q=>q.lng),P=Math.min(...T),N=Math.max(...T),E=Math.min(...A),R=Math.max(...A),k=(w-2*S)/(R-E||1),H=(C-2*S)/(N-P||1);return _.map(q=>{const G=q.map(j=>({x:(j.lng-E)*k+S,y:C-((j.lat-P)*H+S)}));let Y=`M ${G[0].x} ${G[0].y}`;for(let j=1;j<G.length;j++)Y+=` L ${G[j].x} ${G[j].y}`;return Y+=" Z",Y})}vn();var p=kN(),g=ut(p),v=ut(g),y=St(g,2);{var x=_=>{var w=NN(),C=ut(w),S=ut(C),T=St(S);Qn(T,1,()=>(zt(i()),zt(e()),ft(()=>i()[e().code])),hi,(P,N,E)=>{var R=DN(),k=ut(R);an(H=>{Ce(R,"id",`clip-${zt(e()),ft(()=>e().code)??""}-${E}`),Ce(k,"d",H)},[()=>(zt(i()),zt(e()),zt(s()),zt(r()),ft(()=>d(i()[e().code],s(),r())[E]))]),Rt(P,R)});var A=St(C);Qn(A,1,()=>(zt(i()),zt(e()),ft(()=>i()[e().code])),hi,(P,N,E)=>{var R=ON(),k=xn(R),H=St(k);an(q=>{Ce(k,"width",s()),Ce(k,"height",r()),Ce(k,"fill",(zt(e()),ft(()=>`url(#diagonalLines-${e().code})`))),Ce(k,"clip-path",(zt(e()),ft(()=>`url(#clip-${e().code}-${E})`))),Ce(H,"d",q)},[()=>(zt(i()),zt(e()),zt(s()),zt(r()),ft(()=>d(i()[e().code],s(),r())[E]))]),Rt(P,R)}),an(()=>{Ce(w,"width",s()),Ce(w,"height",r()),Ce(S,"id",`diagonalLines-${zt(e()),ft(()=>e().code)??""}`)}),Rt(_,w)};gn(y,_=>{zt(i()),zt(e()),ft(()=>i()[e().code])&&_(x)})}Po(p,_=>Ft(o,_),()=>U(o)),an(()=>{Ce(p,"href",(zt(e()),ft(()=>`#/location/${e().code}`))),Yi(p,U(l)),We(v,(zt(e()),ft(()=>e().name)))}),Rt(n,p),en()}var UN=ce('<div class="px-6 md:px-12 lg:px-20 py-8 flex justify-center"><div class="w-full max-w-[2000px] mx-auto flex flex-wrap gap-5"></div></div>');function BN(n,t){tn(t,!1);let e=hx.cha_stu_bo.building_codes;const i="/ChaboStats/maps/manifest.json";let s=xe({});zn(async()=>{try{const l=await fetch(i);if(!l.ok)throw new Error("Failed to fetch manifest");let c=await l.json();c=c.filter(h=>h.toLowerCase()!=="manifest.json");for(const h of c){const f=await fetch(`/ChaboStats/maps/${h}`);if(!f.ok)continue;const d=await f.json(),p=h.replace(/\.json$/i,"");D4(s,U(s)[p]=d)}}catch(l){console.error("Failed to load manifest:",l)}}),vn();var r=UN(),o=ut(r);Qn(o,5,()=>e,hi,(l,c)=>{FN(l,{get building(){return U(c)},get buildingPolygons(){return U(s)},width:150,height:150})}),Rt(n,r),en()}const zN={"/":Y8,"/listings":aC,"/listings/:published/:objectId":yN,"/about":uP,"/statistics":xP,"/statistics/rent":QO,"/statistics/released":nN,"/statistics/interested":rN,"/statistics/feature":SN,"/map":fN,"/location/:area":IN,"/buildings":BN};var HN=ce("<button><!></button>"),VN=ce("<button><!></button>"),WN=ce('<div class="md:hidden bg-card shadow-md px-4 py-4 flex flex-col space-y-4"><a href="#/listings" class="flex items-center gap-2 text-oncard hover:text-sec font-medium"><!> Listings</a> <a href="#/statistics" class="flex items-center gap-2 text-oncard hover:text-sec font-medium"><!> Statistics</a> <a href="#/map" class="flex items-center gap-2 text-oncard hover:text-sec font-medium"><!> Map</a> <a href="#/buildings" class="flex items-center gap-2 text-oncard hover:text-sec font-medium"><!> Buildings</a> <div class="relative bg-pri/50 rounded-xl p-1 flex w-max mt-2"><div class="absolute top-1 bottom-1 w-8 rounded-lg bg-sec shadow transition-transform duration-300"></div> <!></div></div>'),GN=ce('<nav class="bg-card shadow-md px-4 py-3 md:px-6 md:py-4 flex items-center justify-between"><a href="#/" class="flex items-center gap-2 text-3xl font-bold text-oncard"><!> <h1>ChaboStats</h1></a> <div class="hidden md:flex items-center justify-between space-x-6"><div class="flex space-x-6"><a href="#/listings" class="flex items-center gap-1 text-oncard hover:text-sec transition-colors duration-200 font-medium"><!> Listings</a> <a href="#/statistics" class="flex items-center gap-1 text-oncard hover:text-sec transition-colors duration-200 font-medium"><!> Statistics</a> <a href="#/map" class="flex items-center gap-1 text-oncard hover:text-sec transition-colors duration-200 font-medium"><!> Map</a> <a href="#/buildings" class="flex items-center gap-1 text-oncard hover:text-sec transition-colors duration-200 font-medium"><!> Buildings</a></div></div> <div class="hidden md:flex relative bg-pri/50 rounded-xl p-1 ml-6 flex"><div class="absolute top-1 bottom-1 w-8 rounded-lg bg-sec shadow transition-transform duration-300"></div> <!></div> <button class="md:hidden text-oncard" aria-label="Toggle menu"><!></button></nav> <!>',1);function jN(n,t){tn(t,!1);const e=xe(),i=xe();let s=mt(t,"setTheme",8),r=mt(t,"theme",12),o=xe(!1);const l=[{theme:xa.Light,icon:j8,color:"text-onsec"},{theme:xa.Dark,icon:G8,color:"text-onsec"},{theme:xa.Blue,icon:Fh,color:"text-onsec"}];function c(Y){r(Y),s()(Y)}wr(()=>zt(r()),()=>{Ft(e,l.findIndex(Y=>Y.theme===r()))}),wr(()=>U(e),()=>{Ft(i,`translateX(${U(e)*32}px)`)}),dc(),vn();var h=GN(),f=xn(h),d=ut(f),p=ut(d);mn(p,{get icon(){return Ts},get class(){return`${zt(Ts),ft(()=>Ts.prefix)??""}-icon w-6 h-6`}});var g=St(d,2),v=ut(g),y=ut(v),x=ut(y);mn(x,{get icon(){return no},get class(){return`${zt(no),ft(()=>no.prefix)??""}-icon w-5 h-5`}});var _=St(y,2),w=ut(_);mn(w,{get icon(){return Bs},get class(){return`${zt(Bs),ft(()=>Bs.prefix)??""}-icon w-5 h-5`}});var C=St(_,2),S=ut(C);mn(S,{get icon(){return eo},get class(){return`${zt(eo),ft(()=>eo.prefix)??""}-icon w-5 h-5`}});var T=St(C,2),A=ut(T);mn(A,{get icon(){return Ts},get class(){return`${zt(Ts),ft(()=>Ts.prefix)??""}-icon w-5 h-5`}});var P=St(g,2),N=ut(P);let E;var R=St(N,2);Qn(R,1,()=>l,hi,(Y,j)=>{var et=HN(),V=ut(et);mn(V,{get icon(){return U(j),ft(()=>U(j).icon)},get class(){return` ${U(j),ft(()=>U(j).icon.prefix)??""}-icon w-4 h-4`}}),an(()=>{Kh(et,1,`relative z-10 w-8 h-8 flex items-center justify-center ${U(j),ft(()=>U(j).color)??""}`),Ce(et,"aria-label",(U(j),ft(()=>U(j).theme+" theme")))}),Hs("click",et,()=>c(U(j).theme)),Rt(Y,et)});var k=St(P,2),H=ut(k);{let Y=bu(()=>U(o)?E5:A5);mn(H,{get icon(){return U(Y)},class:"w-6 h-6"})}var q=St(f,2);{var G=Y=>{var j=WN(),et=ut(j),V=ut(et);mn(V,{get icon(){return no},get class(){return`${zt(no),ft(()=>no.prefix)??""}-icon w-5 h-5`}});var ct=St(et,2),rt=ut(ct);mn(rt,{get icon(){return Bs},get class(){return`${zt(Bs),ft(()=>Bs.prefix)??""}-icon w-5 h-5`}});var gt=St(ct,2),It=ut(gt);mn(It,{get icon(){return eo},get class(){return`${zt(eo),ft(()=>eo.prefix)??""}-icon w-5 h-5`}});var Dt=St(gt,2),At=ut(Dt);mn(At,{get icon(){return Ts},get class(){return`${zt(Ts),ft(()=>Ts.prefix)??""}-icon w-5 h-5`}});var K=St(Dt,2),st=ut(K);let dt;var Ut=St(st,2);Qn(Ut,1,()=>l,hi,(Xt,Ht)=>{var Le=VN(),se=ut(Le);mn(se,{get icon(){return U(Ht),ft(()=>U(Ht).icon)},get class(){return`${U(Ht),ft(()=>U(Ht).icon.prefix)??""}-icon w-4 h-4`}}),an(()=>{Kh(Le,1,`relative z-10 w-8 h-8 flex items-center justify-center ${U(Ht),ft(()=>U(Ht).color)??""}`),Ce(Le,"aria-label",(U(Ht),ft(()=>U(Ht).theme+" theme")))}),Hs("click",Le,()=>c(U(Ht).theme)),Rt(Xt,Le)}),an(Xt=>dt=Yi(st,"",dt,Xt),[()=>({transform:U(i)})]),Rt(Y,j)};gn(q,Y=>{U(o)&&Y(G)})}an(Y=>E=Yi(N,"",E,Y),[()=>({transform:U(i)})]),Hs("click",k,()=>Ft(o,!U(o))),Rt(n,h),en()}var XN=ce('<div class=" px-4 py-8 bg-card text-oncard hite p-4 flex justify-around gap-8 md:gap-4 flex-col md:flex-row items-center shadow-lg"><svg width="128" height="128" viewBox="0 0 2271 2492" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2134.48 932.903C2134.48 942.991 2140.22 974.732 2152.54 1014.65C2162.63 1047.3 2172.13 1066.13 2178.66 1085.74C2185.93 1107.63 2193.87 1124.14 2203.29 1141.55C2212.13 1157.92 2221.35 1187.79 2233.73 1211.12C2242.44 1227.56 2246.05 1245.89 2248.25 1263.3C2251 1285.15 2254.75 1311.11 2255.51 1454.84C2255.74 1498.42 2247.53 1515.47 2243.2 1533.61C2237.89 1555.88 2235.96 1576.35 2230.88 1597.35C2222.49 1631.98 2222.92 1653.14 2220.72 1712.45C2219.63 1742.04 2207.01 1758.97 2194.68 1789.37C2182.09 1820.41 2172.22 1837.24 2160.61 1855.37C2146.97 1876.68 2134.56 1898.11 2120.76 1914.81C2106.97 1931.48 2086.73 1943.07 2069.32 1954.68C2047.87 1968.99 2025.86 1988.03 2008.45 2006.82C1989.28 2027.49 1978.03 2047.43 1964.22 2062.65C1950.28 2078.02 1927.33 2089.43 1912.05 2106.13C1898.04 2121.44 1872.28 2135.79 1848.3 2157.57C1829.6 2174.56 1811.32 2193.79 1795.38 2206.88C1779.21 2220.16 1760.62 2230.05 1741.05 2245.99C1714.33 2267.76 1679.57 2283.62 1654.81 2294.58C1628.41 2306.26 1608.43 2318.5 1590.3 2324.3C1569.51 2330.96 1551.91 2338.76 1534.49 2346.04C1516.3 2353.65 1495.38 2360.5 1467.14 2372.11C1440.75 2382.96 1401.29 2399.63 1362.09 2410.53C1327.35 2420.18 1275.28 2437.29 1246.08 2442.44C1221.27 2446.82 1198.31 2450.42 1167.85 2454.75C1131.22 2459.95 1102.65 2467.81 1077.98 2471.42C1056.6 2474.55 1038.8 2477.62 1004.27 2475.77C923 2471.42 893.5 2465.5 893.5 2465.5C893.5 2465.5 790.974 2440.33 769.95 2428.72C751.733 2418.66 734.447 2409.9 717.033 2401.9C698.378 2393.33 682.269 2376.59 664.137 2367.83C644.481 2358.33 622.873 2353.37 602.545 2343.93C575.52 2331.39 557.65 2312.84 538.757 2298.28C511.946 2277.61 477.904 2244.66 456.163 2232.34C423.528 2213.83 395.288 2179.44 350.459 2136.09C317.142 2103.87 301.107 2088.13 268.495 2057.76C249.849 2040.39 241.623 2020.04 229.296 2001.91C214.824 1980.62 195.272 1962.12 178.575 1941.03C163.428 1921.9 154.66 1902.64 136.549 1867.18C122.515 1839.7 109.699 1806.98 100.285 1788.13C88.2583 1764.04 90.8281 1736.01 87.2191 1712.77C82.0874 1679.73 82.1317 1659.14 78.5228 1635.96C73.8208 1605.77 73.4354 1576.61 68.3915 1551.15C64.536 1531.69 57.521 1512.78 52.4336 1490.28C47.7728 1469.66 44.4764 1443.21 38.6716 1424.31C24.6481 1378.67 31.4318 1298.24 26.3445 1274.34C19.5244 1242.31 21.2571 1224.32 17.6481 1196.14C8.51597 1124.85 24.1269 1104.05 47.2593 1020.19C55.9515 988.683 58.9124 967.775 63.9998 946.034C69.3537 923.154 76.3052 899.683 82.8275 880.79C92.0193 854.164 113.961 824.285 121.961 806.87C130.23 788.873 142.919 769.237 156.008 746.735C166.842 728.108 182.053 708.362 198.75 685.86C213.532 665.94 234.231 646.009 261.69 614.224C329.487 535.745 355.981 515.563 373.395 503.193C389.012 492.1 422.758 481.393 452.5 464" stroke="var(--oncard)" stroke-width="60" stroke-linecap="round"></path><path d="M1023.31 360.111C1029.98 370.126 1036.25 385.996 1044.92 399.464C1054.38 414.157 1069.99 419.782 1080.81 428.021C1093.15 437.415 1103.72 442.306 1114.12 449.209C1126.96 457.74 1130.55 471.681 1135.76 482.502C1142.16 495.825 1147.01 505.415 1150.47 518.818C1154.53 534.536 1158.22 552.072 1166.03 565.112C1172.7 576.251 1184.17 590.996 1194.13 606.19C1201.47 617.38 1205.81 629.972 1212.31 642.519C1217.75 653.027 1230.82 668.845 1246.02 677.148C1257.1 683.205 1267.2 690.538 1278.03 695.313C1292.02 701.487 1303.53 711.298 1319.96 727.27C1330.42 737.44 1337.27 754.478 1358.43 795.945C1368.31 815.308 1394.2 840.007 1410.81 858.34C1421.91 870.595 1438.42 886.82 1451.89 899.431C1462.52 909.385 1474.8 911.991 1491.64 915.027C1515.12 919.26 1531.01 919.776 1544.86 923.24C1558.72 926.704 1572.53 928.443 1592.82 930.597C1628.61 934.395 1656.29 933.633 1681.94 929.325C1690.93 927.816 1728.82 919.023 1789.27 904.751C1857.24 888.702 1874.37 892.165 1891.7 887.365C1896.72 885.975 1903.74 886.924 1908.56 888.208C1922.25 891.861 1924.61 909.344 1934.55 917.609C1944.66 926.019 1959.17 924.966 1974.75 930.584C1985.98 934.631 2001.52 936.228 2016.71 938.81C2031.84 941.379 2050.88 937.992 2069.89 935.799C2082.04 932.776 2095.82 931.038 2109.26 928.884C2113.16 928.443 2118.29 928.443 2128.78 925.848" stroke="var(--oncard)" stroke-width="60" stroke-linecap="round"></path><path d="M613.331 554.771C615.9 553.915 618.469 553.058 617.651 552.617C616.834 552.176 612.552 552.176 609.062 554.317C590.933 565.437 595.166 591.93 596.879 597.977C597.732 600.989 602.017 602.31 605.066 602.764C619.413 604.901 627.162 579.89 627.175 577.697C627.222 569.705 621.116 594.525 622.4 598.003C622.845 599.209 626.254 594.629 627.149 591.152C628.044 587.675 627.188 584.249 625.034 582.057C619.455 579.008 612.5 577.269 606.026 576.4C602.977 576.387 600.408 577.243 597.761 580.72" stroke="var(--oncard)" stroke-width="60" stroke-linecap="round"></path><path d="M304.533 1330.66C289.119 1332.37 272.615 1339.25 259.212 1349.61C254.053 1353.61 253.516 1356.56 255.644 1359.59C261.224 1367.55 271.629 1370.44 282.385 1371.74C300.72 1373.95 315.743 1370.47 322.645 1366.16C338.227 1356.43 344.287 1337.67 348.205 1319.06C350.779 1306.84 347.79 1296.95 344.352 1292.63C342.409 1290.19 337.488 1290.02 332.714 1290.87C322.39 1292.69 314.938 1299.49 309.333 1308.1C300.189 1322.13 298.486 1338.39 297.189 1351.31C295.384 1369.29 301.886 1386.81 310.955 1398.48C321.515 1412.06 337.333 1415.41 350.761 1415.86C353.839 1415.97 356.38 1414.58 358.559 1412.85C372.073 1402.16 374.596 1373.99 376.75 1356.67C377.816 1348.1 376.335 1340.21 374.181 1333.73C372.169 1327.69 366.837 1322.9 361.66 1318.58C350.718 1309.45 328.821 1316.8 314.108 1324.56C293.484 1335.44 295.035 1364.24 294.581 1382.08C294.434 1387.84 298.46 1392.91 302.768 1398.09C307.847 1404.19 315.743 1405.91 322.217 1405.48C327.968 1405.1 333.907 1398.18 339.954 1386.97C346.424 1374.97 346.052 1359.28 345.195 1345.46C344.533 1334.78 338.293 1328.09 333.544 1322.91C329.166 1318.14 322.749 1313.38 312.823 1311.21C308.125 1310.18 303.754 1311.61 299.836 1316.33C290.143 1328.02 288.963 1346.15 289.391 1359.54C289.926 1376.28 302.768 1389.41 310.981 1400.68C316.252 1407.92 326.122 1408.51 333.025 1407.65C336.579 1407.21 339.928 1405.08 342.977 1400.77C350.194 1390.58 351.242 1372.28 350.813 1355.43C350.579 1346.19 346.934 1341.06 342.626 1336.32C340.349 1333.81 336.606 1332.42 333.129 1331.54C329.652 1330.66 326.226 1330.66 324.034 1334.94C318.016 1346.69 320.959 1360.03 323.969 1367.79C331.528 1387.28 344.287 1392.06 350.761 1394.22C353.685 1395.2 356.38 1393.82 357.703 1390.81C359.026 1387.8 359.026 1382.66 356.029 1377.02C330.586 1356.63 302.872 1351.42 291.208 1351.85C286.394 1352.27 283.825 1353.13 278.583 1359.2" stroke="var(--oncard)" stroke-width="60" stroke-linecap="round"></path><path d="M1887.45 1242.43C1893.49 1220.87 1895.23 1205.27 1893.09 1198.8C1890.41 1190.7 1872.84 1190.53 1856.42 1191.39C1835.33 1192.49 1810.64 1217.21 1783.73 1255.25C1771.26 1272.87 1775.86 1291.68 1776.72 1302.04C1778.48 1323.35 1798.29 1337.51 1815.15 1348.36C1832.43 1359.47 1853.61 1356.61 1874.39 1353.17C1901.88 1348.62 1922.84 1316.91 1938 1290.97C1943.77 1281.09 1944.54 1270.17 1944.11 1259.38C1943.78 1251.06 1937.66 1243.34 1927.32 1235.14C1901.63 1214.77 1864.25 1219.08 1846.41 1224.67C1839.4 1226.87 1836.43 1235.48 1833.41 1242.38C1825.69 1260 1833.78 1287.32 1843.72 1302.06C1853.84 1317.07 1872.66 1319.4 1898.16 1319.85C1903.86 1319.95 1907.27 1318.57 1910.32 1316.84C1926.06 1307.94 1930.68 1282.29 1930.28 1258.96C1930.07 1247.08 1921.21 1240.72 1915.6 1237.27C1903.06 1229.55 1876.39 1229.46 1853.35 1232.47C1832.7 1235.16 1818.32 1251.88 1807.04 1267.45C1799.36 1278.06 1799.22 1290.83 1800.08 1298.6C1801.52 1311.74 1819.04 1320.23 1843.23 1327.18C1856.52 1331 1867.52 1326.35 1875.28 1321.19C1885.92 1314.1 1893.47 1300.45 1899.09 1288.36C1902.96 1280.03 1903.02 1269.31 1901.3 1257.22C1899.89 1247.25 1890.07 1243.31 1881.47 1240.72C1866.65 1236.25 1853.74 1240.69 1848.13 1242.85C1835.24 1247.8 1829.53 1262.26 1825.61 1273.96C1823.55 1280.1 1826.03 1287.38 1829.89 1295.13C1835.46 1306.32 1846.76 1311.61 1853.23 1314.64C1867.2 1321.16 1887.4 1315.12 1895.61 1309.94C1906.61 1303 1905.61 1274.61 1901.32 1258.04C1899.16 1249.72 1887.47 1249.36 1878.87 1248.06C1863.58 1245.76 1849.43 1251.05 1842.09 1258.38C1835.38 1265.07 1835.55 1278.68 1838.12 1292.93C1839.36 1299.84 1845.82 1304.61 1851.47 1307.25C1857.11 1309.9 1863.11 1309.9 1867.48 1308.61C1875.1 1306.38 1878.78 1297.83 1881.38 1289.63C1882.59 1285.8 1882.26 1282.29 1880.97 1279.24C1878.33 1272.96 1869.33 1268.41 1860.27 1264.94C1856.5 1263.5 1853.76 1264.9 1852.44 1267.91C1851.12 1270.92 1851.12 1276.06 1852.83 1279.56C1856.05 1286.14 1864.92 1287.4 1871.83 1288.27C1875.28 1288.71 1878.73 1287.43 1879.21 1285.7C1871.9 1277.9 1863.26 1275.31 1856.79 1273.58C1853.74 1272.71 1851.17 1271.86 1848.52 1270.98" stroke="var(--oncard)" stroke-width="60" stroke-linecap="round"></path><path d="M898.774 1852.24C897.061 1858.24 895.349 1864.23 897.035 1869.03C898.722 1873.83 903.86 1877.26 908.22 1878.59C912.579 1879.93 916.004 1879.07 919.054 1875.21C926.546 1865.71 927.318 1852.29 925.606 1844.08C924.887 1840.64 920.468 1840.15 917.419 1840.57C914.37 1840.98 911.801 1842.69 909.621 1845.72C904.78 1852.43 903.964 1866.85 905.677 1884.12C906.47 1892.12 910.815 1897.97 915.148 1901.05C919.482 1904.14 924.62 1904.14 928.551 1902.86C935.734 1900.51 938.555 1893.79 940.28 1887.75C942.462 1880.12 942.888 1871.32 941.604 1863.97C941.031 1860.7 937.75 1859.2 934.714 1858.31C931.678 1857.43 928.253 1857.43 925.204 1858.72C918.925 1861.36 916.082 1867.79 914.357 1873.39C912.389 1879.78 911.749 1886.81 913.89 1892C914.948 1894.56 920.312 1893.76 923.374 1892.48C929.032 1890.1 930.77 1882.55 931.639 1875.65C932.074 1872.2 930.796 1868.75 928.642 1866.98C926.488 1865.22 923.063 1865.22 920.014 1866.07C914.066 1867.74 910.036 1872.98 907.869 1878.15C907.415 1880.76 908.272 1883.33 911.282 1884.65C914.292 1885.98 919.43 1885.98 924.724 1885.98" stroke="var(--oncard)" stroke-width="60" stroke-linecap="round"></path><path d="M1394.41 1509.71C1376.27 1534.7 1371.05 1558.96 1372.77 1567.17C1374.09 1573.51 1385.72 1571.99 1393.92 1570.7C1402.11 1569.42 1406.5 1561.63 1410.38 1553.89C1416.53 1541.62 1417.76 1527.07 1415.62 1517.99C1414.76 1514.33 1409.2 1514.9 1405.28 1516.61C1397.07 1520.2 1390.98 1532.13 1385.79 1545.51C1381.22 1557.3 1384.88 1568.49 1388.75 1574.97C1390.66 1578.18 1396.9 1577.18 1400.83 1576.75C1407.42 1576.03 1413.4 1568.59 1419.02 1558.22C1422.63 1551.56 1422.95 1540.93 1421.67 1528.82C1421.18 1524.27 1417.81 1523.57 1415.21 1523.98C1409.68 1524.86 1404.81 1533.01 1400.49 1542.08C1397.48 1548.4 1397 1558.08 1398.29 1568.89C1398.78 1573.02 1402.14 1573.7 1403.89 1572.86C1406.5 1569.45 1407.38 1559.95 1406.1 1549.14C1404.81 1545.18 1402.25 1544.33 1397 1543.44" stroke="var(--oncard)" stroke-width="60" stroke-linecap="round"></path><path d="M1373.68 2062.25C1373.68 2058.31 1373.68 2054.37 1372.2 2053.32C1359.89 2044.61 1346.87 2096.89 1348.27 2114.97C1348.82 2122.03 1361.71 2118.98 1368.16 2117.5C1376.59 2115.57 1381.62 2107.07 1385.1 2100.13C1387.01 2096.32 1387.59 2091.21 1386.62 2087.69C1385.65 2084.17 1382.7 2082.2 1379.2 2083.15C1359.2 2088.62 1357.77 2112.98 1356.27 2119.43C1355.48 2122.87 1355.76 2126.86 1359.71 2128.4C1363.65 2129.94 1371.53 2128.95 1377.56 2125.49C1389.43 2118.67 1392.58 2107.07 1394.57 2100.13C1397.08 2091.35 1396.58 2082.2 1392.63 2076.22C1390.64 2073.22 1384.73 2074.19 1380.22 2075.67C1371.15 2078.64 1365.74 2089.06 1362.26 2100.48C1359.13 2110.75 1359.74 2119.94 1362.71 2126.4C1365.24 2131.91 1375.62 2130.93 1384.56 2129.94C1392.09 2129.11 1397.54 2121.01 1402.02 2111.59C1404.46 2106.46 1403.54 2099.21 1402.06 2095.17C1400.58 2091.12 1397.63 2090.14 1394.63 2089.63C1388.67 2089.12 1381.68 2092.08 1372.26 2100.01C1366.78 2104.98 1359.89 2111.88 1352.78 2118.98" stroke="var(--oncard)" stroke-width="60" stroke-linecap="round"></path><path d="M566.312 326.904C561.024 320.712 539.9 315.424 473.111 314.056C451.095 313.605 437.066 318.028 421.11 321.576C407.674 324.563 377.864 335.672 356.885 347.683C345.242 354.349 336.943 364.051 329.849 376.008C324.797 384.522 324.508 398.568 325.384 411.841C326.355 426.527 340.398 435.795 353.684 442.916C365.521 449.262 396.889 446.477 428.869 448.683C497.038 453.384 511.308 446.477 524.634 444.272C539.569 441.8 550.316 441.163 561.835 438.957C576.703 436.111 587.516 435.848 598.158 433.643C608.66 431.467 619.403 430.534 639.305 426.123C653.73 422.926 671.59 420.809 699.079 413.289C715.789 408.717 737.169 402.208 760.194 398.223C784.284 394.052 801.845 391.58 831.035 385.827C845.353 383.005 855.893 380.951 866.535 379.609C879.029 378.034 893.093 375.636 909.462 372.527C929.97 368.632 984.82 355.389 1016.65 347.284C1033.96 342.878 1063.84 332.324 1084.42 324.26C1094.87 320.167 1107.42 315.424 1121.61 308.768C1142.25 299.085 1174.7 286.195 1199.52 276.895C1215 271.096 1225.24 266.692 1235.45 257.856C1240.46 253.515 1241.24 243.707 1239.92 233.53C1237.99 218.602 1214.72 216.205 1203.64 213.096C1189.51 209.132 1132.77 209.987 1092.99 207.782C1044.71 205.104 1032.28 209.987 1020.29 212.193C1017.18 212.644 1013.68 212.644 1010.55 213.083C1007.43 213.521 1004.8 214.398 999.434 217.959" stroke="var(--oncard)" stroke-width="60" stroke-linecap="round"></path><path d="M540 394.385C540 397.015 540 399.646 540 398.371C540 371.453 563.011 338.637 575.819 313.447C585.888 293.643 586.926 278.425 590.473 264.236C593.815 250.87 597.555 238.567 603.308 227.022C608.378 216.846 610.841 205.777 612.183 194.697C613.902 180.5 626.731 166.823 635.632 155.277C639.522 150.232 642.727 144.635 646.7 140.211C648.606 138.088 651.549 137.541 655.973 140.158C678.629 153.561 683.435 172.881 693.2 193.687C699.831 207.814 703.842 220.711 709.595 232.256C714.816 242.734 718.909 250.87 721.553 255.294C722.844 257.455 725.95 257.965 727.744 257.101C737.04 252.625 738.386 235.91 747.66 213.789C756.955 191.615 764.054 181.863 772.903 166.384C788.345 139.372 800.352 126.062 806.144 115.42C811.931 104.789 817.198 94.1753 824.293 83.5332C831.388 72.8912 838.456 62.289 852.605 47.236C863.372 35.7819 870.342 25.0883 880.519 16.6384C890.733 8.15773 901.325 34.7073 911.967 48.0066C927.08 66.8936 935.868 83.4402 946.51 96.2878C956.317 108.127 967.755 119.737 977.958 131.283C986.598 141.059 994.327 154.281 1001.89 168.032C1007.97 179.092 1007.67 204.661 1012.52 221.627C1015.64 232.558 1021.8 242.872 1031.1 253.514C1033.33 256.184 1035.09 258.815 1036.87 261.485C1038.65 264.156 1040.4 266.786 1047.52 269.497" stroke="var(--oncard)" stroke-width="60" stroke-linecap="round"></path><path d="M903.709 1284.18C916.782 1286.83 966.525 1285.08 983.797 1281.97C1002.62 1278.58 1022.27 1275.35 1041.38 1270.9C1060.05 1266.55 1079.03 1255.85 1089.67 1251.86C1101.01 1247.62 1126.7 1233.8 1145.47 1225.73C1155.78 1221.3 1166.72 1218.65 1177.8 1214.66C1191.06 1209.89 1201.26 1205.36 1211.9 1201.38C1223.24 1197.13 1233.15 1192.08 1243.79 1186.32C1254.43 1181.45 1262.4 1176.13 1267.7 1173.04C1270.37 1171.7 1273.01 1170.82 1278.37 1167.26" stroke="var(--oncard)" stroke-width="60" stroke-linecap="round"></path><path d="M1126.91 1244.32C1143.65 1242.54 1178.99 1253.09 1198.6 1260.25C1216.23 1266.68 1241.97 1264.67 1259.27 1267.78C1272.88 1270.23 1288.9 1272.64 1302.69 1273.99C1318.26 1275.5 1335.87 1279.71 1347.42 1286.37C1357.56 1292.21 1368.66 1296.56 1379.31 1300.11C1389.72 1303.58 1400.55 1304.53 1424.43 1305.43C1429.8 1305.64 1432.44 1305.43 1434.67 1304.12C1444.98 1298.04 1449.28 1284.23 1453.3 1272.27C1454.57 1268.47 1453.75 1263.02 1452.43 1259.88C1448.21 1249.77 1433.42 1252.29 1425.46 1253.6C1418.21 1254.8 1415.67 1262.89 1413.9 1268.19C1412.14 1273.49 1411.23 1283.22 1412.55 1294.72C1413.08 1299.37 1416.49 1300.97 1419.16 1301.87C1421.83 1302.78 1424.47 1302.78 1426.7 1301.46C1436.55 1295.66 1435.15 1271.05 1437.79 1254.99C1438.7 1249.47 1441.34 1244.34 1441.35 1239.92C1441.38 1230.39 1421.91 1234.59 1398.04 1233.25C1376.71 1232.05 1348.42 1229.28 1325.84 1227.94C1312.37 1227.14 1302.34 1218.65 1291.7 1215.1C1279.67 1211.09 1265.14 1210.68 1247.44 1209.34C1239.47 1208.02 1227.09 1207.12 1215.56 1207.56C1212.79 1207.99 1216.3 1208.87 1222.57 1209.77" stroke="var(--oncard)" stroke-width="60" stroke-linecap="round"></path><path d="M1512.85 1208.08C1508.25 1192.92 1503.63 1175.35 1501.78 1165.43C1500.17 1156.81 1498.09 1149.51 1496.47 1129.54C1495.34 1115.62 1496.23 1089.53 1496.46 1075.42C1496.76 1056.68 1499.44 1045.69 1502.91 1036.41C1505.65 1029.09 1511.88 1011.6 1518.36 998.119C1527.63 978.829 1538.19 970.89 1545.82 960.499C1549.19 955.911 1560.74 938.683 1577.81 915.387C1589.06 900.033 1597.26 890.608 1603.75 880.189C1611.87 867.167 1616.2 857.82 1619.69 850.862C1623.61 842.575 1626.85 831.941 1627.54 825.052C1627.77 820.448 1627.77 813.594 1627.77 807.917" stroke="var(--oncard)" stroke-width="60" stroke-linecap="round"></path><path d="M1631.93 733.146C1625.95 715.7 1622.24 681.61 1621.09 665.119C1619.88 647.811 1619.47 625.781 1621.76 606.728C1622.77 598.401 1623.62 591.026 1636.49 539.503C1641.23 520.522 1642.53 511.187 1645.76 501.024C1648.45 492.546 1654.53 485.793 1668.57 469.433C1676.27 460.453 1684.52 453.004 1690.52 447.93C1699.41 440.413 1709.44 435.004 1714.99 432.456C1723.5 428.544 1735.28 423.456 1741.29 421.607C1746.84 419.759 1750.99 418.374 1753.76 417.225C1755.15 416.533 1756.52 415.619 1760.7 413.293" stroke="var(--oncard)" stroke-width="60" stroke-linecap="round"></path><path d="M248.12 717.366C243.242 699.08 238.363 684.39 231.641 680.391C229.872 679.339 227.982 678.264 228.56 678.548C237.252 682.825 251.679 691.616 264.288 699.007C279.569 707.965 303.106 719.787 312.276 724.381C322.048 729.277 334.872 731.415 347.114 735.386C353.095 737.326 359.962 738.751 385.134 744.217C406.592 748.876 446.016 755.735 467.19 759.779C494.472 765.052 514.518 771.709 538.352 782.402C547.055 786.437 548.87 787.647 552.575 790.729" stroke="var(--oncard)" stroke-width="60" stroke-linecap="round"></path><path d="M556.243 798.065C574.437 784.658 608.771 776.056 621.288 774.534C645.311 771.612 658.877 772.388 694.578 766.299C705.353 765.052 710.892 764.447 725.151 763.529C736.99 763.218 758.174 763.218 776.331 765.052" stroke="var(--oncard)" stroke-width="60" stroke-linecap="round"></path><path d="M559.911 796.231C566.605 812.646 572.75 839.552 574.272 851.216C575.865 863.422 578.252 878.104 586.771 908.292C591.7 925.758 602.058 933.126 618.84 949.926C628.45 959.546 645.415 960.05 670.762 959.178C700.228 958.166 705.976 939.325 717.292 931.979C726.778 925.822 734.111 920.984 741.153 915.161C749.501 908.259 756.743 895.931 760.118 887.962C763.585 879.774 766.537 871.464 768.683 856.856C770.205 810.94 773.873 799.936 774.799 784.979C775.102 781.577 775.707 779.761 776.331 777.89" stroke="var(--oncard)" stroke-width="60" stroke-linecap="round"></path><path d="M803.842 763.218C802.632 762.007 801.421 760.797 802.008 760.173C807.094 754.77 840.854 751.663 874.674 742.153C886.944 738.703 896.719 736.33 911.08 732.662C920.961 730.138 929.732 730.205 937.701 728.38C941.36 727.16 945.047 725.931 948.706 724.712C950.549 724.097 952.365 723.492 954.236 722.868" stroke="var(--oncard)" stroke-width="60" stroke-linecap="round"></path><path d="M952.401 732.039C952.401 733.194 954.822 762.447 960.939 779.073C964.715 789.338 973.163 803.494 978.363 814.223C986.659 831.343 995.759 848.722 1003.43 860.387C1009.68 869.904 1016.56 877.517 1024.21 882.111C1035.09 888.647 1051.4 881.845 1058.75 878.47C1066.34 874.983 1073.41 870.841 1081.06 864.421C1089.19 857.599 1097.26 852.5 1105.82 844.256C1112.62 837.71 1115.01 829.281 1117.46 820.413C1119.75 812.106 1122.35 803.604 1122.67 782.255C1122.85 769.873 1119.92 761.42 1117.48 754.075C1114.96 746.528 1109.54 739.412 1106.17 730.544C1103.1 722.478 1098.54 715.569 1093.64 708.223C1092.41 706.38 1091.2 704.564 1089.67 703.629C1088.14 702.694 1086.32 702.694 1084.45 702.694" stroke="var(--oncard)" stroke-width="60" stroke-linecap="round"></path><path d="M959.738 719.2C956.711 719.2 953.685 719.2 953.034 718.898C948.421 716.753 988.202 708.893 1008.92 704.225C1018.86 701.984 1031.23 701.483 1044.05 699.952C1051.37 697.228 1061.77 695.357 1073.06 694.449C1077.7 693.542 1080.13 691.726 1086.29 686.187" stroke="var(--oncard)" stroke-width="60" stroke-linecap="round"></path><path d="M1100.96 677.017C1099.14 678.832 1097.33 680.648 1097.3 680.978C1095.6 701.354 1146.12 639.785 1157.78 631.495C1162.66 628.744 1167.57 625.681 1172.15 622.022C1174.3 620.179 1176.12 618.363 1179.83 612.824" stroke="var(--oncard)" stroke-width="60" stroke-linecap="round"></path><path d="M640.61 790.729C640.61 794.36 640.61 797.992 636.373 809.244C632.137 820.496 623.663 839.258 618.996 849.832C614.328 860.405 613.723 862.221 613.099 864.091" stroke="var(--oncard)" stroke-width="60" stroke-linecap="round"></path><path d="M691.964 798.065C688.333 805.328 684.701 812.591 676.475 831.161C668.25 849.731 655.54 879.387 648.689 895.876C641.839 912.364 641.234 914.785 640.61 919.113" stroke="var(--oncard)" stroke-width="60" stroke-linecap="round"></path><path d="M741.484 810.903C739.668 815.14 737.852 819.377 729.654 837.296C721.456 855.214 706.93 886.687 698.539 905.926C690.148 925.166 688.333 931.218 686.462 937.454" stroke="var(--oncard)" stroke-width="60" stroke-linecap="round"></path><path d="M1005.59 721.034C1006.8 731.929 1002.58 751.461 995.245 773.461C992.751 781.54 992.751 783.356 992.145 785.502C991.54 787.648 990.33 790.069 989.083 796.231" stroke="var(--oncard)" stroke-width="60" stroke-linecap="round"></path><path d="M1047.77 733.873C1052.61 747.188 1047.24 773.415 1035.02 804.576C1030.66 816.369 1030.06 820 1029.74 823.082C1029.43 826.163 1029.43 828.584 1031.27 831.078" stroke="var(--oncard)" stroke-width="60" stroke-linecap="round"></path><path d="M1088.12 779.724C1084.49 788.198 1074.15 815.562 1061.01 851.922C1055.73 868.31 1054.5 873.243 1053.59 877.205C1053.27 879.351 1053.27 881.772 1053.27 884.266" stroke="var(--oncard)" stroke-width="60" stroke-linecap="round"></path></svg> <h1 class="text-2xl">Give me you info i only need localStorage as cookies (site theme)</h1> <div class="flex gap-2"><button class="bg-pri text-onpri px-3 py-1 rounded">Accept</button> <button class="bg-err text-onerr px-3 py-1 rounded">Reject</button></div></div>');function ZN(n,t){tn(t,!1);const e=r3();let i=xe(!1);zn(()=>{const h=localStorage.getItem("cookie_consent");Ft(i,!h)});function s(){localStorage.setItem("cookie_consent","accepted"),Ft(i,!1),e("consent",{accepted:!0})}function r(){localStorage.setItem("cookie_consent","rejected"),Ft(i,!1),e("consent",{accepted:!1})}vn();var o=Bn(),l=xn(o);{var c=h=>{var f=XN(),d=St(ut(f),4),p=ut(d),g=St(p,2);Hs("click",p,s),Hs("click",g,r),Rt(h,f)};gn(l,h=>{U(i)&&h(c)})}Rt(n,o),en()}var YN=ce('<div class="bg-bg text-onpri h-screen flex flex-col"><!> <main class="flex-1 overflow-auto text-onbg"><!></main> <!></div>');function qN(n,t){tn(t,!1);let e=xe(xa.Blue);function i(f){Ft(e,f),document.documentElement.className=f,localStorage.getItem("cookie_consent")=="accepted"&&localStorage.setItem("theme",f),nv(),$O()}zn(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.register("/ChaboStats/sw.js").then(()=>console.log("â Service worker registered")).catch(d=>console.error("SW registration failed",d));const f=localStorage.getItem("theme");f&&Object.values(xa).includes(f)&&Ft(e,f),document.documentElement.className=U(e),nv(U(e)),localStorage.getItem("cookie_consent")});function s(f){console.log("Cookie consent:",f.detail.accepted)}vn();var r=YN(),o=ut(r);jN(o,{setTheme:i,get theme(){return U(e)}});var l=St(o,2),c=ut(l);T5(c,{get routes(){return zN}});var h=St(l,2);ZN(h,{$$events:{consent:s}}),Rt(n,r),en()}i5(qN,{target:document.getElementById("app")});
